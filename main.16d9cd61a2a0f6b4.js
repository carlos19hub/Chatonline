(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(en,ut,H)=>{"use strict";H.d(ut,{nm:()=>Q});var u=H(6351);H(5e3),H(5867);var ot=H(5861),Ve=H(9681),rt=H(4859),_t=H(2090),St=H(1877);const qe=new Map,pe={activated:!1,tokenObservers:[]},Be={initialized:!1,enabled:!1};function ve(He){return qe.get(He)||pe}function De(He,We){qe.set(He,We)}function Je(){return Be}class nt{constructor(We,ct,Ot,Lt,mn){if(this.operation=We,this.retryPolicy=ct,this.getWaitDuration=Ot,this.lowerBound=Lt,this.upperBound=mn,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>mn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(We){var ct=this;return(0,ot.Z)(function*(){ct.stop();try{ct.pending=new _t.BH,yield function at(He){return new Promise(We=>{setTimeout(We,He)})}(ct.getNextRun(We)),ct.pending.resolve(),yield ct.pending.promise,ct.pending=new _t.BH,yield ct.operation(),ct.pending.resolve(),yield ct.pending.promise,ct.process(!0).catch(()=>{})}catch(Ot){ct.retryPolicy(Ot)?ct.process(!1).catch(()=>{}):ct.stop()}})()}getNextRun(We){if(We)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ct=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ct}}}const Xe=new _t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ft(He){if(!ve(He).activated)throw Xe.create("use-before-activation",{appName:He.name})}function un(He,We){return rn.apply(this,arguments)}function rn(){return(rn=(0,ot.Z)(function*({url:He,body:We},ct){const Ot={"Content-Type":"application/json"},Lt=ct.getImmediate({optional:!0});if(Lt){const Bs=yield Lt.getHeartbeatsHeader();Bs&&(Ot["X-Firebase-Client"]=Bs)}const mn={method:"POST",body:JSON.stringify(We),headers:Ot};let Ar,xr;try{Ar=yield fetch(He,mn)}catch(Bs){throw Xe.create("fetch-network-error",{originalErrorMessage:Bs.message})}if(200!==Ar.status)throw Xe.create("fetch-status-error",{httpStatus:Ar.status});try{xr=yield Ar.json()}catch(Bs){throw Xe.create("fetch-parse-error",{originalErrorMessage:Bs.message})}const Hn=xr.ttl.match(/^([\d.]+)(s)$/);if(!Hn||!Hn[2]||isNaN(Number(Hn[1])))throw Xe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${xr.ttl}`});const ps=1e3*Number(Hn[1]),Ri=Date.now();return{token:xr.attestationToken,expireTimeMillis:Ri+ps,issuedAtTimeMillis:Ri}})).apply(this,arguments)}function Zn(He,We){const{projectId:ct,appId:Ot,apiKey:Lt}=He.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${ct}/apps/${Ot}:exchangeDebugToken?key=${Lt}`,body:{debug_token:We}}}const rr="firebase-app-check-store";let Jn=null;function cr(){return Jn||(Jn=new Promise((He,We)=>{try{const ct=indexedDB.open("firebase-app-check-database",1);ct.onsuccess=Ot=>{He(Ot.target.result)},ct.onerror=Ot=>{var Lt;We(Xe.create("storage-open",{originalErrorMessage:null===(Lt=Ot.target.error)||void 0===Lt?void 0:Lt.message}))},ct.onupgradeneeded=Ot=>{0===Ot.oldVersion&&Ot.target.result.createObjectStore(rr,{keyPath:"compositeKey"})}}catch(ct){We(Xe.create("storage-open",{originalErrorMessage:ct.message}))}}),Jn)}function kn(){return(kn=(0,ot.Z)(function*(He,We){const Ot=(yield cr()).transaction(rr,"readwrite"),mn=Ot.objectStore(rr).put({compositeKey:He,value:We});return new Promise((Ar,xr)=>{mn.onsuccess=Hn=>{Ar()},Ot.onerror=Hn=>{var ps;xr(Xe.create("storage-set",{originalErrorMessage:null===(ps=Hn.target.error)||void 0===ps?void 0:ps.message}))}})})).apply(this,arguments)}const Ai=new St.Yd("@firebase/app-check");function si(He,We){return(0,_t.hl)()?function on(He,We){return function ei(He,We){return kn.apply(this,arguments)}(function Gr(He){return`${He.options.appId}-${He.name}`}(He),We)}(He,We).catch(ct=>{Ai.warn(`Failed to write token to IndexedDB. Error: ${ct}`)}):Promise.resolve()}function ci(){return Je().enabled}function ir(){return sn.apply(this,arguments)}function sn(){return(sn=(0,ot.Z)(function*(){const He=Je();if(He.enabled&&He.token)return He.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const tn={error:"UNKNOWN_ERROR"};function yn(He){return _t.US.encodeString(JSON.stringify(He),!1)}function _n(He){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ot.Z)(function*(He,We=!1){const ct=He.app;ft(ct);const Ot=ve(ct);let mn,Lt=Ot.token;if(!Lt){const Hn=yield Ot.cachedTokenPromise;Hn&&qt(Hn)&&(Lt=Hn)}if(!We&&Lt&&qt(Lt))return{token:Lt.token};let xr,Ar=!1;if(ci()){Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=un(Zn(ct,yield ir()),He.heartbeatServiceProvider).then(ps=>(Ot.exchangeTokenPromise=void 0,ps)),Ar=!0);const Hn=yield Ot.exchangeTokenPromise;return yield si(ct,Hn),De(ct,Object.assign(Object.assign({},Ot),{token:Hn})),{token:Hn.token}}try{Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Ot.provider.getToken().then(Hn=>(Ot.exchangeTokenPromise=void 0,Hn)),Ar=!0),Lt=yield Ot.exchangeTokenPromise}catch(Hn){"appCheck/throttled"===Hn.code?Ai.warn(Hn.message):Ai.error(Hn),mn=Hn}return Lt?(xr={token:Lt.token},De(ct,Object.assign(Object.assign({},Ot),{token:Lt})),yield si(ct,Lt)):xr=Cn(mn),Ar&&lt(ct,xr),xr})).apply(this,arguments)}function Ie(He,We){const ct=ve(He),Ot=ct.tokenObservers.filter(Lt=>Lt.next!==We);0===Ot.length&&ct.tokenRefresher&&ct.tokenRefresher.isRunning()&&ct.tokenRefresher.stop(),De(He,Object.assign(Object.assign({},ct),{tokenObservers:Ot}))}function je(He){const{app:We}=He,ct=ve(We);let Ot=ct.tokenRefresher;Ot||(Ot=function vt(He){const{app:We}=He;return new nt((0,ot.Z)(function*(){let Ot;if(Ot=ve(We).token?yield _n(He,!0):yield _n(He),Ot.error)throw Ot.error}),()=>!0,()=>{const ct=ve(We);if(ct.token){let Ot=ct.token.issuedAtTimeMillis+.5*(ct.token.expireTimeMillis-ct.token.issuedAtTimeMillis)+3e5;return Ot=Math.min(Ot,ct.token.expireTimeMillis-3e5),Math.max(0,Ot-Date.now())}return 0},3e4,96e4)}(He),De(We,Object.assign(Object.assign({},ct),{tokenRefresher:Ot}))),!Ot.isRunning()&&ct.isTokenAutoRefreshEnabled&&Ot.start()}function lt(He,We){const ct=ve(He).tokenObservers;for(const Ot of ct)try{"EXTERNAL"===Ot.type&&null!=We.error?Ot.error(We.error):Ot.next(We)}catch(Lt){}}function qt(He){return He.expireTimeMillis-Date.now()>0}function Cn(He){return{token:yn(tn),error:He}}class Qn{constructor(We,ct){this.app=We,this.heartbeatServiceProvider=ct}_delete(){const{tokenObservers:We}=ve(this.app);for(const ct of We)Ie(this.app,ct.next);return Promise.resolve()}}const ni="app-check-internal";!function Xr(){(0,Ve._registerComponent)(new rt.wA("app-check",He=>function Qr(He,We){return new Qn(He,We)}(He.getProvider("app").getImmediate(),He.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((He,We,ct)=>{He.getProvider(ni).initialize()})),(0,Ve._registerComponent)(new rt.wA(ni,He=>function Bn(He){return{getToken:We=>_n(He,We),addTokenListener:We=>function Le(He,We,ct,Ot){const{app:Lt}=He,mn=ve(Lt),Ar={next:ct,error:Ot,type:We};if(De(Lt,Object.assign(Object.assign({},mn),{tokenObservers:[...mn.tokenObservers,Ar]})),mn.token&&qt(mn.token)){const xr=mn.token;Promise.resolve().then(()=>{ct({token:xr.token}),je(He)}).catch(()=>{})}mn.cachedTokenPromise.then(()=>je(He))}(He,"INTERNAL",We),removeTokenListener:We=>Ie(He.app,We)}}(He.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ve.registerVersion)("@firebase/app-check","0.5.5")}();class Q{constructor(){return(0,u.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(en,ut,H)=>{"use strict";H.d(ut,{zQ:()=>pt,ww:()=>st,rT:()=>Je,f7:()=>jt,L6:()=>ve,_Q:()=>De,lh:()=>Ze,Qv:()=>Be,nw:()=>Jt});var u=H(5e3),se=H(8929),Z=H(1086),ke=H(2916),Te=H(5254),ae=H(6787),we=H(341),be=H(2654),me=H(2102),ce=H(5279),ge=H(5283);class te extends se.xQ{constructor(nt=Number.POSITIVE_INFINITY,at=Number.POSITIVE_INFINITY,Oe){super(),this.scheduler=Oe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=nt<1?1:nt,this._windowTime=at<1?1:at,at===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(nt){if(!this.isStopped){const at=this._events;at.push(nt),at.length>this._bufferSize&&at.shift()}super.next(nt)}nextTimeWindow(nt){this.isStopped||(this._events.push(new de(this._getNow(),nt)),this._trimBufferThenGetEvents()),super.next(nt)}_subscribe(nt){const at=this._infiniteTimeWindow,Oe=at?this._events:this._trimBufferThenGetEvents(),Xe=this.scheduler,Dt=Oe.length;let ft;if(this.closed)throw new ce.N;if(this.isStopped||this.hasError?ft=be.w.EMPTY:(this.observers.push(nt),ft=new ge.W(this,nt)),Xe&&nt.add(nt=new me.ht(nt,Xe)),at)for(let Kt=0;Kt<Dt&&!nt.closed;Kt++)nt.next(Oe[Kt]);else for(let Kt=0;Kt<Dt&&!nt.closed;Kt++)nt.next(Oe[Kt].value);return this.hasError?nt.error(this.thrownError):this.isStopped&&nt.complete(),ft}_getNow(){return(this.scheduler||we.c).now()}_trimBufferThenGetEvents(){const nt=this._getNow(),at=this._bufferSize,Oe=this._windowTime,Xe=this._events,Dt=Xe.length;let ft=0;for(;ft<Dt&&!(nt-Xe[ft].time<Oe);)ft++;return Dt>at&&(ft=Math.max(ft,Dt-at)),ft>0&&Xe.splice(0,ft),Xe}}class de{constructor(nt,at){this.time=nt,this.value=at}}function Ue(Qe,nt,at){let Oe;return Oe=Qe&&"object"==typeof Qe?Qe:{bufferSize:Qe,windowTime:nt,refCount:!1,scheduler:at},Xe=>Xe.lift(function Pe({bufferSize:Qe=Number.POSITIVE_INFINITY,windowTime:nt=Number.POSITIVE_INFINITY,refCount:at,scheduler:Oe}){let Xe,ft,Dt=0,Kt=!1,gn=!1;return function(un){let rn;Dt++,!Xe||Kt?(Kt=!1,Xe=new te(Qe,nt,Oe),rn=Xe.subscribe(this),ft=un.subscribe({next(fr){Xe.next(fr)},error(fr){Kt=!0,Xe.error(fr)},complete(){gn=!0,ft=void 0,Xe.complete()}}),gn&&(ft=void 0)):rn=Xe.subscribe(this),this.add(()=>{Dt--,rn.unsubscribe(),rn=void 0,ft&&!gn&&at&&0===Dt&&(ft.unsubscribe(),ft=void 0,Xe=void 0)})}}(Oe))}var ye=H(7545);function Ne(Qe,nt){return nt?(0,ye.w)(()=>Qe,nt):(0,ye.w)(()=>Qe)}var Fe=H(4850),ht=H(7224),_e=H(8915),ot=H(2198),Ve=H(6351),rt=H(2011),_t=H(9808),St=H(440),qe=H(127);const Be=new u.OlP("angularfire2.auth.use-emulator"),ve=new u.OlP("angularfire2.auth.settings"),De=new u.OlP("angularfire2.auth.tenant-id"),Je=new u.OlP("angularfire2.auth.langugage-code"),Ze=new u.OlP("angularfire2.auth.use-device-language"),jt=new u.OlP("angularfire.auth.persistence"),Jt=(Qe,nt,at,Oe,Xe,Dt,ft,Kt)=>(0,rt.cc)(`${Qe.name}.auth`,"AngularFireAuth",Qe.name,()=>{const gn=nt.runOutsideAngular(()=>Qe.auth());if(at&&gn.useEmulator(...at),Oe&&(gn.tenantId=Oe),gn.languageCode=Xe,Dt&&gn.useDeviceLanguage(),ft)for(const[xn,un]of Object.entries(ft))gn.settings[xn]=un;return Kt&&gn.setPersistence(Kt),gn},[at,Oe,Xe,Dt,ft,Kt]);let pt=(()=>{class Qe{constructor(at,Oe,Xe,Dt,ft,Kt,gn,xn,un,rn,fr,Dr){const Zn=new se.xQ,Yn=(0,Z.of)(void 0).pipe((0,me.QV)(ft.outsideAngular),(0,ye.w)(()=>Dt.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,4087)))),(0,Fe.U)(()=>(0,rt.on)(at,Dt,Oe)),(0,Fe.U)(Ht=>Jt(Ht,Dt,Kt,xn,un,rn,gn,fr)),Ue({bufferSize:1,refCount:!1}));if((0,_t.PM)(Xe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{Yn.pipe((0,ht.P)()).subscribe();const rr=Yn.pipe((0,ye.w)(cr=>cr.getRedirectResult().then(Hr=>Hr,()=>null)),Ve.iC,Ue({bufferSize:1,refCount:!1})),qr=Yn.pipe((0,ye.w)(cr=>new ke.y(Hr=>({unsubscribe:Dt.runOutsideAngular(()=>cr.onAuthStateChanged(on=>Hr.next(on),on=>Hr.error(on),()=>Hr.complete()))})))),Jn=Yn.pipe((0,ye.w)(cr=>new ke.y(Hr=>({unsubscribe:Dt.runOutsideAngular(()=>cr.onIdTokenChanged(on=>Hr.next(on),on=>Hr.error(on),()=>Hr.complete()))}))));this.authState=rr.pipe(Ne(qr),(0,_e.R)(ft.outsideAngular),(0,me.QV)(ft.insideAngular)),this.user=rr.pipe(Ne(Jn),(0,_e.R)(ft.outsideAngular),(0,me.QV)(ft.insideAngular)),this.idToken=this.user.pipe((0,ye.w)(cr=>cr?(0,Te.D)(cr.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,ye.w)(cr=>cr?(0,Te.D)(cr.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,ae.T)(rr,Zn,this.authState.pipe((0,ot.h)(cr=>!cr))).pipe((0,Fe.U)(cr=>(null==cr?void 0:cr.user)?cr:null),(0,_e.R)(ft.outsideAngular),(0,me.QV)(ft.insideAngular))}return(0,rt.pX)(this,Yn,Dt,{spy:{apply:(Ht,rr,qr)=>{(Ht.startsWith("signIn")||Ht.startsWith("createUser"))&&qr.then(Jn=>Zn.next(Jn))}}})}}return Qe.\u0275fac=function(at){return new(at||Qe)(u.LFG(rt.Dh),u.LFG(rt.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Ve.HU),u.LFG(Be,8),u.LFG(ve,8),u.LFG(De,8),u.LFG(Je,8),u.LFG(Ze,8),u.LFG(jt,8),u.LFG(St.nm,8))},Qe.\u0275prov=u.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"any"}),Qe})(),st=(()=>{class Qe{constructor(){qe.Z.registerVersion("angularfire",Ve.q4.full,"auth-compat")}}return Qe.\u0275fac=function(at){return new(at||Qe)},Qe.\u0275mod=u.oAB({type:Qe}),Qe.\u0275inj=u.cJS({providers:[pt]}),Qe})()},2796:(en,ut,H)=>{"use strict";H.d(ut,{ST:()=>Nm,yb:()=>Zy});var u=H(5e3),se=H(353),Z=H(2916),ke=H(5254),Te=H(1086),ae=H(6351),we=H(3489);function be(){return i=>i.lift(new me)}class me{call(e,t){return t.subscribe(new ce(e))}}class ce extends we.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var pe,ge=H(1059),te=H(4850),de=H(2014),Ue=H(5778),Pe=H(2198),ye=H(2011),Ne=H(9808),ht=(H(4087),H(3942)),_e=H(5861),ot=H(9681),Ve=H(4859),rt=H(1877),_t=H(2090),St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qe={},Be=Be||{},ve=St||self;function De(){}function Je(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Jt="closure_uid_"+(1e9*Math.random()>>>0),pt=0;function st(i,e,t){return i.call.apply(i.bind,arguments)}function Qe(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function nt(i,e,t){return(nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?st:Qe).apply(null,arguments)}function at(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Oe(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,d,_){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[d].apply(o,C)}}function Xe(){this.s=this.s,this.o=this.o}var ft={};Xe.prototype.s=!1,Xe.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function jt(i){return Object.prototype.hasOwnProperty.call(i,Jt)&&i[Jt]||(i[Jt]=++pt)}(this);delete ft[i]}},Xe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},gn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,d="string"==typeof i?i.split(""):i;for(let _=0;_<o;_++)_ in d&&e.call(t,d[_],_,i)};function un(i){return Array.prototype.concat.apply([],arguments)}function rn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function fr(i){return/^[\s\xa0]*$/.test(i)}var Ht,Dr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Zn(i,e){return-1!=i.indexOf(e)}function Yn(i,e){return i<e?-1:i>e?1:0}e:{var rr=ve.navigator;if(rr){var qr=rr.userAgent;if(qr){Ht=qr;break e}}Ht=""}function Jn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function cr(i){const e={};for(const t in i)e[t]=i[t];return e}var Hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function on(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let _=0;_<Hr.length;_++)t=Hr[_],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Zr(i){return Zr[" "](i),i}Zr[" "]=De;var Pn,i,ei=Zn(Ht,"Opera"),kn=Zn(Ht,"Trident")||Zn(Ht,"MSIE"),dn=Zn(Ht,"Edge"),Sn=dn||kn,Gr=Zn(Ht,"Gecko")&&!(Zn(Ht.toLowerCase(),"webkit")&&!Zn(Ht,"Edge"))&&!(Zn(Ht,"Trident")||Zn(Ht,"MSIE"))&&!Zn(Ht,"Edge"),Ai=Zn(Ht.toLowerCase(),"webkit")&&!Zn(Ht,"Edge");function Vn(){var i=ve.document;return i?i.documentMode:void 0}e:{var si="",Lr=(i=Ht,Gr?/rv:([^\);]+)(\)|;)/.exec(i):dn?/Edge\/([\d\.]+)/.exec(i):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ai?/WebKit\/(\S+)/.exec(i):ei?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Lr&&(si=Lr?Lr[1]:""),kn){var In=Vn();if(null!=In&&In>parseFloat(si)){Pn=String(In);break e}}Pn=si}var ci={};var tn=ve.document&&kn&&(Vn()||parseInt(Pn,10))||void 0,yn=function(){if(!ve.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ve.addEventListener("test",De,e),ve.removeEventListener("test",De,e)}catch(t){}return i}();function _n(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Rn(i,e){if(_n.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Gr){e:{try{Zr(e.nodeName);var d=!0;break e}catch(_){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Le[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rn.Z.h.call(this)}}_n.prototype.h=function(){this.defaultPrevented=!0},Oe(Rn,_n);var Le={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),je=0;function vt(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=d,this.key=++je,this.ca=this.fa=!1}function lt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function qt(i){this.src=i,this.g={},this.h=0}function Cn(i,e){var t=e.type;if(t in i.g){var _,o=i.g[t],d=Kt(o,e);(_=0<=d)&&Array.prototype.splice.call(o,d,1),_&&(lt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Qn(i,e,t,o){for(var d=0;d<i.length;++d){var _=i[d];if(!_.ca&&_.listener==e&&_.capture==!!t&&_.ia==o)return d}return-1}qt.prototype.add=function(i,e,t,o,d){var _=i.toString();(i=this.g[_])||(i=this.g[_]=[],this.h++);var C=Qn(i,e,o,d);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new vt(e,this.src,_,!!o,d)).fa=t,i.push(e)),e};var Qr="closure_lm_"+(1e6*Math.random()|0),Bn={};function _r(i,e,t,o,d){if(o&&o.once)return Rr(i,e,t,o,d);if(Array.isArray(e)){for(var _=0;_<e.length;_++)_r(i,e[_],t,o,d);return null}return t=$r(t),i&&i[Ie]?i.N(e,t,Ze(o)?!!o.capture:!!o,d):jn(i,e,t,!1,o,d)}function jn(i,e,t,o,d,_){if(!e)throw Error("Invalid event type");var C=Ze(d)?!!d.capture:!!d,R=Or(i);if(R||(i[Qr]=R=new qt(i)),(t=R.add(e,t,o,C,_)).proxy)return t;if(o=function vr(){var e=Sr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)yn||(d=C),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(as(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Rr(i,e,t,o,d){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Rr(i,e[_],t,o,d);return null}return t=$r(t),i&&i[Ie]?i.O(e,t,Ze(o)?!!o.capture:!!o,d):jn(i,e,t,!0,o,d)}function Fn(i,e,t,o,d){if(Array.isArray(e))for(var _=0;_<e.length;_++)Fn(i,e[_],t,o,d);else o=Ze(o)?!!o.capture:!!o,t=$r(t),i&&i[Ie]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Qn(_=i.g[e],t,o,d))&&(lt(_[t]),Array.prototype.splice.call(_,t,1),0==_.length&&(delete i.g[e],i.h--))):i&&(i=Or(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Qn(e,t,o,d)),(t=-1<i?e[i]:null)&&Li(t))}function Li(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ie])Cn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(as(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Or(e))?(Cn(t,i),0==t.h&&(t.src=null,e[Qr]=null)):lt(i)}}}function as(i){return i in Bn?Bn[i]:Bn[i]="on"+i}function Sr(i,e){if(i.ca)i=!0;else{e=new Rn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Li(i),i=t.call(o,e)}return i}function Or(i){return(i=i[Qr])instanceof qt?i:null}var _i="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(i){return"function"==typeof i?i:(i[_i]||(i[_i]=function(e){return i.handleEvent(e)}),i[_i])}function At(){Xe.call(this),this.i=new qt(this),this.P=this,this.I=null}function vn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new _n(e,i);else if(e instanceof _n)e.target=e.target||i;else{var d=e;on(e=new _n(o,i),d)}if(d=!0,t)for(var _=t.length-1;0<=_;_--){var C=e.g=t[_];d=sr(C,o,!0,e)&&d}if(d=sr(C=e.g=i,o,!0,e)&&d,d=sr(C,o,!1,e)&&d,t)for(_=0;_<t.length;_++)d=sr(C=e.g=t[_],o,!1,e)&&d}function sr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ca&&C.capture==t){var R=C.listener,K=C.ia||C.src;C.fa&&Cn(i.i,C),d=!1!==R.call(K,o)&&d}}return d&&!o.defaultPrevented}Oe(At,Xe),At.prototype[Ie]=!0,At.prototype.removeEventListener=function(i,e,t,o){Fn(this,i,e,t,o)},At.prototype.M=function(){if(At.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)lt(t[o]);delete i.g[e],i.h--}}this.I=null},At.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},At.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var hr=ve.JSON.stringify;function ti(){var i=xi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ln,fi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new dr,i=>i.reset());class dr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ur(i){ve.setTimeout(()=>{throw i},0)}function Vi(i,e){Ln||function qi(){var i=ve.Promise.resolve(void 0);Ln=function(){i.then(ni)}}(),Yi||(Ln(),Yi=!0),xi.add(i,e)}var Yi=!1,xi=new class Yr{constructor(){this.h=this.g=null}add(e,t){const o=fi.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ni(){for(var i;i=ti();){try{i.h.call(i.g)}catch(t){Ur(t)}var e=fi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Yi=!1}function Xr(i,e){At.call(this),this.h=i||1,this.g=e||ve,this.j=nt(this.kb,this),this.l=Date.now()}function Mi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function di(i,e,t){if("function"==typeof i)t&&(i=nt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=nt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ve.setTimeout(i,e||0)}function Q(i){i.g=di(()=>{i.g=null,i.i&&(i.i=!1,Q(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Oe(Xr,At),(pe=Xr.prototype).da=!1,pe.S=null,pe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vn(this,"tick"),this.da&&(Mi(this),this.start()))}},pe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.M=function(){Xr.Z.M.call(this),Mi(this),delete this.g};class fe extends Xe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Q(this)}M(){super.M(),this.g&&(ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O(i){Xe.call(this),this.h=i,this.g={}}Oe(O,Xe);var Se=[];function Ge(i,e,t,o){Array.isArray(t)||(t&&(Se[0]=t.toString()),t=Se);for(var d=0;d<t.length;d++){var _=_r(e,t[d],o||i.handleEvent,!1,i.h||i);if(!_)break;i.g[_.key]=_}}function et(i){Jn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Li(e)},i),i.g={}}function Et(){this.g=!0}function Mt(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function En(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var _=d[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<d.length;C++)d[C]=""}}}return hr(t)}catch(R){return e}}(i,t)+(o?" "+o:"")})}O.prototype.M=function(){O.Z.M.call(this),et(this)},O.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Et.prototype.Aa=function(){this.g=!1},Et.prototype.info=function(){};var Mn={},$n=null;function gi(){return $n=$n||new At}function Ki(i){_n.call(this,Mn.Ma,i)}function He(i){const e=gi();vn(e,new Ki(e,i))}function We(i,e){_n.call(this,Mn.STAT_EVENT,i),this.stat=e}function ct(i){const e=gi();vn(e,new We(e,i))}function Ot(i,e){_n.call(this,Mn.Na,i),this.size=e}function Lt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ve.setTimeout(function(){i()},e)}Mn.Ma="serverreachability",Oe(Ki,_n),Mn.STAT_EVENT="statevent",Oe(We,_n),Mn.Na="timingevent",Oe(Ot,_n);var mn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ar={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xr(){}function ps(){}xr.prototype.h=null;var wi,Ri={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bs(){_n.call(this,"d")}function Zi(){_n.call(this,"c")}function ls(){}function to(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new O(this),this.P=Bi,this.W=new Xr(i=Sn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}Oe(Bs,_n),Oe(Zi,_n),Oe(ls,xr),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},wi=new ls;var Bi=45e3,ms={},Kr={};function $s(i,e,t){i.K=1,i.v=Ft($(e)),i.s=t,i.U=!0,yo(i,null)}function yo(i,e){i.F=Date.now(),Hi(i),i.A=$(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),N(t.h,"t",o),i.C=0,t=i.l.H,i.h=new gs,i.g=Ml(i.l,t?e:null,!i.s),0<i.O&&(i.L=new fe(nt(i.Ia,i,i.g),i.O)),Ge(i.V,i.g,"readystatechange",i.gb),e=i.H?cr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),He(1),function xt(i,e,t,o,d,_){i.info(function(){if(i.g)if(_)for(var C="",R=_.split("&"),K=0;K<R.length;K++){var J=R[K].split("=");if(1<J.length){var Re=J[0];J=J[1];var Ye=Re.split("_");C=2<=Ye.length&&"type"==Ye[1]?C+(Re+"=")+J+"&":C+(Re+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ko(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function zs(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=Ns(i,t),d==Kr){4==e&&(i.o=4,ct(14),o=!1),Mt(i.j,i.m,null,"[Incomplete Response]");break}if(d==ms){i.o=4,ct(15),Mt(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Mt(i.j,i.m,d,null),us(i,d)}Ko(i)&&d!=Kr&&d!=ms&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ct(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ri(e),e.L=!0,ct(11))):(Mt(i.j,i.m,t,"[Invalid Chunked Response]"),mi(i),Pr(i))}function Ns(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Kr:(t=Number(e.substring(t,o)),isNaN(t)?ms:(o+=1)+t>e.length?Kr:(e=e.substr(o,t),i.C=o+t,e))}function Hi(i){i.Y=Date.now()+i.P,_o(i,i.P)}function _o(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Lt(nt(i.eb,i),e)}function Oi(i){i.B&&(ve.clearTimeout(i.B),i.B=null)}function Pr(i){0==i.l.G||i.I||Ao(i.l,i)}function mi(i){Oi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Mi(i.W),et(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function us(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Zt(t.i,i)))if(t.I=i.N,!i.J&&Zt(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(J){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=Lt(nt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;xl(t),or(t)}Vo(t),ct(18)}if(1>=dt(t.i)&&t.ka){try{t.ka()}catch(J){}t.ka=void 0}}else Ys(t,11)}else if((i.J||t.g==i)&&xl(t),!fr(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let J=d[e];if(t.U=J[0],J=J[1],2==t.G)if("c"==J[0]){t.J=J[1],t.la=J[2];const Re=J[3];null!=Re&&(t.ma=Re,t.h.info("VER="+t.ma));const Ye=J[4];null!=Ye&&(t.za=Ye,t.h.info("SVER="+t.za));const Ct=J[5];null!=Ct&&"number"==typeof Ct&&0<Ct&&(t.K=o=1.5*Ct,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const Ut=i.g;if(Ut){const Xt=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xt){var _=o.i;!_.g&&(Zn(Xt,"spdy")||Zn(Xt,"quic")||Zn(Xt,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(bn(_,_.h),_.h=null))}if(o.D){const Un=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Un&&(o.sa=Un,mt(o.F,o.D,Un))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((o=t).oa=Ci(o,o.H?o.la:null,o.W),C.J){Nn(o.i,C);var R=C,K=o.K;K&&R.setTimeout(K),R.B&&(Oi(R),Hi(R)),o.g=C}else Jo(o);0<t.l.length&&Ra(t)}else"stop"!=J[0]&&"close"!=J[0]||Ys(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?Ys(t,7):qs(t):"noop"!=J[0]&&t.j&&t.j.wa(J),t.A=0)}He(4)}catch(J){}}function cs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Je(i)||"string"==typeof i)gn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Je(i)||"string"==typeof i){t=[];for(var o=i.length,d=0;d<o;d++)t.push(d)}else for(d in t=[],o=0,i)t[o++]=d;o=function vo(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Je(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length;for(var _=0;_<d;_++)e.call(void 0,o[_],t&&t[_],i)}}function ys(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof ys)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Us(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Ii(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)Ii(d,o=i.g[e])||(i.g[t++]=o,d[o]=1),e++;i.g.length=t}}function Ii(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(pe=to.prototype).setTimeout=function(i){this.P=i},pe.gb=function(i){i=i.target;const e=this.L;e&&3==co(i)?e.l():this.Ia(i)},pe.Ia=function(i){try{if(i==this.g)e:{const Re=co(this.g);var e=this.g.Da();const Ye=this.g.ba();if(!(3>Re)&&(3!=Re||Sn||this.g&&(this.h.h||this.g.ga()||Ma(this.g)))){this.I||4!=Re||7==e||He(8==e||0>=Ye?3:2),Oi(this);var t=this.g.ba();this.N=t;t:if(Ko(this)){var o=Ma(this.g);i="";var d=o.length,_=4==co(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){mi(this),Pr(this);var C="";break t}this.h.i=new ve.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:_&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function Nt(i,e,t,o,d,_,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.X,Re,t),this.i){if(this.$&&!this.J){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fr(R)){var J=R;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,ct(12),mi(this),Pr(this);break e}Mt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,us(this,t)}this.U?(zs(this,Re,C),Sn&&this.i&&3==Re&&(Ge(this.V,this.W,"tick",this.fb),this.W.start())):(Mt(this.j,this.m,C,null),us(this,C)),4==Re&&mi(this),this.i&&!this.I&&(4==Re?Ao(this.l,this):(this.i=!1,Hi(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,ct(12)):(this.o=0,ct(13)),mi(this),Pr(this)}}}catch(Re){}},pe.fb=function(){if(this.g){var i=co(this.g),e=this.g.ga();this.C<e.length&&(Oi(this),zs(this,i,e),this.i&&4!=i&&Hi(this))}},pe.cancel=function(){this.I=!0,mi(this)},pe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function hn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(He(3),ct(17)),mi(this),this.o=2,Pr(this)):_o(this,this.Y-i)},(pe=ys.prototype).R=function(){Us(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},pe.T=function(){return Us(this),this.g.concat()},pe.get=function(i,e){return Ii(this.h,i)?this.h[i]:e},pe.set=function(i,e){Ii(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},pe.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var d=t[o],_=this.get(d);i.call(e,_,d,this)}};var Ts=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Er(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Er){this.g=void 0!==e?e:i.g,ee(this,i.j),this.s=i.s,U(this,i.i),le(this,i.m),this.l=i.l,e=i.h;var t=new On;t.i=e.i,e.g&&(t.g=new ys(e.g),t.h=e.h),ze(this,t),this.o=i.o}else i&&(t=String(i).match(Ts))?(this.g=!!e,ee(this,t[1]||"",!0),this.s=br(t[2]||""),U(this,t[3]||"",!0),le(this,t[4]),this.l=br(t[5]||"",!0),ze(this,t[6]||"",!0),this.o=br(t[7]||"")):(this.g=!!e,this.h=new On(null,this.g))}function $(i){return new Er(i)}function ee(i,e,t){i.j=t?br(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function U(i,e,t){i.i=t?br(e,!0):e}function le(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ze(i,e,t){e instanceof On?(i.h=e,function v(i,e){e&&!i.j&&(_s(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(G(this,o),N(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Xn(e,uo)),i.h=new On(e,i.g))}function mt(i,e,t){i.h.set(e,t)}function Ft(i){return mt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function br(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Xn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,pr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function pr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Er.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Xn(e,hi,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Xn(e,hi,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Xn(t,"/"==t.charAt(0)?ai:oi,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Xn(t,ds)),i.join("")};var hi=/[#\/\?@]/g,oi=/[#\?:]/g,ai=/[#\?]/g,uo=/[#\?@]/g,ds=/#/g;function On(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function _s(i){i.g||(i.g=new ys,i.h=0,i.i&&function Fo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var _=i[t].substring(0,o);d=i[t].substring(o+1)}else _=i[t];e(_,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function G(i,e){_s(i),e=oe(i,e),Ii(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ii((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Us(i)))}function F(i,e){return _s(i),e=oe(i,e),Ii(i.g.h,e)}function N(i,e,t){G(i,e),0<t.length&&(i.i=null,i.g.set(oe(i,e),rn(t)),i.h+=t.length)}function oe(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function E(i){this.l=i||L,i=ve.PerformanceNavigationTiming?0<(i=ve.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ve.g&&ve.g.Ea&&ve.g.Ea()&&ve.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=On.prototype).add=function(i,e){_s(this),this.i=null,i=oe(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},pe.forEach=function(i,e){_s(this),this.g.forEach(function(t,o){gn(t,function(d){i.call(e,d,o,this)},this)},this)},pe.T=function(){_s(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var d=i[o],_=0;_<d.length;_++)t.push(e[o]);return t},pe.R=function(i){_s(this);var e=[];if("string"==typeof i)F(this,i)&&(e=un(e,this.g.get(oe(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=un(e,i[t])}return e},pe.set=function(i,e){return _s(this),this.i=null,F(this,i=oe(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},pe.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],d=encodeURIComponent(String(o));o=this.R(o);for(var _=0;_<o.length;_++){var C=d;""!==o[_]&&(C+="="+encodeURIComponent(String(o[_]))),i.push(C)}}return this.i=i.join("&")};var L=10;function ue(i){return!!i.h||!!i.g&&i.g.size>=i.j}function dt(i){return i.h?1:i.g?i.g.size:0}function Zt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function bn(i,e){i.g?i.g.add(e):i.h=e}function Nn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Nr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return rn(i.i)}function yi(){}function Pi(){this.g=new yi}function no(i,e,t){const o=t||"";try{cs(i,function(d,_){let C=d;Ze(d)&&(C=hr(d)),e.push(o+_+"="+encodeURIComponent(C))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Xi(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(_){}}function li(i){this.l=i.$b||null,this.j=i.ib||!1}function es(i,e){At.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}E.prototype.cancel=function(){if(this.i=Nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},yi.prototype.stringify=function(i){return ve.JSON.stringify(i,void 0)},yi.prototype.parse=function(i){return ve.JSON.parse(i,void 0)},Oe(li,xr),li.prototype.g=function(){return new es(this.l,this.j)},li.prototype.i=function(i){return function(){return i}}({}),Oe(es,At);var sa=0;function Zo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ws(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Qo(i)}function Qo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(pe=es.prototype).open=function(i,e){if(this.readyState!=sa)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Qo(this)},pe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ve).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ws(this)),this.readyState=sa},pe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Qo(this)),this.g&&(this.readyState=3,Qo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ve.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zo(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},pe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ws(this):Qo(this),3==this.readyState&&Zo(this)}},pe.Ua=function(i){this.g&&(this.response=this.responseText=i,Ws(this))},pe.Ta=function(i){this.g&&(this.response=i,Ws(this))},pe.ha=function(){this.g&&Ws(this)},pe.setRequestHeader=function(i,e){this.v.append(i,e)},pe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(es.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Xa=ve.JSON.parse;function Gi(i){At.call(this),this.headers=new ys,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ja,this.K=this.L=!1}Oe(Gi,At);var Ja="",el=/^https?$/i,Sa=["POST","PUT"];function Sl(i){return"content-type"==i.toLowerCase()}function tl(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,nl(i),xa(i)}function nl(i){i.D||(i.D=!0,vn(i,"complete"),vn(i,"error"))}function Xo(i){if(i.h&&void 0!==Be&&(!i.C[1]||4!=co(i)||2!=i.ba()))if(i.v&&4==co(i))di(i.Fa,0,i);else if(vn(i,"readystatechange"),4==co(i)){i.h=!1;try{const R=i.ba();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===R){var d=String(i.H).match(Ts)[1]||null;if(!d&&ve.self&&ve.self.location){var _=ve.self.location.protocol;d=_.substr(0,_.length-1)}o=!el.test(d?d.toLowerCase():"")}t=o}if(t)vn(i,"complete"),vn(i,"success");else{i.m=6;try{var C=2<co(i)?i.g.statusText:""}catch(K){C=""}i.j=C+" ["+i.ba()+"]",nl(i)}}finally{xa(i)}}}function xa(i,e){if(i.g){Lo(i);const t=i.g,o=i.C[0]?De:null;i.g=null,i.C=null,e||vn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function Lo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ve.clearTimeout(i.A),i.A=null)}function co(i){return i.g?i.g.readyState:0}function Ma(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ja:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Jr(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function oa(i){let e="";return Jn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):mt(i,e,t))}function Mr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Wn(i){this.za=0,this.l=[],this.h=new Et,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mr("baseRetryDelayMs",5e3,i),this.$a=Mr("retryDelaySeedMs",1e4,i),this.Ya=Mr("forwardChannelMaxRetries",2,i),this.ra=Mr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new E(i&&i.concurrentRequestLimit),this.Ca=new Pi,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function qs(i){if(rl(i),3==i.G){var e=i.V++,t=$(i.F);mt(t,"SID",i.J),mt(t,"RID",e),mt(t,"TYPE","terminate"),gr(i,t),(e=new to(i,i.h,e,void 0)).K=2,e.v=Ft($(t)),t=!1,ve.navigator&&ve.navigator.sendBeacon&&(t=ve.navigator.sendBeacon(e.v.toString(),"")),!t&&ve.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ml(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hi(e)}va(i)}function or(i){i.g&&(ri(i),i.g.cancel(),i.g=null)}function rl(i){or(i),i.u&&(ve.clearTimeout(i.u),i.u=null),xl(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ve.clearTimeout(i.m),i.m=null)}function vu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ra(i)}function Ra(i){ue(i.i)||i.m||(i.m=!0,Vi(i.Ha,i),i.C=0)}function Ni(i,e){var t;t=e?e.m:i.V++;const o=$(i.F);mt(o,"SID",i.J),mt(o,"RID",t),mt(o,"AID",i.U),gr(i,o),i.o&&i.s&&Jr(o,i.o,i.s),t=new to(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=ki(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),bn(i.i,t),$s(t,o,e)}function gr(i,e){i.j&&cs({},function(t,o){mt(e,o,t)})}function ki(i,e,t){t=Math.min(i.l.length,t);var o=i.j?nt(i.j.Oa,i.j,i):null;e:{var d=i.l;let _=-1;for(;;){const C=["count="+t];-1==_?0<t?(_=d[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let R=!0;for(let K=0;K<t;K++){let J=d[K].h;const Re=d[K].g;if(J-=_,0>J)_=Math.max(0,d[K].h-100),R=!1;else try{no(Re,C,"req"+J+"_")}catch(Ye){o&&o(Re)}}if(R){o=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Jo(i){i.g||i.u||(i.Y=1,Vi(i.Ga,i),i.A=0)}function Vo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Lt(nt(i.Ga,i),Bo(i,i.A)),i.A++,0))}function ri(i){null!=i.B&&(ve.clearTimeout(i.B),i.B=null)}function Al(i){i.g=new to(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=$(i.oa);mt(e,"RID","rpc"),mt(e,"SID",i.J),mt(e,"CI",i.N?"0":"1"),mt(e,"AID",i.U),gr(i,e),mt(e,"TYPE","xmlhttp"),i.o&&i.s&&Jr(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Ft($(e)),t.s=null,t.U=!0,yo(t,i)}function xl(i){null!=i.v&&(ve.clearTimeout(i.v),i.v=null)}function Ao(i,e){var t=null;if(i.g==e){xl(i),ri(i),i.g=null;var o=2}else{if(!Zt(i.i,e))return;t=e.D,Nn(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;vn(o=gi(),new Ot(o,t,e,d)),Ra(i)}else Jo(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==o&&function Oa(i,e){return!(dt(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Lt(nt(i.Ha,i,e),Bo(i,i.C)),i.C++,0)))}(i,e)||2==o&&Vo(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:Ys(i,5);break;case 4:Ys(i,10);break;case 3:Ys(i,6);break;default:Ys(i,2)}}function Bo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ys(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=nt(i.jb,i);t||(t=new Er("//www.google.com/images/cleardot.gif"),ve.location&&"http"==ve.location.protocol||ee(t,"https"),Ft(t)),function Qi(i,e){const t=new Et;if(ve.Image){const o=new Image;o.onload=at(Xi,t,o,"TestLoadImage: loaded",!0,e),o.onerror=at(Xi,t,o,"TestLoadImage: error",!1,e),o.onabort=at(Xi,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=at(Xi,t,o,"TestLoadImage: timeout",!1,e),ve.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else ct(2);i.G=0,i.j&&i.j.va(e),va(i),rl(i)}function va(i){i.G=0,i.I=-1,i.j&&((0!=Nr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,rn(i.l),i.l.length=0),i.j.ua())}function Ci(i,e,t){let o=function Qt(i){return i instanceof Er?$(i):new Er(i,void 0)}(t);if(""!=o.i)e&&U(o,e+"."+o.i),le(o,o.m);else{const d=ve.location;o=function zr(i,e,t,o){var d=new Er(null,void 0);return i&&ee(d,i),e&&U(d,e),t&&le(d,t),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&Jn(i.aa,function(d,_){mt(o,_,d)}),t=i.sa,(e=i.D)&&t&&mt(o,e,t),mt(o,"VER",i.ma),gr(i,o),o}function Ml(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gi(t&&i.Ba&&!i.qa?new li({ib:!0}):i.qa)).L=i.H,e}function ql(){}function aa(){if(kn&&!(10<=Number(tn)))throw Error("Environmental error: no available transport.")}function ho(i,e){At.call(this),this.g=new Wn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!fr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ks(this)}function ts(i){Bs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Rl(){Zi.call(this),this.status=1}function Ks(i){this.g=i}(pe=Gi.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wi.g(),this.C=function Hn(i){return i.h||(i.h=i.i())}(this.u?this.u:wi),this.g.onreadystatechange=nt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(_){return void tl(this,_)}i=t||"";const d=new ys(this.headers);o&&cs(o,function(_,C){d.set(C,_)}),o=function xn(i){e:{var e=Sl;const t=i.length,o="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in o&&e.call(void 0,o[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=ve.FormData&&i instanceof ve.FormData,!(0<=Kt(Sa,e))||o||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(_,C){this.g.setRequestHeader(C,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lo(this),0<this.B&&((this.K=function Aa(i){return kn&&function ir(){return function zt(i){var e=ci;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Dr(String(Pn)).split("."),t=Dr("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var d=e[C]||"",_=t[C]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==d[0].length&&0==_[0].length)break;i=Yn(0==d[1].length?0:parseInt(d[1],10),0==_[1].length?0:parseInt(_[1],10))||Yn(0==d[2].length,0==_[2].length)||Yn(d[2],_[2]),d=d[3],_=_[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.pa,this)):this.A=di(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(_){tl(this,_)}},pe.pa=function(){void 0!==Be&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},pe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,vn(this,"complete"),vn(this,"abort"),xa(this))},pe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xa(this,!0)),Gi.Z.M.call(this)},pe.Fa=function(){this.s||(this.F||this.v||this.l?Xo(this):this.cb())},pe.cb=function(){Xo(this)},pe.ba=function(){try{return 2<co(this)?this.g.status:-1}catch(i){return-1}},pe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},pe.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Xa(e)}},pe.Da=function(){return this.m},pe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Wn.prototype).ma=8,pe.G=1,pe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},pe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new to(this,this.h,i,void 0);let _=this.s;if(this.P&&(_?(_=cr(_),on(_,this.P)):_=this.P),null===this.o&&(d.H=_),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ki(this,d,e),mt(t=$(this.F),"RID",i),mt(t,"CVER",22),this.D&&mt(t,"X-HTTP-Session-Id",this.D),gr(this,t),this.o&&_&&Jr(t,this.o,_),bn(this.i,d),this.Ra&&mt(t,"TYPE","init"),this.ja?(mt(t,"$req",e),mt(t,"SID","null"),d.$=!0,$s(d,t,null)):$s(d,t,e),this.G=2}}else 3==this.G&&(i?Ni(this,i):0==this.l.length||ue(this.i)||Ni(this))},pe.Ga=function(){if(this.u=null,Al(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Lt(nt(this.bb,this),i)}},pe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ct(10),or(this),Al(this))},pe.ab=function(){null!=this.v&&(this.v=null,or(this),Vo(this),ct(19))},pe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ct(2)):(this.h.info("Failed to ping google.com"),ct(1))},(pe=ql.prototype).xa=function(){},pe.wa=function(){},pe.va=function(){},pe.ua=function(){},pe.Oa=function(){},aa.prototype.g=function(i,e){return new ho(i,e)},Oe(ho,At),ho.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Vi(nt(i.hb,i,e))),ct(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Ci(i,null,i.W),Ra(i)},ho.prototype.close=function(){qs(this.g)},ho.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,vu(this.g,e)}else this.v?((e={}).__data__=hr(i),vu(this.g,e)):vu(this.g,i)},ho.prototype.M=function(){this.g.j=null,delete this.j,qs(this.g),delete this.g,ho.Z.M.call(this)},Oe(ts,Bs),Oe(Rl,Zi),Oe(Ks,ql),Ks.prototype.xa=function(){vn(this.g,"a")},Ks.prototype.wa=function(i){vn(this.g,new ts(i))},Ks.prototype.va=function(i){vn(this.g,new Rl(i))},Ks.prototype.ua=function(){vn(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,ho.prototype.send=ho.prototype.u,ho.prototype.open=ho.prototype.m,ho.prototype.close=ho.prototype.close,mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,Ar.COMPLETE="complete",ps.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",At.prototype.listen=At.prototype.N,Gi.prototype.listenOnce=Gi.prototype.O,Gi.prototype.getLastError=Gi.prototype.La,Gi.prototype.getLastErrorCode=Gi.prototype.Da,Gi.prototype.getStatus=Gi.prototype.ba,Gi.prototype.getResponseJson=Gi.prototype.Qa,Gi.prototype.getResponseText=Gi.prototype.ga,Gi.prototype.send=Gi.prototype.ea;var $o=qe.createWebChannelTransport=function(){return new aa},wr=qe.getStatEventTarget=function(){return gi()},Eo=qe.ErrorCode=mn,Pa=qe.EventType=Ar,pi=qe.Event=Mn,Uo=qe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vs=qe.FetchXmlHttpFactory=li,Ss=qe.WebChannel=ps,la=qe.XhrIo=Gi;const ro="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let jo="9.6.10";const Ho=new rt.Yd("@firebase/firestore");function ua(){return Ho.logLevel}function Wt(i,...e){if(Ho.logLevel<=rt.in.DEBUG){const t=e.map(bo);Ho.debug(`Firestore (${jo}): ${i}`,...t)}}function Di(i,...e){if(Ho.logLevel<=rt.in.ERROR){const t=e.map(bo);Ho.error(`Firestore (${jo}): ${i}`,...t)}}function ns(i,...e){if(Ho.logLevel<=rt.in.WARN){const t=e.map(bo);Ho.warn(`Firestore (${jo}): ${i}`,...t)}}function bo(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function An(i="Unexpected state"){const e=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+i;throw Di(e),new Error(e)}function Kn(i,e){i||An()}function cn(i,e){return i}const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends _t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class T{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class D{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(As.UNAUTHENTICATED))}shutdown(){}}class W{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ne{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const _=J=>this.i!==d?(d=this.i,t(J)):Promise.resolve();let C=new T;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new T,e.enqueueRetryable(()=>_(this.currentUser))};const R=()=>{const J=C;e.enqueueRetryable((0,_e.Z)(function*(){yield J.promise,yield _(o.currentUser)}))},K=J=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(J=>K(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?K(J):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new T)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Kn("string"==typeof o.accessToken),new D(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kn(null===e||"string"==typeof e),new As(e)}}class xe{constructor(e,t,o){this.type="FirstParty",this.user=As.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Ae{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new xe(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(As.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fn{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=_=>{null!=_.error&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.p;return this.p=_.token,Wt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>o(_))};const d=_=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>d(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?d(_):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kn("string"==typeof t.token),this.p=t.token,new Pt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Yt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function jr(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Yt.A=-1;class Ir{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=jr(40);for(let _=0;_<d.length;++_)o.length<20&&d[_]<t&&(o+=e.charAt(d[_]%e.length))}return o}}function ar(i,e){return i<e?-1:i>e?1:0}function Es(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function xo(i){return i+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ti(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new Ti(0,0))}static max(){return new qn(new Ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function il(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vd(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Yl{constructor(e,t,o){void 0===t?t=0:t>e.length&&An(),void 0===o?o=e.length-t:o>e.length-t&&An(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Yl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const _=e.get(d),C=t.get(d);if(_<C)return-1;if(_>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fr extends Yl{construct(e,t,o){return new Fr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new A(gt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Fr(t)}static emptyPath(){return new Fr([])}}const Kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bs extends Yl{construct(e,t,o){return new bs(e,t,o)}static isValidIdentifier(e){return Kl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bs(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const _=()=>{if(0===o.length)throw new A(gt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;d<e.length;){const R=e[d];if("\\"===R){if(d+1===e.length)throw new A(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const K=e[d+1];if("\\"!==K&&"."!==K&&"`"!==K)throw new A(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=K,d+=2}else"`"===R?(C=!C,d++):"."!==R||C?(o+=R,d++):(_(),d++)}if(_(),C)throw new A(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bs(t)}static emptyPath(){return new bs([])}}class Zl{constructor(e){this.fields=e,e.sort(bs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Es(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class hs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hs(t)}static fromUint8Array(e){const t=function(o){let d="";for(let _=0;_<o.length;++_)d+=String.fromCharCode(o[_]);return d}(e);return new hs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hs.EMPTY_BYTE_STRING=new hs("");const ws=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(i){if(Kn(!!i),"string"==typeof i){let e=0;const t=ws.exec(i);if(Kn(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Si(i.seconds),nanos:Si(i.nanos)}}function Si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Na(i){return"string"==typeof i?hs.fromBase64String(i):hs.fromUint8Array(i)}function sl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xs(i){const e=i.mapValue.fields.__previous_value__;return sl(e)?xs(e):e}function js(i){const e=Mo(i.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}class Pl{constructor(e,t,o,d,_,C,R,K){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=K}}class io{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}function Ms(i){return null==i}function Go(i){return 0===i&&1/i==-1/0}function Eu(i){return"number"==typeof i&&Number.isInteger(i)&&!Go(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class an{constructor(e){this.path=e}static fromPath(e){return new an(Fr.fromString(e))}static fromName(e){return new an(Fr.fromString(e).popFirst(5))}static empty(){return new an(Fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new an(new Fr(e.slice()))}}const Ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bu={nullValue:"NULL_VALUE"};function Rs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sl(i)?4:z(i)?9:10:An()}function $i(i,e){if(i===e)return!0;const t=Rs(i);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return js(i).isEqual(js(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const _=Mo(o.timestampValue),C=Mo(d.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,Na(i.bytesValue).isEqual(Na(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return Si(o.geoPointValue.latitude)===Si(d.geoPointValue.latitude)&&Si(o.geoPointValue.longitude)===Si(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Si(o.integerValue)===Si(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const _=Si(o.doubleValue),C=Si(d.doubleValue);return _===C?Go(_)===Go(C):isNaN(_)&&isNaN(C)}return!1}(i,e);case 9:return Es(i.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:return function(o,d){const _=o.mapValue.fields||{},C=d.mapValue.fields||{};if(rs(_)!==rs(C))return!1;for(const R in _)if(_.hasOwnProperty(R)&&(void 0===C[R]||!$i(_[R],C[R])))return!1;return!0}(i,e);default:return An()}var d}function ba(i,e){return void 0!==(i.values||[]).find(t=>$i(t,e))}function Ro(i,e){if(i===e)return 0;const t=Rs(i),o=Rs(e);if(t!==o)return ar(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return ar(i.booleanValue,e.booleanValue);case 2:return function(d,_){const C=Si(d.integerValue||d.doubleValue),R=Si(_.integerValue||_.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(i,e);case 3:return wa(i.timestampValue,e.timestampValue);case 4:return wa(js(i),js(e));case 5:return ar(i.stringValue,e.stringValue);case 6:return function(d,_){const C=Na(d),R=Na(_);return C.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(d,_){const C=d.split("/"),R=_.split("/");for(let K=0;K<C.length&&K<R.length;K++){const J=ar(C[K],R[K]);if(0!==J)return J}return ar(C.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,_){const C=ar(Si(d.latitude),Si(_.latitude));return 0!==C?C:ar(Si(d.longitude),Si(_.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,_){const C=d.values||[],R=_.values||[];for(let K=0;K<C.length&&K<R.length;++K){const J=Ro(C[K],R[K]);if(J)return J}return ar(C.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,_){const C=d.fields||{},R=Object.keys(C),K=_.fields||{},J=Object.keys(K);R.sort(),J.sort();for(let Re=0;Re<R.length&&Re<J.length;++Re){const Ye=ar(R[Re],J[Re]);if(0!==Ye)return Ye;const Ct=Ro(C[R[Re]],K[J[Re]]);if(0!==Ct)return Ct}return ar(R.length,J.length)}(i.mapValue,e.mapValue);default:throw An()}}function wa(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ar(i,e);const t=Mo(i),o=Mo(e),d=ar(t.seconds,o.seconds);return 0!==d?d:ar(t.nanos,o.nanos)}function ka(i){return ea(i)}function ea(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=Mo(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Na(i.bytesValue).toBase64():"referenceValue"in i?an.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",_=!0;for(const C of o.values||[])_?_=!1:d+=",",d+=ea(C);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let _="{",C=!0;for(const R of d)C?C=!1:_+=",",_+=`${R}:${ea(o.fields[R])}`;return _+"}"}(i.mapValue):An();var e}function Ql(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function wu(i){return!!i&&"integerValue"in i}function ks(i){return!!i&&"arrayValue"in i}function Iu(i){return!!i&&"nullValue"in i}function Fa(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ol(i){return!!i&&"mapValue"in i}function k(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return il(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=k(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=k(i.arrayValue.values[t]);return e}return Object.assign({},i)}function z(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ie(i,e){return void 0===i?e:void 0===e||Ro(i,e)>0?i:e}function Me(i,e){return void 0===i?e:void 0===e||Ro(i,e)<0?i:e}class it{constructor(e){this.value=e}static empty(){return new it({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ol(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=k(t)}setAll(e){let t=bs.emptyPath(),o={},d=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const K=this.getFieldsMap(t);this.applyChanges(K,o,d),o={},d=[],t=R.popLast()}C?o[R.lastSegment()]=k(C):d.push(R.lastSegment())});const _=this.getFieldsMap(t);this.applyChanges(_,o,d)}delete(e){const t=this.field(e.popLast());ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];ol(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){il(t,(d,_)=>e[d]=_);for(const d of o)delete e[d]}clone(){return new it(k(this.value))}}function wt(i){const e=[];return il(i.fields,(t,o)=>{const d=new bs([t]);if(ol(o)){const _=wt(o.mapValue).fields;if(0===_.length)e.push(d);else for(const C of _)e.push(d.child(C))}else e.push(d)}),new Zl(e)}class Vt{constructor(e,t,o,d,_,C){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=_,this.documentState=C}static newInvalidDocument(e){return new Vt(e,0,qn.min(),qn.min(),it.empty(),0)}static newFoundDocument(e,t,o){return new Vt(e,1,t,qn.min(),o,0)}static newNoDocument(e,t){return new Vt(e,2,t,qn.min(),it.empty(),0)}static newUnknownDocument(e,t){return new Vt(e,3,t,qn.min(),it.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dn{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function mr(i){return i.fields.find(e=>2===e.kind)}function er(i){return i.fields.filter(e=>2!==e.kind)}Dn.UNKNOWN_ID=-1;class Tr{constructor(e,t){this.fieldPath=e,this.kind=t}}class lr{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lr(0,Fs.min())}}function so(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=qn.fromTimestamp(1e9===o?new Ti(t+1,0):new Ti(t,o));return new Fs(d,an.empty(),e)}function Wr(i){return new Fs(i.readTime,i.key,-1)}class Fs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Fs(qn.min(),an.empty(),-1)}static max(){return new Fs(qn.max(),an.empty(),-1)}}function al(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=an.comparator(i.documentKey,e.documentKey),0!==t?t:ar(i.largestBatchId,e.largestBatchId))}class ll{constructor(e,t=null,o=[],d=[],_=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=_,this.startAt=C,this.endAt=R,this.P=null}}function Vr(i,e=null,t=[],o=[],d=null,_=null,C=null){return new ll(i,e,t,o,d,_,C)}function zi(i){const e=cn(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+ka(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),Ms(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ka(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ka(o)).join(",")),e.P=t}return e.P}function Nl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!cf(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!$i(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!bd(i.startAt,e.startAt)&&bd(i.endAt,e.endAt)}function Va(i){return an.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ba(i,e){return i.filters.filter(t=>t instanceof is&&t.field.isEqual(e))}class is extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Xl(e,t,o):"array-contains"===t?new Jl(e,o):"in"===t?new Wu(e,o):"not-in"===t?new lf(e,o):"array-contains-any"===t?new uf(e,o):new is(e,t,o)}static V(e,t,o){return"in"===t?new ul(e,o):new Dc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ro(t,this.value)):null!==t&&Rs(this.value)===Rs(t)&&this.v(Ro(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return An()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xl extends is{constructor(e,t,o){super(e,t,o),this.key=an.fromName(o.referenceValue)}matches(e){const t=an.comparator(e.key,this.key);return this.v(t)}}class ul extends is{constructor(e,t){super(e,"in",t),this.keys=$a(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dc extends is{constructor(e,t){super(e,"not-in",t),this.keys=$a(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $a(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>an.fromName(o.referenceValue))}class Jl extends is{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ks(t)&&ba(t.arrayValue,this.value)}}class Wu extends is{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ba(this.value.arrayValue,t)}}class lf extends is{constructor(e,t){super(e,"not-in",t)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ba(this.value.arrayValue,t)}}class uf extends is{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ks(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>ba(this.value.arrayValue,o))}}class Oo{constructor(e,t){this.position=e,this.inclusive=t}}class Ua{constructor(e,t="asc"){this.field=e,this.dir=t}}function cf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function rh(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const _=e[d],C=i.position[d];if(o=_.field.isKeyField()?an.comparator(an.fromName(C.referenceValue),t.key):Ro(C,t.data.field(_.field)),"desc"===_.dir&&(o*=-1),0!==o)break}return o}function bd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!$i(i.position[t],e.position[t]))return!1;return!0}class ta{constructor(e,t=null,o=[],d=[],_=null,C="F",R=null,K=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=_,this.limitType=C,this.startAt=R,this.endAt=K,this.D=null,this.C=null}}function ih(i,e,t,o,d,_,C,R){return new ta(i,e,t,o,d,_,C,R)}function Cu(i){return new ta(i)}function Tc(i){return!Ms(i.limit)&&"F"===i.limitType}function Sc(i){return!Ms(i.limit)&&"L"===i.limitType}function Du(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function qu(i){for(const e of i.filters)if(e.S())return e.field;return null}function kl(i){return null!==i.collectionGroup}function cl(i){const e=cn(i);if(null===e.D){e.D=[];const t=qu(e),o=Du(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new Ua(t)),e.D.push(new Ua(bs.keyField(),"asc"));else{let d=!1;for(const _ of e.explicitOrderBy)e.D.push(_),_.field.isKeyField()&&(d=!0);if(!d){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ua(bs.keyField(),_))}}}return e.D}function wo(i){const e=cn(i);if(!e.C)if("F"===e.limitType)e.C=Vr(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const _ of cl(e))t.push(new Ua(_.field,"desc"===_.dir?"asc":"desc"));const o=e.endAt?new Oo(e.endAt.position,!e.endAt.inclusive):null,d=e.startAt?new Oo(e.startAt.position,!e.startAt.inclusive):null;e.C=Vr(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.C}function sh(i,e,t){return new ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ia(i,e){return Nl(wo(i),wo(e))&&i.limitType===e.limitType}function Ac(i){return`${zi(wo(i))}|lt:${i.limitType}`}function Tu(i){return`Query(target=${function La(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ka(o.value)}`;var o}).join(", ")}]`),Ms(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ka(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ka(t)).join(",")),`Target(${e})`}(wo(i))}; limitType=${i.limitType})`}function Yu(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):an.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,_,C){const R=rh(d,_,C);return d.inclusive?R<=0:R<0}(t.startAt,cl(t),o)||t.endAt&&!function(d,_,C){const R=rh(d,_,C);return d.inclusive?R>=0:R>0}(t.endAt,cl(t),o)));var t,o}function Ku(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function wd(i){return(e,t)=>{let o=!1;for(const d of cl(i)){const _=df(d,e,t);if(0!==_)return _;o=o||d.field.isKeyField()}return 0}}function df(i,e,t){const o=i.field.isKeyField()?an.comparator(e.key,t.key):function(d,_,C){const R=_.data.field(d),K=C.data.field(d);return null!==R&&null!==K?Ro(R,K):An()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return An()}}function Id(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Go(e)?"-0":e}}function xc(i){return{integerValue:""+i}}function Mc(i,e){return Eu(e)?xc(e):Id(i,e)}class Rc{constructor(){this._=void 0}}function ja(i,e,t){return i instanceof Fl?function(o,d){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(_.fields.__previous_value__=d),{mapValue:_}}(t,e):i instanceof Ha?oh(i,e):i instanceof eu?Cd(i,e):function(o,d){const _=Oc(o,d),C=ah(_)+ah(o.k);return wu(_)&&wu(o.k)?xc(C):Id(o.M,C)}(i,e)}function Zu(i,e,t){return i instanceof Ha?oh(i,e):i instanceof eu?Cd(i,e):t}function Oc(i,e){return i instanceof dl?wu(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Fl extends Rc{}class Ha extends Rc{constructor(e){super(),this.elements=e}}function oh(i,e){const t=lh(e);for(const o of i.elements)t.some(d=>$i(d,o))||t.push(o);return{arrayValue:{values:t}}}class eu extends Rc{constructor(e){super(),this.elements=e}}function Cd(i,e){let t=lh(e);for(const o of i.elements)t=t.filter(d=>!$i(d,o));return{arrayValue:{values:t}}}class dl extends Rc{constructor(e,t){super(),this.M=e,this.k=t}}function ah(i){return Si(i.integerValue||i.doubleValue)}function lh(i){return ks(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Pc{constructor(e,t){this.field=e,this.transform=t}}class sp{constructor(e,t){this.version=e,this.transformResults=t}}class Hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hs}static exists(e){return new Hs(void 0,e)}static updateTime(e){return new Hs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Su{}function da(i,e,t){i instanceof nu?function(o,d,_){const C=o.value.clone(),R=kc(o.fieldTransforms,d,_.transformResults);C.setAll(R),d.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(i,e,t):i instanceof fl?function(o,d,_){if(!hl(o.precondition,d))return void d.convertToUnknownDocument(_.version);const C=kc(o.fieldTransforms,d,_.transformResults),R=d.data;R.setAll(hf(o)),R.setAll(C),d.convertToFoundDocument(_.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ll(i,e,t){var d;i instanceof nu?function(o,d,_){if(!hl(o.precondition,d))return;const C=o.value.clone(),R=Fc(o.fieldTransforms,_,d);C.setAll(R),d.convertToFoundDocument(Nc(d),C).setHasLocalMutations()}(i,e,t):i instanceof fl?function(o,d,_){if(!hl(o.precondition,d))return;const C=Fc(o.fieldTransforms,_,d),R=d.data;R.setAll(hf(o)),R.setAll(C),d.convertToFoundDocument(Nc(d),R).setHasLocalMutations()}(i,e,t):hl(i.precondition,d=e)&&d.convertToNoDocument(qn.min())}function Dd(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),_=Oc(o.transform,d||null);null!=_&&(null==t&&(t=it.empty()),t.set(o.field,_))}return t||null}function Qu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Es(t,o,(d,_)=>function tu(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ha&&o instanceof Ha||t instanceof eu&&o instanceof eu?Es(t.elements,o.elements,$i):t instanceof dl&&o instanceof dl?$i(t.k,o.k):t instanceof Fl&&o instanceof Fl);var t,o}(d,_))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function Nc(i){return i.isFoundDocument()?i.version:qn.min()}class nu extends Su{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}}class fl extends Su{constructor(e,t,o,d,_=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=_,this.type=1}}function hf(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function kc(i,e,t){const o=new Map;Kn(i.length===t.length);for(let d=0;d<t.length;d++){const _=i[d],C=_.transform,R=e.data.field(_.field);o.set(_.field,Zu(C,R,t[d]))}return o}function Fc(i,e,t){const o=new Map;for(const d of i){const _=d.transform,C=t.data.field(d.field);o.set(d.field,ja(_,C,e))}return o}class pl extends Su{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Td extends Su{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ff{constructor(e){this.count=e}}var Is,ui;function gl(i){switch(i){default:return An();case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0}}function Xu(i){if(void 0===i)return Di("GRPC error has no .code"),gt.UNKNOWN;switch(i){case Is.OK:return gt.OK;case Is.CANCELLED:return gt.CANCELLED;case Is.UNKNOWN:return gt.UNKNOWN;case Is.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case Is.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case Is.INTERNAL:return gt.INTERNAL;case Is.UNAVAILABLE:return gt.UNAVAILABLE;case Is.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case Is.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case Is.NOT_FOUND:return gt.NOT_FOUND;case Is.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case Is.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case Is.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case Is.ABORTED:return gt.ABORTED;case Is.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case Is.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case Is.DATA_LOSS:return gt.DATA_LOSS;default:return An()}}(ui=Is||(Is={}))[ui.OK=0]="OK",ui[ui.CANCELLED=1]="CANCELLED",ui[ui.UNKNOWN=2]="UNKNOWN",ui[ui.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ui[ui.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ui[ui.NOT_FOUND=5]="NOT_FOUND",ui[ui.ALREADY_EXISTS=6]="ALREADY_EXISTS",ui[ui.PERMISSION_DENIED=7]="PERMISSION_DENIED",ui[ui.UNAUTHENTICATED=16]="UNAUTHENTICATED",ui[ui.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ui[ui.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ui[ui.ABORTED=10]="ABORTED",ui[ui.OUT_OF_RANGE=11]="OUT_OF_RANGE",ui[ui.UNIMPLEMENTED=12]="UNIMPLEMENTED",ui[ui.INTERNAL=13]="INTERNAL",ui[ui.UNAVAILABLE=14]="UNAVAILABLE",ui[ui.DATA_LOSS=15]="DATA_LOSS";class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,_]of o)if(this.equalsFn(d,e))return _}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let _=0;_<d.length;_++)if(this.equalsFn(d[_][0],e))return void(d[_]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){il(this.inner,(t,o)=>{for(const[d,_]of o)e(d,_)})}isEmpty(){return vd(this.inner)}size(){return this.innerSize}}class Fi{constructor(e,t){this.comparator=e,this.root=t||Cs.EMPTY}insert(e,t){return new Fi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cs.BLACK,null,null))}remove(e){return new Fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}}class Ga{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=t?o(e.key,t):1,t&&d&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cs{constructor(e,t,o,d,_){this.key=e,this.value=t,this.color=null!=o?o:Cs.RED,this.left=null!=d?d:Cs.EMPTY,this.right=null!=_?_:Cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,_){return new Cs(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const _=o(e,d.key);return d=_<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===_?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return Cs.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw An();const e=this.left.check();if(e!==this.right.check())throw An();return e+(this.isRed()?0:1)}}Cs.EMPTY=null,Cs.RED=!0,Cs.BLACK=!1,Cs.EMPTY=new class{constructor(){this.size=0}get key(){throw An()}get value(){throw An()}get color(){throw An()}get left(){throw An()}get right(){throw An()}copy(i,e,t,o,d){return this}insert(i,e,t){return new Cs(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wi{constructor(e){this.comparator=e,this.data=new Fi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(0!==this.comparator(d,_))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wi(this.comparator);return t.data=e,t}}class uh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ss(i){return i.hasNext()?i.getNext():void 0}const Sd=new Fi(an.comparator);function zo(){return Sd}const Ad=new Fi(an.comparator);function Da(){return Ad}function ml(){return new Ca(i=>i.toString(),(i,e)=>i.isEqual(e))}const Lc=new Fi(an.comparator),pf=new Wi(an.comparator);function vi(...i){let e=pf;for(const t of i)e=e.add(t);return e}const xd=new Wi(ar);function Md(){return xd}class Vc{constructor(e,t,o,d,_){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vc(qn.min(),o,Md(),zo(),vi())}}class za{constructor(e,t,o,d,_){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,t){return new za(hs.EMPTY_BYTE_STRING,t,vi(),vi(),vi())}}class Os{constructor(e,t,o,d){this.O=e,this.removedTargetIds=t,this.key=o,this.F=d}}class Au{constructor(e,t){this.targetId=e,this.$=t}}class Wa{constructor(e,t,o=hs.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Ju{constructor(){this.B=0,this.L=ru(),this.U=hs.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=vi(),t=vi(),o=vi();return this.L.forEach((d,_)=>{switch(_){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:An()}}),new za(this.U,this.q,e,t,o)}J(){this.G=!1,this.L=ru()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class fo{constructor(e){this.nt=e,this.st=new Map,this.it=zo(),this.rt=yl(),this.ot=new Wi(ar)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.K||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.K||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:An()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,d)=>{this.ft(d)&&t(d)})}_t(e){const t=e.targetId,o=e.$.count,d=this.wt(t);if(d){const _=d.target;if(Va(_))if(0===o){const C=new an(_.path);this.ct(t,C,Vt.newNoDocument(C,qn.min()))}else Kn(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((_,C)=>{const R=this.wt(C);if(R){if(_.current&&Va(R.target)){const K=new an(R.target.path);null!==this.it.get(K)||this.It(C,K)||this.ct(C,K,Vt.newNoDocument(K,e))}_.j&&(t.set(C,_.H()),_.J())}});let o=vi();this.rt.forEach((_,C)=>{let R=!0;C.forEachWhile(K=>{const J=this.wt(K);return!J||2===J.purpose||(R=!1,!1)}),R&&(o=o.add(_))}),this.it.forEach((_,C)=>C.setReadTime(e));const d=new Vc(e,t,this.ot,this.it,o);return this.it=zo(),this.rt=yl(),this.ot=new Wi(ar),d}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const d=this.lt(e);this.It(e,t)?d.Y(t,1):d.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ju,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Wi(ar),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Wt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ju),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function yl(){return new Fi(an.comparator)}function ru(){return new Fi(an.comparator)}const Io={asc:"ASCENDING",desc:"DESCENDING"},iu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ec{constructor(e,t){this.databaseId=e,this.N=t}}function su(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tc(i,e){return i.N?e.toBase64():e.toUint8Array()}function ou(i,e){return su(i,e.toTimestamp())}function Zs(i){return Kn(!!i),qn.fromTimestamp(function(e){const t=Mo(e);return new Ti(t.seconds,t.nanos)}(i))}function Bc(i,e){return(t=i,new Fr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ch(i){const e=Fr.fromString(i);return Kn(he(e)),e}function Co(i,e){return Bc(i.databaseId,e.path)}function na(i,e){const t=ch(e);if(t.get(1)!==i.databaseId.projectId)throw new A(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new A(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new an(Od(t))}function Rd(i,e){return Bc(i.databaseId,e)}function nc(i){const e=ch(i);return 4===e.length?Fr.emptyPath():Od(e)}function rc(i){return new Fr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Od(i){return Kn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Qs(i,e,t){return{name:Co(i,e),fields:t.value.mapValue.fields}}function xu(i,e,t){const o=na(i,e.name),d=Zs(e.updateTime),_=new it({mapValue:{fields:e.fields}}),C=Vt.newFoundDocument(o,d,_);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function Do(i,e){let t;if(e instanceof nu)t={update:Qs(i,e.key,e.value)};else if(e instanceof pl)t={delete:Co(i,e.key)};else if(e instanceof fl)t={update:Qs(i,e.key,e.data),updateMask:q(e.fieldMask)};else{if(!(e instanceof Td))return An();t={verify:Co(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,_){const C=_.transform;if(C instanceof Fl)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Ha)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof eu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof dl)return{fieldPath:_.field.canonicalString(),increment:C.k};throw An()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:ou(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:An()),t;var d}function ra(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?Hs.updateTime(Zs(d.updateTime)):void 0!==d.exists?Hs.exists(d.exists):Hs.none():Hs.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(_,C){let R=null;"setToServerValue"in C?(Kn("REQUEST_TIME"===C.setToServerValue),R=new Fl):"appendMissingElements"in C?R=new Ha(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new eu(C.removeAllFromArray.values||[]):"increment"in C?R=new dl(_,C.increment):An();const K=bs.fromServerFormat(C.fieldPath);return new Pc(K,R)}(i,d)):[];var d;if(e.update){const d=na(i,e.update.name),_=new it({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Zl((e.updateMask.fieldPaths||[]).map(J=>bs.fromServerFormat(J)));return new fl(d,_,C,t,o)}return new nu(d,_,t,o)}if(e.delete){const d=na(i,e.delete);return new pl(d,t)}if(e.verify){const d=na(i,e.verify);return new Td(d,t)}return An()}function $c(i,e){return{documents:[Rd(i,e.path)]}}function dh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Rd(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rd(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(K){if(0===K.length)return;const J=K.map(Re=>function(Ye){if("=="===Ye.op){if(Fa(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NAN"}};if(Iu(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NULL"}}}else if("!="===Ye.op){if(Fa(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NOT_NAN"}};if(Iu(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w(Ye.field),op:Nd(Ye.op),value:Ye.value}}}(Re));return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}(e.filters);d&&(t.structuredQuery.where=d);const _=function(K){if(0!==K.length)return K.map(J=>{return{field:w((Re=J).field),direction:oc(Re.dir)};var Re})}(e.orderBy);_&&(t.structuredQuery.orderBy=_);const C=(J=e.limit,i.N||Ms(J)?J:{value:J});var J,R,K;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(K=e.endAt).inclusive,values:K.position}),t}function au(i){let e=nc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){Kn(1===o);const Re=t.from[0];Re.allDescendants?d=Re.collectionId:e=e.child(Re.collectionId)}let _=[];t.where&&(_=fh(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(Re=>{return new Ua(g((Ye=Re).field),function(Ct){switch(Ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ye.direction));var Ye}));let R=null;t.limit&&(R=function(Re){let Ye;return Ye="object"==typeof Re?Re.value:Re,Ms(Ye)?null:Ye}(t.limit));let K=null;var Re;t.startAt&&(K=new Oo((Re=t.startAt).values||[],!!Re.before));let J=null;return t.endAt&&(J=function(Re){return new Oo(Re.values||[],!Re.before)}(t.endAt)),ih(e,d,C,_,R,"F",K,J)}function fh(i){return i?void 0!==i.unaryFilter?[S(i)]:void 0!==i.fieldFilter?[y(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>fh(e)).reduce((e,t)=>e.concat(t)):An():[]}function oc(i){return Io[i]}function Nd(i){return iu[i]}function w(i){return{fieldPath:i.canonicalString()}}function g(i){return bs.fromServerFormat(i.fieldPath)}function y(i){return is.create(g(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return An()}}(i.fieldFilter.op),i.fieldFilter.value)}function S(i){switch(i.unaryFilter.op){case"IS_NAN":const e=g(i.unaryFilter.field);return is.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=g(i.unaryFilter.field);return is.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=g(i.unaryFilter.field);return is.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=g(i.unaryFilter.field);return is.create(d,"!=",{nullValue:"NULL_VALUE"});default:return An()}}function q(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function he(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function tt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=nn(e)),e=Tt(i.get(t),e);return nn(e)}function Tt(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const _=i.charAt(d);switch(_){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=_}}return t}function nn(i){return i+"\x01\x01"}function pn(i){const e=i.length;if(Kn(e>=2),2===e)return Kn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Fr.emptyPath();const t=e-2,o=[];let d="";for(let _=0;_<e;){const C=i.indexOf("\x01",_);switch((C<0||C>t)&&An(),i.charAt(C+1)){case"\x01":const R=i.substring(_,C);let K;0===d.length?K=R:(d+=R,K=d,d=""),o.push(K);break;case"\x10":d+=i.substring(_,C),d+="\0";break;case"\x11":d+=i.substring(_,C+1);break;default:An()}_=C+2}return new Fr(o)}const ur=["userId","batchId"];function Gn(i,e){return[i,tt(e)]}function Ji(i,e,t){return[i,tt(e),t]}const To={},_l=["prefixPath","collectionGroup","readTime","documentId"],Uc=["prefixPath","collectionGroup","documentId"],So=["collectionGroup","readTime","prefixPath","documentId"],jc=["canonicalId","targetId"],gf=["targetId","path"],Ta=["path","targetId"],Mu=["collectionId","parent"],Wo=["indexId","uid"],Hc=["uid","sequenceNumber"],Gc=["indexId","uid","arrayValue","directionalValue","documentKey"],ph=["indexId","uid","documentKey"],kd=["userId","collectionPath","documentId"],mf=["userId","collectionPath","largestBatchId"],dg=["userId","collectionGroup","largestBatchId"],yf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fd=[...yf,"documentOverlays"],gh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mh=[...gh,"indexConfiguration","indexState","indexEntries"],_f="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&An(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rt((o,d)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(o,d)},this.catchCallback=_=>{this.wrapFailure(t,_).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rt?t:Rt.resolve(t)}catch(t){return Rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.reject(t)}static resolve(e){return new Rt((t,o)=>{t(e)})}static reject(e){return new Rt((t,o)=>{o(e)})}static waitFor(e){return new Rt((t,o)=>{let d=0,_=0,C=!1;e.forEach(R=>{++d,R.next(()=>{++_,C&&_===d&&t()},K=>o(K))}),C=!0,_===d&&t()})}static or(e){let t=Rt.resolve(!1);for(const o of e)t=t.next(d=>d?Rt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,_)=>{o.push(t.call(this,d,_))}),this.waitFor(o)}}class yh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new T,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new vl(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const d=Ef(o.target.error);this.At.reject(new vl(e,d))}}static open(e,t,o,d){try{return new yh(t,e.transaction(d,o))}catch(_){throw new vl(t,_)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vf(t)}}class ha{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===ha.Vt((0,_t.z$)())&&Di("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Wt("SimpleDb","Removing database:",e),ac(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,_t.hl)())return!1;if(ha.St())return!0;const e=(0,_t.z$)(),t=ha.Vt(e),o=0<t&&t<10,d=ha.Dt(e),_=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||_)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const _=indexedDB.open(t.name,t.version);_.onsuccess=C=>{o(C.target.result)},_.onblocked=()=>{d(new vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const R=C.target.error;d("VersionError"===R.name?new A(gt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new A(gt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new vl(e,R))},_.onupgradeneeded=C=>{Wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.Pt.kt(C.target.result,_.transaction,C.oldVersion,t.version).next(()=>{Wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var _=this;return(0,_e.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{_.db=yield _.Nt(e);const K=yh.open(_.db,e,C?"readonly":"readwrite",o),J=d(K).next(Re=>(K.bt(),Re)).catch(Re=>(K.abort(Re),Rt.reject(Re))).toPromise();return J.catch(()=>{}),yield K.Rt,J}catch(K){const J="FirebaseError"!==K.name&&R<3;if(Wt("SimpleDb","Transaction failed with error:",K.message,"Retrying:",J),_.close(),!J)return Promise.reject(K)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class op{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ac(this.Ft.delete())}}class vl extends A{constructor(e,t){super(gt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ru(i){return"IndexedDbTransactionError"===i.name}class vf{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Wt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ac(o)}add(e){return Wt("SimpleDb","ADD",this.store.name,e,e),ac(this.store.add(e))}get(e){return ac(this.store.get(e)).next(t=>(void 0===t&&(t=null),Wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Wt("SimpleDb","DELETE",this.store.name,e),ac(this.store.delete(e))}count(){return Wt("SimpleDb","COUNT",this.store.name),ac(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),_=[];return this.Gt(d,(C,R)=>{_.push(R)}).next(()=>_)}{const d=this.store.getAll(o.range);return new Rt((_,C)=>{d.onerror=R=>{C(R.target.error)},d.onsuccess=R=>{_(R.target.result)}})}}Kt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Rt((d,_)=>{o.onerror=C=>{_(C.target.error)},o.onsuccess=C=>{d(C.target.result)}})}Qt(e,t){Wt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const d=this.cursor(o);return this.Gt(d,(_,C,R)=>R.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.Gt(d,t)}zt(e){const t=this.cursor({});return new Rt((o,d)=>{t.onerror=_=>{const C=Ef(_.target.error);d(C)},t.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():o()}):o()}})}Gt(e,t){const o=[];return new Rt((d,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void d();const K=new op(R),J=t(R.primaryKey,R.value,K);if(J instanceof Rt){const Re=J.catch(Ye=>(K.done(),Rt.reject(Ye)));o.push(Re)}K.isDone?d():null===K.Lt?R.continue():R.continue(K.Lt)}}).next(()=>Rt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ac(i){return new Rt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=Ef(o.target.error);t(d)}})}let Ld=!1;function Ef(i){const e=ha.Vt((0,_t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ld||(Ld=!0,setTimeout(()=>{throw o},0)),o}}return i}class Vd extends zc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function oo(i,e){const t=cn(i);return ha.xt(t.Ht,e)}class _h{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const _=this.mutations[d];_.key.isEqual(e.key)&&da(_,e,o[d])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ll(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ll(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),d=o;this.applyToLocalView(d),o.isValidDocument()||d.convertToNoDocument(qn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vi())}isEqual(e){return this.batchId===e.batchId&&Es(this.mutations,e.mutations,(t,o)=>Qu(t,o))&&Es(this.baseMutations,e.baseMutations,(t,o)=>Qu(t,o))}}class Vl{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){Kn(e.mutations.length===o.length);let d=Lc;const _=e.mutations;for(let C=0;C<_.length;C++)d=d.insert(_[C].key,o[C].version);return new Vl(e,t,o,d)}}class El{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bl{constructor(e,t,o,d,_=qn.min(),C=qn.min(),R=hs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lc{constructor(e){this.Jt=e}}function vh(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Co(d=i.Jt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:su(d,_.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:lu(e.version)};else{if(!e.isUnknownDocument())return An();o.unknownDocument={path:t.path.toArray(),version:lu(e.version)}}var d,_;return o}function Bl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function lu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qa(i){const e=new Ti(i.seconds,i.nanoseconds);return qn.fromTimestamp(e)}function uc(i,e){const t=(e.baseMutations||[]).map(_=>ra(i.Jt,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const o=e.mutations.map(_=>ra(i.Jt,_)),d=Ti.fromMillis(e.localWriteTimeMs);return new _h(e.batchId,d,t,o)}function cc(i){const e=qa(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?qa(i.lastLimboFreeSnapshotVersion):qn.min();let o;var d;return void 0!==i.query.documents?(Kn(1===(d=i.query).documents.length),o=wo(Cu(nc(d.documents[0])))):o=wo(au(i.query)),new bl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,hs.fromBase64String(i.resumeToken))}function $d(i,e){const t=lu(e.snapshotVersion),o=lu(e.lastLimboFreeSnapshotVersion);let d;d=Va(e.target)?$c(i.Jt,e.target):dh(i.Jt,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zi(e.target),readTime:t,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Ud(i){const e=au({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sh(e,e.limit,"L"):e}function Wc(i,e){return new El(e.largestBatchId,ra(i.Jt,e.overlayMutation))}function Eh(i,e){const t=e.path.lastSegment();return[i,tt(e.path.popLast()),t]}class ap{getBundleMetadata(e,t){return bf(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:qa(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return bf(e).put({bundleId:(o=t).id,createTime:lu(Zs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return wf(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Ud(d.bundledQuery),readTime:qa(d.readTime)};var d})}saveNamedQuery(e,t){return wf(e).put({name:(o=t).name,readTime:lu(Zs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function bf(i){return oo(i,"bundles")}function wf(i){return oo(i,"namedQueries")}class bh{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new bh(e,t.uid||"")}getOverlay(e,t){return dc(e).get(Eh(this.userId,t)).next(o=>o?Wc(this.M,o):null)}saveOverlays(e,t,o){const d=[];return o.forEach((_,C)=>{const R=new El(t,C);d.push(this.Xt(e,R))}),Rt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(C=>d.add(tt(C.getCollectionPath())));const _=[];return d.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);_.push(dc(e).Qt("collectionPathOverlayIndex",R))}),Rt.waitFor(_)}getOverlaysForCollection(e,t,o){const d=ml(),_=tt(t),C=IDBKeyRange.bound([this.userId,_,o],[this.userId,_,Number.POSITIVE_INFINITY],!0);return dc(e).qt("collectionPathOverlayIndex",C).next(R=>{for(const K of R){const J=Wc(this.M,K);d.set(J.getKey(),J)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const _=ml();let C;const R=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dc(e).Wt({index:"collectionGroupOverlayIndex",range:R},(K,J,Re)=>{const Ye=Wc(this.M,J);_.size()<d||Ye.largestBatchId===C?(_.set(Ye.getKey(),Ye),C=Ye.largestBatchId):Re.done()}).next(()=>_)}Xt(e,t){return dc(e).put(function(o,d,_){const[C,R,K]=Eh(d,_.mutation.key);return{userId:d,collectionPath:R,documentId:K,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Do(o.Jt,_.mutation)}}(this.M,this.userId,t))}}function dc(i){return oo(i,"documentOverlays")}class hc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Si(e.integerValue));else if("doubleValue"in e){const o=Si(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Go(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Na(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?z(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):An()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const d of Object.keys(o))this.re(d,t),this.te(o[d],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const d of o)this.te(d,t)}ae(e,t){this.ne(t,37),an.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function lp(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ds(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const _=lp(255&t[d]);if(o+=_,8!==_)break}return o}(i);return Math.ceil(e/8)}hc.fe=new hc;class wh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const d=t.codePointAt(0);this._e(240|d>>>18),this._e(128|63&d>>>12),this._e(128|63&d>>>6),this._e(128|63&d)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const d=t.codePointAt(0);this.ge(240|d>>>18),this.ge(128|63&d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d)}}this.ye()}Te(e){const t=this.Ee(e),o=Ds(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Re(e){const t=this.Ee(e),o=Ds(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(d){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,d,!1),new Uint8Array(_.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class uu{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Ih{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ia{constructor(){this.De=new wh,this.Ce=new uu(this.De),this.xe=new Ih(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class fa{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new fa(this.indexId,this.documentKey,this.arrayValue,o)}}function Ou(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ch(i.arrayValue,e.arrayValue),0!==t?t:(t=Ch(i.directionalValue,e.directionalValue),0!==t?t:an.comparator(i.documentKey,e.documentKey)))}function Ch(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class fc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=mr(e);if(void 0!==t&&!this.Be(t))return!1;const o=er(e);let d=0,_=0;for(;d<o.length&&this.Be(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Fe){const C=o[d];if(!this.Le(this.Fe,C)||!this.Ue(this.Me[_++],C))return!1;++d}for(;d<o.length;++d){const C=o[d];if(_>=this.Me.length||!this.Ue(this.Me[_++],C))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Um{constructor(){this.qe=new If}addToCollectionParentIndex(e,t){return this.qe.add(t),Rt.resolve()}getCollectionParents(e,t){return Rt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Rt.resolve()}deleteFieldIndex(e,t){return Rt.resolve()}getDocumentsMatchingTarget(e,t){return Rt.resolve(null)}getFieldIndex(e,t){return Rt.resolve(null)}getFieldIndexes(e,t){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}updateCollectionGroup(e,t,o){return Rt.resolve()}updateIndexEntries(e,t){return Rt.resolve()}}class If{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Wi(Fr.comparator),_=!d.has(o);return this.index[t]=d.add(o),_}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Wi(Fr.comparator)).toArray()}}const Cr=new Uint8Array(0);class Dh{constructor(e){this.user=e,this.Ge=new If,this.Ke=new Ca(t=>zi(t),(t,o)=>Nl(t,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const _={collectionId:o,parent:tt(d)};return Cf(e).put(_)}return Rt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[xo(t),""],!1,!0);return Cf(e).qt(d).next(_=>{for(const C of _){if(C.collectionId!==t)break;o.push(pn(C.parent))}return o})}addFieldIndex(e,t){const o=pc(e),d={indexId:(_=t).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var _;return delete d.indexId,o.add(d).next()}deleteFieldIndex(e,t){const o=pc(e),d=pa(e),_=qc(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=qc(e);let d=!0;const _=new Map;return Rt.forEach(this.Qe(t),C=>this.getFieldIndex(e,C).next(R=>{d&&(d=!!R),_.set(C,R)})).next(()=>{if(d){let C=vi();return Rt.forEach(_,(R,K)=>{var J;Wt("IndexedDbIndexManager",`Using index ${J=R,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(ii=>`${ii.fieldPath}:${ii.kind}`).join(",")}`} to execute ${zi(t)}`);const Re=function(ii,lo){const Vs=mr(lo);if(void 0===Vs)return null;for(const Ps of Ba(ii,Vs.fieldPath))switch(Ps.op){case"array-contains-any":return Ps.value.arrayValue.values||[];case"array-contains":return[Ps.value]}return null}(K,R),Ye=function(ii,lo){const Vs=new Map;for(const Ps of er(lo))for(const ji of Ba(ii,Ps.fieldPath))switch(ji.op){case"==":case"in":Vs.set(Ps.fieldPath.canonicalString(),ji.value);break;case"not-in":case"!=":return Vs.set(Ps.fieldPath.canonicalString(),ji.value),Array.from(Vs.values())}return null}(K,R),Ct=function(ii,lo){const Vs=[];let Ps=!0;for(const Qa of er(lo)){let Dl,nh=!0;for(const ko of Ba(ii,Qa.fieldPath)){let eo,af=!0;switch(ko.op){case"<":case"<=":eo="nullValue"in(ji=ko.value)?bu:"booleanValue"in ji?{booleanValue:!1}:"integerValue"in ji||"doubleValue"in ji?{doubleValue:NaN}:"timestampValue"in ji?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ji?{stringValue:""}:"bytesValue"in ji?{bytesValue:""}:"referenceValue"in ji?Ql(io.empty(),an.empty()):"geoPointValue"in ji?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ji?{arrayValue:{}}:"mapValue"in ji?{mapValue:{}}:An();break;case"==":case"in":case">=":eo=ko.value;break;case">":eo=ko.value,af=!1;break;case"!=":case"not-in":eo=bu}ie(Dl,eo)===eo&&(Dl=eo,nh=af)}if(null!==ii.startAt)for(let ko=0;ko<ii.orderBy.length;++ko)if(ii.orderBy[ko].field.isEqual(Qa.fieldPath)){const eo=ii.startAt.position[ko];ie(Dl,eo)===eo&&(Dl=eo,nh=ii.startAt.inclusive);break}if(void 0===Dl)return null;Vs.push(Dl),Ps&&(Ps=nh)}var ji;return new Oo(Vs,Ps)}(K,R),Ut=function(ii,lo){const Vs=[];let Ps=!0;for(const Qa of er(lo)){let Dl,nh=!0;for(const ko of Ba(ii,Qa.fieldPath)){let eo,af=!0;switch(ko.op){case">=":case">":eo="nullValue"in(ji=ko.value)?{booleanValue:!1}:"booleanValue"in ji?{doubleValue:NaN}:"integerValue"in ji||"doubleValue"in ji?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ji?{stringValue:""}:"stringValue"in ji?{bytesValue:""}:"bytesValue"in ji?Ql(io.empty(),an.empty()):"referenceValue"in ji?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ji?{arrayValue:{}}:"arrayValue"in ji?{mapValue:{}}:"mapValue"in ji?Ed:An(),af=!1;break;case"==":case"in":case"<=":eo=ko.value;break;case"<":eo=ko.value,af=!1;break;case"!=":case"not-in":eo=Ed}Me(Dl,eo)===eo&&(Dl=eo,nh=af)}if(null!==ii.endAt)for(let ko=0;ko<ii.orderBy.length;++ko)if(ii.orderBy[ko].field.isEqual(Qa.fieldPath)){const eo=ii.endAt.position[ko];Me(Dl,eo)===eo&&(Dl=eo,nh=ii.endAt.inclusive);break}if(void 0===Dl)return null;Vs.push(Dl),Ps&&(Ps=nh)}var ji;return new Oo(Vs,Ps)}(K,R),Xt=this.je(R,K,Ct),Un=this.je(R,K,Ut),Br=this.We(R,K,Ye),Js=this.ze(R.indexId,Re,Xt,!!Ct&&Ct.inclusive,Un,!!Ut&&Ut.inclusive,Br);return Rt.forEach(Js,ii=>o.Kt(ii,t.limit).next(lo=>{lo.forEach(Vs=>{C=C.add(new an(pn(Vs.documentKey)))})}))}).next(()=>C)}return Rt.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,o,d,_,C,R){const K=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=_?_.length:1),J=K/(null!=t?t.length:1),Re=[];for(let Ye=0;Ye<K;++Ye){const Ct=t?this.He(t[Ye/J]):Cr,Ut=o?this.Je(e,Ct,o[Ye%J],d):this.Ye(e),Xt=_?this.Xe(e,Ct,_[Ye%J],C):this.Ye(e+1);Re.push(...this.createRange(Ut,Xt,R.map(Un=>this.Je(e,Ct,Un,!0))))}return Re}Je(e,t,o,d){const _=new fa(e,an.empty(),t,o);return d?_:_.ke()}Xe(e,t,o,d){const _=new fa(e,an.empty(),t,o);return d?_.ke():_}Ye(e){return new fa(e,an.empty(),Cr,Cr)}getFieldIndex(e,t){const o=new fc(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(_=>{const C=_.filter(R=>o.$e(R));return C.sort((R,K)=>K.fields.length-R.fields.length),C.length>0?C[0]:null})}Ze(e,t){const o=new ia;for(const d of er(e)){const _=t.data.field(d.fieldPath);if(null==_)return null;const C=o.Ne(d.kind);hc.fe.Zt(_,C)}return o.Se()}He(e){const t=new ia;return hc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,o){if(null===o)return[];let d=[];d.push(new ia);let _=0;for(const C of er(e)){const R=o[_++];for(const K of d)if(this.tn(t,C.fieldPath)&&ks(R))d=this.en(d,C,R);else{const J=K.Ne(C.kind);hc.fe.Zt(R,J)}}return this.nn(d)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}nn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}en(e,t,o){const d=[...e],_=[];for(const C of o.arrayValue.values||[])for(const R of d){const K=new ia;K.seed(R.Se()),hc.fe.Zt(C,K.Ne(t.kind)),_.push(K)}return _}tn(e,t){return!!e.filters.find(o=>o instanceof is&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=pc(e),d=pa(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(_=>{const C=[];return Rt.forEach(_,R=>d.get([R.indexId,this.uid]).next(K=>{C.push(function(J,Re){const Ye=Re?new lr(Re.sequenceNumber,new Fs(qa(Re.readTime),new an(pn(Re.documentKey)),Re.largestBatchId)):lr.empty(),Ct=J.fields.map(([Ut,Xt])=>new Tr(bs.fromServerFormat(Ut),Xt));return new Dn(J.indexId,J.collectionGroup,Ct,Ye)}(R,K))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const _=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==_?_:ar(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=pc(e),_=pa(e);return this.sn(e).next(C=>d.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Rt.forEach(R,K=>{return _.put({indexId:K.indexId,uid:this.user.uid||"",sequenceNumber:C,readTime:lu((Ct=o).readTime),documentKey:tt(Ct.documentKey.path),largestBatchId:Ct.largestBatchId});var Ct})))}updateIndexEntries(e,t){const o=new Map;return Rt.forEach(t,(d,_)=>{const C=o.get(d.collectionGroup);return(C?Rt.resolve(C):this.getFieldIndexes(e,d.collectionGroup)).next(R=>(o.set(d.collectionGroup,R),Rt.forEach(R,K=>this.rn(e,d,K).next(J=>{const Re=this.on(_,K);return J.isEqual(Re)?Rt.resolve():this.un(e,_,J,Re)}))))})}an(e,t,o){return qc(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,documentKey:tt(t.key.path)})}cn(e,t,o){return qc(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,tt(t.key.path)])}rn(e,t,o){const d=qc(e);let _=new Wi(Ou);return d.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,tt(t.path)])},(C,R)=>{_=_.add(new fa(o.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>_)}on(e,t){let o=new Wi(Ou);const d=this.Ze(t,e);if(null==d)return o;const _=mr(t);if(null!=_){const C=e.data.field(_.fieldPath);if(ks(C))for(const R of C.arrayValue.values||[])o=o.add(new fa(t.indexId,e.key,this.He(R),d))}else o=o.add(new fa(t.indexId,e.key,Cr,d));return o}un(e,t,o,d){Wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const _=[];return function(C,R,K,J,Re){const Ye=C.getIterator(),Ct=R.getIterator();let Ut=ss(Ye),Xt=ss(Ct);for(;Ut||Xt;){let Un=!1,Br=!1;if(Ut&&Xt){const Js=K(Ut,Xt);Js<0?Br=!0:Js>0&&(Un=!0)}else null!=Ut?Br=!0:Un=!0;Un?(J(Xt),Xt=ss(Ct)):Br?(Re(Ut),Ut=ss(Ye)):(Ut=ss(Ye),Xt=ss(Ct))}}(o,d,Ou,C=>{_.push(this.an(e,t,C))},C=>{_.push(this.cn(e,t,C))}),Rt.waitFor(_)}sn(e){let t=1;return pa(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,_)=>{_.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,R)=>Ou(C,R)).filter((C,R,K)=>!R||0!==Ou(C,K[R-1]));const d=[];d.push(e);for(const C of o){const R=Ou(C,e),K=Ou(C,t);if(0===R)d[0]=e.ke();else if(R>0&&K<0)d.push(C),d.push(C.ke());else if(K>0)break}d.push(t);const _=[];for(let C=0;C<d.length;C+=2)_.push(IDBKeyRange.bound([d[C].indexId,this.uid,d[C].arrayValue,d[C].directionalValue,""],[d[C+1].indexId,this.uid,d[C+1].arrayValue,d[C+1].directionalValue,""]));return _}}function Cf(i){return oo(i,"collectionParents")}function qc(i){return oo(i,"indexEntries")}function pc(i){return oo(i,"indexConfiguration")}function pa(i){return oo(i,"indexState")}const Yc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Po{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Po(e,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Pu(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),_=[],C=IDBKeyRange.only(t.batchId);let R=0;const K=o.Wt({range:C},(Re,Ye,Ct)=>(R++,Ct.delete()));_.push(K.next(()=>{Kn(1===R)}));const J=[];for(const Re of t.mutations){const Ye=Ji(e,Re.key.path,t.batchId);_.push(d.delete(Ye)),J.push(Re.key)}return Rt.waitFor(_).next(()=>J)}function ga(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw An();e=i.noDocument}return JSON.stringify(e).length}Po.DEFAULT_COLLECTION_PERCENTILE=10,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Po.DEFAULT=new Po(41943040,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Po.DISABLED=new Po(-1,0,0);class Kc{constructor(e,t,o,d){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=d,this.hn={}}static Yt(e,t,o,d){Kn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Kc(_,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wl(e).Wt({index:"userMutationsIndex",range:o},(d,_,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const _=Zc(e),C=wl(e);return C.add({}).next(R=>{Kn("number"==typeof R);const K=new _h(R,t,o,d),J=function(Ct,Ut,Xt){const Un=Xt.baseMutations.map(Js=>Do(Ct.Jt,Js)),Br=Xt.mutations.map(Js=>Do(Ct.Jt,Js));return{userId:Ut,batchId:Xt.batchId,localWriteTimeMs:Xt.localWriteTime.toMillis(),baseMutations:Un,mutations:Br}}(this.M,this.userId,K),Re=[];let Ye=new Wi((Ct,Ut)=>ar(Ct.canonicalString(),Ut.canonicalString()));for(const Ct of d){const Ut=Ji(this.userId,Ct.key.path,R);Ye=Ye.add(Ct.key.path.popLast()),Re.push(C.put(J)),Re.push(_.put(Ut,To))}return Ye.forEach(Ct=>{Re.push(this.indexManager.addToCollectionParentIndex(e,Ct))}),e.addOnCommittedListener(()=>{this.hn[R]=K.keys()}),Rt.waitFor(Re).next(()=>K)})}lookupMutationBatch(e,t){return wl(e).get(t).next(o=>o?(Kn(o.userId===this.userId),uc(this.M,o)):null)}ln(e,t){return this.hn[t]?Rt.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.hn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let _=null;return wl(e).Wt({index:"userMutationsIndex",range:d},(C,R,K)=>{R.userId===this.userId&&(Kn(R.batchId>=o),_=uc(this.M,R)),K.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return wl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(d,_,C)=>{o=_.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wl(e).qt("userMutationsIndex",t).next(o=>o.map(d=>uc(this.M,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gn(this.userId,t.path),d=IDBKeyRange.lowerBound(o),_=[];return Zc(e).Wt({range:d},(C,R,K)=>{const[J,Re,Ye]=C,Ct=pn(Re);if(J===this.userId&&t.path.isEqual(Ct))return wl(e).get(Ye).next(Ut=>{if(!Ut)throw An();Kn(Ut.userId===this.userId),_.push(uc(this.M,Ut))});K.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Wi(ar);const d=[];return t.forEach(_=>{const C=Gn(this.userId,_.path),R=IDBKeyRange.lowerBound(C),K=Zc(e).Wt({range:R},(J,Re,Ye)=>{const[Ct,Ut,Xt]=J,Un=pn(Ut);Ct===this.userId&&_.path.isEqual(Un)?o=o.add(Xt):Ye.done()});d.push(K)}),Rt.waitFor(d).next(()=>this.fn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,_=Gn(this.userId,o),C=IDBKeyRange.lowerBound(_);let R=new Wi(ar);return Zc(e).Wt({range:C},(K,J,Re)=>{const[Ye,Ct,Ut]=K,Xt=pn(Ct);Ye===this.userId&&o.isPrefixOf(Xt)?Xt.length===d&&(R=R.add(Ut)):Re.done()}).next(()=>this.fn(e,R))}fn(e,t){const o=[],d=[];return t.forEach(_=>{d.push(wl(e).get(_).next(C=>{if(null===C)throw An();Kn(C.userId===this.userId),o.push(uc(this.M,C))}))}),Rt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Pu(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),Rt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Zc(e).Wt({range:o},(_,C,R)=>{if(_[0]===this.userId){const K=pn(_[1]);d.push(K)}else R.done()}).next(()=>{Kn(0===d.length)})})}containsKey(e,t){return Th(e,this.userId,t)}_n(e){return Sh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Th(i,e,t){const o=Gn(e,t.path),d=o[1],_=IDBKeyRange.lowerBound(o);let C=!1;return Zc(i).Wt({range:_,jt:!0},(R,K,J)=>{const[Re,Ye,Ct]=R;Re===e&&Ye===d&&(C=!0),J.done()}).next(()=>C)}function wl(i){return oo(i,"mutations")}function Zc(i){return oo(i,"documentMutations")}function Sh(i){return oo(i,"mutationQueues")}class qo{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new qo(0)}static gn(){return new qo(-1)}}class jd{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const o=new qo(t.highestTargetId);return t.highestTargetId=o.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>qn.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.yn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.pn(e,d)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(o=>(o.targetCount+=1,this.Tn(t,o),this.pn(e,o))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cu(e).delete(t.targetId)).next(()=>this.yn(e)).next(o=>(Kn(o.targetCount>0),o.targetCount-=1,this.pn(e,o)))}removeTargets(e,t,o){let d=0;const _=[];return cu(e).Wt((C,R)=>{const K=cc(R);K.sequenceNumber<=t&&null===o.get(K.targetId)&&(d++,_.push(this.removeTargetData(e,K)))}).next(()=>Rt.waitFor(_)).next(()=>d)}forEachTarget(e,t){return cu(e).Wt((o,d)=>{const _=cc(d);t(_)})}yn(e){return Ah(e).get("targetGlobalKey").next(t=>(Kn(null!==t),t))}pn(e,t){return Ah(e).put("targetGlobalKey",t)}In(e,t){return cu(e).put($d(this.M,t))}Tn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=zi(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let _=null;return cu(e).Wt({range:d,index:"queryTargetsIndex"},(C,R,K)=>{const J=cc(R);Nl(t,J.target)&&(_=J,K.done())}).next(()=>_)}addMatchingKeys(e,t,o){const d=[],_=$l(e);return t.forEach(C=>{const R=tt(C.path);d.push(_.put({targetId:o,path:R})),d.push(this.referenceDelegate.addReference(e,o,C))}),Rt.waitFor(d)}removeMatchingKeys(e,t,o){const d=$l(e);return Rt.forEach(t,_=>{const C=tt(_.path);return Rt.waitFor([d.delete([o,C]),this.referenceDelegate.removeReference(e,o,_)])})}removeMatchingKeysForTargetId(e,t){const o=$l(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=$l(e);let _=vi();return d.Wt({range:o,jt:!0},(C,R,K)=>{const J=pn(C[1]),Re=new an(J);_=_.add(Re)}).next(()=>_)}containsKey(e,t){const o=tt(t.path),d=IDBKeyRange.bound([o],[xo(o)],!1,!0);let _=0;return $l(e).Wt({index:"documentTargetsIndex",jt:!0,range:d},([C,R],K,J)=>{0!==C&&(_++,J.done())}).next(()=>_>0)}Et(e,t){return cu(e).get(t).next(o=>o?cc(o):null)}}function cu(i){return oo(i,"targets")}function Ah(i){return oo(i,"targetGlobal")}function $l(i){return oo(i,"targetDocuments")}function Ul(i){return up.apply(this,arguments)}function up(){return up=(0,_e.Z)(function*(i){if(i.code!==gt.FAILED_PRECONDITION||i.message!==_f)throw i;Wt("LocalStore","Unexpectedly lost primary lease")}),up.apply(this,arguments)}function cp([i,e],[t,o]){const d=ar(i,t);return 0===d?ar(e,o):d}class hg{constructor(e){this.En=e,this.buffer=new Wi(cp),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();cp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fg{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const o=this.Pn?3e5:6e4;Wt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,_e.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(d){Ru(d)?Wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield Ul(d)}yield t.vn(e)}))}}class pg{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Rt.resolve(Yt.A);const o=new hg(t);return this.Sn.forEachTarget(e,d=>o.bn(d.sequenceNumber)).next(()=>this.Sn.Cn(e,d=>o.bn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Sn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(Yc)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yc):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let o,d,_,C,R,K,J;const Re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ye=>(Ye>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ye}`),d=this.params.maximumSequenceNumbersToCollect):d=Ye,C=Date.now(),this.nthSequenceNumber(e,d))).next(Ye=>(o=Ye,R=Date.now(),this.removeTargets(e,o,t))).next(Ye=>(_=Ye,K=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ye=>(J=Date.now(),ua()<=rt.in.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-Re}ms\n\tDetermined least recently used ${d} in `+(R-C)+`ms\n\tRemoved ${_} targets in `+(K-R)+`ms\n\tRemoved ${Ye} documents in `+(J-K)+`ms\nTotal Duration: ${J-Re}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:_,documentsRemoved:Ye})))}}class dp{constructor(e,t){this.db=e,this.garbageCollector=new pg(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}Nn(e){let t=0;return this.Cn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(o,d)=>t(d))}addReference(e,t,o){return Df(e,o)}removeReference(e,t,o){return Df(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Df(e,t)}Mn(e,t){return function(o,d){let _=!1;return Sh(o).zt(C=>Th(o,C,d).next(R=>(R&&(_=!0),Rt.resolve(!R)))).next(()=>_)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let _=0;return this.kn(e,(C,R)=>{if(R<=t){const K=this.Mn(e,C).next(J=>{if(!J)return _++,o.getEntry(e,C).next(()=>(o.removeEntry(C,qn.min()),$l(e).delete([0,tt(C.path)])))});d.push(K)}}).next(()=>Rt.waitFor(d)).next(()=>o.apply(e)).next(()=>_)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Df(e,t)}kn(e,t){const o=$l(e);let d,_=Yt.A;return o.Wt({index:"documentTargetsIndex"},([C,R],{path:K,sequenceNumber:J})=>{0===C?(_!==Yt.A&&t(new an(pn(d)),_),_=J,d=K):_=Yt.A}).next(()=>{_!==Yt.A&&t(new an(pn(d)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Df(i,e){return $l(i).put((o=i.currentSequenceNumber,{targetId:0,path:tt(e.path),sequenceNumber:o}));var o}class hp{constructor(){this.changes=new Ca(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Rt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jm{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return gc(e).put(o)}removeEntry(e,t,o){return gc(e).delete(function(d,_){const C=d.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Bl(_),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.On(e,o)))}getEntry(e,t){let o=Vt.newInvalidDocument(t);return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mc(t))},(d,_)=>{o=this.Fn(t,_)}).next(()=>o)}$n(e,t){let o={size:0,document:Vt.newInvalidDocument(t)};return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mc(t))},(d,_)=>{o={document:this.Fn(t,_),size:ga(_)}}).next(()=>o)}getEntries(e,t){let o=zo();return this.Bn(e,t,(d,_)=>{const C=this.Fn(d,_);o=o.insert(d,C)}).next(()=>o)}Ln(e,t){let o=zo(),d=new Fi(an.comparator);return this.Bn(e,t,(_,C)=>{const R=this.Fn(_,C);o=o.insert(_,R),d=d.insert(_,ga(C))}).next(()=>({documents:o,Un:d}))}Bn(e,t,o){if(t.isEmpty())return Rt.resolve();let d=new Wi(mg);t.forEach(K=>d=d.add(K));const _=IDBKeyRange.bound(mc(d.first()),mc(d.last())),C=d.getIterator();let R=C.getNext();return gc(e).Wt({index:"documentKeyIndex",range:_},(K,J,Re)=>{const Ye=an.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;R&&mg(R,Ye)<0;)o(R,null),R=C.getNext();R&&R.isEqual(Ye)&&(o(R,J),R=C.hasNext()?C.getNext():null),R?Re.Ut(mc(R)):Re.done()}).next(()=>{for(;R;)o(R,null),R=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),Bl(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],_=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gc(e).qt(IDBKeyRange.bound(d,_,!0)).next(C=>{let R=zo();for(const K of C){const J=this.Fn(an.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);R=R.insert(J.key,J)}return R})}getAllFromCollectionGroup(e,t,o,d){let _=zo();const C=gg(t,o),R=gg(t,Fs.max());return gc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(K,J,Re)=>{const Ye=this.Fn(an.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);_=_.insert(Ye.key,Ye),_.size===d&&Re.done()}).next(()=>_)}newChangeBuffer(e){return new fp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Tf(e).get("remoteDocumentGlobalKey").next(t=>(Kn(!!t),t))}On(e,t){return Tf(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const o=function Bd(i,e){let t;if(e.document)t=xu(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=an.fromSegments(e.noDocument.path),d=qa(e.noDocument.readTime);t=Vt.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return An();{const o=an.fromSegments(e.unknownDocument.path),d=qa(e.unknownDocument.version);t=Vt.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Ti(o[0],o[1]);return qn.fromTimestamp(d)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(qn.min()))return o}return Vt.newInvalidDocument(e)}}class fp extends hp{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ca(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Wi((_,C)=>ar(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const R=this.Gn.get(_);if(t.push(this.qn.removeEntry(e,_,R.readTime)),C.isValidDocument()){const K=vh(this.qn.M,C);d=d.add(_.path.popLast()),o+=ga(K)-R.size,t.push(this.qn.addEntry(e,_,K))}else if(o-=R.size,this.trackRemovals){const K=vh(this.qn.M,C.convertToNoDocument(qn.min()));t.push(this.qn.addEntry(e,_,K))}}),d.forEach(_=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,_))}),t.push(this.qn.updateMetadata(e,o)),Rt.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:o,Un:d})=>(d.forEach((_,C)=>{this.Gn.set(_,{size:C,readTime:o.get(_).readTime})}),o))}}function Tf(i){return oo(i,"remoteDocumentGlobal")}function gc(i){return oo(i,"remoteDocumentsV14")}function mc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gg(i,e){const t=e.documentKey.path.toArray();return[i,Bl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mg(i,e){const t=i.path.length-e.path.length;return 0!==t?t:an.comparator(i,e)}class Hm{constructor(e){this.M=e}kt(e,t,o,d){const _=new yh("createOrUpgrade",t);var R;o<1&&d>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ur,{unique:!0}),R.createObjectStore("documentMutations"),yg(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=Rt.resolve();return o<3&&d>=3&&(0!==o&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),yg(e)),C=C.next(()=>function(R){const K=R.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return K.put("targetGlobalKey",J)}(_))),o<4&&d>=4&&(0!==o&&(C=C.next(()=>function(R,K){return K.store("mutations").qt().next(J=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ur,{unique:!0});const Re=K.store("mutations"),Ye=J.map(Ct=>Re.put(Ct));return Rt.waitFor(Ye)})}(e,_))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(C=C.next(()=>this.Kn(_))),o<6&&d>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(_)))),o<7&&d>=7&&(C=C.next(()=>this.jn(_))),o<8&&d>=8&&(C=C.next(()=>this.Wn(e,_))),o<9&&d>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(C=C.next(()=>this.zn(_))),o<11&&d>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(C=C.next(()=>{!function(R){const K=R.createObjectStore("documentOverlays",{keyPath:kd});K.createIndex("collectionPathOverlayIndex",mf,{unique:!1}),K.createIndex("collectionGroupOverlayIndex",dg,{unique:!1})}(e)})),o<13&&d>=13&&(C=C.next(()=>function(R){const K=R.createObjectStore("remoteDocumentsV14",{keyPath:_l});K.createIndex("documentKeyIndex",Uc),K.createIndex("collectionGroupIndex",So)}(e)).next(()=>this.Hn(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(C=C.next(()=>{!function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Wo}).createIndex("sequenceNumberIndex",Hc,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:Gc}).createIndex("documentKeyIndex",ph,{unique:!1})}(e)})),C}Qn(e){let t=0;return e.store("remoteDocuments").Wt((o,d)=>{t+=ga(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Kn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(d=>Rt.forEach(d,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",C).next(R=>Rt.forEach(R,K=>{Kn(K.userId===_.userId);const J=uc(this.M,K);return Pu(e,_.userId,J).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const _=[];return o.Wt((C,R)=>{const K=new Fr(C),J=[0,tt(K)];_.push(t.get(J).next(Re=>Re?Rt.resolve():t.put({targetId:0,path:tt(K),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Rt.waitFor(_))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:Mu});const o=t.store("collectionParents"),d=new If,_=C=>{if(d.add(C)){const R=C.lastSegment(),K=C.popLast();return o.put({collectionId:R,parent:tt(K)})}};return t.store("remoteDocuments").Wt({jt:!0},(C,R)=>{const K=new Fr(C);return _(K.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([C,R,K],J)=>{const Re=pn(R);return _(Re.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((o,d)=>{const _=cc(d),C=$d(this.M,_);return t.put(C)})}Hn(e,t){const o=t.store("remoteDocuments"),d=[];return o.Wt((_,C)=>{const R=t.store("remoteDocumentsV14"),K=(J=C,J.document?new an(Fr.fromString(J.document.name).popFirst(5)):J.noDocument?an.fromSegments(J.noDocument.path):J.unknownDocument?an.fromSegments(J.unknownDocument.path):An()).path.toArray();var J;const Re={prefixPath:K.slice(0,K.length-2),collectionGroup:K[K.length-2],documentId:K[K.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};d.push(R.put(Re))}).next(()=>Rt.waitFor(d))}}function yg(i){i.createObjectStore("targetDocuments",{keyPath:gf}).createIndex("documentTargetsIndex",Ta,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jc,{unique:!0}),i.createObjectStore("targetGlobal")}const Ya="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pp{constructor(e,t,o,d,_,C,R,K,J,Re,Ye=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Jn=_,this.window=C,this.document=R,this.Yn=J,this.Xn=Re,this.Zn=Ye,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=Ct=>Promise.resolve(),!pp.vt())throw new A(gt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dp(this,d),this.cs=t+"main",this.M=new lc(K),this.hs=new ha(this.cs,this.Zn,new Hm(this.M)),this.ls=new jd(this.referenceDelegate,this.M),this.fs=new jm(this.M),this.ds=new ap,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===Re&&Di("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(gt.FAILED_PRECONDITION,Ya);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Yt(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var o=(0,_e.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,_e.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Ru(e))return Wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Qc(e).get("owner").next(t=>Rt.resolve(this.bs(t)))}Ps(e){return xh(e).delete(this.clientId)}Vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=oo(o,"clientMetadata");return d.qt().next(_=>{const C=e.Ss(_,18e5),R=_.filter(K=>-1===C.indexOf(K));return Rt.forEach(R,K=>d.delete(K.clientId)).next(()=>R)})}).catch(()=>[]);if(e._s)for(const o of t)e._s.removeItem(e.Ds(o.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Rt.resolve(!0):Qc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new A(gt.FAILED_PRECONDITION,Ya);return!1}}return!(!this.networkEnabled||!this.inForeground)||xh(e).qt().next(o=>void 0===this.Ss(o,5e3).find(d=>{if(this.clientId!==d.clientId){const C=!this.inForeground&&d.inForeground,R=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||C&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Vd(t,Yt.A);return e.As(o).next(()=>e.Ps(o))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(o=>this.vs(o.updateTimeMs,t)&&!this.Cs(o.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>xh(e).qt().next(t=>this.Ss(t,18e5).map(o=>o.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Kc.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Dh(e)}getDocumentOverlayCache(e){return bh.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,o){Wt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",_=14===(C=this.Zn)?mh:13===C?gh:12===C?Fd:11===C?yf:void An();var C;let R;return this.hs.runTransaction(e,d,_,K=>(R=new Vd(K,this.ts?this.ts.next():Yt.A),"readwrite-primary"===t?this.Ts(R).next(J=>!!J||this.Es(R)).next(J=>{if(!J)throw Di(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new A(gt.FAILED_PRECONDITION,_f);return o(R)}).next(J=>this.Rs(R).next(()=>J)):this.Fs(R).next(()=>o(R)))).then(K=>(R.raiseOnCommittedEvent(),K))}Fs(e){return Qc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new A(gt.FAILED_PRECONDITION,Ya)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put("owner",t)}static vt(){return ha.vt()}As(e){const t=Qc(e);return t.get("owner").next(o=>this.bs(o)?(Wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rt.resolve())}vs(e,t){const o=Date.now();return!(e<o-t||e>o&&(Di(`Detected an update time that is in the future: ${e} > ${o}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,_t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const o=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Wt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Di("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Di("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(i){return oo(i,"owner")}function xh(i){return oo(i,"clientMetadata")}function gp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class _g{constructor(e,t,o){this.fs=e,this.$s=t,this.indexManager=o}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Ls(e,t,o))}Ls(e,t,o){return this.fs.getEntry(e,t).next(d=>{for(const _ of o)_.applyToLocalView(d);return d})}Us(e,t){e.forEach((o,d)=>{for(const _ of t)_.applyToLocalView(d)})}qs(e,t){return this.fs.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.Us(t,o))}Ks(e,t,o){return an.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.Qs(e,t.path):kl(t)?this.js(e,t,o):this.Ws(e,t,o);var d}Qs(e,t){return this.Bs(e,new an(t)).next(o=>{let d=Da();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}js(e,t,o){const d=t.collectionGroup;let _=Da();return this.indexManager.getCollectionParents(e,d).next(C=>Rt.forEach(C,R=>{const K=(J=t,Re=R.child(d),new ta(Re,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,Re;return this.Ws(e,K,o).next(J=>{J.forEach((Re,Ye)=>{_=_.insert(Re,Ye)})})}).next(()=>_))}Ws(e,t,o){let d;return this.fs.getAllFromCollection(e,t.path,o).next(_=>(d=_,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(_=>{for(const C of _)for(const R of C.mutations){const K=R.key;let J=d.get(K);null==J&&(J=Vt.newInvalidDocument(K),d=d.insert(K,J)),Ll(R,J,C.localWriteTime),J.isFoundDocument()||(d=d.remove(K))}}).next(()=>(d.forEach((_,C)=>{Yu(t,C)||(d=d.remove(_))}),d))}}class jl{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.zs=o,this.Hs=d}static Js(e,t){let o=vi(),d=vi();for(const _ of t.docChanges)switch(_.type){case 0:o=o.add(_.doc.key);break;case 1:d=d.add(_.doc.key)}return new jl(e,t.fromCache,o,d)}}class Mh{Ys(e){this.Xs=e}Ks(e,t,o,d){return 0===(_=t).filters.length&&null===_.limit&&null==_.startAt&&null==_.endAt&&(0===_.explicitOrderBy.length||1===_.explicitOrderBy.length&&_.explicitOrderBy[0].field.isKeyField())||o.isEqual(qn.min())?this.Zs(e,t):this.Xs.qs(e,d).next(_=>{const C=this.ti(t,_);return(Tc(t)||Sc(t))&&this.ei(t.limitType,C,d,o)?this.Zs(e,t):(ua()<=rt.in.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Tu(t)),this.Xs.Ks(e,t,so(o,-1)).next(R=>(C.forEach(K=>{R=R.insert(K.key,K)}),R)))});var _}ti(e,t){let o=new Wi(wd(e));return t.forEach((d,_)=>{Yu(e,_)&&(o=o.add(_))}),o}ei(e,t,o,d){if(o.size!==t.size)return!0;const _="F"===e?t.last():t.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(d)>0)}Zs(e,t){return ua()<=rt.in.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",Tu(t)),this.Xs.Ks(e,t,Fs.min())}}class vg{constructor(e,t,o,d){this.persistence=e,this.ni=t,this.M=d,this.si=new Fi(ar),this.ii=new Ca(_=>zi(_),Nl),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(o)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new _g(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Sf(i,e,t,o){return new vg(i,e,t,o)}function Af(i,e){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,_e.Z)(function*(i,e){const t=cn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.$s.getAllMutationBatches(o).next(_=>(d=_,t.ui(e),t.$s.getAllMutationBatches(o))).next(_=>{const C=[],R=[];let K=vi();for(const J of d){C.push(J.batchId);for(const Re of J.mutations)K=K.add(Re.key)}for(const J of _){R.push(J.batchId);for(const Re of J.mutations)K=K.add(Re.key)}return t.ai.qs(o,K).next(J=>({ci:J,removedBatchIds:C,addedBatchIds:R}))})})}),Rh.apply(this,arguments)}function xf(i,e){const t=cn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),_=t.oi.newChangeBuffer({trackRemovals:!0});return function(C,R,K,J){const Re=K.batch,Ye=Re.keys();let Ct=Rt.resolve();return Ye.forEach(Ut=>{Ct=Ct.next(()=>J.getEntry(R,Ut)).next(Xt=>{const Un=K.docVersions.get(Ut);Kn(null!==Un),Xt.version.compareTo(Un)<0&&(Re.applyToRemoteDocument(Xt,K),Xt.isValidDocument()&&(Xt.setReadTime(K.commitVersion),J.addEntry(Xt)))})}),Ct.next(()=>C.$s.removeMutationBatch(R,Re))}(t,o,e,_).next(()=>_.apply(o)).next(()=>t.$s.performConsistencyCheck(o)).next(()=>t.ai.qs(o,d))})}function mp(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function Nu(i,e){const t=cn(i),o=e.snapshotVersion;let d=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=t.oi.newChangeBuffer({trackRemovals:!0});d=t.si;const R=[];e.targetChanges.forEach((J,Re)=>{const Ye=d.get(Re);if(!Ye)return;R.push(t.ls.removeMatchingKeys(_,J.removedDocuments,Re).next(()=>t.ls.addMatchingKeys(_,J.addedDocuments,Re)));let Ct=Ye.withSequenceNumber(_.currentSequenceNumber);var Ut,Xt,Un;e.targetMismatches.has(Re)?Ct=Ct.withResumeToken(hs.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):J.resumeToken.approximateByteSize()>0&&(Ct=Ct.withResumeToken(J.resumeToken,o)),d=d.insert(Re,Ct),Xt=Ct,Un=J,(0===(Ut=Ye).resumeToken.approximateByteSize()||Xt.snapshotVersion.toMicroseconds()-Ut.snapshotVersion.toMicroseconds()>=3e8||Un.addedDocuments.size+Un.modifiedDocuments.size+Un.removedDocuments.size>0)&&R.push(t.ls.updateTargetData(_,Ct))});let K=zo();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(_,J))}),R.push(Mf(_,C,e.documentUpdates).next(J=>{K=J})),!o.isEqual(qn.min())){const J=t.ls.getLastRemoteSnapshotVersion(_).next(Re=>t.ls.setTargetsMetadata(_,_.currentSequenceNumber,o));R.push(J)}return Rt.waitFor(R).next(()=>C.apply(_)).next(()=>t.ai.Gs(_,K)).next(()=>K)}).then(_=>(t.si=d,_))}function Mf(i,e,t){let o=vi();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let _=zo();return t.forEach((C,R)=>{const K=d.get(C);R.isNoDocument()&&R.version.isEqual(qn.min())?(e.removeEntry(C,R.readTime),_=_.insert(C,R)):!K.isValidDocument()||R.version.compareTo(K.version)>0||0===R.version.compareTo(K.version)&&K.hasPendingWrites?(e.addEntry(R),_=_.insert(C,R)):Wt("LocalStore","Ignoring outdated watch update for ",C,". Current version:",K.version," Watch version:",R.version)}),_})}function Eg(i,e){const t=cn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(o,e)))}function ku(i,e){const t=cn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.ls.getTargetData(o,e).next(_=>_?(d=_,Rt.resolve(d)):t.ls.allocateTargetId(o).next(C=>(d=new bl(e,C,0,o.currentSequenceNumber),t.ls.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.si.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.si=t.si.insert(o.targetId,o),t.ii.set(e,o.targetId)),o})}function Xc(i,e,t){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,_e.Z)(function*(i,e,t){const o=cn(i),d=o.si.get(e),_=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",_,C=>o.persistence.referenceDelegate.removeTarget(C,d)))}catch(C){if(!Ru(C))throw C;Wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.si=o.si.remove(e),o.ii.delete(d.target)}),Oh.apply(this,arguments)}function Ph(i,e,t){const o=cn(i);let d=qn.min(),_=vi();return o.persistence.runTransaction("Execute query","readonly",C=>function(R,K,J){const Re=cn(R),Ye=Re.ii.get(J);return void 0!==Ye?Rt.resolve(Re.si.get(Ye)):Re.ls.getTargetData(K,J)}(o,C,wo(e)).next(R=>{if(R)return d=R.lastLimboFreeSnapshotVersion,o.ls.getMatchingKeysForTargetId(C,R.targetId).next(K=>{_=K})}).next(()=>o.ni.Ks(C,e,t?d:qn.min(),t?_:vi())).next(R=>(yc(o,Ku(e),R),{documents:R,hi:_})))}function bg(i,e){const t=cn(i),o=cn(t.ls),d=t.si.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",_=>o.Et(_,e).next(C=>C?C.target:null))}function Hd(i,e){const t=cn(i),o=t.ri.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.oi.getAllFromCollectionGroup(d,e,so(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(yc(t,e,d),d))}function yc(i,e,t){let o=qn.min();t.forEach((d,_)=>{_.readTime.compareTo(o)>0&&(o=_.readTime)}),i.ri.set(e,o)}function Fu(){return Fu=(0,_e.Z)(function*(i,e,t,o){const d=cn(i);let _=vi(),C=zo();for(const J of t){const Re=e.li(J.metadata.name);J.document&&(_=_.add(Re));const Ye=e.fi(J);Ye.setReadTime(e.di(J.metadata.readTime)),C=C.insert(Re,Ye)}const R=d.oi.newChangeBuffer({trackRemovals:!0}),K=yield ku(d,(J=o,wo(Cu(Fr.fromString(`__bundle__/docs/${J}`)))));var J;return d.persistence.runTransaction("Apply bundle documents","readwrite",J=>Mf(J,R,C).next(Re=>(R.apply(J),Re)).next(Re=>d.ls.removeMatchingKeysForTargetId(J,K.targetId).next(()=>d.ls.addMatchingKeys(J,_,K.targetId)).next(()=>d.ai.Gs(J,Re)).next(()=>Re)))}),Fu.apply(this,arguments)}function Jc(i,e){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,_e.Z)(function*(i,e,t=vi()){const o=yield ku(i,wo(Ud(e.bundledQuery))),d=cn(i);return d.persistence.runTransaction("Save named query","readwrite",_=>{const C=Zs(e.readTime);if(o.snapshotVersion.compareTo(C)>=0)return d.ds.saveNamedQuery(_,e);const R=o.withResumeToken(hs.EMPTY_BYTE_STRING,C);return d.si=d.si.insert(R.targetId,R),d.ls.updateTargetData(_,R).next(()=>d.ls.removeMatchingKeysForTargetId(_,o.targetId)).next(()=>d.ls.addMatchingKeys(_,t,o.targetId)).next(()=>d.ds.saveNamedQuery(_,e))})}),Lu.apply(this,arguments)}class wg{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return Rt.resolve(this._i.get(t))}saveBundleMetadata(e,t){var o;return this._i.set(t.id,{id:(o=t).id,version:o.version,createTime:Zs(o.createTime)}),Rt.resolve()}getNamedQuery(e,t){return Rt.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(o=t).name,query:Ud(o.bundledQuery),readTime:Zs(o.readTime)}),Rt.resolve();var o}}class yp{constructor(){this.overlays=new Fi(an.comparator),this.mi=new Map}getOverlay(e,t){return Rt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((d,_)=>{this.Xt(e,t,_)}),Rt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.mi.get(o);return void 0!==d&&(d.forEach(_=>this.overlays=this.overlays.remove(_)),this.mi.delete(o)),Rt.resolve()}getOverlaysForCollection(e,t,o){const d=ml(),_=t.length+1,C=new an(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const K=R.getNext().value,J=K.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===_&&K.largestBatchId>o&&d.set(K.getKey(),K)}return Rt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let _=new Fi((J,Re)=>J-Re);const C=this.overlays.getIterator();for(;C.hasNext();){const J=C.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let Re=_.get(J.largestBatchId);null===Re&&(Re=ml(),_=_.insert(J.largestBatchId,Re)),Re.set(J.getKey(),J)}}const R=ml(),K=_.getIterator();for(;K.hasNext()&&(K.getNext().value.forEach((J,Re)=>R.set(J,Re)),!(R.size()>=d)););return Rt.resolve(R)}Xt(e,t,o){if(null===o)return;const d=this.overlays.get(o.key);if(null!==d){const C=this.mi.get(d.largestBatchId).delete(o.key);this.mi.set(d.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new El(t,o));let _=this.mi.get(t);void 0===_&&(_=vi(),this.mi.set(t,_)),this.mi.set(t,_.add(o.key))}}class Nh{constructor(){this.gi=new Wi(os.yi),this.pi=new Wi(os.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const o=new os(e,t);this.gi=this.gi.add(o),this.pi=this.pi.add(o)}Ti(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ei(new os(e,t))}Ai(e,t){e.forEach(o=>this.removeReference(o,t))}Ri(e){const t=new an(new Fr([])),o=new os(t,e),d=new os(t,e+1),_=[];return this.pi.forEachInRange([o,d],C=>{this.Ei(C),_.push(C.key)}),_}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new an(new Fr([])),o=new os(t,e),d=new os(t,e+1);let _=vi();return this.pi.forEachInRange([o,d],C=>{_=_.add(C.key)}),_}containsKey(e){const t=new os(e,0),o=this.gi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return an.comparator(e.key,t.key)||ar(e.Vi,t.Vi)}static Ii(e,t){return ar(e.Vi,t.Vi)||an.comparator(e.key,t.key)}}class po{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Wi(os.yi)}checkEmpty(e){return Rt.resolve(0===this.$s.length)}addMutationBatch(e,t,o,d){const _=this.vi;this.vi++;const C=new _h(_,t,o,d);this.$s.push(C);for(const R of d)this.Si=this.Si.add(new os(R.key,_)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Rt.resolve(C)}lookupMutationBatch(e,t){return Rt.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.Ci(t+1),_=d<0?0:d;return Rt.resolve(this.$s.length>_?this.$s[_]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Rt.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),d=new os(t,Number.POSITIVE_INFINITY),_=[];return this.Si.forEachInRange([o,d],C=>{const R=this.Di(C.Vi);_.push(R)}),Rt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Wi(ar);return t.forEach(d=>{const _=new os(d,0),C=new os(d,Number.POSITIVE_INFINITY);this.Si.forEachInRange([_,C],R=>{o=o.add(R.Vi)})}),Rt.resolve(this.xi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let _=o;an.isDocumentKey(_)||(_=_.child(""));const C=new os(new an(_),0);let R=new Wi(ar);return this.Si.forEachWhile(K=>{const J=K.key.path;return!!o.isPrefixOf(J)&&(J.length===d&&(R=R.add(K.Vi)),!0)},C),Rt.resolve(this.xi(R))}xi(e){const t=[];return e.forEach(o=>{const d=this.Di(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){Kn(0===this.Ni(t.batchId,"removed")),this.$s.shift();let o=this.Si;return Rt.forEach(t.mutations,d=>{const _=new os(d.key,t.batchId);return o=o.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Si=o})}dn(e){}containsKey(e,t){const o=new os(t,0),d=this.Si.firstAfterOrEqual(o);return Rt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Rt.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class ma{constructor(e){this.ki=e,this.docs=new Fi(an.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),_=d?d.size:0,C=this.ki(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Rt.resolve(o?o.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let o=zo();return t.forEach(d=>{const _=this.docs.get(d);o=o.insert(d,_?_.document.mutableCopy():Vt.newInvalidDocument(d))}),Rt.resolve(o)}getAllFromCollection(e,t,o){let d=zo();const _=new an(t.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:R,value:{document:K}}=C.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||al(Wr(K),o)<=0||(d=d.insert(K.key,K.mutableCopy()))}return Rt.resolve(d)}getAllFromCollectionGroup(e,t,o,d){An()}Mi(e,t){return Rt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Vu(this)}getSize(e){return Rt.resolve(this.size)}}class Vu extends hp{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.qn.addEntry(e,d)):this.qn.removeEntry(o)}),Rt.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Ig{constructor(e){this.persistence=e,this.Oi=new Ca(t=>zi(t),Nl),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Nh,this.targetCount=0,this.Bi=qo.mn()}forEachTarget(e,t){return this.Oi.forEach((o,d)=>t(d)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Fi&&(this.Fi=t),Rt.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,Rt.resolve()}updateTargetData(e,t){return this.In(t),Rt.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,t,o){let d=0;const _=[];return this.Oi.forEach((C,R)=>{R.sequenceNumber<=t&&null===o.get(R.targetId)&&(this.Oi.delete(C),_.push(this.removeMatchingKeysForTargetId(e,R.targetId)),d++)}),Rt.waitFor(_).next(()=>d)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Oi.get(t)||null;return Rt.resolve(o)}addMatchingKeys(e,t,o){return this.$i.Ti(t,o),Rt.resolve()}removeMatchingKeys(e,t,o){this.$i.Ai(t,o);const d=this.persistence.referenceDelegate,_=[];return d&&t.forEach(C=>{_.push(d.markPotentiallyOrphaned(e,C))}),Rt.waitFor(_)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),Rt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.$i.Pi(t);return Rt.resolve(o)}containsKey(e,t){return Rt.resolve(this.$i.containsKey(t))}}class _p{constructor(e,t){this.Li={},this.overlays={},this.ts=new Yt(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Ig(this),this.indexManager=new Um,this.fs=new ma(o=>this.referenceDelegate.Ui(o)),this.M=new lc(t),this.ds=new wg(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Li[e.toKey()];return o||(o=new po(t,this.referenceDelegate),this.Li[e.toKey()]=o),o}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,o){Wt("MemoryPersistence","Starting transaction:",e);const d=new Gm(this.ts.next());return this.referenceDelegate.qi(),o(d).next(_=>this.referenceDelegate.Gi(d).next(()=>_)).toPromise().then(_=>(d.raiseOnCommittedEvent(),_))}Ki(e,t){return Rt.or(Object.values(this.Li).map(o=>()=>o.containsKey(e,t)))}}class Gm extends zc{constructor(e){super(),this.currentSequenceNumber=e}}class kh{constructor(e){this.persistence=e,this.Qi=new Nh,this.ji=null}static Wi(e){return new kh(e)}get zi(){if(this.ji)return this.ji;throw An()}addReference(e,t,o){return this.Qi.addReference(o,t),this.zi.delete(o.toString()),Rt.resolve()}removeReference(e,t,o){return this.Qi.removeReference(o,t),this.zi.add(o.toString()),Rt.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),Rt.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(d=>this.zi.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(_=>this.zi.add(_.toString()))}).next(()=>o.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.zi,o=>{const d=an.fromPath(o);return this.Hi(e,d).next(_=>{_||t.removeEntry(d,qn.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(o=>{o?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return Rt.or([()=>Rt.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Of(i,e){return`firestore_clients_${i}_${e}`}function vp(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Fh(i,e){return`firestore_targets_${i}_${e}`}class Lh{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Ji(e,t,o){const d=JSON.parse(o);let _,C="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return C&&d.error&&(C="string"==typeof d.error.message&&"string"==typeof d.error.code,C&&(_=new A(d.error.code,d.error.message))),C?new Lh(e,t,d.state,_):(Di("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let d,_="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return _&&o.error&&(_="string"==typeof o.error.message&&"string"==typeof o.error.code,_&&(d=new A(o.error.code,o.error.message))),_?new ed(e,o.state,d):(Di("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class No{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,_=Md();for(let C=0;d&&C<o.activeTargetIds.length;++C)d=Eu(o.activeTargetIds[C]),_=_.add(o.activeTargetIds[C]);return d?new No(e,_):(Di("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vh{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vh(t.clientId,t.onlineState):(Di("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bh{constructor(){this.activeTargetIds=Md()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class td{constructor(e,t,o,d,_){this.window=e,this.Jn=t,this.persistenceKey=o,this.tr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Fi(ar),this.started=!1,this.ir=[];const C=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.rr=Of(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Bh),this.ar=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Os();for(const d of t){if(d===e.tr)continue;const _=e.getItem(Of(e.persistenceKey,d));if(_){const C=No.Ji(d,_);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const o=e.storage.getItem(e.lr);if(o){const d=e.wr(o);d&&e.mr(d)}for(const d of e.ir)e.nr(d);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Fh(this.persistenceKey,e));if(o){const d=ed.Ji(e,o);d&&(t=d.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.pr(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Wt("SharedClientState","READ",e,t),t}setItem(e,t){Wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Wt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Di("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==o.key)if(t.ar.test(o.key)){if(null==o.newValue){const d=t.Rr(o.key);return t.br(d,null)}{const d=t.Pr(o.key,o.newValue);if(d)return t.br(d.clientId,d)}}else if(t.cr.test(o.key)){if(null!==o.newValue){const d=t.Vr(o.key,o.newValue);if(d)return t.vr(d)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const d=t.Sr(o.key,o.newValue);if(d)return t.Dr(d)}}else if(o.key===t.lr){if(null!==o.newValue){const d=t.wr(o.newValue);if(d)return t.mr(d)}}else if(o.key===t.ur){const d=function(_){let C=Yt.A;if(null!=_)try{const R=JSON.parse(_);Kn("number"==typeof R),C=R}catch(R){Di("SharedClientState","Failed to read sequence number from WebStorage",R)}return C}(o.newValue);d!==Yt.A&&t.sequenceNumberHandler(d)}else if(o.key===t.dr){const d=t.Cr(o.newValue);yield Promise.all(d.map(_=>t.syncEngine.Nr(_)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const d=new Lh(this.currentUser,e,t,o),_=vp(this.persistenceKey,this.currentUser,e);this.setItem(_,d.Yi())}pr(e){const t=vp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const d=Fh(this.persistenceKey,e),_=new ed(e,t,o);this.setItem(d,_.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return No.Ji(o,t)}Vr(e,t){const o=this.cr.exec(e),d=Number(o[1]);return Lh.Ji(new As(void 0!==o[2]?o[2]:null),d,t)}Sr(e,t){const o=this.hr.exec(e),d=Number(o[1]);return ed.Ji(d,t)}wr(e){return Vh.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),d=this.gr(this.sr),_=this.gr(o),C=[],R=[];return _.forEach(K=>{d.has(K)||C.push(K)}),d.forEach(K=>{_.has(K)||R.push(K)}),this.syncEngine.Or(C,R).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Md();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Cg{constructor(){this.Fr=new Bh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Bh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Pf{Br(e){}shutdown(){}}class Dg{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Tg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class $h{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Nf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,d,_){const C=this.oo(e,t);Wt("RestConnection","Sending: ",C,o);const R={};return this.uo(R,d,_),this.ao(e,C,R,o).then(K=>(Wt("RestConnection","Received: ",K),K),K=>{throw ns("RestConnection",`${e} failed with error: `,K,"url: ",C,"request:",o),K})}co(e,t,o,d,_){return this.ro(e,t,o,d,_)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+jo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,_)=>e[_]=d),o&&o.headers.forEach((d,_)=>e[_]=d)}oo(e,t){return`${this.so}/v1/${t}:${Tg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,o,d){return new Promise((_,C)=>{const R=new la;R.listenOnce(Pa.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case Eo.NO_ERROR:const J=R.getResponseJson();Wt("Connection","XHR received:",JSON.stringify(J)),_(J);break;case Eo.TIMEOUT:Wt("Connection",'RPC "'+e+'" timed out'),C(new A(gt.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:const Re=R.getStatus();if(Wt("Connection",'RPC "'+e+'" failed with status:',Re,"response text:",R.getResponseText()),Re>0){const Ye=R.getResponseJson().error;if(Ye&&Ye.status&&Ye.message){const Ct=function(Ut){const Xt=Ut.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(Xt)>=0?Xt:gt.UNKNOWN}(Ye.status);C(new A(Ct,Ye.message))}else C(new A(gt.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new A(gt.UNAVAILABLE,"Connection failed."));break;default:An()}}finally{Wt("Connection",'RPC "'+e+'" completed.')}});const K=JSON.stringify(d);R.send(t,"POST",K,o,15)})}ho(e,t,o){const d=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=$o(),C=wr(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new vs({})),this.uo(R.initMessageHeaders,t,o),(0,_t.uI)()||(0,_t.b$)()||(0,_t.d)()||(0,_t.w1)()||(0,_t.Mn)()||(0,_t.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");const K=d.join("");Wt("Connection","Creating WebChannel: "+K,R);const J=_.createWebChannel(K,R);let Re=!1,Ye=!1;const Ct=new $h({jr:Xt=>{Ye?Wt("Connection","Not sending because WebChannel is closed:",Xt):(Re||(Wt("Connection","Opening WebChannel transport."),J.open(),Re=!0),Wt("Connection","WebChannel sending:",Xt),J.send(Xt))},Wr:()=>J.close()}),Ut=(Xt,Un,Br)=>{Xt.listen(Un,Js=>{try{Br(Js)}catch(ii){setTimeout(()=>{throw ii},0)}})};return Ut(J,Ss.EventType.OPEN,()=>{Ye||Wt("Connection","WebChannel transport opened.")}),Ut(J,Ss.EventType.CLOSE,()=>{Ye||(Ye=!0,Wt("Connection","WebChannel transport closed"),Ct.eo())}),Ut(J,Ss.EventType.ERROR,Xt=>{Ye||(Ye=!0,ns("Connection","WebChannel transport errored:",Xt),Ct.eo(new A(gt.UNAVAILABLE,"The operation could not be completed")))}),Ut(J,Ss.EventType.MESSAGE,Xt=>{var Un;if(!Ye){const Br=Xt.data[0];Kn(!!Br);const Js=Br,ii=Js.error||(null===(Un=Js[0])||void 0===Un?void 0:Un.error);if(ii){Wt("Connection","WebChannel received error:",ii);const lo=ii.status;let Vs=function(ji){const Qa=Is[ji];if(void 0!==Qa)return Xu(Qa)}(lo),Ps=ii.message;void 0===Vs&&(Vs=gt.INTERNAL,Ps="Unknown error status: "+lo+" with message "+ii.message),Ye=!0,Ct.eo(new A(Vs,Ps)),J.close()}else Wt("Connection","WebChannel received:",Br),Ct.no(Br)}}),Ut(C,pi.STAT_EVENT,Xt=>{Xt.stat===Uo.PROXY?Wt("Connection","Detected buffering proxy"):Xt.stat===Uo.NOPROXY&&Wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ct.Zr()},0),Ct}}function kf(){return"undefined"!=typeof window?window:null}function Uh(){return"undefined"!=typeof document?document:null}function Gd(i){return new ec(i,!0)}class jh{constructor(e,t,o=1e3,d=1.5,_=6e4){this.Jn=e,this.timerId=t,this.lo=o,this.fo=d,this._o=_,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),d=Math.max(0,t-o);d>0&&Wt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,d,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Ff{constructor(e,t,o,d,_,C,R,K){this.Jn=e,this.Ao=o,this.Ro=d,this.bo=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=K,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new jh(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var o=this;return(0,_e.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===gt.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===gt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Po===t&&this.Uo(o,d)},o=>{e(()=>{const d=new A(gt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(d)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(d=>{o(()=>this.qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return Wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ep extends Ff{constructor(e,t,o,d,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,C),this.M=_}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Pd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(K=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===K?1:"REMOVE"===K?2:"CURRENT"===K?3:"RESET"===K?4:An(),d=e.targetChange.targetIds||[],_=function(K,J){return K.N?(Kn(void 0===J||"string"==typeof J),hs.fromBase64String(J||"")):(Kn(void 0===J||J instanceof Uint8Array),hs.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(K){const J=void 0===K.code?gt.UNKNOWN:Xu(K.code);return new A(J,K.message||"")}(C);t=new Wa(o,d,_,R||null)}else if("documentChange"in e){const o=e.documentChange,d=na(i,o.document.name),_=Zs(o.document.updateTime),C=new it({mapValue:{fields:o.document.fields}}),R=Vt.newFoundDocument(d,_,C);t=new Os(o.targetIds||[],o.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const o=e.documentDelete,d=na(i,o.document),_=o.readTime?Zs(o.readTime):qn.min(),C=Vt.newNoDocument(d,_);t=new Os([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,d=na(i,o.document);t=new Os([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return An();{const o=e.filter,_=new ff(o.count||0);t=new Au(o.targetId,_)}}var K;return t}(this.M,e),o=function(d){if(!("targetChange"in d))return qn.min();const _=d.targetChange;return _.targetIds&&_.targetIds.length?qn.min():_.readTime?Zs(_.readTime):qn.min()}(e);return this.listener.Ko(t,o)}Qo(e){const t={};t.database=rc(this.M),t.addTarget=function(d,_){let C;const R=_.target;return C=Va(R)?{documents:$c(d,R)}:{query:dh(d,R)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=tc(d,_.resumeToken):_.snapshotVersion.compareTo(qn.min())>0&&(C.readTime=su(d,_.snapshotVersion.toTimestamp())),C}(this.M,e);const o=function hh(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return An()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Oo(t)}jo(e){const t={};t.database=rc(this.M),t.removeTarget=e,this.Oo(t)}}class Sg extends Ff{constructor(e,t,o,d,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,C),this.M=_,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Kn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function sc(i,e){return i&&i.length>0?(Kn(void 0!==e),i.map(t=>function(o,d){let _=Zs(o.updateTime?o.updateTime:d);return _.isEqual(qn.min())&&(_=Zs(d)),new sp(_,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Zs(e.commitTime);return this.listener.Jo(o,t)}return Kn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=rc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Do(this.M,o))};this.Oo(t)}}class bp extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=d,this.Zo=!1}tu(){if(this.Zo)throw new A(gt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,_])=>this.bo.ro(e,t,o,d,_)).catch(d=>{throw"FirebaseError"===d.name?(d.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new A(gt.UNKNOWN,d.toString())})}co(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,_])=>this.bo.co(e,t,o,d,_)).catch(d=>{throw"FirebaseError"===d.name?(d.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new A(gt.UNKNOWN,d.toString())})}terminate(){this.Zo=!0}}class wp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Di(t),this.su=!1):Wt("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Ip{constructor(e,t,o,d,_){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=_,this.du.Br(R=>{o.enqueueAndForget((0,_e.Z)(function*(){var K;a(C)&&(Wt("RemoteStore","Restarting streams for network reachability change."),yield(K=(0,_e.Z)(function*(J){const Re=cn(J);Re.lu.add(4),yield Bu(Re),Re._u.set("Unknown"),Re.lu.delete(4),yield zd(Re)}),function(J){return K.apply(this,arguments)})(C))}))}),this._u=new wp(o,d)}}function zd(i){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,_e.Z)(function*(i){if(a(i))for(const e of i.fu)yield e(!0)}),Ka.apply(this,arguments)}function Bu(i){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,_e.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Lf.apply(this,arguments)}function Hh(i,e){const t=cn(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),l(t)?h(t):nd(t).Co()&&zh(t,e))}function Gh(i,e){const t=cn(i),o=nd(t);t.hu.delete(e),o.Co()&&Cp(t,e),0===t.hu.size&&(o.Co()?o.ko():a(t)&&t._u.set("Unknown"))}function zh(i,e){i.wu.Z(e.targetId),nd(i).Qo(e)}function Cp(i,e){i.wu.Z(e),nd(i).jo(e)}function h(i){i.wu=new fo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.hu.get(e)||null}),nd(i).start(),i._u.iu()}function l(i){return a(i)&&!nd(i).Do()&&i.hu.size>0}function a(i){return 0===cn(i).lu.size}function p(i){i.wu=void 0}function b(i){return M.apply(this,arguments)}function M(){return M=(0,_e.Z)(function*(i){i.hu.forEach((e,t)=>{zh(i,e)})}),M.apply(this,arguments)}function j(i,e){return re.apply(this,arguments)}function re(){return re=(0,_e.Z)(function*(i,e){p(i),l(i)?(i._u.uu(e),h(i)):i._u.set("Unknown")}),re.apply(this,arguments)}function Ee(i,e,t){return $e.apply(this,arguments)}function $e(){return $e=(0,_e.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Wa&&2===e.state&&e.cause)try{yield(o=(0,_e.Z)(function*(d,_){const C=_.cause;for(const R of _.targetIds)d.hu.has(R)&&(yield d.remoteSyncer.rejectListen(R,C),d.hu.delete(R),d.wu.removeTarget(R))}),function(d,_){return o.apply(this,arguments)})(i,e)}catch(o){Wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield It(i,o)}else if(e instanceof Os?i.wu.ut(e):e instanceof Au?i.wu._t(e):i.wu.ht(e),!t.isEqual(qn.min()))try{const o=yield mp(i.localStore);t.compareTo(o)>=0&&(yield function(d,_){const C=d.wu.yt(_);return C.targetChanges.forEach((R,K)=>{if(R.resumeToken.approximateByteSize()>0){const J=d.hu.get(K);J&&d.hu.set(K,J.withResumeToken(R.resumeToken,_))}}),C.targetMismatches.forEach(R=>{const K=d.hu.get(R);if(!K)return;d.hu.set(R,K.withResumeToken(hs.EMPTY_BYTE_STRING,K.snapshotVersion)),Cp(d,R);const J=new bl(K.target,R,1,K.sequenceNumber);zh(d,J)}),d.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){Wt("RemoteStore","Failed to raise snapshot:",o),yield It(i,o)}var o}),$e.apply(this,arguments)}function It(i,e,t){return bt.apply(this,arguments)}function bt(){return bt=(0,_e.Z)(function*(i,e,t){if(!Ru(e))throw e;i.lu.add(1),yield Bu(i),i._u.set("Offline"),t||(t=()=>mp(i.localStore)),i.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Wt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield zd(i)}))}),bt.apply(this,arguments)}function $t(i,e){return e().catch(t=>It(i,t,e))}function Tn(i){return tr.apply(this,arguments)}function tr(){return tr=(0,_e.Z)(function*(i){const e=cn(i),t=Ec(e);let o=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Ui(e);)try{const d=yield Eg(e.localStore,o);if(null===d){0===e.cu.length&&t.ko();break}o=d.batchId,go(e,d)}catch(d){yield It(e,d)}du(e)&&Il(e)}),tr.apply(this,arguments)}function Ui(i){return a(i)&&i.cu.length<10}function go(i,e){i.cu.push(e);const t=Ec(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function du(i){return a(i)&&!Ec(i).Do()&&i.cu.length>0}function Il(i){Ec(i).start()}function _c(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,_e.Z)(function*(i){Ec(i).Xo()}),Wh.apply(this,arguments)}function vc(i){return qh.apply(this,arguments)}function qh(){return qh=(0,_e.Z)(function*(i){const e=Ec(i);for(const t of i.cu)e.Ho(t.mutations)}),qh.apply(this,arguments)}function o_(i,e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,_e.Z)(function*(i,e,t){const o=i.cu.shift(),d=Vl.from(o,e,t);yield $t(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Tn(i)}),Ag.apply(this,arguments)}function Hv(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,_e.Z)(function*(i,e){var t;e&&Ec(i).zo&&(yield(t=(0,_e.Z)(function*(o,d){if(gl(_=d.code)&&_!==gt.ABORTED){const C=o.cu.shift();Ec(o).No(),yield $t(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,d)),yield Tn(o)}var _}),function(o,d){return t.apply(this,arguments)})(i,e)),du(i)&&Il(i)}),Vf.apply(this,arguments)}function xg(i,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,_e.Z)(function*(i,e){const t=cn(i);t.asyncQueue.verifyOperationInProgress(),Wt("RemoteStore","RemoteStore received new credentials");const o=a(t);t.lu.add(3),yield Bu(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield zd(t)}),Bf.apply(this,arguments)}function Wd(i,e){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,_e.Z)(function*(i,e){const t=cn(i);e?(t.lu.delete(2),yield zd(t)):e||(t.lu.add(2),yield Bu(t),t._u.set("Unknown"))}),Mg.apply(this,arguments)}function nd(i){return i.mu||(i.mu=function(e,t,o){const d=cn(e);return d.tu(),new Ep(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{zr:b.bind(null,i),Jr:j.bind(null,i),Ko:Ee.bind(null,i)}),i.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(i.mu.No(),l(i)?h(i):i._u.set("Unknown")):(yield i.mu.stop(),p(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Ec(i){return i.gu||(i.gu=function(e,t,o){const d=cn(e);return d.tu(),new Sg(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{zr:_c.bind(null,i),Jr:Hv.bind(null,i),Yo:vc.bind(null,i),Jo:o_.bind(null,i)}),i.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(i.gu.No(),yield Tn(i)):(yield i.gu.stop(),i.cu.length>0&&(Wt("RemoteStore",`Stopping write stream with ${i.cu.length} pending writes`),i.cu=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Dp{constructor(e,t,o,d,_){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=_,this.deferred=new T,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,d,_){const C=Date.now()+o,R=new Dp(e,t,C,d,_);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(i,e){if(Di("AsyncQueue",`${e}: ${i}`),Ru(i))return new A(gt.UNAVAILABLE,`${e}: ${i}`);throw i}class Yh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||an.comparator(t.key,o.key):(t,o)=>an.comparator(t.key,o.key),this.keyedMap=Da(),this.sortedSet=new Fi(this.comparator)}static emptySet(e){return new Yh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(!d.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Yh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Tp{constructor(){this.yu=new Fi(an.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):An():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Kh{constructor(e,t,o,d,_,C,R,K){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=K}static fromInitialDocuments(e,t,o,d){const _=[];return t.forEach(C=>{_.push({type:0,doc:C})}),new Kh(e,t,Yh.emptySet(t),_,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class a_{constructor(){this.Iu=void 0,this.listeners=[]}}class zm{constructor(){this.queries=new Ca(e=>Ac(e),Ia),this.onlineState="Unknown",this.Tu=new Set}}function rd(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,_e.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1,_=t.queries.get(o);if(_||(d=!0,_=new a_),d)try{_.Iu=yield t.onListen(o)}catch(C){const R=qd(C,`Initialization of query '${Tu(e.query)}' failed`);return void e.onError(R)}t.queries.set(o,_),_.listeners.push(e),e.Eu(t.onlineState),_.Iu&&e.Au(_.Iu)&&Pg(t)}),Sp.apply(this,arguments)}function Rg(i,e){return Og.apply(this,arguments)}function Og(){return Og=(0,_e.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1;const _=t.queries.get(o);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),d=0===_.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),Og.apply(this,arguments)}function Zh(i,e){const t=cn(i);let o=!1;for(const d of e){const C=t.queries.get(d.query);if(C){for(const R of C.listeners)R.Au(d)&&(o=!0);C.Iu=d}}o&&Pg(t)}function l_(i,e,t){const o=cn(i),d=o.queries.get(e);if(d)for(const _ of d.listeners)_.onError(t);o.queries.delete(e)}function Pg(i){i.Tu.forEach(e=>{e.next()})}class Ng{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new Kh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Kh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class u_{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Hl{constructor(e){this.M=e}li(e){return na(this.M,e)}fi(e){return e.metadata.exists?xu(this.M,e.document,!1):Vt.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Zs(e)}}class kg{constructor(e,t,o){this.xu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Fg(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Fr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new Hl(this.M);for(const d of e)if(d.metadata.queries){const _=o.li(d.metadata.name);for(const C of d.metadata.queries){const R=(t.get(C)||vi()).add(_);t.set(C,R)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function Rf(i,e,t,o){return Fu.apply(this,arguments)}(e.localStore,new Hl(e.M),e.documents,e.xu.id),o=e.ku(e.documents);for(const d of e.queries)yield Jc(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Fg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Lg{constructor(e){this.key=e}}class Vg{constructor(e){this.key=e}}class Bg{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=vi(),this.mutatedKeys=vi(),this.Lu=wd(e),this.Uu=new Yh(this.Lu)}get qu(){return this.Fu}Gu(e,t){const o=t?t.Ku:new Tp,d=t?t.Uu:this.Uu;let _=t?t.mutatedKeys:this.mutatedKeys,C=d,R=!1;const K=Tc(this.query)&&d.size===this.query.limit?d.last():null,J=Sc(this.query)&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Re,Ye)=>{const Ct=d.get(Re),Ut=Yu(this.query,Ye)?Ye:null,Xt=!!Ct&&this.mutatedKeys.has(Ct.key),Un=!!Ut&&(Ut.hasLocalMutations||this.mutatedKeys.has(Ut.key)&&Ut.hasCommittedMutations);let Br=!1;Ct&&Ut?Ct.data.isEqual(Ut.data)?Xt!==Un&&(o.track({type:3,doc:Ut}),Br=!0):this.Qu(Ct,Ut)||(o.track({type:2,doc:Ut}),Br=!0,(K&&this.Lu(Ut,K)>0||J&&this.Lu(Ut,J)<0)&&(R=!0)):!Ct&&Ut?(o.track({type:0,doc:Ut}),Br=!0):Ct&&!Ut&&(o.track({type:1,doc:Ct}),Br=!0,(K||J)&&(R=!0)),Br&&(Ut?(C=C.add(Ut),_=Un?_.add(Re):_.delete(Re)):(C=C.delete(Re),_=_.delete(Re)))}),Tc(this.query)||Sc(this.query))for(;C.size>this.query.limit;){const Re=Tc(this.query)?C.last():C.first();C=C.delete(Re.key),_=_.delete(Re.key),o.track({type:1,doc:Re})}return{Uu:C,Ku:o,ei:R,mutatedKeys:_}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const _=e.Ku.pu();_.sort((J,Re)=>function(Ye,Ct){const Ut=Xt=>{switch(Xt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return An()}};return Ut(Ye)-Ut(Ct)}(J.type,Re.type)||this.Lu(J.doc,Re.doc)),this.ju(o);const C=t?this.Wu():[],R=0===this.Bu.size&&this.current?1:0,K=R!==this.$u;return this.$u=R,0!==_.length||K?{snapshot:new Kh(this.query,e.Uu,d,_,e.mutatedKeys,0===R,K,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Tp,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=vi(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new Vg(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new Lg(o))}),t}Ju(e){this.Fu=e.hi,this.Bu=vi();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Kh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class c_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class d_{constructor(e){this.key=e,this.Xu=!1}}class h_{constructor(e,t,o,d,_,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.Zu={},this.ta=new Ca(R=>Ac(R),Ia),this.ea=new Map,this.na=new Set,this.sa=new Fi(an.comparator),this.ia=new Map,this.ra=new Nh,this.oa={},this.ua=new Map,this.aa=qo.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function f_(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,_e.Z)(function*(i,e){const t=ad(i);let o,d;const _=t.ta.get(e);if(_)o=_.targetId,t.sharedClientState.addLocalQueryTarget(o),d=_.view.Yu();else{const C=yield ku(t.localStore,wo(e));t.isPrimaryClient&&Hh(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,d=yield Wm(t,e,o,"current"===R)}return d}),Ap.apply(this,arguments)}function Wm(i,e,t,o){return xp.apply(this,arguments)}function xp(){return xp=(0,_e.Z)(function*(i,e,t,o){i.ha=(Re,Ye,Ct)=>{return(Ut=(0,_e.Z)(function*(Xt,Un,Br,Js){let ii=Un.view.Gu(Br);ii.ei&&(ii=yield Ph(Xt.localStore,Un.query,!1).then(({documents:Ps})=>Un.view.Gu(Ps,ii)));const lo=Js&&Js.targetChanges.get(Un.targetId),Vs=Un.view.applyChanges(ii,Xt.isPrimaryClient,lo);return Gg(Xt,Un.targetId,Vs.zu),Vs.snapshot}),function(Xt,Un,Br,Js){return Ut.apply(this,arguments)})(i,Re,Ye,Ct);var Ut};const d=yield Ph(i.localStore,e,!0),_=new Bg(e,d.hi),C=_.Gu(d.documents),R=za.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),K=_.applyChanges(C,i.isPrimaryClient,R);Gg(i,t,K.zu);const J=new c_(e,t,_);return i.ta.set(e,J),i.ea.has(t)?i.ea.get(t).push(e):i.ea.set(t,[e]),K.snapshot}),xp.apply(this,arguments)}function p_(i,e){return $g.apply(this,arguments)}function $g(){return $g=(0,_e.Z)(function*(i,e){const t=cn(i),o=t.ta.get(e),d=t.ea.get(o.targetId);if(d.length>1)return t.ea.set(o.targetId,d.filter(_=>!Ia(_,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Xc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Gh(t.remoteStore,o.targetId),Yd(t,o.targetId)}).catch(Ul))):(Yd(t,o.targetId),yield Xc(t.localStore,o.targetId,!0))}),$g.apply(this,arguments)}function qm(){return qm=(0,_e.Z)(function*(i,e,t){const o=ld(i);try{const d=yield function(_,C){const R=cn(_),K=Ti.now(),J=C.reduce((Ye,Ct)=>Ye.add(Ct.key),vi());let Re;return R.persistence.runTransaction("Locally write mutations","readwrite",Ye=>R.ai.qs(Ye,J).next(Ct=>{Re=Ct;const Ut=[];for(const Xt of C){const Un=Dd(Xt,Re.get(Xt.key));null!=Un&&Ut.push(new fl(Xt.key,Un,wt(Un.value.mapValue),Hs.exists(!0)))}return R.$s.addMutationBatch(Ye,K,Ut,C)})).then(Ye=>(Ye.applyToLocalDocumentSet(Re),{batchId:Ye.batchId,changes:Re}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(_,C,R){let K=_.oa[_.currentUser.toKey()];K||(K=new Fi(ar)),K=K.insert(C,R),_.oa[_.currentUser.toKey()]=K}(o,d.batchId,t),yield bc(o,d.changes),yield Tn(o.remoteStore)}catch(d){const _=qd(d,"Failed to persist write");t.reject(_)}}),qm.apply(this,arguments)}function Mp(i,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,_e.Z)(function*(i,e){const t=cn(i);try{const o=yield Nu(t.localStore,e);e.targetChanges.forEach((d,_)=>{const C=t.ia.get(_);C&&(Kn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?C.Xu=!0:d.modifiedDocuments.size>0?Kn(C.Xu):d.removedDocuments.size>0&&(Kn(C.Xu),C.Xu=!1))}),yield bc(t,o,e)}catch(o){yield Ul(o)}}),Ug.apply(this,arguments)}function jg(i,e,t){const o=cn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ta.forEach((_,C)=>{const R=C.view.Eu(e);R.snapshot&&d.push(R.snapshot)}),function(_,C){const R=cn(_);R.onlineState=C;let K=!1;R.queries.forEach((J,Re)=>{for(const Ye of Re.listeners)Ye.Eu(C)&&(K=!0)}),K&&Pg(R)}(o.eventManager,e),d.length&&o.Zu.Ko(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Ym(i,e,t){return Km.apply(this,arguments)}function Km(){return Km=(0,_e.Z)(function*(i,e,t){const o=cn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.ia.get(e),_=d&&d.key;if(_){let C=new Fi(an.comparator);C=C.insert(_,Vt.newNoDocument(_,qn.min()));const R=vi().add(_),K=new Vc(qn.min(),new Map,new Wi(ar),C,R);yield Mp(o,K),o.sa=o.sa.remove(_),o.ia.delete(e),Wg(o)}else yield Xc(o.localStore,e,!1).then(()=>Yd(o,e,t)).catch(Ul)}),Km.apply(this,arguments)}function hu(i,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,_e.Z)(function*(i,e){const t=cn(i),o=e.batch.batchId;try{const d=yield xf(t.localStore,e);Xm(t,o,null),Hg(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield bc(t,d)}catch(d){yield Ul(d)}}),Zm.apply(this,arguments)}function zv(i,e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,_e.Z)(function*(i,e,t){const o=cn(i);try{const d=yield function(_,C){const R=cn(_);return R.persistence.runTransaction("Reject batch","readwrite-primary",K=>{let J;return R.$s.lookupMutationBatch(K,C).next(Re=>(Kn(null!==Re),J=Re.keys(),R.$s.removeMutationBatch(K,Re))).next(()=>R.$s.performConsistencyCheck(K)).next(()=>R.ai.qs(K,J))})}(o.localStore,e);Xm(o,e,t),Hg(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield bc(o,d)}catch(d){yield Ul(d)}}),Rp.apply(this,arguments)}function Op(){return Op=(0,_e.Z)(function*(i,e){const t=cn(i);a(t.remoteStore)||Wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(_){const C=cn(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>C.$s.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===o)return void e.resolve();const d=t.ua.get(o)||[];d.push(e),t.ua.set(o,d)}catch(o){const d=qd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Op.apply(this,arguments)}function Hg(i,e){(i.ua.get(e)||[]).forEach(t=>{t.resolve()}),i.ua.delete(e)}function Xm(i,e,t){const o=cn(i);let d=o.oa[o.currentUser.toKey()];if(d){const _=d.get(e);_&&(t?_.reject(t):_.resolve(),d=d.remove(e)),o.oa[o.currentUser.toKey()]=d}}function Yd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ea.get(e))i.ta.delete(o),t&&i.Zu.la(o,t);i.ea.delete(e),i.isPrimaryClient&&i.ra.Ri(e).forEach(o=>{i.ra.containsKey(o)||Pp(i,o)})}function Pp(i,e){i.na.delete(e.path.canonicalString());const t=i.sa.get(e);null!==t&&(Gh(i.remoteStore,t),i.sa=i.sa.remove(e),i.ia.delete(t),Wg(i))}function Gg(i,e,t){for(const o of t)o instanceof Lg?(i.ra.addReference(o.key,e),zg(i,o)):o instanceof Vg?(Wt("SyncEngine","Document no longer in limbo: "+o.key),i.ra.removeReference(o.key,e),i.ra.containsKey(o.key)||Pp(i,o.key)):An()}function zg(i,e){const t=e.key,o=t.path.canonicalString();i.sa.get(t)||i.na.has(o)||(Wt("SyncEngine","New document in limbo: "+t),i.na.add(o),Wg(i))}function Wg(i){for(;i.na.size>0&&i.sa.size<i.maxConcurrentLimboResolutions;){const e=i.na.values().next().value;i.na.delete(e);const t=new an(Fr.fromString(e)),o=i.aa.next();i.ia.set(o,new d_(t)),i.sa=i.sa.insert(t,o),Hh(i.remoteStore,new bl(wo(Cu(t.path)),o,2,Yt.A))}}function bc(i,e,t){return qg.apply(this,arguments)}function qg(){return qg=(0,_e.Z)(function*(i,e,t){const o=cn(i),d=[],_=[],C=[];var R;o.ta.isEmpty()||(o.ta.forEach((R,K)=>{C.push(o.ha(K,e,t).then(J=>{if(J){o.isPrimaryClient&&o.sharedClientState.updateQueryState(K.targetId,J.fromCache?"not-current":"current"),d.push(J);const Re=jl.Js(K.targetId,J);_.push(Re)}}))}),yield Promise.all(C),o.Zu.Ko(d),yield(R=(0,_e.Z)(function*(K,J){const Re=cn(K);try{yield Re.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ye=>Rt.forEach(J,Ct=>Rt.forEach(Ct.zs,Ut=>Re.persistence.referenceDelegate.addReference(Ye,Ct.targetId,Ut)).next(()=>Rt.forEach(Ct.Hs,Ut=>Re.persistence.referenceDelegate.removeReference(Ye,Ct.targetId,Ut)))))}catch(Ye){if(!Ru(Ye))throw Ye;Wt("LocalStore","Failed to update sequence numbers: "+Ye)}for(const Ye of J){const Ct=Ye.targetId;if(!Ye.fromCache){const Ut=Re.si.get(Ct),Un=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);Re.si=Re.si.insert(Ct,Un)}}}),function(K,J){return R.apply(this,arguments)})(o.localStore,_))}),qg.apply(this,arguments)}function g_(i,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,_e.Z)(function*(i,e){const t=cn(i);if(!t.currentUser.isEqual(e)){Wt("SyncEngine","User change. New user:",e.toKey());const o=yield Af(t.localStore,e);t.currentUser=e,(d=t).ua.forEach(C=>{C.forEach(R=>{R.reject(new A(gt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ua.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield bc(t,o.ci)}var d}),Yg.apply(this,arguments)}function m_(i,e){const t=cn(i),o=t.ia.get(e);if(o&&o.Xu)return vi().add(o.key);{let d=vi();const _=t.ea.get(e);if(!_)return d;for(const C of _){const R=t.ta.get(C);d=d.unionWith(R.view.qu)}return d}}function Np(i,e){return id.apply(this,arguments)}function id(){return id=(0,_e.Z)(function*(i,e){const t=cn(i),o=yield Ph(t.localStore,e.query,!0),d=e.view.Ju(o);return t.isPrimaryClient&&Gg(t,e.targetId,d.zu),d}),id.apply(this,arguments)}function y_(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,_e.Z)(function*(i,e){const t=cn(i);return Hd(t.localStore,e).then(o=>bc(t,o))}),Kd.apply(this,arguments)}function __(i,e,t,o){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,_e.Z)(function*(i,e,t,o){const d=cn(i),_=yield function(C,R){const K=cn(C),J=cn(K.$s);return K.persistence.runTransaction("Lookup mutation documents","readonly",Re=>J.ln(Re,R).next(Ye=>Ye?K.ai.qs(Re,Ye):Rt.resolve(null)))}(d.localStore,e);var R;null!==_?("pending"===t?yield Tn(d.remoteStore):"acknowledged"===t||"rejected"===t?(Xm(d,e,o||null),Hg(d,e),R=e,cn(cn(d.localStore).$s).dn(R)):An(),yield bc(d,_)):Wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kg.apply(this,arguments)}function Gl(){return Gl=(0,_e.Z)(function*(i,e){const t=cn(i);if(ad(t),ld(t),!0===e&&!0!==t.ca){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Qh(t,o.toArray());t.ca=!0,yield Wd(t.remoteStore,!0);for(const _ of d)Hh(t.remoteStore,_)}else if(!1===e&&!1!==t.ca){const o=[];let d=Promise.resolve();t.ea.forEach((_,C)=>{t.sharedClientState.isLocalQueryTarget(C)?o.push(C):d=d.then(()=>(Yd(t,C),Xc(t.localStore,C,!0))),Gh(t.remoteStore,C)}),yield d,yield Qh(t,o),function(_){const C=cn(_);C.ia.forEach((R,K)=>{Gh(C.remoteStore,K)}),C.ra.bi(),C.ia=new Map,C.sa=new Fi(an.comparator)}(t),t.ca=!1,yield Wd(t.remoteStore,!1)}}),Gl.apply(this,arguments)}function Qh(i,e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,_e.Z)(function*(i,e,t){const o=cn(i),d=[],_=[];for(const C of e){let R;const K=o.ea.get(C);if(K&&0!==K.length){R=yield ku(o.localStore,wo(K[0]));for(const J of K){const Re=o.ta.get(J),Ye=yield Np(o,Re);Ye.snapshot&&_.push(Ye.snapshot)}}else{const J=yield bg(o.localStore,C);R=yield ku(o.localStore,J),yield Wm(o,sd(J),C,!1)}d.push(R)}return o.Zu.Ko(_),d}),Yo.apply(this,arguments)}function sd(i){return ih(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kp(i){const e=cn(i);return cn(cn(e.localStore).persistence).Os()}function zl(i,e,t,o){return $f.apply(this,arguments)}function $f(){return $f=(0,_e.Z)(function*(i,e,t,o){const d=cn(i);if(d.ca)return void Wt("SyncEngine","Ignoring unexpected query state notification.");const _=d.ea.get(e);if(_&&_.length>0)switch(t){case"current":case"not-current":{const C=yield Hd(d.localStore,Ku(_[0])),R=Vc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield bc(d,C,R);break}case"rejected":yield Xc(d.localStore,e,!0),Yd(d,e,o);break;default:An()}}),$f.apply(this,arguments)}function Xh(i,e,t){return od.apply(this,arguments)}function od(){return od=(0,_e.Z)(function*(i,e,t){const o=ad(i);if(o.ca){for(const d of e){if(o.ea.has(d)){Wt("SyncEngine","Adding an already active target "+d);continue}const _=yield bg(o.localStore,d),C=yield ku(o.localStore,_);yield Wm(o,sd(_),C.targetId,!1),Hh(o.remoteStore,C)}for(const d of t)o.ea.has(d)&&(yield Xc(o.localStore,d,!1).then(()=>{Gh(o.remoteStore,d),Yd(o,d)}).catch(Ul))}}),od.apply(this,arguments)}function ad(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ym.bind(null,e),e.Zu.Ko=Zh.bind(null,e.eventManager),e.Zu.la=l_.bind(null,e.eventManager),e}function ld(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zv.bind(null,e),e}class Zd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Sf(this.persistence,new Mh,e.initialUser,this.M)}_a(e){return new _p(kh.Wi,this.M)}da(e){return new Cg}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qd extends Zd{constructor(e,t,o){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,_e.Z)(function*(){yield t().call(o,e),yield o.ga.initialize(o,e),yield ld(o.ga.syncEngine),yield Tn(o.ga.remoteStore),yield o.persistence.Is(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ma(e){return Sf(this.persistence,new Mh,e.initialUser,this.M)}wa(e){return new fg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=gp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Po.withCacheSize(this.cacheSizeBytes):Po.DEFAULT;return new pp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,kf(),Uh(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Cg}}class ef extends Qd{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,_e.Z)(function*(){yield t().call(o,e);const d=o.ga.syncEngine;o.sharedClientState instanceof td&&(o.sharedClientState.syncEngine={kr:__.bind(null,d),Mr:zl.bind(null,d),Or:Xh.bind(null,d),Os:kp.bind(null,d),Nr:y_.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.Is(function(){var _=(0,_e.Z)(function*(C){yield function Zg(i,e){return Gl.apply(this,arguments)}(o.ga.syncEngine,C),o.gcScheduler&&(C&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):C||o.gcScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}da(e){const t=kf();if(!td.vt(t))throw new A(gt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=gp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new td(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ud{initialize(e,t){var o=this;return(0,_e.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>jg(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=g_.bind(null,o.syncEngine),yield Wd(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zm}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),o=new Nf(e.databaseInfo);return new bp(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,_=R=>jg(this.syncEngine,R,0),C=Dg.vt()?new Dg:new Pf,new Ip(t,o,d,_,C);var t,o,d,_,C}createSyncEngine(e,t){return function(o,d,_,C,R,K,J){const Re=new h_(o,d,_,C,R,K);return J&&(Re.ca=!0),Re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const o=cn(t);Wt("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield Bu(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Qg(i,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Uf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jm{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new T,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const o=e.Ta.decode(t),d=Number(o);isNaN(d)&&e.Ra(`length string (${o}) is not valid number`);const _=yield e.ba(d);return new u_(JSON.parse(_),t.length+d)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,_e.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const o=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class ey{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new A(gt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,_e.Z)(function*(_,C){const R=cn(_),K=rc(R.M)+"/documents",J={documents:C.map(Ut=>Co(R.M,Ut))},Re=yield R.co("BatchGetDocuments",K,J),Ye=new Map;Re.forEach(Ut=>{const Xt=function ic(i,e){return"found"in e?function(t,o){Kn(!!o.found);const d=na(t,o.found.name),_=Zs(o.found.updateTime),C=new it({mapValue:{fields:o.found.fields}});return Vt.newFoundDocument(d,_,C)}(i,e):"missing"in e?function(t,o){Kn(!!o.missing),Kn(!!o.readTime);const d=na(t,o.missing),_=Zs(o.readTime);return Vt.newNoDocument(d,_)}(i,e):An()}(R.M,Ut);Ye.set(Xt.key.toString(),Xt)});const Ct=[];return C.forEach(Ut=>{const Xt=Ye.get(Ut.toString());Kn(!!Xt),Ct.push(Xt)}),Ct}),function(_,C){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new pl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const _=an.fromPath(d);e.mutations.push(new Td(_,e.precondition(_)))}),yield(o=(0,_e.Z)(function*(d,_){const C=cn(d),R=rc(C.M)+"/documents",K={writes:_.map(J=>Do(C.M,J))};yield C.ro("Commit",R,K)}),function(d,_){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw An();t=qn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new A(gt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Hs.updateTime(t):Hs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new A(gt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hs.updateTime(t)}return Hs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ty{constructor(e,t,o,d){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=d,this.va=5,this.So=new jh(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new ey(e.datastore),o=e.Da(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(_=>{e.Ca(_)}))}).catch(d=>{e.Ca(d)})}))}Da(e){try{const t=this.updateFunction(e);return!Ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gl(t)}return!1}}class ny{constructor(e,t,o,d){var _=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=As.UNAUTHENTICATED,this.clientId=Ir.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,_e.Z)(function*(R){Wt("FirestoreClient","Received user=",R.uid),yield _.authCredentialListener(R),_.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(Wt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(gt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new T;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=qd(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function Xg(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,_e.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,_e.Z)(function*(_){o.isEqual(_)||(yield Af(e.localStore,_),o=_)});return function(_){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Fp.apply(this,arguments)}function Jg(i,e){return em.apply(this,arguments)}function em(){return em=(0,_e.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Lp(i);Wt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>xg(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,_)=>xg(e.remoteStore,_)),i.onlineComponents=e}),em.apply(this,arguments)}function Lp(i){return tm.apply(this,arguments)}function tm(){return tm=(0,_e.Z)(function*(i){return i.offlineComponents||(Wt("FirestoreClient","Using default OfflineComponentProvider"),yield Xg(i,new Zd)),i.offlineComponents}),tm.apply(this,arguments)}function Vp(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,_e.Z)(function*(i){return i.onlineComponents||(Wt("FirestoreClient","Using default OnlineComponentProvider"),yield Jg(i,new ud)),i.onlineComponents}),Bp.apply(this,arguments)}function ry(i){return Lp(i).then(e=>e.persistence)}function nm(i){return Lp(i).then(e=>e.localStore)}function rm(i){return Vp(i).then(e=>e.remoteStore)}function im(i){return Vp(i).then(e=>e.syncEngine)}function Xd(i){return sm.apply(this,arguments)}function sm(){return sm=(0,_e.Z)(function*(i){const e=yield Vp(i),t=e.eventManager;return t.onListen=f_.bind(null,e.syncEngine),t.onUnlisten=p_.bind(null,e.syncEngine),t}),sm.apply(this,arguments)}function $p(i,e,t={}){const o=new T;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(d,_,C,R,K){const J=new Uf({next:Ye=>{_.enqueueAndForget(()=>Rg(d,Re));const Ct=Ye.docs.has(C);!Ct&&Ye.fromCache?K.reject(new A(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):Ct&&Ye.fromCache&&R&&"server"===R.source?K.reject(new A(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):K.resolve(Ye)},error:Ye=>K.reject(Ye)}),Re=new Ng(Cu(C.path),J,{includeMetadataChanges:!0,Du:!0});return rd(d,Re)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}function iy(i,e,t={}){const o=new T;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(d,_,C,R,K){const J=new Uf({next:Ye=>{_.enqueueAndForget(()=>Rg(d,Re)),Ye.fromCache&&"server"===R.source?K.reject(new A(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):K.resolve(Ye)},error:Ye=>K.reject(Ye)}),Re=new Ng(C,J,{includeMetadataChanges:!0,Du:!0});return rd(d,Re)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}const am=new Map;function sy(i,e,t){if(!t)throw new A(gt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function oy(i,e,t,o){if(!0===e&&!0===o)throw new A(gt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Jd(i){if(!an.isDocumentKey(i))throw new A(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ay(i){if(an.isDocumentKey(i))throw new A(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function jf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":An()}function Ei(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new A(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jf(i);throw new A(gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function lm(i,e){if(e<=0)throw new A(gt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Hf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new A(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new A(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1,e instanceof io?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new A(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(d.options.projectId)}(e))}get app(){if(!this._app)throw new A(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new A(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new B;switch(t.type){case"gapi":const o=t.client;return Kn(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Ae(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new A(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=am.get(e);t&&(Wt("ComponentProvider","Removing Datastore"),am.delete(e),t.terminate())}(this),Promise.resolve()}}class Ls{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ls(this.firestore,e,this._key)}}class ya{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class $u extends ya{constructor(e,t,o){super(e,t,Cu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ls(this.firestore,null,new an(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function uy(i,e,...t){if(i=(0,_t.m9)(i),sy("collection","path",e),i instanceof Gf){const o=Fr.fromString(e,...t);return ay(o),new $u(i,null,o)}{if(!(i instanceof Ls||i instanceof $u))throw new A(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Fr.fromString(e,...t));return ay(o),new $u(i.firestore,null,o)}}function zf(i,e,...t){if(i=(0,_t.m9)(i),1===arguments.length&&(e=Ir.R()),sy("doc","path",e),i instanceof Gf){const o=Fr.fromString(e,...t);return Jd(o),new Ls(i,null,new an(o))}{if(!(i instanceof Ls||i instanceof $u))throw new A(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Fr.fromString(e,...t));return Jd(o),new Ls(i.firestore,i instanceof $u?i.converter:null,new an(o))}}function cy(i,e){return i=(0,_t.m9)(i),e=(0,_t.m9)(e),(i instanceof Ls||i instanceof $u)&&(e instanceof Ls||e instanceof $u)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function um(i,e){return i=(0,_t.m9)(i),e=(0,_t.m9)(e),i instanceof ya&&e instanceof ya&&i.firestore===e.firestore&&Ia(i._query,e._query)&&i.converter===e.converter}class dy{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new jh(this,"async_queue_retry"),this.Ua=()=>{const t=Uh();t&&Wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Uh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new T;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Ru(t))throw t;Wt("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(o=>{throw this.Fa=o,this.$a=!1,Di("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(o)),o}).then(o=>(this.$a=!1,o))));return this.Na=t,t}enqueueAfterDelay(e,t,o){this.qa(),this.La.indexOf(e)>-1&&(t=0);const d=Dp.createAndSchedule(this,e,t,o,_=>this.Qa(_));return this.Oa.push(d),d}qa(){this.Fa&&An()}verifyOperationInProgress(){}ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Wf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Zv{constructor(){this._progressObserver={},this._taskCompletionResolver=new T,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gs extends Gf{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new dy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||jp(this),this._firestoreClient.terminate()}}function mo(i){return i._firestoreClient||jp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function jp(i){var e;const t=i._freezeSettings(),o=(_=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Pl(i._databaseId,_,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var _,R;i._firestoreClient=new ny(i._authCredentials,i._appCheckCredentials,i._queue,o)}function qf(i,e,t){const o=new T;return i.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Xg(i,t),yield Jg(i,e),o.resolve()}catch(d){if(!("FirebaseError"===(_=d).name?_.code===gt.FAILED_PRECONDITION||_.code===gt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var _})).then(()=>o.promise)}function gm(i){if(i._initialized||i._terminated)throw new A(gt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new A(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(hs.fromBase64String(e))}catch(t){throw new A(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pu(hs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wc{constructor(e){this._methodName=e}}class Yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new A(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}}const T_=/^__.*__$/;class fy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class mm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw An()}}class Kf{constructor(e,t,o,d,_,C){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=d,void 0===_&&this.Ja(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Kf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Xa({path:o,tc:!1});return d.ec(e),d}nc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Xa({path:o,tc:!1});return d.Ja(),d}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Qf(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Gp(this.Ya)&&T_.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class S_{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Gd(e)}uc(e,t,o,d=!1){return new Kf({Ya:e,methodName:t,oc:o,path:bs.emptyPath(),tc:!1,rc:d},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function cd(i){const e=i._freezeSettings(),t=Gd(i._databaseId);return new S_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Zf(i,e,t,o,d,_={}){const C=i.uc(_.merge||_.mergeFields?2:0,e,t,d);_m("Data must be an object, but it was:",C,o);const R=A_(o,C);let K,J;if(_.merge)K=new Zl(C.fieldMask),J=C.fieldTransforms;else if(_.mergeFields){const Re=[];for(const Ye of _.mergeFields){const Ct=Kp(e,Ye,t);if(!C.contains(Ct))throw new A(gt.INVALID_ARGUMENT,`Field '${Ct}' is specified in your field mask but missing from your input data.`);_y(Re,Ct)||Re.push(Ct)}K=new Zl(Re),J=C.fieldTransforms.filter(Ye=>K.covers(Ye.field))}else K=null,J=C.fieldTransforms;return new fy(new it(R),K,J)}class tf extends wc{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tf}}function zp(i,e,t){return new Kf({Ya:3,oc:e.settings.oc,methodName:i._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Wp extends wc{_toFieldTransform(e){return new Pc(e.path,new Fl)}isEqual(e){return e instanceof Wp}}class py extends wc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=zp(this,e,!0),o=this.ac.map(_=>dd(_,t)),d=new Ha(o);return new Pc(e.path,d)}isEqual(e){return this===e}}class gy extends wc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=zp(this,e,!0),o=this.ac.map(_=>dd(_,t)),d=new eu(o);return new Pc(e.path,d)}isEqual(e){return this===e}}class my extends wc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new dl(e.M,Mc(e.M,this.cc));return new Pc(e.path,t)}isEqual(e){return this===e}}function qp(i,e,t,o){const d=i.uc(1,e,t);_m("Data must be an object, but it was:",d,o);const _=[],C=it.empty();il(o,(K,J)=>{const Re=ao(e,K,t);J=(0,_t.m9)(J);const Ye=d.nc(Re);if(J instanceof tf)_.push(Re);else{const Ct=dd(J,Ye);null!=Ct&&(_.push(Re),C.set(Re,Ct))}});const R=new Zl(_);return new mm(C,R,d.fieldTransforms)}function Yp(i,e,t,o,d,_){const C=i.uc(1,e,t),R=[Kp(e,o,t)],K=[d];if(_.length%2!=0)throw new A(gt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ct=0;Ct<_.length;Ct+=2)R.push(Kp(e,_[Ct])),K.push(_[Ct+1]);const J=[],Re=it.empty();for(let Ct=R.length-1;Ct>=0;--Ct)if(!_y(J,R[Ct])){const Ut=R[Ct];let Xt=K[Ct];Xt=(0,_t.m9)(Xt);const Un=C.nc(Ut);if(Xt instanceof tf)J.push(Ut);else{const Br=dd(Xt,Un);null!=Br&&(J.push(Ut),Re.set(Ut,Br))}}const Ye=new Zl(J);return new mm(Re,Ye,C.fieldTransforms)}function ym(i,e,t,o=!1){return dd(t,i.uc(o?4:3,e))}function dd(i,e){if(yy(i=(0,_t.m9)(i)))return _m("Unsupported field value:",e,i),A_(i,e);if(i instanceof wc)return function(t,o){if(!Gp(o.Ya))throw o.ic(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ic(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,o){const d=[];let _=0;for(const C of t){let R=dd(C,o.sc(_));null==R&&(R={nullValue:"NULL_VALUE"}),d.push(R),_++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,_t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mc(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Ti.fromDate(t);return{timestampValue:su(o.M,d)}}if(t instanceof Ti){const d=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:su(o.M,d)}}if(t instanceof Yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pu)return{bytesValue:tc(o.M,t._byteString)};if(t instanceof Ls){const d=o.databaseId,_=t.firestore._databaseId;if(!_.isEqual(d))throw o.ic(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Bc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ic(`Unsupported field value: ${jf(t)}`)}(i,e)}function A_(i,e){const t={};return vd(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(i,(o,d)=>{const _=dd(d,e.Za(o));null!=_&&(t[o]=_)}),{mapValue:{fields:t}}}function yy(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ti||i instanceof Yf||i instanceof pu||i instanceof Ls||i instanceof wc)}function _m(i,e,t){if(!yy(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=jf(t);throw e.ic("an object"===o?i+" a custom object":i+" "+o)}var o}function Kp(i,e,t){if((e=(0,_t.m9)(e))instanceof fu)return e._internalPath;if("string"==typeof e)return ao(i,e);throw Qf("Field path arguments must be of type string or ",i,!1,void 0,t)}const x_=new RegExp("[~\\*/\\[\\]]");function ao(i,e,t){if(e.search(x_)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new fu(...e.split("."))._internalPath}catch(o){throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Qf(i,e,t,o,d){const _=o&&!o.isEmpty(),C=void 0!==d;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let K="";return(_||C)&&(K+=" (found",_&&(K+=` in field ${o}`),C&&(K+=` in document ${d}`),K+=")"),new A(gt.INVALID_ARGUMENT,R+i+K)}function _y(i,e){return i.some(t=>t.isEqual(e))}class Xf{constructor(e,t,o,d,_){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vy extends Xf{data(){return super.data()}}function Zp(i,e){return"string"==typeof e?ao(i,e):e instanceof fu?e._internalPath:e._delegate._internalPath}class hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Xf{constructor(e,t,o,d,_,C){super(e,t,o,d,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class ju extends Uu{data(e={}){return super.data(e)}}class fd{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new hd(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new ju(this._firestore,this._userDataWriter,o.key,o,new hd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new A(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let _=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new ju(o._firestore,o._userDataWriter,C.doc.key,C.doc,new hd(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:_++}))}{let _=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>d||3!==C.type).map(C=>{const R=new ju(o._firestore,o._userDataWriter,C.doc.key,C.doc,new hd(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let K=-1,J=-1;return 0!==C.type&&(K=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),J=_.indexOf(C.doc.key)),{type:M_(C.type),doc:R,oldIndex:K,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function M_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return An()}}function vm(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof fd&&e instanceof fd&&i._firestore===e._firestore&&um(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ey(i){if(Sc(i)&&0===i.explicitOrderBy.length)throw new A(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nf{}function eh(i,...e){for(const t of e)i=t._apply(i);return i}class by extends nf{constructor(e,t,o){super(),this.hc=e,this.lc=t,this.fc=o,this.type="where"}_apply(e){const t=cd(e.firestore),o=function(d,_,C,R,K,J,Re){let Ye;if(K.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new A(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){rf(Re,J);const Ut=[];for(const Xt of Re)Ut.push(Qp(R,d,Xt));Ye={arrayValue:{values:Ut}}}else Ye=Qp(R,d,Re)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||rf(Re,J),Ye=ym(C,"where",Re,"in"===J||"not-in"===J);const Ct=is.create(K,J,Ye);return function(Ut,Xt){if(Xt.S()){const Br=qu(Ut);if(null!==Br&&!Br.isEqual(Xt.field))throw new A(gt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Br.toString()}' and '${Xt.field.toString()}'`);const Js=Du(Ut);null!==Js&&Sy(0,Xt.field,Js)}const Un=function(Br,Js){for(const ii of Br.filters)if(Js.indexOf(ii.op)>=0)return ii.op;return null}(Ut,function(Br){switch(Br){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Xt.op));if(null!==Un)throw new A(gt.INVALID_ARGUMENT,Un===Xt.op?`Invalid query. You cannot use more than one '${Xt.op.toString()}' filter.`:`Invalid query. You cannot use '${Xt.op.toString()}' filters with '${Un.toString()}' filters.`)}(d,Ct),Ct}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ya(e.firestore,e.converter,function(d,_){const C=d.filters.concat([_]);return new ta(d.path,d.collectionGroup,d.explicitOrderBy.slice(),C,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class Hu extends nf{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(o,d,_){if(null!==o.startAt)throw new A(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new A(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ua(d,_);return function(R,K){if(null===Du(R)){const J=qu(R);null!==J&&Sy(0,J,K.field)}}(o,C),C}(e._query,this.hc,this.dc);return new ya(e.firestore,e.converter,function(o,d){const _=o.explicitOrderBy.concat([d]);return new ta(o.path,o.collectionGroup,_,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class wy extends nf{constructor(e,t,o){super(),this.type=e,this._c=t,this.wc=o}_apply(e){return new ya(e.firestore,e.converter,sh(e._query,this._c,this.wc))}}class Wl extends nf{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Ty(e,this.type,this.mc,this.gc);return new ya(e.firestore,e.converter,(d=t,new ta((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Dy extends nf{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Ty(e,this.type,this.mc,this.gc);return new ya(e.firestore,e.converter,(d=t,new ta((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Ty(i,e,t,o){if(t[0]=(0,_t.m9)(t[0]),t[0]instanceof Xf)return function(d,_,C,R,K){if(!R)throw new A(gt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const J=[];for(const Re of cl(d))if(Re.field.isKeyField())J.push(Ql(_,R.key));else{const Ye=R.data.field(Re.field);if(sl(Ye))throw new A(gt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ye){const Ct=Re.field.canonicalString();throw new A(gt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ct}' (used as the orderBy) does not exist.`)}J.push(Ye)}return new Oo(J,K)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=cd(i.firestore);return function(_,C,R,K,J,Re){const Ye=_.explicitOrderBy;if(J.length>Ye.length)throw new A(gt.INVALID_ARGUMENT,`Too many arguments provided to ${K}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ct=[];for(let Ut=0;Ut<J.length;Ut++){const Xt=J[Ut];if(Ye[Ut].field.isKeyField()){if("string"!=typeof Xt)throw new A(gt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${K}(), but got a ${typeof Xt}`);if(!kl(_)&&-1!==Xt.indexOf("/"))throw new A(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${K}() must be a plain document ID, but '${Xt}' contains a slash.`);const Un=_.path.child(Fr.fromString(Xt));if(!an.isDocumentKey(Un))throw new A(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${K}() must result in a valid document path, but '${Un}' is not because it contains an odd number of segments.`);const Br=new an(Un);Ct.push(Ql(C,Br))}else{const Un=ym(R,K,Xt);Ct.push(Un)}}return new Oo(Ct,Re)}(i._query,i.firestore._databaseId,d,e,t,o)}}function Qp(i,e,t){if("string"==typeof(t=(0,_t.m9)(t))){if(""===t)throw new A(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(e)&&-1!==t.indexOf("/"))throw new A(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Fr.fromString(t));if(!an.isDocumentKey(o))throw new A(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ql(i,new an(o))}if(t instanceof Ls)return Ql(i,t._key);throw new A(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(t)}.`)}function rf(i,e){if(!Array.isArray(i)||0===i.length)throw new A(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new A(gt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Sy(i,e,t){if(!t.isEqual(e))throw new A(gt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Xp{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw An()}}convertObject(e,t){const o={};return il(e.fields,(d,_)=>{o[d]=this.convertValue(_,t)}),o}convertGeoPoint(e){return new Yf(Si(e.latitude),Si(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=xs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(js(e));default:return null}}convertTimestamp(e){const t=Mo(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Fr.fromString(e);Kn(he(o));const d=new io(o.get(1),o.get(3)),_=new an(o.popFirst(5));return d.isEqual(t)||Di(`Document ${_} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),_}}function Jp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Ay extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}class bm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cd(e)}set(e,t,o){this._verifyNotCommitted();const d=mu(e,this._firestore),_=Jp(d.converter,t,o),C=Zf(this._dataReader,"WriteBatch.set",d._key,_,null!==d.converter,o);return this._mutations.push(C.toMutation(d._key,Hs.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const _=mu(e,this._firestore);let C;return C="string"==typeof(t=(0,_t.m9)(t))||t instanceof fu?Yp(this._dataReader,"WriteBatch.update",_._key,t,o,d):qp(this._dataReader,"WriteBatch.update",_._key,t),this._mutations.push(C.toMutation(_._key,Hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mu(e,this._firestore);return this._mutations=this._mutations.concat(new pl(t._key,Hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(i,e){if((i=(0,_t.m9)(i)).firestore!==e)throw new A(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class pd extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}function Cm(i,e,t){i=Ei(i,Ls);const o=Ei(i.firestore,Gs),d=Jp(i.converter,e,t);return sf(o,[Zf(cd(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,Hs.none())])}function Dm(i,e,t,...o){i=Ei(i,Ls);const d=Ei(i.firestore,Gs),_=cd(d);let C;return C="string"==typeof(e=(0,_t.m9)(e))||e instanceof fu?Yp(_,"updateDoc",i._key,e,t,o):qp(_,"updateDoc",i._key,e),sf(d,[C.toMutation(i._key,Hs.exists(!0))])}function Tm(i,...e){var t,o,d;i=(0,_t.m9)(i);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Wf(e[C])||(_=e[C],C++);const R={includeMetadataChanges:_.includeMetadataChanges};if(Wf(e[C])){const Ye=e[C];e[C]=null===(t=Ye.next)||void 0===t?void 0:t.bind(Ye),e[C+1]=null===(o=Ye.error)||void 0===o?void 0:o.bind(Ye),e[C+2]=null===(d=Ye.complete)||void 0===d?void 0:d.bind(Ye)}let K,J,Re;if(i instanceof Ls)J=Ei(i.firestore,Gs),Re=Cu(i._key.path),K={next:Ye=>{e[C]&&e[C](Sm(J,i,Ye))},error:e[C+1],complete:e[C+2]};else{const Ye=Ei(i,ya);J=Ei(Ye.firestore,Gs),Re=Ye._query;const Ct=new pd(J);K={next:Ut=>{e[C]&&e[C](new fd(J,Ct,Ye,Ut))},error:e[C+1],complete:e[C+2]},Ey(i._query)}return function(Ye,Ct,Ut,Xt){const Un=new Uf(Xt),Br=new Ng(Ct,Un,Ut);return Ye.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return rd(yield Xd(Ye),Br)})),()=>{Un.pa(),Ye.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Rg(yield Xd(Ye),Br)}))}}(mo(J),Re,R,K)}function sf(i,e){return function(t,o){const d=new T;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Gv(i,e,t){return qm.apply(this,arguments)}(yield im(t),o,d)})),d.promise}(mo(i),e)}function Sm(i,e,t){const o=t.docs.get(e._key),d=new pd(i);return new Uu(i,d,e._key,o,new hd(t.hasPendingWrites,t.fromCache),e.converter)}class k_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cd(e)}get(e){const t=mu(e,this._firestore),o=new Ay(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return An();const _=d[0];if(_.isFoundDocument())return new Xf(this._firestore,o,_.key,_,t.converter);if(_.isNoDocument())return new Xf(this._firestore,o,t._key,null,t.converter);throw An()})}set(e,t,o){const d=mu(e,this._firestore),_=Jp(d.converter,t,o),C=Zf(this._dataReader,"Transaction.set",d._key,_,null!==d.converter,o);return this._transaction.set(d._key,C),this}update(e,t,o,...d){const _=mu(e,this._firestore);let C;return C="string"==typeof(t=(0,_t.m9)(t))||t instanceof fu?Yp(this._dataReader,"Transaction.update",_._key,t,o,d):qp(this._dataReader,"Transaction.update",_._key,t),this._transaction.update(_._key,C),this}delete(e){const t=mu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mu(e,this._firestore),o=new pd(this._firestore);return super.get(e).then(d=>new Uu(this._firestore,o,t._key,d._document,new hd(!1,!1),t.converter))}}function Am(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new A("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fy(){if("undefined"==typeof Uint8Array)throw new A("unimplemented","Uint8Arrays are not available in this environment.")}function Ly(){if(!function Ea(){return"undefined"!=typeof atob}())throw new A("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){jo=ot.SDK_VERSION,(0,ot._registerComponent)(new Ve.wA("firestore",(t,{options:o})=>{const d=t.getProvider("app").getImmediate(),_=new Gs(d,new ne(t.getProvider("auth-internal")),new fn(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),_._setSettings(o),_},"PUBLIC")),(0,ot.registerVersion)(ro,"3.4.7",i),(0,ot.registerVersion)(ro,"3.4.7","esm2017")}();class Jf{constructor(e){this._delegate=e}static fromBase64String(e){return Ly(),new Jf(pu.fromBase64String(e))}static fromUint8Array(e){return Fy(),new Jf(pu.fromUint8Array(e))}toBase64(){return Ly(),this._delegate.toBase64()}toUint8Array(){return Fy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eg(i){return function Vy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class By{enableIndexedDbPersistence(e,t){return function dm(i,e){gm(i=Ei(i,Gs));const t=mo(i),o=i._freezeSettings(),d=new ud;return qf(t,d,new Qd(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function I_(i){gm(i=Ei(i,Gs));const e=mo(i),t=i._freezeSettings(),o=new ud;return qf(e,o,new ef(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Hp(i){if(i._initialized&&!i._terminated)throw new A(gt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new T;return i._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(o){if(!ha.vt())return Promise.resolve();const d=o+"main";yield ha.delete(d)}),function(o){return t.apply(this,arguments)})(gp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xm{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof io||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function ly(i,e,t,o={}){var d;const _=(i=Ei(i,Gf))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,R;if("string"==typeof o.mockUserToken)C=o.mockUserToken,R=As.MOCK_USER;else{C=(0,_t.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const K=o.mockUserToken.sub||o.mockUserToken.user_id;if(!K)throw new A(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new As(K)}i._authCredentials=new W(new D(C,R))}}(this._delegate,e,t,o)}enableNetwork(){return function Qv(i){return function v_(i){return i.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ry(i),t=yield rm(i);return e.setNetworkEnabled(!0),function(o){const d=cn(o);return d.lu.delete(0),zd(d)}(t)}))}(mo(i=Ei(i,Gs)))}(this._delegate)}disableNetwork(){return function C_(i){return function Wv(i){return i.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ry(i),t=yield rm(i);return e.setNetworkEnabled(!1),(o=(0,_e.Z)(function*(d){const _=cn(d);_.lu.add(0),yield Bu(_),_._u.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(mo(i=Ei(i,Gs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,oy("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hm(i){return function(e){const t=new T;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Qm(i,e){return Op.apply(this,arguments)}(yield im(e),t)})),t.promise}(mo(i=Ei(i,Gs)))}(this._delegate)}onSnapshotsInSync(e){return function Ny(i,e){return function qv(i,e){const t=new Uf(e);return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return o=yield Xd(i),d=t,cn(o).Tu.add(d),void d.next();var o,d})),()=>{t.pa(),i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return o=yield Xd(i),d=t,void cn(o).Tu.delete(d);var o,d}))}}(mo(i=Ei(i,Gs)),Wf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new A("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new th(this,uy(this._delegate,e))}catch(t){throw _a(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cl(this,zf(this._delegate,e))}catch(t){throw _a(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Za(this,function w_(i,e){if(i=Ei(i,Gf),sy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new A(gt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ya(i,null,(t=e,new ta(Fr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw _a(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function Yv(i,e){const t=new T;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const o=yield(d=i,Vp(d).then(_=>_.datastore));var d;new ty(i.asyncQueue,o,e,t).run()})),t.promise}(mo(i=Ei(i,Gs)),t=>e(new k_(i,t)))}(this._delegate,t=>e(new Mm(this,t)))}batch(){return mo(this._delegate),new Rm(new bm(this._delegate,e=>sf(this._delegate,e)))}loadBundle(e){return function fm(i,e){const t=mo(i=Ei(i,Gs)),o=new Zv;return function Kv(i,e,t,o){const d=function(_,C){let R;return R="string"==typeof _?(new TextEncoder).encode(_):_,K=function(K,J){if(K instanceof Uint8Array)return Qg(K,J);if(K instanceof ArrayBuffer)return Qg(new Uint8Array(K),J);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Jm(K,C);var K}(t,Gd(e));i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Jh(i,e,t){const o=cn(i);var d;(d=(0,_e.Z)(function*(_,C,R){try{const K=yield C.getMetadata();if(yield function(Ct,Ut){const Xt=cn(Ct),Un=Zs(Ut.createTime);return Xt.persistence.runTransaction("hasNewerBundle","readonly",Br=>Xt.ds.getBundleMetadata(Br,Ut.id)).then(Br=>!!Br&&Br.createTime.compareTo(Un)>=0)}(_.localStore,K))return yield C.close(),R._completeWith({taskState:"Success",documentsLoaded:(Ct=K).totalDocuments,bytesLoaded:Ct.totalBytes,totalDocuments:Ct.totalDocuments,totalBytes:Ct.totalBytes}),Promise.resolve(new Set);R._updateProgress(Fg(K));const J=new kg(K,_.localStore,C.M);let Re=yield C.fa();for(;Re;){const Ct=yield J.Nu(Re);Ct&&R._updateProgress(Ct),Re=yield C.fa()}const Ye=yield J.complete();return yield bc(_,Ye.Ou,void 0),yield function(Ct,Ut){const Xt=cn(Ct);return Xt.persistence.runTransaction("Save bundle","readwrite",Un=>Xt.ds.saveBundleMetadata(Un,Ut))}(_.localStore,K),R._completeWith(Ye.progress),Promise.resolve(Ye.Mu)}catch(K){return ns("SyncEngine",`Loading bundle failed with ${K}`),R._failWith(K),Promise.resolve(new Set)}var Ct}),function(_,C,R){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield im(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function pm(i,e){return function b_(i,e){return i.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,o){const d=cn(t);return d.persistence.runTransaction("Get named query","readonly",_=>d.ds.getNamedQuery(_,o))}(yield nm(i),e)}))}(mo(i=Ei(i,Gs)),e).then(t=>t?new ya(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Za(this,t):null)}}class ep extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jf(new pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cl.forKey(t,this.firestore,null)}}class Mm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ep(e)}get(e){const t=yd(e);return this._delegate.get(t).then(o=>new tp(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=yd(e);return o?(Am("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=yd(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=yd(e);return this._delegate.delete(t),this}}class Rm{constructor(e){this._delegate=e}set(e,t,o){const d=yd(e);return o?(Am("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=yd(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=yd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new ju(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zu(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=gd.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let _=d.get(t);return _||(_=new gd(e,new ep(e),t),d.set(t,_)),_}}gd.INSTANCES=new WeakMap;class Cl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ep(e)}static forPath(e,t,o){if(e.length%2!=0)throw new A("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cl(t,new Ls(t._delegate,o,new an(e)))}static forKey(e,t,o){return new Cl(t,new Ls(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new th(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new th(this.firestore,uy(this._delegate,e))}catch(t){throw _a(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.m9)(e))instanceof Ls&&cy(this._delegate,e)}set(e,t){t=Am("DocumentReference.set",t);try{return t?Cm(this._delegate,e,t):Cm(this._delegate,e)}catch(o){throw _a(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Dm(this._delegate,e):Dm(this._delegate,e,t,...o)}catch(d){throw _a(d,"updateDoc()","DocumentReference.update()")}}delete(){return function Oy(i){return sf(Ei(i.firestore,Gs),[new pl(i._key,Hs.none())])}(this._delegate)}onSnapshot(...e){const t=md(e),o=Uy(e,d=>new tp(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Tm(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xy(i){i=Ei(i,Ls);const e=Ei(i.firestore,Gs),t=mo(e),o=new pd(e);return function E_(i,e){const t=new T;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(o=(0,_e.Z)(function*(d,_,C){try{const R=yield function(K,J){const Re=cn(K);return Re.persistence.runTransaction("read document","readonly",Ye=>Re.ai.Bs(Ye,J))}(d,_);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new A(gt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const K=qd(R,`Failed to get document '${_} from cache`);C.reject(K)}}),function(d,_,C){return o.apply(this,arguments)})(yield nm(i),e,t);var o})),t.promise}(t,i._key).then(d=>new Uu(e,o,i._key,d,new hd(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function wm(i){i=Ei(i,Ls);const e=Ei(i.firestore,Gs);return $p(mo(e),i._key,{source:"server"}).then(t=>Sm(e,i,t))}(this._delegate):function N_(i){i=Ei(i,Ls);const e=Ei(i.firestore,Gs);return $p(mo(e),i._key).then(t=>Sm(e,i,t))}(this._delegate),t.then(o=>new tp(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Cl(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}function _a(i,e,t){return i.message=i.message.replace(e,t),i}function md(i){for(const e of i)if("object"==typeof e&&!eg(e))return e;return{}}function Uy(i,e){var t,o;let d;return d=eg(i[0])?i[0]:eg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:_=>{d.next&&d.next(e(_))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class tp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vm(this._delegate,e._delegate)}}class zu extends tp{data(e){const t=this._delegate.data(e);return function Ol(i,e){i||An()}(void 0!==t),t}}class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ep(e)}where(e,t,o){try{return new Za(this.firestore,eh(this._delegate,function Em(i,e,t){const o=e,d=Zp("where",i);return new by(d,o,t)}(e,t,o)))}catch(d){throw _a(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Za(this.firestore,eh(this._delegate,function R_(i,e="asc"){const t=e,o=Zp("orderBy",i);return new Hu(o,t)}(e,t)))}catch(o){throw _a(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Za(this.firestore,eh(this._delegate,function Gu(i){return lm("limit",i),new wy("limit",i,"F")}(e)))}catch(t){throw _a(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Za(this.firestore,eh(this._delegate,function gu(i){return lm("limitToLast",i),new wy("limitToLast",i,"L")}(e)))}catch(t){throw _a(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Za(this.firestore,eh(this._delegate,function Iy(...i){return new Wl("startAt",i,!0)}(...e)))}catch(t){throw _a(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Za(this.firestore,eh(this._delegate,function Cy(...i){return new Wl("startAfter",i,!1)}(...e)))}catch(t){throw _a(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Za(this.firestore,eh(this._delegate,function O_(...i){return new Dy("endBefore",i,!1)}(...e)))}catch(t){throw _a(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Za(this.firestore,eh(this._delegate,function P_(...i){return new Dy("endAt",i,!0)}(...e)))}catch(t){throw _a(t,"endAt()","Query.endAt()")}}isEqual(e){return um(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function My(i){i=Ei(i,ya);const e=Ei(i.firestore,Gs),t=mo(e),o=new pd(e);return function om(i,e){const t=new T;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(o=(0,_e.Z)(function*(d,_,C){try{const R=yield Ph(d,_,!0),K=new Bg(_,R.hi),J=K.Gu(R.documents),Re=K.applyChanges(J,!1);C.resolve(Re.snapshot)}catch(R){const K=qd(R,`Failed to execute query '${_} against cache`);C.reject(K)}}),function(d,_,C){return o.apply(this,arguments)})(yield nm(i),e,t);var o})),t.promise}(t,i._query).then(d=>new fd(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ry(i){i=Ei(i,ya);const e=Ei(i.firestore,Gs),t=mo(e),o=new pd(e);return iy(t,i._query,{source:"server"}).then(d=>new fd(e,o,i,d))}(this._delegate):function Im(i){i=Ei(i,ya);const e=Ei(i.firestore,Gs),t=mo(e),o=new pd(e);return Ey(i._query),iy(t,i._query).then(d=>new fd(e,o,i,d))}(this._delegate),t.then(o=>new jy(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=md(e),o=Uy(e,d=>new jy(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Tm(this._delegate,t,o)}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}class Om{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Za(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Om(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new zu(this._firestore,o))})}isEqual(e){return vm(this._delegate,e._delegate)}}class th extends Za{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cl(this.firestore,e):null}doc(e){try{return new Cl(this.firestore,void 0===e?zf(this._delegate):zf(this._delegate,e))}catch(t){throw _a(t,"doc()","CollectionReference.doc()")}}add(e){return function Py(i,e){const t=Ei(i.firestore,Gs),o=zf(i),d=Jp(i.converter,e);return sf(t,[Zf(cd(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,Hs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Cl(this.firestore,t))}isEqual(e){return cy(this._delegate,e._delegate)}withConverter(e){return new th(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}function yd(i){return Ei(i,Ls)}class Hy{constructor(...e){this._delegate=new fu(...e)}static documentId(){return new Hy(bs.keyField().canonicalString())}isEqual(e){return(e=(0,_t.m9)(e))instanceof fu&&this._delegate._internalPath.isEqual(e._internalPath)}}class nr{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new Wp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new nr(e)}static delete(){const e=function L_(){return new tf("deleteField")}();return e._methodName="FieldValue.delete",new nr(e)}static arrayUnion(...e){const t=function B_(...i){return new py("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new nr(t)}static arrayRemove(...e){const t=function $_(...i){return new gy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new nr(t)}static increment(e){const t=function U_(i){return new my("increment",i)}(e);return t._methodName="FieldValue.increment",new nr(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G_={Firestore:xm,GeoPoint:Yf,Timestamp:Ti,Blob:Jf,Transaction:Mm,WriteBatch:Rm,DocumentReference:Cl,DocumentSnapshot:tp,Query:Za,QueryDocumentSnapshot:zu,QuerySnapshot:jy,CollectionReference:th,FieldPath:Hy,FieldValue:nr,setLogLevel:function $y(i){!function ca(i){Ho.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function W_(i){(function z_(i,e){i.INTERNAL.registerComponent(new Ve.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},G_)))})(i,(e,t)=>new xm(e,t,new By)),i.registerVersion("@firebase/firestore-compat","0.1.16")}(ht.Z);var yu=H(4941),q_=H(440),tg=H(127);function Xs(i,e){return function ng(i,e=se.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function rg(i,e){return Xs(i,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function ig(i,e){return rg(i,e).pipe((0,ge.O)(void 0),be(),(0,te.U)(([t,o])=>{const d=o.payload.docChanges(),_=d.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((C,R)=>{const K=d.find(Re=>Re.doc.ref.isEqual(C.ref)),J=null==t?void 0:t.payload.docs.find(Re=>Re.ref.isEqual(C.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(C.metadata)||!K&&J&&JSON.stringify(J.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:C}})}),_}))}function Gy(i,e,t){return ig(i,t).pipe((0,de.R)((o,d)=>function zy(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Wy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return sg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(_=>_.payload),e),[]),(0,Ue.x)(),(0,te.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function sg(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function Pm(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class qy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=ig(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,ge.O)(void 0),be(),(0,Pe.h)(([o,d])=>d.length>0||!o),(0,te.U)(([o,d])=>d),ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Pm(e);return Gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return rg(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ae.iC)}get(e){return(0,ke.D)(this.query.get(e)).pipe(ae.iC)}add(e){return this.ref.add(e)}doc(e){return new Yy(this.ref.doc(e),this.afs)}}class Yy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:_}=np(o,t);return new qy(d,_,this.afs)}snapshotChanges(){return function e0(i,e){return Xs(i,e).pipe((0,ge.O)(void 0),be(),(0,te.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ke.D)(this.ref.get(e)).pipe(ae.iC)}}class Y_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Pe.h)(t=>t.length>0),ae.iC):ig(this.query,this.afs.schedulers.outsideAngular).pipe(ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Pm(e);return Gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return rg(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ae.iC)}get(e){return(0,ke.D)(this.query.get(e)).pipe(ae.iC)}}const of=new u.OlP("angularfire2.enableFirestorePersistence"),Ky=new u.OlP("angularfire2.firestore.persistenceSettings"),K_=new u.OlP("angularfire2.firestore.settings"),Z_=new u.OlP("angularfire2.firestore.use-emulator");function np(i,e=(t=>t)){return{query:e(i),ref:i}}let Nm=(()=>{class i{constructor(t,o,d,_,C,R,K,J,Re,Ye,Ct,Ut,Xt,Un,Br,Js,ii){this.schedulers=K;const lo=(0,ye.on)(t,R,o),Vs=Re;Ye&&(0,yu.nw)(lo,R,Ct,Xt,Un,Br,Ut,Js),[this.firestore,this.persistenceEnabled$]=(0,ye.cc)(`${lo.name}.firestore`,"AngularFirestore",lo.name,()=>{const Ps=R.runOutsideAngular(()=>lo.firestore());if(_&&Ps.settings(_),Vs&&Ps.useEmulator(...Vs),d&&!(0,Ne.PM)(C)){const ji=()=>{try{return(0,ke.D)(Ps.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Qa){return"undefined"!=typeof console&&console.warn(Qa),(0,Te.of)(!1)}};return[Ps,R.runOutsideAngular(ji)]}return[Ps,(0,Te.of)(!1)]},[_,Vs,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:_,query:C}=np(d,o),R=this.schedulers.ngZone.run(()=>_);return new qy(R,C,this)}collectionGroup(t,o){const d=o||(C=>C),_=this.firestore.collectionGroup(t);return new Y_(d(_),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new Yy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(ye.Dh),u.LFG(ye.xv,8),u.LFG(of,8),u.LFG(K_,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ae.HU),u.LFG(Ky,8),u.LFG(Z_,8),u.LFG(yu.zQ,8),u.LFG(yu.Qv,8),u.LFG(yu.L6,8),u.LFG(yu._Q,8),u.LFG(yu.rT,8),u.LFG(yu.lh,8),u.LFG(yu.f7,8),u.LFG(q_.nm,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Zy=(()=>{class i{constructor(){tg.Z.registerVersion("angularfire",ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:of,useValue:!0},{provide:Ky,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Nm]}),i})()},2011:(en,ut,H)=>{"use strict";H.d(ut,{hO:()=>de,xv:()=>me,Dh:()=>be,GT:()=>ae,cc:()=>Ue,on:()=>ce,pX:()=>Te});var u=H(5e3),se=H(127),Z=H(6351);en=H.hmd(en);const ke=["ngOnDestroy"],Te=(Fe,ht,_e,ot={})=>new Proxy(Fe,{get:(Ve,rt)=>_e.runOutsideAngular(()=>{var _t;if(Fe[rt])return(null===(_t=null==ot?void 0:ot.spy)||void 0===_t?void 0:_t.get)&&ot.spy.get(rt,Fe[rt]),Fe[rt];if(ke.indexOf(rt)>-1)return()=>{};const St=ht.toPromise().then(qe=>{const pe=qe&&qe[rt];return"function"==typeof pe?pe.bind(qe):pe&&pe.then?pe.then(Be=>_e.run(()=>Be)):_e.run(()=>pe)});return new Proxy(()=>{},{get:(qe,pe)=>St[pe],apply:(qe,pe,Be)=>St.then(ve=>{var De;const Je=ve&&ve(...Be);return(null===(De=null==ot?void 0:ot.spy)||void 0===De?void 0:De.apply)&&ot.spy.apply(rt,Be,Je),Je})})})}),ae=(Fe,ht)=>{ht.forEach(_e=>{Object.getOwnPropertyNames(_e.prototype||_e).forEach(ot=>{Object.defineProperty(Fe.prototype,ot,Object.getOwnPropertyDescriptor(_e.prototype||_e,ot))})})};class we{constructor(ht){return ht}}const be=new u.OlP("angularfire2.app.options"),me=new u.OlP("angularfire2.app.name");function ce(Fe,ht,_e){const Ve="object"==typeof _e&&_e||{};Ve.name=Ve.name||"string"==typeof _e&&_e||"[DEFAULT]";const _t=se.Z.apps.filter(St=>St&&St.name===Ve.name)[0]||ht.runOutsideAngular(()=>se.Z.initializeApp(Fe,Ve));try{JSON.stringify(Fe)!==JSON.stringify(_t.options)&&ge("error",`${_t.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(St){}return new we(_t)}const ge=(Fe,...ht)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Fe](...ht)},te={provide:we,useFactory:ce,deps:[be,u.R0b,[new u.FiY,me]]};let de=(()=>{class Fe{constructor(_e){se.Z.registerVersion("angularfire",Z.q4.full,"core"),se.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),se.Z.registerVersion("angular",u.q4F.full,_e.toString())}static initializeApp(_e,ot){return{ngModule:Fe,providers:[{provide:be,useValue:_e},{provide:me,useValue:ot}]}}}return Fe.\u0275fac=function(_e){return new(_e||Fe)(u.LFG(u.Lbi))},Fe.\u0275mod=u.oAB({type:Fe}),Fe.\u0275inj=u.cJS({providers:[te]}),Fe})();function Ue(Fe,ht,_e,ot,Ve){const[,rt,_t]=globalThis.\u0275AngularfireInstanceCache.find(St=>St[0]===Fe)||[];if(rt)return function Pe(Fe,ht){try{return Fe.toString()===ht.toString()}catch(_e){return Fe===ht}}(Ve,_t)||(Ne("error",`${ht} was already initialized on the ${_e} Firebase App with different settings.${ye?" You may need to reload as Firebase is not HMR aware.":""}`),Ne("warn",{is:Ve,was:_t})),rt;{const St=ot();return globalThis.\u0275AngularfireInstanceCache.push([Fe,St,Ve]),St}}const ye=!!en.hot,Ne=(Fe,...ht)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Fe](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(en,ut,H)=>{"use strict";H.d(ut,{q4:()=>Si,iC:()=>ks,HU:()=>Ro,vb:()=>bu,JM:()=>Ed});var u=H(5e3),se=H(5867),Z=H(5861),ke=H(9681),Te=H(2090),ae=H(4859),we=H(1877);const be="@firebase/installations",ge="w:0.5.7",te="FIS_v2",Fe=new Te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(k){return k instanceof Te.ZR&&k.code.includes("request-failed")}function _e({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function ot(k){return{token:k.token,requestStatus:2,expiresIn:Be(k.expiresIn),creationTime:Date.now()}}function Ve(k,z){return rt.apply(this,arguments)}function rt(){return(rt=(0,Z.Z)(function*(k,z){const Me=(yield z.json()).error;return Fe.create("request-failed",{requestName:k,serverCode:Me.code,serverMessage:Me.message,serverStatus:Me.status})})).apply(this,arguments)}function _t({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function St(k,{refreshToken:z}){const ie=_t(k);return ie.append("Authorization",function ve(k){return`${te} ${k}`}(z)),ie}function qe(k){return pe.apply(this,arguments)}function pe(){return(pe=(0,Z.Z)(function*(k){const z=yield k();return z.status>=500&&z.status<600?k():z})).apply(this,arguments)}function Be(k){return Number(k.replace("s","000"))}function De(k,z){return Je.apply(this,arguments)}function Je(){return(Je=(0,Z.Z)(function*({appConfig:k,heartbeatServiceProvider:z},{fid:ie}){const Me=_e(k),it=_t(k),wt=z.getImmediate({optional:!0});if(wt){const er=yield wt.getHeartbeatsHeader();er&&it.append("x-firebase-client",er)}const Dn={method:"POST",headers:it,body:JSON.stringify({fid:ie,authVersion:te,appId:k.appId,sdkVersion:ge})},mr=yield qe(()=>fetch(Me,Dn));if(mr.ok){const er=yield mr.json();return{fid:er.fid||ie,registrationStatus:2,refreshToken:er.refreshToken,authToken:ot(er.authToken)}}throw yield Ve("Create Installation",mr)})).apply(this,arguments)}function Ze(k){return new Promise(z=>{setTimeout(z,k)})}const Jt=/^[cdef][\w-]{21}$/;function st(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const ie=function Qe(k){return function jt(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return Jt.test(ie)?ie:""}catch(k){return""}}function nt(k){return`${k.appName}!${k.appId}`}const at=new Map;function Oe(k,z){const ie=nt(k);ft(ie,z),function Kt(k,z){const ie=function xn(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=k=>{ft(k.data.key,k.data.fid)}),gn}();ie&&ie.postMessage({key:k,fid:z}),function un(){0===at.size&&gn&&(gn.close(),gn=null)}()}(ie,z)}function ft(k,z){const ie=at.get(k);if(ie)for(const Me of ie)Me(z)}let gn=null;const Dr="firebase-installations-store";let Zn=null;function Yn(){return Zn||(Zn=(0,Te.X3)("firebase-installations-database",1,(k,z)=>{0===z&&k.createObjectStore(Dr)})),Zn}function Ht(k,z){return rr.apply(this,arguments)}function rr(){return(rr=(0,Z.Z)(function*(k,z){const ie=nt(k),it=(yield Yn()).transaction(Dr,"readwrite"),wt=it.objectStore(Dr),Vt=yield wt.get(ie);return yield wt.put(z,ie),yield it.complete,(!Vt||Vt.fid!==z.fid)&&Oe(k,z.fid),z})).apply(this,arguments)}function qr(k){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Z.Z)(function*(k){const z=nt(k),Me=(yield Yn()).transaction(Dr,"readwrite");yield Me.objectStore(Dr).delete(z),yield Me.complete})).apply(this,arguments)}function cr(k,z){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,Z.Z)(function*(k,z){const ie=nt(k),it=(yield Yn()).transaction(Dr,"readwrite"),wt=it.objectStore(Dr),Vt=yield wt.get(ie),Dn=z(Vt);return void 0===Dn?yield wt.delete(ie):yield wt.put(Dn,ie),yield it.complete,Dn&&(!Vt||Vt.fid!==Dn.fid)&&Oe(k,Dn.fid),Dn})).apply(this,arguments)}function on(k){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,Z.Z)(function*(k){let z;const ie=yield cr(k.appConfig,Me=>{const it=zt(Me),wt=ei(k,it);return z=wt.registrationPromise,wt.installationEntry});return""===ie.fid?{installationEntry:yield z}:{installationEntry:ie,registrationPromise:z}})).apply(this,arguments)}function zt(k){return Vn(k||{fid:st(),registrationStatus:0})}function ei(k,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(Fe.create("app-offline"))};const ie={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},Me=function kn(k,z){return dn.apply(this,arguments)}(k,ie);return{installationEntry:ie,registrationPromise:Me}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:Sn(k)}:{installationEntry:z}}function dn(){return(dn=(0,Z.Z)(function*(k,z){try{const ie=yield De(k,z);return Ht(k.appConfig,ie)}catch(ie){throw ht(ie)&&409===ie.customData.serverCode?yield qr(k.appConfig):yield Ht(k.appConfig,{fid:z.fid,registrationStatus:0}),ie}})).apply(this,arguments)}function Sn(k){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,Z.Z)(function*(k){let z=yield Ai(k.appConfig);for(;1===z.registrationStatus;)yield Ze(100),z=yield Ai(k.appConfig);if(0===z.registrationStatus){const{installationEntry:ie,registrationPromise:Me}=yield on(k);return Me||ie}return z})).apply(this,arguments)}function Ai(k){return cr(k,z=>{if(!z)throw Fe.create("installation-not-found");return Vn(z)})}function Vn(k){return function Pn(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function si(k,z){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,Z.Z)(function*({appConfig:k,heartbeatServiceProvider:z},ie){const Me=In(k,ie),it=St(k,ie),wt=z.getImmediate({optional:!0});if(wt){const er=yield wt.getHeartbeatsHeader();er&&it.append("x-firebase-client",er)}const Dn={method:"POST",headers:it,body:JSON.stringify({installation:{sdkVersion:ge,appId:k.appId}})},mr=yield qe(()=>fetch(Me,Dn));if(mr.ok)return ot(yield mr.json());throw yield Ve("Generate Auth Token",mr)})).apply(this,arguments)}function In(k,{fid:z}){return`${_e(k)}/${z}/authTokens:generate`}function ci(k){return ir.apply(this,arguments)}function ir(){return(ir=(0,Z.Z)(function*(k,z=!1){let ie;const Me=yield cr(k.appConfig,wt=>{if(!Rn(wt))throw Fe.create("not-registered");const Vt=wt.authToken;if(!z&&Le(Vt))return wt;if(1===Vt.requestStatus)return ie=sn(k,z),wt;{if(!navigator.onLine)throw Fe.create("app-offline");const Dn=je(wt);return ie=yn(k,Dn),Dn}});return ie?yield ie:Me.authToken})).apply(this,arguments)}function sn(k,z){return kt.apply(this,arguments)}function kt(){return(kt=(0,Z.Z)(function*(k,z){let ie=yield tn(k.appConfig);for(;1===ie.authToken.requestStatus;)yield Ze(100),ie=yield tn(k.appConfig);const Me=ie.authToken;return 0===Me.requestStatus?ci(k,z):Me})).apply(this,arguments)}function tn(k){return cr(k,z=>{if(!Rn(z))throw Fe.create("not-registered");return function vt(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function yn(k,z){return _n.apply(this,arguments)}function _n(){return(_n=(0,Z.Z)(function*(k,z){try{const ie=yield si(k,z),Me=Object.assign(Object.assign({},z),{authToken:ie});return yield Ht(k.appConfig,Me),ie}catch(ie){if(!ht(ie)||401!==ie.customData.serverCode&&404!==ie.customData.serverCode){const Me=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield Ht(k.appConfig,Me)}else yield qr(k.appConfig);throw ie}})).apply(this,arguments)}function Rn(k){return void 0!==k&&2===k.registrationStatus}function Le(k){return 2===k.requestStatus&&!function Ie(k){const z=Date.now();return z<k.creationTime||k.creationTime+k.expiresIn<z+36e5}(k)}function je(k){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:z})}function qt(){return(qt=(0,Z.Z)(function*(k){const z=k,{installationEntry:ie,registrationPromise:Me}=yield on(z);return Me?Me.catch(console.error):ci(z).catch(console.error),ie.fid})).apply(this,arguments)}function Qn(){return(Qn=(0,Z.Z)(function*(k,z=!1){const ie=k;return yield Qr(ie),(yield ci(ie,z)).token})).apply(this,arguments)}function Qr(k){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,Z.Z)(function*(k){const{registrationPromise:z}=yield on(k);z&&(yield z)})).apply(this,arguments)}function Or(k){return Fe.create("missing-app-config-values",{valueName:k})}const _i="installations",At=k=>{const z=k.getProvider("app").getImmediate(),ie=function Sr(k){if(!k||!k.options)throw Or("App Configuration");if(!k.name)throw Or("App Name");const z=["projectId","apiKey","appId"];for(const ie of z)if(!k.options[ie])throw Or(ie);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(z);return{app:z,appConfig:ie,heartbeatServiceProvider:(0,ke._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},vn=k=>{const z=k.getProvider("app").getImmediate(),ie=(0,ke._getProvider)(z,_i).getImmediate();return{getId:()=>function lt(k){return qt.apply(this,arguments)}(ie),getToken:it=>function Cn(k){return Qn.apply(this,arguments)}(ie,it)}};(function sr(){(0,ke._registerComponent)(new ae.wA(_i,At,"PUBLIC")),(0,ke._registerComponent)(new ae.wA("installations-internal",vn,"PRIVATE"))})(),(0,ke.registerVersion)(be,"0.5.7"),(0,ke.registerVersion)(be,"0.5.7","esm2017");const hr="@firebase/remote-config",Ur=new Te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hn{constructor(z,ie,Me,it){this.client=z,this.storage=ie,this.storageCache=Me,this.logger=it}isCachedDataFresh(z,ie){if(!ie)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Me=Date.now()-ie,it=Me<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Me}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${it}.`),it}fetch(z){var ie=this;return(0,Z.Z)(function*(){const[Me,it]=yield Promise.all([ie.storage.getLastSuccessfulFetchTimestampMillis(),ie.storage.getLastSuccessfulFetchResponse()]);if(it&&ie.isCachedDataFresh(z.cacheMaxAgeMillis,Me))return it;z.eTag=it&&it.eTag;const wt=yield ie.client.fetch(z),Vt=[ie.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===wt.status&&Vt.push(ie.storage.setLastSuccessfulFetchResponse(wt)),yield Promise.all(Vt),wt})()}}function En(k=navigator){return k.languages&&k.languages[0]||k.language}class Mn{constructor(z,ie,Me,it,wt,Vt){this.firebaseInstallations=z,this.sdkVersion=ie,this.namespace=Me,this.projectId=it,this.apiKey=wt,this.appId=Vt}fetch(z){var ie=this;return(0,Z.Z)(function*(){const[Me,it]=yield Promise.all([ie.firebaseInstallations.getId(),ie.firebaseInstallations.getToken()]),Vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ie.projectId}/namespaces/${ie.namespace}:fetch?key=${ie.apiKey}`,Dn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},mr={sdk_version:ie.sdkVersion,app_instance_id:Me,app_instance_id_token:it,app_id:ie.appId,language_code:En()},er={method:"POST",headers:Dn,body:JSON.stringify(mr)},Tr=fetch(Vt,er),lr=new Promise((Vr,zi)=>{z.signal.addEventListener(()=>{const La=new Error("The operation was aborted.");La.name="AbortError",zi(La)})});let so;try{yield Promise.race([Tr,lr]),so=yield Tr}catch(Vr){let zi="fetch-client-network";throw"AbortError"===Vr.name&&(zi="fetch-timeout"),Ur.create(zi,{originalErrorMessage:Vr.message})}let Wr=so.status;const Fs=so.headers.get("ETag")||void 0;let al,ll;if(200===so.status){let Vr;try{Vr=yield so.json()}catch(zi){throw Ur.create("fetch-client-parse",{originalErrorMessage:zi.message})}al=Vr.entries,ll=Vr.state}if("INSTANCE_STATE_UNSPECIFIED"===ll?Wr=500:"NO_CHANGE"===ll?Wr=304:("NO_TEMPLATE"===ll||"EMPTY_CONFIG"===ll)&&(al={}),304!==Wr&&200!==Wr)throw Ur.create("fetch-status",{httpStatus:Wr});return{status:Wr,eTag:Fs,config:al}})()}}class Ki{constructor(z,ie){this.client=z,this.storage=ie}fetch(z){var ie=this;return(0,Z.Z)(function*(){const Me=(yield ie.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ie.attemptFetch(z,Me)})()}attemptFetch(z,{throttleEndTimeMillis:ie,backoffCount:Me}){var it=this;return(0,Z.Z)(function*(){yield function $n(k,z){return new Promise((ie,Me)=>{const it=Math.max(z-Date.now(),0),wt=setTimeout(ie,it);k.addEventListener(()=>{clearTimeout(wt),Me(Ur.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,ie);try{const wt=yield it.client.fetch(z);return yield it.storage.deleteThrottleMetadata(),wt}catch(wt){if(!function gi(k){if(!(k instanceof Te.ZR&&k.customData))return!1;const z=Number(k.customData.httpStatus);return 429===z||500===z||503===z||504===z}(wt))throw wt;const Vt={throttleEndTimeMillis:Date.now()+(0,Te.$s)(Me),backoffCount:Me+1};return yield it.storage.setThrottleMetadata(Vt),it.attemptFetch(z,Vt)}})()}}class ct{constructor(z,ie,Me,it,wt){this.app=z,this._client=ie,this._storageCache=Me,this._storage=it,this._logger=wt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ot(k,z){const ie=k.target.error||void 0;return Ur.create(z,{originalErrorMessage:ie&&ie.message})}const Lt="app_namespace_store";class Hn{constructor(z,ie,Me,it=function xr(){return new Promise((k,z)=>{try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=Me=>{z(Ot(Me,"storage-open"))},ie.onsuccess=Me=>{k(Me.target.result)},ie.onupgradeneeded=Me=>{0===Me.oldVersion&&Me.target.result.createObjectStore(Lt,{keyPath:"compositeKey"})}}catch(ie){z(Ur.create("storage-open",{originalErrorMessage:ie}))}})}()){this.appId=z,this.appName=ie,this.namespace=Me,this.openDbPromise=it}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var ie=this;return(0,Z.Z)(function*(){const Me=yield ie.openDbPromise;return new Promise((it,wt)=>{const Dn=Me.transaction([Lt],"readonly").objectStore(Lt),mr=ie.createCompositeKey(z);try{const er=Dn.get(mr);er.onerror=Tr=>{wt(Ot(Tr,"storage-get"))},er.onsuccess=Tr=>{const lr=Tr.target.result;it(lr?lr.value:void 0)}}catch(er){wt(Ur.create("storage-get",{originalErrorMessage:er&&er.message}))}})})()}set(z,ie){var Me=this;return(0,Z.Z)(function*(){const it=yield Me.openDbPromise;return new Promise((wt,Vt)=>{const mr=it.transaction([Lt],"readwrite").objectStore(Lt),er=Me.createCompositeKey(z);try{const Tr=mr.put({compositeKey:er,value:ie});Tr.onerror=lr=>{Vt(Ot(lr,"storage-set"))},Tr.onsuccess=()=>{wt()}}catch(Tr){Vt(Ur.create("storage-set",{originalErrorMessage:Tr&&Tr.message}))}})})()}delete(z){var ie=this;return(0,Z.Z)(function*(){const Me=yield ie.openDbPromise;return new Promise((it,wt)=>{const Dn=Me.transaction([Lt],"readwrite").objectStore(Lt),mr=ie.createCompositeKey(z);try{const er=Dn.delete(mr);er.onerror=Tr=>{wt(Ot(Tr,"storage-delete"))},er.onsuccess=()=>{it()}}catch(er){wt(Ur.create("storage-delete",{originalErrorMessage:er&&er.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class ps{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,Z.Z)(function*(){const ie=z.storage.getLastFetchStatus(),Me=z.storage.getLastSuccessfulFetchTimestampMillis(),it=z.storage.getActiveConfig(),wt=yield ie;wt&&(z.lastFetchStatus=wt);const Vt=yield Me;Vt&&(z.lastSuccessfulFetchTimestampMillis=Vt);const Dn=yield it;Dn&&(z.activeConfig=Dn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function wi(){return ls.apply(this,arguments)}function ls(){return(ls=(0,Z.Z)(function*(){if(!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(k){return!1}})).apply(this,arguments)}!function Ri(){(0,ke._registerComponent)(new ae.wA("remote-config",function k(z,{instanceIdentifier:ie}){const Me=z.getProvider("app").getImmediate(),it=z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ur.create("registration-window");if(!(0,Te.hl)())throw Ur.create("indexed-db-unavailable");const{projectId:wt,apiKey:Vt,appId:Dn}=Me.options;if(!wt)throw Ur.create("registration-project-id");if(!Vt)throw Ur.create("registration-api-key");if(!Dn)throw Ur.create("registration-app-id");const mr=new Hn(Dn,Me.name,ie=ie||"firebase"),er=new ps(mr),Tr=new we.Yd(hr);Tr.logLevel=we.in.ERROR;const lr=new Mn(it,ke.SDK_VERSION,ie,wt,Vt,Dn),so=new Ki(lr,mr),Wr=new hn(so,mr,er,Tr),Fs=new ct(Me,Wr,er,mr,Tr);return function Q(k){const z=(0,Te.m9)(k);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(Fs),Fs},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(hr,"0.3.6"),(0,ke.registerVersion)(hr,"0.3.6","esm2017")}();const to="/firebase-messaging-sw.js",gs="/firebase-cloud-messaging-push-scope",Bi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Kr="google.c.a.c_id",$s="google.c.a.c_l",yo="google.c.a.ts",Ko="google.c.a.e";var Ns=(()=>{return(k=Ns||(Ns={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",Ns;var k})();function Hi(k){const z=new Uint8Array(k);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _o(k){const ie=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Me=atob(ie),it=new Uint8Array(Me.length);for(let wt=0;wt<Me.length;++wt)it[wt]=Me.charCodeAt(wt);return it}const Oi="fcm_token_details_db",mi="fcm_token_object_Store";function us(k){return vo.apply(this,arguments)}function vo(){return vo=(0,Z.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(wt=>wt.name).includes(Oi))return null;let z=null;return(yield(0,Te.X3)(Oi,5,function(){var Me=(0,Z.Z)(function*(it,wt,Vt,Dn){var mr;if(wt<2||!it.objectStoreNames.contains(mi))return;const er=Dn.objectStore(mi),Tr=yield er.index("fcmSenderId").get(k);if(yield er.clear(),Tr)if(2===wt){const lr=Tr;if(!lr.auth||!lr.p256dh||!lr.endpoint)return;z={token:lr.fcmToken,createTime:null!==(mr=lr.createTime)&&void 0!==mr?mr:Date.now(),subscriptionOptions:{auth:lr.auth,p256dh:lr.p256dh,endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:"string"==typeof lr.vapidKey?lr.vapidKey:Hi(lr.vapidKey)}}}else if(3===wt){const lr=Tr;z={token:lr.fcmToken,createTime:lr.createTime,subscriptionOptions:{auth:Hi(lr.auth),p256dh:Hi(lr.p256dh),endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:Hi(lr.vapidKey)}}}else if(4===wt){const lr=Tr;z={token:lr.fcmToken,createTime:lr.createTime,subscriptionOptions:{auth:Hi(lr.auth),p256dh:Hi(lr.p256dh),endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:Hi(lr.vapidKey)}}}});return function(it,wt,Vt,Dn){return Me.apply(this,arguments)}}())).close(),yield(0,Te.Lj)(Oi),yield(0,Te.Lj)("fcm_vapid_details_db"),yield(0,Te.Lj)("undefined"),cs(z)?z:null}),vo.apply(this,arguments)}function cs(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:z}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}const Ii="firebase-messaging-store";let Ts=null;function Fo(){return Ts||(Ts=(0,Te.X3)("firebase-messaging-database",1,(k,z)=>{0===z&&k.createObjectStore(Ii)})),Ts}function Er(k){return $.apply(this,arguments)}function $(){return($=(0,Z.Z)(function*(k){const z=mt(k),Me=yield(yield Fo()).transaction(Ii).objectStore(Ii).get(z);if(Me)return Me;{const it=yield us(k.appConfig.senderId);if(it)return yield ee(k,it),it}})).apply(this,arguments)}function ee(k,z){return U.apply(this,arguments)}function U(){return(U=(0,Z.Z)(function*(k,z){const ie=mt(k),it=(yield Fo()).transaction(Ii,"readwrite");return yield it.objectStore(Ii).put(z,ie),yield it.complete,z})).apply(this,arguments)}function le(k){return ze.apply(this,arguments)}function ze(){return(ze=(0,Z.Z)(function*(k){const z=mt(k),Me=(yield Fo()).transaction(Ii,"readwrite");yield Me.objectStore(Ii).delete(z),yield Me.complete})).apply(this,arguments)}function mt({appConfig:k}){return k.appId}const Qt=new Te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zr(k,z){return br.apply(this,arguments)}function br(){return(br=(0,Z.Z)(function*(k,z){const ie=yield uo(k),Me=On(z),it={method:"POST",headers:ie,body:JSON.stringify(Me)};let wt;try{wt=yield(yield fetch(ai(k.appConfig),it)).json()}catch(Vt){throw Qt.create("token-subscribe-failed",{errorInfo:Vt})}if(wt.error)throw Qt.create("token-subscribe-failed",{errorInfo:wt.error.message});if(!wt.token)throw Qt.create("token-subscribe-no-token");return wt.token})).apply(this,arguments)}function Xn(k,z){return pr.apply(this,arguments)}function pr(){return(pr=(0,Z.Z)(function*(k,z){const ie=yield uo(k),Me=On(z.subscriptionOptions),it={method:"PATCH",headers:ie,body:JSON.stringify(Me)};let wt;try{wt=yield(yield fetch(`${ai(k.appConfig)}/${z.token}`,it)).json()}catch(Vt){throw Qt.create("token-update-failed",{errorInfo:Vt})}if(wt.error)throw Qt.create("token-update-failed",{errorInfo:wt.error.message});if(!wt.token)throw Qt.create("token-update-no-token");return wt.token})).apply(this,arguments)}function hi(k,z){return oi.apply(this,arguments)}function oi(){return(oi=(0,Z.Z)(function*(k,z){const Me={method:"DELETE",headers:yield uo(k)};try{const wt=yield(yield fetch(`${ai(k.appConfig)}/${z}`,Me)).json();if(wt.error)throw Qt.create("token-unsubscribe-failed",{errorInfo:wt.error.message})}catch(it){throw Qt.create("token-unsubscribe-failed",{errorInfo:it})}})).apply(this,arguments)}function ai({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function uo(k){return ds.apply(this,arguments)}function ds(){return(ds=(0,Z.Z)(function*({appConfig:k,installations:z}){const ie=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${ie}`})})).apply(this,arguments)}function On({p256dh:k,auth:z,endpoint:ie,vapidKey:Me}){const it={web:{endpoint:ie,auth:z,p256dh:k}};return Me!==Bi&&(it.web.applicationPubKey=Me),it}const _s=6048e5;function G(k){return F.apply(this,arguments)}function F(){return(F=(0,Z.Z)(function*(k){const z=yield ue(k.swRegistration,k.vapidKey),ie={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:z.endpoint,auth:Hi(z.getKey("auth")),p256dh:Hi(z.getKey("p256dh"))},Me=yield Er(k.firebaseDependencies);if(Me){if(Zt(Me.subscriptionOptions,ie))return Date.now()>=Me.createTime+_s?v(k,{token:Me.token,createTime:Date.now(),subscriptionOptions:ie}):Me.token;try{yield hi(k.firebaseDependencies,Me.token)}catch(it){console.warn(it)}return E(k.firebaseDependencies,ie)}return E(k.firebaseDependencies,ie)})).apply(this,arguments)}function N(k){return oe.apply(this,arguments)}function oe(){return(oe=(0,Z.Z)(function*(k){const z=yield Er(k.firebaseDependencies);z&&(yield hi(k.firebaseDependencies,z.token),yield le(k.firebaseDependencies));const ie=yield k.swRegistration.pushManager.getSubscription();return!ie||ie.unsubscribe()})).apply(this,arguments)}function v(k,z){return V.apply(this,arguments)}function V(){return(V=(0,Z.Z)(function*(k,z){try{const ie=yield Xn(k.firebaseDependencies,z),Me=Object.assign(Object.assign({},z),{token:ie,createTime:Date.now()});return yield ee(k.firebaseDependencies,Me),ie}catch(ie){throw yield N(k),ie}})).apply(this,arguments)}function E(k,z){return L.apply(this,arguments)}function L(){return(L=(0,Z.Z)(function*(k,z){const Me={token:yield zr(k,z),createTime:Date.now(),subscriptionOptions:z};return yield ee(k,Me),Me.token})).apply(this,arguments)}function ue(k,z){return dt.apply(this,arguments)}function dt(){return(dt=(0,Z.Z)(function*(k,z){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_o(z)})})).apply(this,arguments)}function Zt(k,z){return z.vapidKey===k.vapidKey&&z.endpoint===k.endpoint&&z.auth===k.auth&&z.p256dh===k.p256dh}function bn(k){const z={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Nn(k,z){if(!z.notification)return;k.notification={};const ie=z.notification.title;ie&&(k.notification.title=ie);const Me=z.notification.body;Me&&(k.notification.body=Me);const it=z.notification.image;it&&(k.notification.image=it)}(z,k),function Nr(k,z){!z.data||(k.data=z.data)}(z,k),function yi(k,z){if(!z.fcmOptions)return;k.fcmOptions={};const ie=z.fcmOptions.link;ie&&(k.fcmOptions.link=ie);const Me=z.fcmOptions.analytics_label;Me&&(k.fcmOptions.analyticsLabel=Me)}(z,k),z}function Pi(k){return"object"==typeof k&&!!k&&Kr in k}function no(k,z){const ie=[];for(let Me=0;Me<k.length;Me++)ie.push(k.charAt(Me)),Me<z.length&&ie.push(z.charAt(Me));return ie.join("")}function Xi(k){return Qt.create("missing-app-config-values",{valueName:k})}no("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),no("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class li{constructor(z,ie,Me){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const it=function Qi(k){if(!k||!k.options)throw Xi("App Configuration Object");if(!k.name)throw Xi("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:ie}=k;for(const Me of z)if(!ie[Me])throw Xi(Me);return{appName:k.name,projectId:ie.projectId,apiKey:ie.apiKey,appId:ie.appId,senderId:ie.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:it,installations:ie,analyticsProvider:Me}}_delete(){return Promise.resolve()}}function es(k){return sa.apply(this,arguments)}function sa(){return(sa=(0,Z.Z)(function*(k){try{k.swRegistration=yield navigator.serviceWorker.register(to,{scope:gs}),k.swRegistration.update().catch(()=>{})}catch(z){throw Qt.create("failed-service-worker-registration",{browserErrorMessage:z.message})}})).apply(this,arguments)}function Zo(k,z){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,Z.Z)(function*(k,z){if(!z&&!k.swRegistration&&(yield es(k)),z||!k.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");k.swRegistration=z}})).apply(this,arguments)}function Qo(k,z){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,Z.Z)(function*(k,z){z?k.vapidKey=z:k.vapidKey||(k.vapidKey=Bi)})).apply(this,arguments)}function Ja(){return(Ja=(0,Z.Z)(function*(k,z){if(!navigator)throw Qt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qt.create("permission-blocked");return yield Qo(k,null==z?void 0:z.vapidKey),yield Zo(k,null==z?void 0:z.serviceWorkerRegistration),G(k)})).apply(this,arguments)}function el(k,z,ie){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,Z.Z)(function*(k,z,ie){const Me=Aa(z);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(Me,{message_id:ie[Kr],message_name:ie[$s],message_time:ie[yo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Aa(k){switch(k){case Ns.NOTIFICATION_CLICKED:return"notification_open";case Ns.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tl(){return(tl=(0,Z.Z)(function*(k,z){const ie=z.data;if(!ie.isFirebaseMessaging)return;k.onMessageHandler&&ie.messageType===Ns.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(bn(ie)):k.onMessageHandler.next(bn(ie)));const Me=ie.data;Pi(Me)&&"1"===Me[Ko]&&(yield el(k,ie.messageType,Me))})).apply(this,arguments)}const nl="@firebase/messaging",xa=k=>{const z=new li(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ie=>function Sl(k,z){return tl.apply(this,arguments)}(z,ie)),z},Lo=k=>{const z=k.getProvider("messaging").getImmediate();return{getToken:Me=>function Gi(k,z){return Ja.apply(this,arguments)}(z,Me)}};function Ma(){return oa.apply(this,arguments)}function oa(){return(oa=(0,Z.Z)(function*(){try{yield(0,Te.eu)()}catch(k){return!1}return"undefined"!=typeof window&&(0,Te.hl)()&&(0,Te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function co(){(0,ke._registerComponent)(new ae.wA("messaging",xa,"PUBLIC")),(0,ke._registerComponent)(new ae.wA("messaging-internal",Lo,"PRIVATE")),(0,ke.registerVersion)(nl,"0.9.11"),(0,ke.registerVersion)(nl,"0.9.11","esm2017")}();const Oa="analytics",Ni="firebase_id",Jo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vo="https://www.googletagmanager.com/gtag/js",ri=new we.Yd("@firebase/analytics");function Al(k){return Promise.all(k.map(z=>z.catch(ie=>ie)))}function xl(k,z){const ie=document.createElement("script");ie.src=`${Vo}?l=${k}&id=${z}`,ie.async=!0,document.head.appendChild(ie)}function Bo(k,z,ie,Me,it,wt){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,Z.Z)(function*(k,z,ie,Me,it,wt){const Vt=Me[it];try{if(Vt)yield z[Vt];else{const mr=(yield Al(ie)).find(er=>er.measurementId===it);mr&&(yield z[mr.appId])}}catch(Dn){ri.error(Dn)}k("config",it,wt)})).apply(this,arguments)}function va(k,z,ie,Me,it){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,Z.Z)(function*(k,z,ie,Me,it){try{let wt=[];if(it&&it.send_to){let Vt=it.send_to;Array.isArray(Vt)||(Vt=[Vt]);const Dn=yield Al(ie);for(const mr of Vt){const er=Dn.find(lr=>lr.measurementId===mr),Tr=er&&z[er.appId];if(!Tr){wt=[];break}wt.push(Tr)}}0===wt.length&&(wt=Object.values(z)),yield Promise.all(wt),k("event",Me,it||{})}catch(wt){ri.error(wt)}})).apply(this,arguments)}function aa(){const k=window.document.getElementsByTagName("script");for(const z of Object.values(k))if(z.src&&z.src.includes(Vo))return z;return null}const ts=new Te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wr=new class $o{constructor(z={},ie=1e3){this.throttleMetadata=z,this.intervalMillis=ie}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,ie){this.throttleMetadata[z]=ie}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function Eo(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function Pa(k){return pi.apply(this,arguments)}function pi(){return(pi=(0,Z.Z)(function*(k){var z;const{appId:ie,apiKey:Me}=k,it={method:"GET",headers:Eo(Me)},wt=Jo.replace("{app-id}",ie),Vt=yield fetch(wt,it);if(200!==Vt.status&&304!==Vt.status){let Dn="";try{const mr=yield Vt.json();(null===(z=mr.error)||void 0===z?void 0:z.message)&&(Dn=mr.error.message)}catch(mr){}throw ts.create("config-fetch-failed",{httpStatus:Vt.status,responseMessage:Dn})}return Vt.json()})).apply(this,arguments)}function Uo(k){return vs.apply(this,arguments)}function vs(){return(vs=(0,Z.Z)(function*(k,z=wr,ie){const{appId:Me,apiKey:it,measurementId:wt}=k.options;if(!Me)throw ts.create("no-app-id");if(!it){if(wt)return{measurementId:wt,appId:Me};throw ts.create("no-api-key")}const Vt=z.getThrottleMetadata(Me)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dn=new jo;return setTimeout((0,Z.Z)(function*(){Dn.abort()}),void 0!==ie?ie:6e4),Ss({appId:Me,apiKey:it,measurementId:wt},Vt,Dn,z)})).apply(this,arguments)}function Ss(k,z,ie){return la.apply(this,arguments)}function la(){return(la=(0,Z.Z)(function*(k,{throttleEndTimeMillis:z,backoffCount:ie},Me,it=wr){const{appId:wt,measurementId:Vt}=k;try{yield ro(Me,z)}catch(Dn){if(Vt)return ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vt} provided in the "measurementId" field in the local Firebase config. [${Dn.message}]`),{appId:wt,measurementId:Vt};throw Dn}try{const Dn=yield Pa(k);return it.deleteThrottleMetadata(wt),Dn}catch(Dn){if(!As(Dn)){if(it.deleteThrottleMetadata(wt),Vt)return ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vt} provided in the "measurementId" field in the local Firebase config. [${Dn.message}]`),{appId:wt,measurementId:Vt};throw Dn}const mr=503===Number(Dn.customData.httpStatus)?(0,Te.$s)(ie,it.intervalMillis,30):(0,Te.$s)(ie,it.intervalMillis),er={throttleEndTimeMillis:Date.now()+mr,backoffCount:ie+1};return it.setThrottleMetadata(wt,er),ri.debug(`Calling attemptFetch again in ${mr} millis`),Ss(k,er,Me,it)}})).apply(this,arguments)}function ro(k,z){return new Promise((ie,Me)=>{const it=Math.max(z-Date.now(),0),wt=setTimeout(ie,it);k.addEventListener(()=>{clearTimeout(wt),Me(ts.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}function As(k){if(!(k instanceof Te.ZR&&k.customData))return!1;const z=Number(k.customData.httpStatus);return 429===z||500===z||503===z||504===z}class jo{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}function Ho(){return ua.apply(this,arguments)}function ua(){return(ua=(0,Z.Z)(function*(){if(!(0,Te.hl)())return ri.warn(ts.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Te.eu)()}catch(k){return ri.warn(ts.create("indexeddb-unavailable",{errorInfo:k}).message),!1}return!0})).apply(this,arguments)}function Wt(){return(Wt=(0,Z.Z)(function*(k,z,ie,Me,it,wt,Vt){var Dn;const mr=Uo(k);mr.then(Wr=>{ie[Wr.measurementId]=Wr.appId,k.options.measurementId&&Wr.measurementId!==k.options.measurementId&&ri.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${Wr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wr=>ri.error(Wr)),z.push(mr);const er=Ho().then(Wr=>{if(Wr)return Me.getId()}),[Tr,lr]=yield Promise.all([mr,er]);aa()||xl(wt,Tr.measurementId),it("js",new Date);const so=null!==(Dn=null==Vt?void 0:Vt.config)&&void 0!==Dn?Dn:{};return so.origin="firebase",so.update=!0,null!=lr&&(so[Ni]=lr),it("config",Tr.measurementId,so),Tr.measurementId})).apply(this,arguments)}class Di{constructor(z){this.app=z}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},bo=[];const An={};let cn,gt,Kn="dataLayer",A=!1;function B(k,z,ie){!function D(){const k=[];if((0,Te.ru)()&&k.push("This is a browser extension environment."),(0,Te.zI)()||k.push("Cookies are not available."),k.length>0){const z=k.map((Me,it)=>`(${it+1}) ${Me}`).join(" "),ie=ts.create("invalid-analytics-context",{errorInfo:z});ri.warn(ie.message)}}();const Me=k.options.appId;if(!Me)throw ts.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw ts.create("no-api-key");ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[Me])throw ts.create("already-exists",{id:Me});if(!A){!function Ao(k){let z=[];Array.isArray(window[k])?z=window[k]:window[k]=z}(Kn);const{wrappedGtag:wt,gtagCore:Vt}=function ql(k,z,ie,Me,it){let wt=function(...Vt){window[Me].push(arguments)};return window[it]&&"function"==typeof window[it]&&(wt=window[it]),window[it]=function Ml(k,z,ie,Me){function wt(){return(wt=(0,Z.Z)(function*(Vt,Dn,mr){try{"event"===Vt?yield va(k,z,ie,Dn,mr):"config"===Vt?yield Bo(k,z,ie,Me,Dn,mr):k("set",Dn)}catch(er){ri.error(er)}})).apply(this,arguments)}return function it(Vt,Dn,mr){return wt.apply(this,arguments)}}(wt,k,z,ie),{gtagCore:wt,wrappedGtag:window[it]}}(ns,bo,An,Kn,"gtag");gt=wt,cn=Vt,A=!0}return ns[Me]=function ca(k,z,ie,Me,it,wt,Vt){return Wt.apply(this,arguments)}(k,bo,An,z,cn,Kn,ie),new Di(k)}function ne(){return(ne=(0,Z.Z)(function*(k,z,ie,Me,it){if(it&&it.global)k("event",ie,Me);else{const wt=yield z;k("event",ie,Object.assign(Object.assign({},Me),{send_to:wt}))}})).apply(this,arguments)}function xo(){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,Z.Z)(function*(){if((0,Te.ru)()||!(0,Te.zI)()||!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(k){return!1}})).apply(this,arguments)}const Fr="@firebase/analytics";!function bs(){(0,ke._registerComponent)(new ae.wA(Oa,(z,{options:ie})=>B(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),ie),"PUBLIC")),(0,ke._registerComponent)(new ae.wA("analytics-internal",function k(z){try{const ie=z.getProvider(Oa).getImmediate();return{logEvent:(Me,it,wt)=>function Yl(k,z,ie,Me){k=(0,Te.m9)(k),function W(k,z,ie,Me,it){return ne.apply(this,arguments)}(gt,ns[k.app.options.appId],z,ie,Me).catch(it=>ri.error(it))}(ie,Me,it,wt)}}catch(ie){throw ts.create("interop-component-reg-failed",{reason:ie})}},"PRIVATE")),(0,ke.registerVersion)(Fr,"0.7.7"),(0,ke.registerVersion)(Fr,"0.7.7","esm2017")}();var Zl=H(341),Ea=H(353),hs=H(2868),ws=H(8915),Mo=H(2102);const Si=new u.GfV("7.3.0"),Na="__angularfire_symbol__analyticsIsSupportedValue",sl="__angularfire_symbol__analyticsIsSupported",xs="__angularfire_symbol__remoteConfigIsSupportedValue",js="__angularfire_symbol__remoteConfigIsSupported",Pl="__angularfire_symbol__messagingIsSupportedValue",io="__angularfire_symbol__messagingIsSupported";function Ed(k,z,ie){if(z){if(1===z.length)return z[0];const wt=z.filter(Vt=>Vt.app===ie);if(1===wt.length)return wt[0]}return ie.container.getProvider(k).getImmediate({optional:!0})}globalThis[sl]||(globalThis[sl]=xo().then(k=>globalThis[Na]=k).catch(()=>globalThis[Na]=!1)),globalThis[io]||(globalThis[io]=Ma().then(k=>globalThis[Pl]=k).catch(()=>globalThis[Pl]=!1)),globalThis[js]||(globalThis[js]=wi().then(k=>globalThis[xs]=k).catch(()=>globalThis[xs]=!1));const bu=(k,z)=>{const ie=z?[z]:(0,se.C6)(),Me=[];return ie.forEach(it=>{it.container.getProvider(k).instances.forEach(Vt=>{Me.includes(Vt)||Me.push(Vt)})}),Me};function Rs(){}class $i{constructor(z,ie=Zl.N){this.zone=z,this.delegate=ie}now(){return this.delegate.now()}schedule(z,ie,Me){const it=this.zone;return this.delegate.schedule(function(Vt){it.runGuarded(()=>{z.apply(this,[Vt])})},ie,Me)}}class ba{constructor(z){this.zone=z,this.task=null}call(z,ie){const Me=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),ie.pipe((0,hs.b)({next:Me,complete:Me,error:Me})).subscribe(z).add(Me)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ro=(()=>{class k{constructor(ie){this.ngZone=ie,this.outsideAngular=ie.runOutsideAngular(()=>new $i(Zone.current)),this.insideAngular=ie.run(()=>new $i(Zone.current,Ea.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(ie){return new(ie||k)(u.LFG(u.R0b))},k.\u0275prov=u.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function wa(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function ks(k){return wa(),function Iu(k){return function(ie){return(ie=ie.lift(new ba(k.ngZone))).pipe((0,ws.R)(k.outsideAngular),(0,Mo.QV)(k.insideAngular))}}(wa())(k)}},2090:(en,ut,H)=>{"use strict";H.d(ut,{BH:()=>Ue,LL:()=>jt,ZR:()=>Ze,gQ:()=>Yn,zI:()=>ve,hu:()=>Z,g5:()=>ke,US:()=>we,tV:()=>ce,h$:()=>be,L:()=>me,$s:()=>Pn,r3:()=>ft,Sg:()=>Pe,ne:()=>Ht,p$:()=>ge,vZ:()=>un,ZB:()=>te,Lj:()=>_n,gK:()=>on,pd:()=>Zn,m9:()=>In,z$:()=>ye,GJ:()=>Dt,jU:()=>ht,ru:()=>_e,d:()=>Ve,xb:()=>gn,w1:()=>rt,hl:()=>pe,uI:()=>Ne,UG:()=>Fe,Yr:()=>St,b$:()=>ot,G6:()=>qe,Mn:()=>_t,w9:()=>Xe,cI:()=>st,UI:()=>xn,X3:()=>yn,xO:()=>fr,zd:()=>Dr,DV:()=>Kt,ug:()=>dn,dS:()=>kn,Pz:()=>Qe,Dv:()=>Hr,Wj:()=>zt,lb:()=>ei,eu:()=>Be});var u=H(5861);const Z=function(Le,Ie){if(!Le)throw ke(Ie)},ke=function(Le){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Le)},Te=function(Le){const Ie=[];let je=0;for(let vt=0;vt<Le.length;vt++){let lt=Le.charCodeAt(vt);lt<128?Ie[je++]=lt:lt<2048?(Ie[je++]=lt>>6|192,Ie[je++]=63&lt|128):55296==(64512&lt)&&vt+1<Le.length&&56320==(64512&Le.charCodeAt(vt+1))?(lt=65536+((1023&lt)<<10)+(1023&Le.charCodeAt(++vt)),Ie[je++]=lt>>18|240,Ie[je++]=lt>>12&63|128,Ie[je++]=lt>>6&63|128,Ie[je++]=63&lt|128):(Ie[je++]=lt>>12|224,Ie[je++]=lt>>6&63|128,Ie[je++]=63&lt|128)}return Ie},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Le,Ie){if(!Array.isArray(Le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const je=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,vt=[];for(let lt=0;lt<Le.length;lt+=3){const qt=Le[lt],Cn=lt+1<Le.length,Qn=Cn?Le[lt+1]:0,Qr=lt+2<Le.length,Bn=Qr?Le[lt+2]:0;let vr=(15&Qn)<<2|Bn>>6,Rr=63&Bn;Qr||(Rr=64,Cn||(vr=64)),vt.push(je[qt>>2],je[(3&qt)<<4|Qn>>4],je[vr],je[Rr])}return vt.join("")},encodeString(Le,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(Le):this.encodeByteArray(Te(Le),Ie)},decodeString(Le,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(Le):function(Le){const Ie=[];let je=0,vt=0;for(;je<Le.length;){const lt=Le[je++];if(lt<128)Ie[vt++]=String.fromCharCode(lt);else if(lt>191&&lt<224){const qt=Le[je++];Ie[vt++]=String.fromCharCode((31&lt)<<6|63&qt)}else if(lt>239&&lt<365){const Qr=((7&lt)<<18|(63&Le[je++])<<12|(63&Le[je++])<<6|63&Le[je++])-65536;Ie[vt++]=String.fromCharCode(55296+(Qr>>10)),Ie[vt++]=String.fromCharCode(56320+(1023&Qr))}else{const qt=Le[je++],Cn=Le[je++];Ie[vt++]=String.fromCharCode((15&lt)<<12|(63&qt)<<6|63&Cn)}}return Ie.join("")}(this.decodeStringToByteArray(Le,Ie))},decodeStringToByteArray(Le,Ie){this.init_();const je=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,vt=[];for(let lt=0;lt<Le.length;){const qt=je[Le.charAt(lt++)],Qn=lt<Le.length?je[Le.charAt(lt)]:0;++lt;const Bn=lt<Le.length?je[Le.charAt(lt)]:64;++lt;const jn=lt<Le.length?je[Le.charAt(lt)]:64;if(++lt,null==qt||null==Qn||null==Bn||null==jn)throw Error();vt.push(qt<<2|Qn>>4),64!==Bn&&(vt.push(Qn<<4&240|Bn>>2),64!==jn&&vt.push(Bn<<6&192|jn))}return vt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Le=0;Le<this.ENCODED_VALS.length;Le++)this.byteToCharMap_[Le]=this.ENCODED_VALS.charAt(Le),this.charToByteMap_[this.byteToCharMap_[Le]]=Le,this.byteToCharMapWebSafe_[Le]=this.ENCODED_VALS_WEBSAFE.charAt(Le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Le]]=Le,Le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Le)]=Le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Le)]=Le)}}},be=function(Le){const Ie=Te(Le);return we.encodeByteArray(Ie,!0)},me=function(Le){return be(Le).replace(/\./g,"")},ce=function(Le){try{return we.decodeString(Le,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function ge(Le){return te(void 0,Le)}function te(Le,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===Le&&(Le={});break;case Array:Le=[];break;default:return Ie}for(const je in Ie)!Ie.hasOwnProperty(je)||!de(je)||(Le[je]=te(Le[je],Ie[je]));return Le}function de(Le){return"__proto__"!==Le}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,je)=>{this.resolve=Ie,this.reject=je})}wrapCallback(Ie){return(je,vt)=>{je?this.reject(je):this.resolve(vt),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(je):Ie(je,vt))}}}function Pe(Le,Ie){if(Le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const vt=Ie||"demo-project",lt=Le.iat||0,qt=Le.sub||Le.user_id;if(!qt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Cn=Object.assign({iss:`https://securetoken.google.com/${vt}`,aud:vt,iat:lt,exp:lt+3600,auth_time:lt,sub:qt,user_id:qt,firebase:{sign_in_provider:"custom",identities:{}}},Le);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(Cn)),""].join(".")}function ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Le){return!1}}function ht(){return"object"==typeof self&&self.self===self}function _e(){const Le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Le&&void 0!==Le.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){return ye().indexOf("Electron/")>=0}function rt(){const Le=ye();return Le.indexOf("MSIE ")>=0||Le.indexOf("Trident/")>=0}function _t(){return ye().indexOf("MSAppHost/")>=0}function St(){return!1}function qe(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Be(){return new Promise((Le,Ie)=>{try{let je=!0;const vt="validate-browser-context-for-indexeddb-analytics-module",lt=self.indexedDB.open(vt);lt.onsuccess=()=>{lt.result.close(),je||self.indexedDB.deleteDatabase(vt),Le(!0)},lt.onupgradeneeded=()=>{je=!1},lt.onerror=()=>{var qt;Ie((null===(qt=lt.error)||void 0===qt?void 0:qt.message)||"")}}catch(je){Ie(je)}})}function ve(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(Ie,je,vt){super(je),this.code=Ie,this.customData=vt,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(Ie,je,vt){this.service=Ie,this.serviceName=je,this.errors=vt}create(Ie,...je){const vt=je[0]||{},lt=`${this.service}/${Ie}`,qt=this.errors[Ie],Cn=qt?function Jt(Le,Ie){return Le.replace(pt,(je,vt)=>{const lt=Ie[vt];return null!=lt?String(lt):`<${vt}?>`})}(qt,vt):"Error";return new Ze(lt,`${this.serviceName}: ${Cn} (${lt}).`,vt)}}const pt=/\{\$([^}]+)}/g;function st(Le){return JSON.parse(Le)}function Qe(Le){return JSON.stringify(Le)}const nt=function(Le){let Ie={},je={},vt={},lt="";try{const qt=Le.split(".");Ie=st(ce(qt[0])||""),je=st(ce(qt[1])||""),lt=qt[2],vt=je.d||{},delete je.d}catch(qt){}return{header:Ie,claims:je,data:vt,signature:lt}},Xe=function(Le){const je=nt(Le).claims;return!!je&&"object"==typeof je&&je.hasOwnProperty("iat")},Dt=function(Le){const Ie=nt(Le).claims;return"object"==typeof Ie&&!0===Ie.admin};function ft(Le,Ie){return Object.prototype.hasOwnProperty.call(Le,Ie)}function Kt(Le,Ie){if(Object.prototype.hasOwnProperty.call(Le,Ie))return Le[Ie]}function gn(Le){for(const Ie in Le)if(Object.prototype.hasOwnProperty.call(Le,Ie))return!1;return!0}function xn(Le,Ie,je){const vt={};for(const lt in Le)Object.prototype.hasOwnProperty.call(Le,lt)&&(vt[lt]=Ie.call(je,Le[lt],lt,Le));return vt}function un(Le,Ie){if(Le===Ie)return!0;const je=Object.keys(Le),vt=Object.keys(Ie);for(const lt of je){if(!vt.includes(lt))return!1;const qt=Le[lt],Cn=Ie[lt];if(rn(qt)&&rn(Cn)){if(!un(qt,Cn))return!1}else if(qt!==Cn)return!1}for(const lt of vt)if(!je.includes(lt))return!1;return!0}function rn(Le){return null!==Le&&"object"==typeof Le}function fr(Le){const Ie=[];for(const[je,vt]of Object.entries(Le))Array.isArray(vt)?vt.forEach(lt=>{Ie.push(encodeURIComponent(je)+"="+encodeURIComponent(lt))}):Ie.push(encodeURIComponent(je)+"="+encodeURIComponent(vt));return Ie.length?"&"+Ie.join("&"):""}function Dr(Le){const Ie={};return Le.replace(/^\?/,"").split("&").forEach(vt=>{if(vt){const[lt,qt]=vt.split("=");Ie[decodeURIComponent(lt)]=decodeURIComponent(qt)}}),Ie}function Zn(Le){const Ie=Le.indexOf("?");if(!Ie)return"";const je=Le.indexOf("#",Ie);return Le.substring(Ie,je>0?je:void 0)}class Yn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,je){je||(je=0);const vt=this.W_;if("string"==typeof Ie)for(let jn=0;jn<16;jn++)vt[jn]=Ie.charCodeAt(je)<<24|Ie.charCodeAt(je+1)<<16|Ie.charCodeAt(je+2)<<8|Ie.charCodeAt(je+3),je+=4;else for(let jn=0;jn<16;jn++)vt[jn]=Ie[je]<<24|Ie[je+1]<<16|Ie[je+2]<<8|Ie[je+3],je+=4;for(let jn=16;jn<80;jn++){const vr=vt[jn-3]^vt[jn-8]^vt[jn-14]^vt[jn-16];vt[jn]=4294967295&(vr<<1|vr>>>31)}let Bn,_r,lt=this.chain_[0],qt=this.chain_[1],Cn=this.chain_[2],Qn=this.chain_[3],Qr=this.chain_[4];for(let jn=0;jn<80;jn++){jn<40?jn<20?(Bn=Qn^qt&(Cn^Qn),_r=1518500249):(Bn=qt^Cn^Qn,_r=1859775393):jn<60?(Bn=qt&Cn|Qn&(qt|Cn),_r=2400959708):(Bn=qt^Cn^Qn,_r=3395469782);const vr=(lt<<5|lt>>>27)+Bn+Qr+_r+vt[jn]&4294967295;Qr=Qn,Qn=Cn,Cn=4294967295&(qt<<30|qt>>>2),qt=lt,lt=vr}this.chain_[0]=this.chain_[0]+lt&4294967295,this.chain_[1]=this.chain_[1]+qt&4294967295,this.chain_[2]=this.chain_[2]+Cn&4294967295,this.chain_[3]=this.chain_[3]+Qn&4294967295,this.chain_[4]=this.chain_[4]+Qr&4294967295}update(Ie,je){if(null==Ie)return;void 0===je&&(je=Ie.length);const vt=je-this.blockSize;let lt=0;const qt=this.buf_;let Cn=this.inbuf_;for(;lt<je;){if(0===Cn)for(;lt<=vt;)this.compress_(Ie,lt),lt+=this.blockSize;if("string"==typeof Ie){for(;lt<je;)if(qt[Cn]=Ie.charCodeAt(lt),++Cn,++lt,Cn===this.blockSize){this.compress_(qt),Cn=0;break}}else for(;lt<je;)if(qt[Cn]=Ie[lt],++Cn,++lt,Cn===this.blockSize){this.compress_(qt),Cn=0;break}}this.inbuf_=Cn,this.total_+=je}digest(){const Ie=[];let je=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let lt=this.blockSize-1;lt>=56;lt--)this.buf_[lt]=255&je,je/=256;this.compress_(this.buf_);let vt=0;for(let lt=0;lt<5;lt++)for(let qt=24;qt>=0;qt-=8)Ie[vt]=this.chain_[lt]>>qt&255,++vt;return Ie}}function Ht(Le,Ie){const je=new rr(Le,Ie);return je.subscribe.bind(je)}class rr{constructor(Ie,je){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=je,this.task.then(()=>{Ie(this)}).catch(vt=>{this.error(vt)})}next(Ie){this.forEachObserver(je=>{je.next(Ie)})}error(Ie){this.forEachObserver(je=>{je.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,je,vt){let lt;if(void 0===Ie&&void 0===je&&void 0===vt)throw new Error("Missing Observer.");lt=function Jn(Le,Ie){if("object"!=typeof Le||null===Le)return!1;for(const je of Ie)if(je in Le&&"function"==typeof Le[je])return!0;return!1}(Ie,["next","error","complete"])?Ie:{next:Ie,error:je,complete:vt},void 0===lt.next&&(lt.next=cr),void 0===lt.error&&(lt.error=cr),void 0===lt.complete&&(lt.complete=cr);const qt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?lt.error(this.finalError):lt.complete()}catch(Cn){}}),this.observers.push(lt),qt}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let je=0;je<this.observers.length;je++)this.sendOne(je,Ie)}sendOne(Ie,je){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{je(this.observers[Ie])}catch(vt){"undefined"!=typeof console&&console.error&&console.error(vt)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cr(){}const Hr=function(Le,Ie,je,vt){let lt;if(vt<Ie?lt="at least "+Ie:vt>je&&(lt=0===je?"none":"no more than "+je),lt)throw new Error(Le+" failed: Was called with "+vt+(1===vt?" argument.":" arguments.")+" Expects "+lt+".")};function on(Le,Ie){return`${Le} failed: ${Ie} argument `}function zt(Le,Ie,je,vt){if((!vt||je)&&"function"!=typeof je)throw new Error(on(Le,Ie)+"must be a valid function.")}function ei(Le,Ie,je,vt){if((!vt||je)&&("object"!=typeof je||null===je))throw new Error(on(Le,Ie)+"must be a valid context object.")}const kn=function(Le){const Ie=[];let je=0;for(let vt=0;vt<Le.length;vt++){let lt=Le.charCodeAt(vt);if(lt>=55296&&lt<=56319){const qt=lt-55296;vt++,Z(vt<Le.length,"Surrogate pair missing trail surrogate."),lt=65536+(qt<<10)+(Le.charCodeAt(vt)-56320)}lt<128?Ie[je++]=lt:lt<2048?(Ie[je++]=lt>>6|192,Ie[je++]=63&lt|128):lt<65536?(Ie[je++]=lt>>12|224,Ie[je++]=lt>>6&63|128,Ie[je++]=63&lt|128):(Ie[je++]=lt>>18|240,Ie[je++]=lt>>12&63|128,Ie[je++]=lt>>6&63|128,Ie[je++]=63&lt|128)}return Ie},dn=function(Le){let Ie=0;for(let je=0;je<Le.length;je++){const vt=Le.charCodeAt(je);vt<128?Ie++:vt<2048?Ie+=2:vt>=55296&&vt<=56319?(Ie+=4,je++):Ie+=3}return Ie};function Pn(Le,Ie=1e3,je=2){const vt=Ie*Math.pow(je,Le),lt=Math.round(.5*vt*(Math.random()-.5)*2);return Math.min(144e5,vt+lt)}function In(Le){return Le&&Le._delegate?Le._delegate:Le}function ci(Le,Ie){return new Promise((je,vt)=>{Le.onsuccess=lt=>{je(lt.target.result)},Le.onerror=lt=>{var qt;vt(`${Ie}: ${null===(qt=lt.target.error)||void 0===qt?void 0:qt.message}`)}})}class ir{constructor(Ie){this._db=Ie,this.objectStoreNames=this._db.objectStoreNames}transaction(Ie,je){return new sn(this._db.transaction.call(this._db,Ie,je))}createObjectStore(Ie,je){return new kt(this._db.createObjectStore(Ie,je))}close(){this._db.close()}}class sn{constructor(Ie){this._transaction=Ie,this.complete=new Promise((je,vt)=>{this._transaction.oncomplete=function(){je()},this._transaction.onerror=()=>{vt(this._transaction.error)},this._transaction.onabort=()=>{vt(this._transaction.error)}})}objectStore(Ie){return new kt(this._transaction.objectStore(Ie))}}class kt{constructor(Ie){this._store=Ie}index(Ie){return new tn(this._store.index(Ie))}createIndex(Ie,je,vt){return new tn(this._store.createIndex(Ie,je,vt))}get(Ie){return ci(this._store.get(Ie),"Error reading from IndexedDB")}put(Ie,je){return ci(this._store.put(Ie,je),"Error writing to IndexedDB")}delete(Ie){return ci(this._store.delete(Ie),"Error deleting from IndexedDB")}clear(){return ci(this._store.clear(),"Error clearing IndexedDB object store")}}class tn{constructor(Ie){this._index=Ie}get(Ie){return ci(this._index.get(Ie),"Error reading from IndexedDB")}}function yn(Le,Ie,je){return new Promise((vt,lt)=>{try{const qt=indexedDB.open(Le,Ie);qt.onsuccess=Cn=>{vt(new ir(Cn.target.result))},qt.onerror=Cn=>{var Qn;lt(`Error opening indexedDB: ${null===(Qn=Cn.target.error)||void 0===Qn?void 0:Qn.message}`)},qt.onupgradeneeded=Cn=>{je(new ir(qt.result),Cn.oldVersion,Cn.newVersion,new sn(qt.transaction))}}catch(qt){lt(`Error opening indexedDB: ${qt.message}`)}})}function _n(Le){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,u.Z)(function*(Le){return new Promise((Ie,je)=>{try{const vt=indexedDB.deleteDatabase(Le);vt.onsuccess=()=>{Ie()},vt.onerror=lt=>{var qt;je(`Error deleting indexedDB database "${Le}": ${null===(qt=lt.target.error)||void 0===qt?void 0:qt.message}`)}}catch(vt){je(`Error deleting indexedDB database "${Le}": ${vt.message}`)}})})).apply(this,arguments)}},6926:(en,ut,H)=>{"use strict";H.d(ut,{BX:()=>Qt,dr:()=>dn,BJ:()=>Sn,YG:()=>Lr,W2:()=>Le,fr:()=>qt,Gu:()=>Qn,gu:()=>Qr,Xz:()=>Bn,pK:()=>vr,Ie:()=>Rr,Q$:()=>_i,q_:()=>$r,jP:()=>cs,g2:()=>Mn,wd:()=>gi,sr:()=>He,Pc:()=>oe,r4:()=>G,IN:()=>hi,X1:()=>We,j9:()=>Jn});var u=H(5e3),se=H(4182),Z=H(655),ke=H(2916),Te=H(6688),ae=H(7043),we=H(4850);function me(v,V,E,L){return(0,ae.m)(E)&&(L=E,E=void 0),L?me(v,V,E).pipe((0,we.U)(ue=>(0,Te.k)(ue)?L(...ue):L(ue))):new ke.y(ue=>{ce(v,V,function dt(Zt){ue.next(arguments.length>1?Array.prototype.slice.call(arguments):Zt)},ue,E)})}function ce(v,V,E,L,ue){let dt;if(function de(v){return v&&"function"==typeof v.addEventListener&&"function"==typeof v.removeEventListener}(v)){const Zt=v;v.addEventListener(V,E,ue),dt=()=>Zt.removeEventListener(V,E,ue)}else if(function te(v){return v&&"function"==typeof v.on&&"function"==typeof v.off}(v)){const Zt=v;v.on(V,E),dt=()=>Zt.off(V,E)}else if(function ge(v){return v&&"function"==typeof v.addListener&&"function"==typeof v.removeListener}(v)){const Zt=v;v.addListener(V,E),dt=()=>Zt.removeListener(V,E)}else{if(!v||!v.length)throw new TypeError("Invalid event target");for(let Zt=0,bn=v.length;Zt<bn;Zt++)ce(v[Zt],V,E,L,ue)}L.add(dt)}var Ue=H(8929),Pe=H(591),ye=H(8186),_e=(H(5797),H(6409),H(1363),H(8686)),ot=H(206),Ve=H(358),_t=(H(5970),H(3986)),qe=(H(2733),H(2361)),Ze=H(2198),jt=H(7545),Jt=H(5778),pt=H(9808);const Qe=_e.i,Oe=["*"],xn=v=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(v):"function"==typeof requestAnimationFrame?requestAnimationFrame(v):setTimeout(v);let un=(()=>{class v{constructor(E,L){this.injector=E,this.el=L,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(E){this.el.nativeElement.value=this.lastValue=null==E?"":E,rn(this.el)}handleChangeEvent(E,L){E===this.el.nativeElement&&(L!==this.lastValue&&(this.lastValue=L,this.onChange(L)),rn(this.el))}_handleBlurEvent(E){E===this.el.nativeElement&&(this.onTouched(),rn(this.el))}registerOnChange(E){this.onChange=E}registerOnTouched(E){this.onTouched=E}setDisabledState(E){this.el.nativeElement.disabled=E}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let E;try{E=this.injector.get(se.a5)}catch(ue){}if(!E)return;E.statusChanges&&(this.statusChanges=E.statusChanges.subscribe(()=>rn(this.el)));const L=E.control;L&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(dt=>{if(void 0!==L[dt]){const Zt=L[dt].bind(L);L[dt]=(...bn)=>{Zt(...bn),rn(this.el)}}})}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.zs3),u.Y36(u.SBq))},v.\u0275dir=u.lG2({type:v,hostBindings:function(E,L){1&E&&u.NdJ("ionBlur",function(dt){return L._handleBlurEvent(dt.target)})}}),v})();const rn=v=>{xn(()=>{const V=v.nativeElement,E=fr(V);Dr(V,E);const L=V.closest("ion-item");L&&Dr(L,E)})},fr=v=>{const V=v.classList,E=[];for(let L=0;L<V.length;L++){const ue=V.item(L);null!==ue&&Zn(ue,"ng-")&&E.push(`ion-${ue.substr(3)}`)}return E},Dr=(v,V)=>{const E=v.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(L=>E.remove(L)),V.forEach(L=>E.add(L))},Zn=(v,V)=>v.substr(0,V.length)===V;let Jn=(()=>{class v extends un{constructor(E,L){super(E,L)}_handleInputEvent(E){this.handleChangeEvent(E,E.value)}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.zs3),u.Y36(u.SBq))},v.\u0275dir=u.lG2({type:v,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(E,L){1&E&&u.NdJ("ionChange",function(dt){return L._handleInputEvent(dt.target)})},features:[u._Bn([{provide:se.JU,useExisting:v,multi:!0}]),u.qOj]}),v})();const cr=(v,V)=>{const E=v.prototype;V.forEach(L=>{Object.defineProperty(E,L,{get(){return this.el[L]},set(ue){this.z.runOutsideAngular(()=>this.el[L]=ue)}})})},Hr=(v,V)=>{const E=v.prototype;V.forEach(L=>{E[L]=function(){const ue=arguments;return this.z.runOutsideAngular(()=>this.el[L].apply(this.el,ue))}})},on=(v,V,E)=>{E.forEach(L=>v[L]=me(V,L))};function zt(v){return function(E){const{defineCustomElementFn:L,inputs:ue,methods:dt}=v;return void 0!==L&&L(),ue&&cr(E,ue),dt&&Hr(E,dt),E}}let dn=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-app"]],ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0})],v),v})(),Sn=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-avatar"]],ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0})],v),v})(),Lr=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement,on(this,this.el,["ionFocus","ionBlur"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],v),v})(),Le=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement,on(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],v),v})(),qt=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],v),v})(),Qn=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],v),v})(),Qr=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],v),v})(),Bn=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement,on(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["alt","src"]})],v),v})(),vr=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement,on(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],v),v})(),Rr=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["button","color","counter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],v),v})(),_i=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],v),v})(),$r=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],v),v})(),Mn=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement,on(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],v),v})(),gi=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["color","size"]})],v),v})(),He=(()=>{let v=class{constructor(E,L,ue){this.z=ue,E.detach(),this.el=L.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Oe,decls:1,vars:0,template:function(E,L){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([zt({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})();class We{constructor(V={}){this.data=V}get(V){return this.data[V]}}let ct=(()=>{class v{constructor(E,L){this.zone=E,this.appRef=L}create(E,L,ue){return new Ot(E,L,ue,this.appRef,this.zone)}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(u.R0b),u.LFG(u.z2F))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})();class Ot{constructor(V,E,L,ue,dt){this.resolver=V,this.injector=E,this.location=L,this.appRef=ue,this.zone=dt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(V,E,L,ue){return this.zone.run(()=>new Promise(dt=>{dt(Lt(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,V,E,L,ue))}))}removeViewFromDom(V,E){return this.zone.run(()=>new Promise(L=>{const ue=this.elRefMap.get(E);if(ue){ue.destroy(),this.elRefMap.delete(E);const dt=this.elEventsMap.get(E);dt&&(dt(),this.elEventsMap.delete(E))}L()}))}}const Lt=(v,V,E,L,ue,dt,Zt,bn,Nn,Nr,yi)=>{const Pi=V.resolveComponentFactory(Nn),no=u.zs3.create({providers:Hn(Nr),parent:E}),Qi=L?L.createComponent(Pi,L.length,no):Pi.create(no),Xi=Qi.instance,li=Qi.location.nativeElement;if(Nr&&Object.assign(Xi,Nr),yi)for(const sa of yi)li.classList.add(sa);const es=Ar(v,Xi,li);return bn.appendChild(li),L||ue.attachView(Qi.hostView),Qi.changeDetectorRef.reattach(),dt.set(li,Qi),Zt.set(li,es),li},mn=[Ve.L,Ve.a,Ve.b,Ve.c,Ve.d],Ar=(v,V,E)=>v.run(()=>{const L=mn.filter(ue=>"function"==typeof V[ue]).map(ue=>{const dt=Zt=>V[ue](Zt.detail);return E.addEventListener(ue,dt),()=>E.removeEventListener(ue,dt)});return()=>L.forEach(ue=>ue())}),xr=new u.OlP("NavParamsToken"),Hn=v=>[{provide:xr,useValue:v},{provide:We,useFactory:ps,deps:[xr]}],ps=v=>new We(v),Bs=(v,V)=>((v=v.filter(E=>E.stackId!==V.stackId)).push(V),v),ls=(v,V)=>{const E=v.createUrlTree(["."],{relativeTo:V});return v.serializeUrl(E)},gs=(v,V)=>{if(!v)return;const E=Bi(V);for(let L=0;L<E.length;L++){if(L>=v.length)return E[L];if(E[L]!==v[L])return}},Bi=v=>v.split("/").map(V=>V.trim()).filter(V=>""!==V),ms=v=>{v&&(v.ref.destroy(),v.unlistenEvents())};class Kr{constructor(V,E,L,ue,dt,Zt){this.containerEl=E,this.router=L,this.navCtrl=ue,this.zone=dt,this.location=Zt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==V?Bi(V):void 0}createView(V,E){var L;const ue=ls(this.router,E),dt=null===(L=null==V?void 0:V.location)||void 0===L?void 0:L.nativeElement,Zt=Ar(this.zone,V.instance,dt);return{id:this.nextId++,stackId:gs(this.tabsPrefix,ue),unlistenEvents:Zt,element:dt,ref:V,url:ue}}getExistingView(V){const E=ls(this.router,V),L=this.views.find(ue=>ue.url===E);return L&&L.ref.changeDetectorRef.reattach(),L}setActive(V){var E,L;const ue=this.navCtrl.consumeTransition();let{direction:dt,animation:Zt,animationBuilder:bn}=ue;const Nn=this.activeView,Nr=((v,V)=>!V||v.stackId!==V.stackId)(V,Nn);Nr&&(dt="back",Zt=void 0);const yi=this.views.slice();let Pi;const no=this.router;no.getCurrentNavigation?Pi=no.getCurrentNavigation():(null===(E=no.navigations)||void 0===E?void 0:E.value)&&(Pi=no.navigations.value),(null===(L=null==Pi?void 0:Pi.extras)||void 0===L?void 0:L.replaceUrl)&&this.views.length>0&&this.views.splice(-1,1);const Qi=this.views.includes(V),Xi=this.insertView(V,dt);Qi||V.ref.changeDetectorRef.detectChanges();const li=V.animationBuilder;return void 0===bn&&"back"===dt&&!Nr&&void 0!==li&&(bn=li),Nn&&(Nn.animationBuilder=bn),this.zone.runOutsideAngular(()=>this.wait(()=>(Nn&&Nn.ref.changeDetectorRef.detach(),V.ref.changeDetectorRef.reattach(),this.transition(V,Nn,Zt,this.canGoBack(1),!1,bn).then(()=>$s(V,Xi,yi,this.location,this.zone)).then(()=>({enteringView:V,direction:dt,animation:Zt,tabSwitch:Nr})))))}canGoBack(V,E=this.getActiveStackId()){return this.getStack(E).length>V}pop(V,E=this.getActiveStackId()){return this.zone.run(()=>{var L,ue;const dt=this.getStack(E);if(dt.length<=V)return Promise.resolve(!1);const Zt=dt[dt.length-V-1];let bn=Zt.url;const Nn=Zt.savedData;if(Nn){const yi=Nn.get("primary");(null===(ue=null===(L=null==yi?void 0:yi.route)||void 0===L?void 0:L._routerState)||void 0===ue?void 0:ue.snapshot.url)&&(bn=yi.route._routerState.snapshot.url)}const{animationBuilder:Nr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(bn,Object.assign(Object.assign({},Zt.savedExtras),{animation:Nr})).then(()=>!0)})}startBackTransition(){const V=this.activeView;if(V){const E=this.getStack(V.stackId),L=E[E.length-2],ue=L.animationBuilder;return this.wait(()=>this.transition(L,V,"back",this.canGoBack(2),!0,ue))}return Promise.resolve()}endBackTransition(V){V?(this.skipTransition=!0,this.pop(1)):this.activeView&&yo(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(V){const E=this.getStack(V);return E.length>0?E[E.length-1]:void 0}getRootUrl(V){const E=this.getStack(V);return E.length>0?E[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ms),this.activeView=void 0,this.views=[]}getStack(V){return this.views.filter(E=>E.stackId===V)}insertView(V,E){return this.activeView=V,this.views=((v,V,E)=>"root"===E?Bs(v,V):"forward"===E?((v,V)=>(v.indexOf(V)>=0?v=v.filter(L=>L.stackId!==V.stackId||L.id<=V.id):v.push(V),v))(v,V):((v,V)=>v.indexOf(V)>=0?v.filter(L=>L.stackId!==V.stackId||L.id<=V.id):Bs(v,V))(v,V))(this.views,V,E),this.views.slice()}transition(V,E,L,ue,dt,Zt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(E===V)return Promise.resolve(!1);const bn=V?V.element:void 0,Nn=E?E.element:void 0,Nr=this.containerEl;return bn&&bn!==Nn&&(bn.classList.add("ion-page"),bn.classList.add("ion-page-invisible"),bn.parentElement!==Nr&&Nr.appendChild(bn),Nr.commit)?Nr.commit(bn,Nn,{deepWait:!0,duration:void 0===L?0:void 0,direction:L,showGoBack:ue,progressAnimation:dt,animationBuilder:Zt}):Promise.resolve(!1)}wait(V){return(0,Z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const E=this.runningTask=V();return E.finally(()=>this.runningTask=void 0),E})}}const $s=(v,V,E,L,ue)=>"function"==typeof requestAnimationFrame?new Promise(dt=>{requestAnimationFrame(()=>{yo(v,V,E,L,ue),dt()})}):Promise.resolve(),yo=(v,V,E,L,ue)=>{ue.run(()=>E.filter(dt=>!V.includes(dt)).forEach(ms)),V.forEach(dt=>{const bn=L.path().split("?")[0].split("#")[0];if(dt!==v&&dt.url!==bn){const Nn=dt.element;Nn.setAttribute("aria-hidden","true"),Nn.classList.add("ion-page-hidden"),dt.ref.changeDetectorRef.detach()}})};let Ko=(()=>{class v{get(E,L){const ue=Ns();return ue?ue.get(E,L):null}getBoolean(E,L){const ue=Ns();return!!ue&&ue.getBoolean(E,L)}getNumber(E,L){const ue=Ns();return ue?ue.getNumber(E,L):0}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const zs=new u.OlP("USERCONFIG"),Ns=()=>{if("undefined"!=typeof window){const v=window.Ionic;if(null==v?void 0:v.config)return v.config}return null};let Hi=(()=>{class v{constructor(E,L){this.doc=E,this.backButton=new Ue.xQ,this.keyboardDidShow=new Ue.xQ,this.keyboardDidHide=new Ue.xQ,this.pause=new Ue.xQ,this.resume=new Ue.xQ,this.resize=new Ue.xQ,L.run(()=>{var ue;let dt;this.win=E.defaultView,this.backButton.subscribeWithPriority=function(Zt,bn){return this.subscribe(Nn=>Nn.register(Zt,Nr=>L.run(()=>bn(Nr))))},Oi(this.pause,E,"pause"),Oi(this.resume,E,"resume"),Oi(this.backButton,E,"ionBackButton"),Oi(this.resize,this.win,"resize"),Oi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Oi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Zt=>{dt=Zt}),(null===(ue=this.win)||void 0===ue?void 0:ue.cordova)?E.addEventListener("deviceready",()=>{dt("cordova")},{once:!0}):dt("dom")})}is(E){return(0,_e.a)(this.win,E)}platforms(){return(0,_e.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(E){return _o(this.win.location.href,E)}isLandscape(){return!this.isPortrait()}isPortrait(){var E,L;return null===(L=(E=this.win).matchMedia)||void 0===L?void 0:L.call(E,"(orientation: portrait)").matches}testUserAgent(E){const L=this.win.navigator;return!!((null==L?void 0:L.userAgent)&&L.userAgent.indexOf(E)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(pt.K0),u.LFG(u.R0b))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const _o=(v,V)=>{V=V.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const L=new RegExp("[\\?&]"+V+"=([^&#]*)").exec(v);return L?decodeURIComponent(L[1].replace(/\+/g," ")):null},Oi=(v,V,E)=>{V&&V.addEventListener(E,L=>{v.next(null!=L?L.detail:void 0)})};let Pr=(()=>{class v{constructor(E,L,ue,dt){this.location=L,this.serializer=ue,this.router=dt,this.direction=us,this.animated=vo,this.guessDirection="forward",this.lastNavId=-1,dt&&dt.events.subscribe(Zt=>{if(Zt instanceof ye.OD){const bn=Zt.restoredState?Zt.restoredState.navigationId:Zt.id;this.guessDirection=bn<this.lastNavId?"back":"forward",this.guessAnimation=Zt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Zt.id:bn}}),E.backButton.subscribeWithPriority(0,Zt=>{this.pop(),Zt()})}navigateForward(E,L={}){return this.setDirection("forward",L.animated,L.animationDirection,L.animation),this.navigate(E,L)}navigateBack(E,L={}){return this.setDirection("back",L.animated,L.animationDirection,L.animation),this.navigate(E,L)}navigateRoot(E,L={}){return this.setDirection("root",L.animated,L.animationDirection,L.animation),this.navigate(E,L)}back(E={animated:!0,animationDirection:"back"}){return this.setDirection("back",E.animated,E.animationDirection,E.animation),this.location.back()}pop(){return(0,Z.mG)(this,void 0,void 0,function*(){let E=this.topOutlet;for(;E&&!(yield E.pop());)E=E.parentOutlet})}setDirection(E,L,ue,dt){this.direction=E,this.animated=mi(E,L,ue),this.animationBuilder=dt}setTopOutlet(E){this.topOutlet=E}consumeTransition(){let L,E="root";const ue=this.animationBuilder;return"auto"===this.direction?(E=this.guessDirection,L=this.guessAnimation):(L=this.animated,E=this.direction),this.direction=us,this.animated=vo,this.animationBuilder=void 0,{direction:E,animation:L,animationBuilder:ue}}navigate(E,L){if(Array.isArray(E))return this.router.navigate(E,L);{const ue=this.serializer.parse(E.toString());return void 0!==L.queryParams&&(ue.queryParams=Object.assign({},L.queryParams)),void 0!==L.fragment&&(ue.fragment=L.fragment),this.router.navigateByUrl(ue,L)}}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(Hi),u.LFG(pt.Ye),u.LFG(ye.Hx),u.LFG(ye.F0,8))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const mi=(v,V,E)=>{if(!1!==V){if(void 0!==E)return E;if("forward"===v||"back"===v)return v;if("root"===v&&!0===V)return"forward"}},us="auto",vo=void 0;let cs=(()=>{class v{constructor(E,L,ue,dt,Zt,bn,Nn,Nr,yi,Pi,no,Qi,Xi){this.parentContexts=E,this.location=L,this.resolver=ue,this.config=bn,this.navCtrl=Nn,this.parentOutlet=Xi,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Pe.X(null),this.stackEvents=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.nativeEl=yi.nativeElement,this.name=dt||ye.eC,this.tabsPrefix="true"===Zt?ls(Pi,Qi):void 0,this.stackCtrl=new Kr(this.tabsPrefix,this.nativeEl,Pi,Nn,no,Nr),E.onChildOutletCreated(this.name,this)}set animation(E){this.nativeEl.animation=E}set animated(E){this.nativeEl.animated=E}set swipeGesture(E){this._swipeGesture=E,this.nativeEl.swipeHandler=E?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:L=>this.stackCtrl.endBackTransition(L)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const E=this.getContext();(null==E?void 0:E.route)&&this.activateWith(E.route,E.resolver||null)}new Promise(E=>(0,ot.c)(this.nativeEl,E)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(E,L){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const L=this.getContext();this.activatedView.savedData=new Map(L.children.contexts);const ue=this.activatedView.savedData.get("primary");if(ue&&L.route&&(ue.route=Object.assign({},L.route)),this.activatedView.savedExtras={},L.route){const dt=L.route.snapshot;this.activatedView.savedExtras.queryParams=dt.queryParams,this.activatedView.savedExtras.fragment=dt.fragment}}const E=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,L){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;let ue,dt=this.stackCtrl.getExistingView(E);if(dt){ue=this.activated=dt.ref;const Zt=dt.savedData;Zt&&(this.getContext().children.contexts=Zt),this.updateActivatedRouteProxy(ue.instance,E)}else{const Nn=(L=L||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),Nr=this.parentContexts.getOrCreateContext(this.name).children,yi=new Pe.X(null),Pi=this.createActivatedRouteProxy(yi,E),no=new ys(Pi,Nr,this.location.injector);ue=this.activated=this.location.createComponent(Nn,this.location.length,no),yi.next(ue.instance),dt=this.stackCtrl.createView(this.activated,E),this.proxyMap.set(ue.instance,Pi),this.currentActivatedRoute$.next({component:ue.instance,activatedRoute:E})}this.activatedView=dt,this.stackCtrl.setActive(dt).then(Zt=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(ue.instance),this.stackEvents.emit(Zt)})}canGoBack(E=1,L){return this.stackCtrl.canGoBack(E,L)}pop(E=1,L){return this.stackCtrl.pop(E,L)}getLastUrl(E){const L=this.stackCtrl.getLastUrl(E);return L?L.url:void 0}getLastRouteView(E){return this.stackCtrl.getLastUrl(E)}getRootView(E){return this.stackCtrl.getRootUrl(E)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(E,L){const ue=new ye.gz;return ue._futureSnapshot=L._futureSnapshot,ue._routerState=L._routerState,ue.snapshot=L.snapshot,ue.outlet=L.outlet,ue.component=L.component,ue._paramMap=this.proxyObservable(E,"paramMap"),ue._queryParamMap=this.proxyObservable(E,"queryParamMap"),ue.url=this.proxyObservable(E,"url"),ue.params=this.proxyObservable(E,"params"),ue.queryParams=this.proxyObservable(E,"queryParams"),ue.fragment=this.proxyObservable(E,"fragment"),ue.data=this.proxyObservable(E,"data"),ue}proxyObservable(E,L){return E.pipe((0,Ze.h)(ue=>!!ue),(0,jt.w)(ue=>this.currentActivatedRoute$.pipe((0,Ze.h)(dt=>null!==dt&&dt.component===ue),(0,jt.w)(dt=>dt&&dt.activatedRoute[L]),(0,Jt.x)())))}updateActivatedRouteProxy(E,L){const ue=this.proxyMap.get(E);if(!ue)throw new Error("Could not find activated route proxy for view");ue._futureSnapshot=L._futureSnapshot,ue._routerState=L._routerState,ue.snapshot=L.snapshot,ue.outlet=L.outlet,ue.component=L.component,this.currentActivatedRoute$.next({component:E,activatedRoute:L})}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(ye.y6),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.$8M("tabs"),u.Y36(Ko),u.Y36(Pr),u.Y36(pt.Ye),u.Y36(u.SBq),u.Y36(ye.F0),u.Y36(u.R0b),u.Y36(ye.gz),u.Y36(v,12))},v.\u0275dir=u.lG2({type:v,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),v})();class ys{constructor(V,E,L){this.route=V,this.childContexts=E,this.parent=L}get(V,E){return V===ye.gz?this.route:V===ye.y6?this.childContexts:this.parent.get(V,E)}}class Ft{constructor(V){this.ctrl=V}create(V){return this.ctrl.create(V||{})}dismiss(V,E,L){return this.ctrl.dismiss(V,E,L)}getTop(){return this.ctrl.getTop()}}let Qt=(()=>{class v extends Ft{constructor(){super(_t.b)}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),hi=(()=>{class v extends Ft{constructor(E,L,ue){super(_t.m),this.angularDelegate=E,this.resolver=L,this.injector=ue}create(E){return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(ct),u.LFG(u._Vd),u.LFG(u.zs3))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})(),oi=(()=>{class v extends Ft{constructor(E,L,ue){super(_t.c),this.angularDelegate=E,this.resolver=L,this.injector=ue}create(E){return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(ct),u.LFG(u._Vd),u.LFG(u.zs3))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})();class G{shouldDetach(V){return!1}shouldAttach(V){return!1}store(V,E){}retrieve(V){return null}shouldReuseRoute(V,E){if(V.routeConfig!==E.routeConfig)return!1;const L=V.params,ue=E.params,dt=Object.keys(L),Zt=Object.keys(ue);if(dt.length!==Zt.length)return!1;for(const bn of dt)if(ue[bn]!==L[bn])return!1;return!0}}const F=(v,V,E)=>()=>{if(V.defaultView&&"undefined"!=typeof window){(v=>{const V=window,E=V.Ionic;E&&E.config&&"Object"!==E.config.constructor.name||(V.Ionic=V.Ionic||{},V.Ionic.config=Object.assign(Object.assign({},V.Ionic.config),v))})(Object.assign(Object.assign({},v),{_zoneGate:dt=>E.run(dt)}));const ue="__zone_symbol__addEventListener"in V.body?"__zone_symbol__addEventListener":"addEventListener";return function st(){var v=[];if("undefined"!=typeof window){var V=window;(!V.customElements||V.Element&&(!V.Element.prototype.closest||!V.Element.prototype.matches||!V.Element.prototype.remove||!V.Element.prototype.getRootNode))&&v.push(H.e(6748).then(H.t.bind(H,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||V.NodeList&&!V.NodeList.prototype.forEach||!V.fetch||!function(){try{var L=new URL("b","http://a");return L.pathname="c%20d","http://a/c%20d"===L.href&&L.searchParams}catch(ue){return!1}}()||"undefined"==typeof WeakMap)&&v.push(H.e(2214).then(H.t.bind(H,4144,23)))}return Promise.all(v)}().then(()=>((v,V)=>"undefined"==typeof window?Promise.resolve():(0,qe.p)().then(()=>(Qe(),(0,qe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),V))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:xn,jmp:dt=>E.runOutsideAngular(dt),ael(dt,Zt,bn,Nn){dt[ue](Zt,bn,Nn)},rel(dt,Zt,bn,Nn){dt.removeEventListener(Zt,bn,Nn)}}))}};let oe=(()=>{class v{static forRoot(E){return{ngModule:v,providers:[{provide:zs,useValue:E},{provide:u.ip1,useFactory:F,multi:!0,deps:[zs,pt.K0,u.R0b]}]}}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275mod=u.oAB({type:v}),v.\u0275inj=u.cJS({providers:[ct,hi,oi],imports:[[pt.ez]]}),v})()},6304:(en,ut,H)=>{"use strict";H.d(ut,{c:()=>Pe});var u=H(206);let se;const ke=ye=>ye.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Te=ye=>{if(void 0===se){const Fe=void 0!==ye.style.webkitAnimationName;se=void 0===ye.style.animationName&&Fe?"-webkit-":""}return se},ae=(ye,Ne,Fe)=>{const ht=Ne.startsWith("animation")?Te(ye):"";ye.style.setProperty(ht+Ne,Fe)},we=(ye,Ne)=>{const Fe=Ne.startsWith("animation")?Te(ye):"";ye.style.removeProperty(Fe+Ne)},ce=[],Ue=(ye=[],Ne)=>{if(void 0!==Ne){const Fe=Array.isArray(Ne)?Ne:[Ne];return[...ye,...Fe]}return ye},Pe=ye=>{let Ne,Fe,ht,_e,ot,Ve,pe,pt,st,Qe,nt,Dt,ft,rt=[],_t=[],St=[],qe=!1,Be={},ve=[],De=[],Je={},Ze=0,jt=!1,Jt=!1,at=!0,Oe=!1,Xe=!0;const Kt=ye,gn=[],xn=[],un=[],rn=[],fr=[],Dr=[],Zn=[],Yn=[],Ht=[],rr=[],qr="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,Jn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&qr,Hr=()=>rr,ei=(O,Se)=>((Se&&Se.oneTimeCallback?xn:gn).push({c:O,o:Se}),ft),dn=()=>{if(Jn)rr.forEach(O=>{O.cancel()}),rr.length=0;else{const O=un.slice();(0,u.r)(()=>{O.forEach(Se=>{we(Se,"animation-name"),we(Se,"animation-duration"),we(Se,"animation-timing-function"),we(Se,"animation-iteration-count"),we(Se,"animation-delay"),we(Se,"animation-play-state"),we(Se,"animation-fill-mode"),we(Se,"animation-direction")})})}},Sn=()=>{fr.forEach(O=>{O&&O.parentNode&&O.parentNode.removeChild(O)}),fr.length=0},yn=()=>void 0!==ot?ot:pe?pe.getFill():"both",_n=()=>void 0!==st?st:void 0!==Ve?Ve:pe?pe.getDirection():"normal",Rn=()=>jt?"linear":void 0!==ht?ht:pe?pe.getEasing():"linear",Le=()=>Jt?0:void 0!==Qe?Qe:void 0!==Fe?Fe:pe?pe.getDuration():0,Ie=()=>void 0!==_e?_e:pe?pe.getIterations():1,je=()=>void 0!==nt?nt:void 0!==Ne?Ne:pe?pe.getDelay():0,Sr=()=>{0!==Ze&&(Ze--,0===Ze&&((()=>{Ln(),Yn.forEach(Et=>Et()),Ht.forEach(Et=>Et());const O=at?1:0,Se=ve,Ge=De,et=Je;un.forEach(Et=>{const xt=Et.classList;Se.forEach(Nt=>xt.add(Nt)),Ge.forEach(Nt=>xt.remove(Nt));for(const Nt in et)et.hasOwnProperty(Nt)&&ae(Et,Nt,et[Nt])}),gn.forEach(Et=>Et.c(O,ft)),xn.forEach(Et=>Et.c(O,ft)),xn.length=0,Xe=!0,at&&(Oe=!0),at=!0})(),pe&&pe.animationFinish()))},Or=(O=!0)=>{Sn();const Se=(ye=>(ye.forEach(Ne=>{for(const Fe in Ne)if(Ne.hasOwnProperty(Fe)){const ht=Ne[Fe];if("easing"===Fe)Ne["animation-timing-function"]=ht,delete Ne[Fe];else{const _e=ke(Fe);_e!==Fe&&(Ne[_e]=ht,delete Ne[Fe])}}}),ye))(rt);un.forEach(Ge=>{if(Se.length>0){const et=((ye=[])=>ye.map(Ne=>{const Fe=Ne.offset,ht=[];for(const _e in Ne)Ne.hasOwnProperty(_e)&&"offset"!==_e&&ht.push(`${_e}: ${Ne[_e]};`);return`${100*Fe}% { ${ht.join(" ")} }`}).join(" "))(Se);Dt=void 0!==ye?ye:(ye=>{let Ne=ce.indexOf(ye);return Ne<0&&(Ne=ce.push(ye)-1),`ion-animation-${Ne}`})(et);const Et=((ye,Ne,Fe)=>{const ht=(ye=>{const Ne=ye.getRootNode();return Ne.head||Ne})(Fe),_e=Te(Fe),ot=ht.querySelector("#"+ye);if(ot)return ot;const Ve=(Fe.ownerDocument||document).createElement("style");return Ve.id=ye,Ve.textContent=`@${_e}keyframes ${ye} { ${Ne} } @${_e}keyframes ${ye}-alt { ${Ne} }`,ht.appendChild(Ve),Ve})(Dt,et,Ge);fr.push(Et),ae(Ge,"animation-duration",`${Le()}ms`),ae(Ge,"animation-timing-function",Rn()),ae(Ge,"animation-delay",`${je()}ms`),ae(Ge,"animation-fill-mode",yn()),ae(Ge,"animation-direction",_n());const xt=Ie()===1/0?"infinite":Ie().toString();ae(Ge,"animation-iteration-count",xt),ae(Ge,"animation-play-state","paused"),O&&ae(Ge,"animation-name",`${Et.id}-alt`),(0,u.r)(()=>{ae(Ge,"animation-name",Et.id||null)})}})},$r=(O=!0)=>{(()=>{Dr.forEach(et=>et()),Zn.forEach(et=>et());const O=_t,Se=St,Ge=Be;un.forEach(et=>{const Et=et.classList;O.forEach(xt=>Et.add(xt)),Se.forEach(xt=>Et.remove(xt));for(const xt in Ge)Ge.hasOwnProperty(xt)&&ae(et,xt,Ge[xt])})})(),rt.length>0&&(Jn?(un.forEach(O=>{const Se=O.animate(rt,{id:Kt,delay:je(),duration:Le(),easing:Rn(),iterations:Ie(),fill:yn(),direction:_n()});Se.pause(),rr.push(Se)}),rr.length>0&&(rr[0].onfinish=()=>{Sr()})):Or(O)),qe=!0},At=O=>{if(O=Math.min(Math.max(O,0),.9999),Jn)rr.forEach(Se=>{Se.currentTime=Se.effect.getComputedTiming().delay+Le()*O,Se.pause()});else{const Se=`-${Le()*O}ms`;un.forEach(Ge=>{rt.length>0&&(ae(Ge,"animation-delay",Se),ae(Ge,"animation-play-state","paused"))})}},vn=O=>{rr.forEach(Se=>{Se.effect.updateTiming({delay:je(),duration:Le(),easing:Rn(),iterations:Ie(),fill:yn(),direction:_n()})}),void 0!==O&&At(O)},sr=(O=!0,Se)=>{(0,u.r)(()=>{un.forEach(Ge=>{ae(Ge,"animation-name",Dt||null),ae(Ge,"animation-duration",`${Le()}ms`),ae(Ge,"animation-timing-function",Rn()),ae(Ge,"animation-delay",void 0!==Se?`-${Se*Le()}ms`:`${je()}ms`),ae(Ge,"animation-fill-mode",yn()||null),ae(Ge,"animation-direction",_n()||null);const et=Ie()===1/0?"infinite":Ie().toString();ae(Ge,"animation-iteration-count",et),O&&ae(Ge,"animation-name",`${Dt}-alt`),(0,u.r)(()=>{ae(Ge,"animation-name",Dt||null)})})})},hr=(O=!1,Se=!0,Ge)=>(O&&rn.forEach(et=>{et.update(O,Se,Ge)}),Jn?vn(Ge):sr(Se,Ge),ft),dr=()=>{qe&&(Jn?rr.forEach(O=>{O.pause()}):un.forEach(O=>{ae(O,"animation-play-state","paused")}))},Vi=()=>{pt=void 0,Sr()},Ln=()=>{pt&&clearTimeout(pt)},Xr=O=>new Promise(Se=>{O&&O.sync&&(Jt=!0,ei(()=>Jt=!1,{oneTimeCallback:!0})),qe||$r(),Oe&&(Jn?(At(0),vn()):sr(),Oe=!1),Xe&&(Ze=rn.length+1,Xe=!1),ei(()=>Se(),{oneTimeCallback:!0}),rn.forEach(Ge=>{Ge.play()}),Jn?(rr.forEach(O=>{O.play()}),(0===rt.length||0===un.length)&&Sr()):(()=>{if(Ln(),(0,u.r)(()=>{un.forEach(O=>{rt.length>0&&ae(O,"animation-play-state","running")})}),0===rt.length||0===un.length)Sr();else{const O=je()||0,Se=Le()||0,Ge=Ie()||1;isFinite(Ge)&&(pt=setTimeout(Vi,O+Se*Ge+100)),((ye,Ne)=>{let Fe;const ht={passive:!0},ot=Ve=>{ye===Ve.target&&(Fe&&Fe(),Ln(),(0,u.r)(()=>{un.forEach(O=>{we(O,"animation-duration"),we(O,"animation-delay"),we(O,"animation-play-state")}),(0,u.r)(Sr)}))};ye&&(ye.addEventListener("webkitAnimationEnd",ot,ht),ye.addEventListener("animationend",ot,ht),Fe=()=>{ye.removeEventListener("webkitAnimationEnd",ot,ht),ye.removeEventListener("animationend",ot,ht)})})(un[0])}})()}),di=(O,Se)=>{const Ge=rt[0];return void 0===Ge||void 0!==Ge.offset&&0!==Ge.offset?rt=[{offset:0,[O]:Se},...rt]:Ge[O]=Se,ft};return ft={parentAnimation:pe,elements:un,childAnimations:rn,id:Kt,animationFinish:Sr,from:di,to:(O,Se)=>{const Ge=rt[rt.length-1];return void 0===Ge||void 0!==Ge.offset&&1!==Ge.offset?rt=[...rt,{offset:1,[O]:Se}]:Ge[O]=Se,ft},fromTo:(O,Se,Ge)=>di(O,Se).to(O,Ge),parent:O=>(pe=O,ft),play:Xr,pause:()=>(rn.forEach(O=>{O.pause()}),dr(),ft),stop:()=>{rn.forEach(O=>{O.stop()}),qe&&(dn(),qe=!1),jt=!1,Jt=!1,Xe=!0,st=void 0,Qe=void 0,nt=void 0,Ze=0,Oe=!1,at=!0},destroy:O=>(rn.forEach(Se=>{Se.destroy(O)}),(O=>{dn(),O&&Sn()})(O),un.length=0,rn.length=0,rt.length=0,gn.length=0,xn.length=0,qe=!1,Xe=!0,ft),keyframes:O=>{const Se=rt!==O;return rt=O,Se&&(O=>{Jn?Hr().forEach(Se=>{if(Se.effect.setKeyframes)Se.effect.setKeyframes(O);else{const Ge=new KeyframeEffect(Se.effect.target,O,Se.effect.getTiming());Se.effect=Ge}}):Or()})(rt),ft},addAnimation:O=>{if(null!=O)if(Array.isArray(O))for(const Se of O)Se.parent(ft),rn.push(Se);else O.parent(ft),rn.push(O);return ft},addElement:O=>{if(null!=O)if(1===O.nodeType)un.push(O);else if(O.length>=0)for(let Se=0;Se<O.length;Se++)un.push(O[Se]);else console.error("Invalid addElement value");return ft},update:hr,fill:O=>(ot=O,hr(!0),ft),direction:O=>(Ve=O,hr(!0),ft),iterations:O=>(_e=O,hr(!0),ft),duration:O=>(!Jn&&0===O&&(O=1),Fe=O,hr(!0),ft),easing:O=>(ht=O,hr(!0),ft),delay:O=>(Ne=O,hr(!0),ft),getWebAnimations:Hr,getKeyframes:()=>rt,getFill:yn,getDirection:_n,getDelay:je,getIterations:Ie,getEasing:Rn,getDuration:Le,afterAddRead:O=>(Yn.push(O),ft),afterAddWrite:O=>(Ht.push(O),ft),afterClearStyles:(O=[])=>{for(const Se of O)Je[Se]="";return ft},afterStyles:(O={})=>(Je=O,ft),afterRemoveClass:O=>(De=Ue(De,O),ft),afterAddClass:O=>(ve=Ue(ve,O),ft),beforeAddRead:O=>(Dr.push(O),ft),beforeAddWrite:O=>(Zn.push(O),ft),beforeClearStyles:(O=[])=>{for(const Se of O)Be[Se]="";return ft},beforeStyles:(O={})=>(Be=O,ft),beforeRemoveClass:O=>(St=Ue(St,O),ft),beforeAddClass:O=>(_t=Ue(_t,O),ft),onFinish:ei,progressStart:(O=!1,Se)=>(rn.forEach(Ge=>{Ge.progressStart(O,Se)}),dr(),jt=O,qe||$r(),hr(!1,!0,Se),ft),progressStep:O=>(rn.forEach(Se=>{Se.progressStep(O)}),At(O),ft),progressEnd:(O,Se,Ge)=>(jt=!1,rn.forEach(et=>{et.progressEnd(O,Se,Ge)}),void 0!==Ge&&(Qe=Ge),Oe=!1,at=!0,0===O?(st="reverse"===_n()?"normal":"reverse","reverse"===st&&(at=!1),Jn?(hr(),At(1-Se)):(nt=(1-Se)*Le()*-1,hr(!1,!1))):1===O&&(Jn?(hr(),At(Se)):(nt=Se*Le()*-1,hr(!1,!1))),void 0!==O&&(ei(()=>{Qe=void 0,st=void 0,nt=void 0},{oneTimeCallback:!0}),pe||Xr()),ft)}}},2733:(en,ut,H)=>{"use strict";H.d(ut,{G:()=>Te});class se{constructor(we,be,me,ce,ge){this.id=be,this.name=me,this.disableScroll=ge,this.priority=1e6*ce+be,this.ctrl=we}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const we=this.ctrl.capture(this.name,this.id,this.priority);return we&&this.disableScroll&&this.ctrl.disableScroll(this.id),we}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(we,be,me,ce){this.id=be,this.disable=me,this.disableScroll=ce,this.ctrl=we}block(){if(this.ctrl){if(this.disable)for(const we of this.disable)this.ctrl.disableGesture(we,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const we of this.disable)this.ctrl.enableGesture(we,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ke="backdrop-no-scroll",Te=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(we){return new se(this,this.newID(),we.name,we.priority||0,!!we.disableScroll)}createBlocker(we={}){return new Z(this,this.newID(),we.disable,!!we.disableScroll)}start(we,be,me){return this.canStart(we)?(this.requestedStart.set(be,me),!0):(this.requestedStart.delete(be),!1)}capture(we,be,me){if(!this.start(we,be,me))return!1;const ce=this.requestedStart;let ge=-1e4;if(ce.forEach(te=>{ge=Math.max(ge,te)}),ge===me){this.capturedId=be,ce.clear();const te=new CustomEvent("ionGestureCaptured",{detail:{gestureName:we}});return document.dispatchEvent(te),!0}return ce.delete(be),!1}release(we){this.requestedStart.delete(we),this.capturedId===we&&(this.capturedId=void 0)}disableGesture(we,be){let me=this.disabledGestures.get(we);void 0===me&&(me=new Set,this.disabledGestures.set(we,me)),me.add(be)}enableGesture(we,be){const me=this.disabledGestures.get(we);void 0!==me&&me.delete(be)}disableScroll(we){this.disabledScroll.add(we),1===this.disabledScroll.size&&document.body.classList.add(ke)}enableScroll(we){this.disabledScroll.delete(we),0===this.disabledScroll.size&&document.body.classList.remove(ke)}canStart(we){return!(void 0!==this.capturedId||this.isDisabled(we))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(we){const be=this.disabledGestures.get(we);return!!(be&&be.size>0)}newID(){return this.gestureId++,this.gestureId}}},527:(en,ut,H)=>{"use strict";H.r(ut),H.d(ut,{MENU_BACK_BUTTON_PRIORITY:()=>Te,OVERLAY_BACK_BUTTON_PRIORITY:()=>ke,blockHardwareBackButton:()=>se,startHardwareBackButton:()=>Z});var u=H(5861);const se=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const ae=document;let we=!1;ae.addEventListener("backbutton",()=>{if(we)return;let be=0,me=[];const ce=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(de,Ue){me.push({priority:de,handler:Ue,id:be++})}}});ae.dispatchEvent(ce);const ge=function(){var de=(0,u.Z)(function*(Ue){try{if(Ue&&Ue.handler){const Pe=Ue.handler(te);null!=Pe&&(yield Pe)}}catch(Pe){console.error(Pe)}});return function(Pe){return de.apply(this,arguments)}}(),te=()=>{if(me.length>0){let de={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};me.forEach(Ue=>{Ue.priority>=de.priority&&(de=Ue)}),we=!0,me=me.filter(Ue=>Ue.id!==de.id),ge(de).then(()=>we=!1)}};te()})},ke=100,Te=99},206:(en,ut,H)=>{"use strict";H.d(ut,{a:()=>Te,b:()=>ae,c:()=>Z,d:()=>te,e:()=>de,f:()=>ge,g:()=>we,h:()=>ht,i:()=>ke,j:()=>ce,k:()=>Ue,l:()=>me,m:()=>Pe,n:()=>Fe,o:()=>_e,p:()=>Ne,q:()=>ye,r:()=>be,s:()=>ot,t:()=>u});const u=(Ve,rt=0)=>new Promise(_t=>{se(Ve,rt,_t)}),se=(Ve,rt=0,_t)=>{let St,qe;const pe={passive:!0},ve=()=>{St&&St()},De=Je=>{(void 0===Je||Ve===Je.target)&&(ve(),_t(Je))};return Ve&&(Ve.addEventListener("webkitTransitionEnd",De,pe),Ve.addEventListener("transitionend",De,pe),qe=setTimeout(De,rt+500),St=()=>{qe&&(clearTimeout(qe),qe=void 0),Ve.removeEventListener("webkitTransitionEnd",De,pe),Ve.removeEventListener("transitionend",De,pe)}),ve},Z=(Ve,rt)=>{Ve.componentOnReady?Ve.componentOnReady().then(_t=>rt(_t)):be(()=>rt(Ve))},ke=(Ve,rt=[])=>{const _t={};return rt.forEach(St=>{Ve.hasAttribute(St)&&(null!==Ve.getAttribute(St)&&(_t[St]=Ve.getAttribute(St)),Ve.removeAttribute(St))}),_t},Te=(Ve,rt,_t,St)=>{if("undefined"!=typeof window){const qe=window,pe=qe&&qe.Ionic&&qe.Ionic.config;if(pe){const Be=pe.get("_ael");if(Be)return Be(Ve,rt,_t,St);if(pe._ael)return pe._ael(Ve,rt,_t,St)}}return Ve.addEventListener(rt,_t,St)},ae=(Ve,rt,_t,St)=>{if("undefined"!=typeof window){const qe=window,pe=qe&&qe.Ionic&&qe.Ionic.config;if(pe){const Be=pe.get("_rel");if(Be)return Be(Ve,rt,_t,St);if(pe._rel)return pe._rel(Ve,rt,_t,St)}}return Ve.removeEventListener(rt,_t,St)},we=(Ve,rt=Ve)=>Ve.shadowRoot||rt,be=Ve=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ve):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ve):setTimeout(Ve),me=Ve=>!!Ve.shadowRoot&&!!Ve.attachShadow,ce=Ve=>{const rt=Ve.closest("ion-item");return rt?rt.querySelector("ion-label"):null},ge=Ve=>{if(Ve.focus(),Ve.classList.contains("ion-focusable")){const rt=Ve.closest("ion-app");rt&&rt.setFocus([Ve])}},te=(Ve,rt)=>{let _t;const St=Ve.getAttribute("aria-labelledby"),qe=Ve.id;let pe=null!==St&&""!==St.trim()?St:rt+"-lbl",Be=null!==St&&""!==St.trim()?document.getElementById(St):ce(Ve);return Be?(null===St&&(Be.id=pe),_t=Be.textContent,Be.setAttribute("aria-hidden","true")):""!==qe.trim()&&(Be=document.querySelector(`label[for="${qe}"]`),Be&&(""!==Be.id?pe=Be.id:Be.id=pe=`${qe}-lbl`,_t=Be.textContent)),{label:Be,labelId:pe,labelText:_t}},de=(Ve,rt,_t,St,qe)=>{if(Ve||me(rt)){let pe=rt.querySelector("input.aux-input");pe||(pe=rt.ownerDocument.createElement("input"),pe.type="hidden",pe.classList.add("aux-input"),rt.appendChild(pe)),pe.disabled=qe,pe.name=_t,pe.value=St||""}},Ue=(Ve,rt,_t)=>Math.max(Ve,Math.min(rt,_t)),Pe=(Ve,rt)=>{if(!Ve){const _t="ASSERT: "+rt;throw console.error(_t),new Error(_t)}},ye=Ve=>Ve.timeStamp||Date.now(),Ne=Ve=>{if(Ve){const rt=Ve.changedTouches;if(rt&&rt.length>0){const _t=rt[0];return{x:_t.clientX,y:_t.clientY}}if(void 0!==Ve.pageX)return{x:Ve.pageX,y:Ve.pageY}}return{x:0,y:0}},Fe=Ve=>{const rt="rtl"===document.dir;switch(Ve){case"start":return rt;case"end":return!rt;default:throw new Error(`"${Ve}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ht=(Ve,rt)=>{const _t=Ve._original||Ve;return{_original:Ve,emit:_e(_t.emit.bind(_t),rt)}},_e=(Ve,rt=0)=>{let _t;return(...St)=>{clearTimeout(_t),_t=setTimeout(Ve,rt,...St)}},ot=(Ve,rt)=>{if(null!=Ve||(Ve={}),null!=rt||(rt={}),Ve===rt)return!0;const _t=Object.keys(Ve);if(_t.length!==Object.keys(rt).length)return!1;for(const St of _t)if(!(St in rt)||Ve[St]!==rt[St])return!1;return!0}},1363:(en,ut,H)=>{"use strict";H.r(ut),H.d(ut,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>me});var u=H(2733);const se=(de,Ue,Pe,ye)=>{const Ne=Z(de)?{capture:!!ye.capture,passive:!!ye.passive}:!!ye.capture;let Fe,ht;return de.__zone_symbol__addEventListener?(Fe="__zone_symbol__addEventListener",ht="__zone_symbol__removeEventListener"):(Fe="addEventListener",ht="removeEventListener"),de[Fe](Ue,Pe,Ne),()=>{de[ht](Ue,Pe,Ne)}},Z=de=>{if(void 0===ke)try{const Ue=Object.defineProperty({},"passive",{get:()=>{ke=!0}});de.addEventListener("optsTest",()=>{},Ue)}catch(Ue){ke=!1}return!!ke};let ke;const we=de=>de instanceof Document?de:de.ownerDocument,me=de=>{let Ue=!1,Pe=!1,ye=!0,Ne=!1;const Fe=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},de),ht=Fe.canStart,_e=Fe.onWillStart,ot=Fe.onStart,Ve=Fe.onEnd,rt=Fe.notCaptured,_t=Fe.onMove,St=Fe.threshold,qe=Fe.passive,pe=Fe.blurOnStart,Be={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ve=((de,Ue,Pe)=>{const ye=Pe*(Math.PI/180),Ne="x"===de,Fe=Math.cos(ye),ht=Ue*Ue;let _e=0,ot=0,Ve=!1,rt=0;return{start(_t,St){_e=_t,ot=St,rt=0,Ve=!0},detect(_t,St){if(!Ve)return!1;const qe=_t-_e,pe=St-ot,Be=qe*qe+pe*pe;if(Be<ht)return!1;const ve=Math.sqrt(Be),De=(Ne?qe:pe)/ve;return rt=De>Fe?1:De<-Fe?-1:0,Ve=!1,!0},isGesture:()=>0!==rt,getDirection:()=>rt}})(Fe.direction,Fe.threshold,Fe.maxAngle),De=u.G.createGesture({name:de.gestureName,priority:de.gesturePriority,disableScroll:de.disableScroll}),jt=()=>{!Ue||(Ne=!1,_t&&_t(Be))},Jt=()=>!(De&&!De.capture()||(Ue=!0,ye=!1,Be.startX=Be.currentX,Be.startY=Be.currentY,Be.startTime=Be.currentTime,_e?_e(Be).then(st):st(),0)),st=()=>{pe&&(()=>{if("undefined"!=typeof document){const Xe=document.activeElement;null!==Xe&&Xe.blur&&Xe.blur()}})(),ot&&ot(Be),ye=!0},Qe=()=>{Ue=!1,Pe=!1,Ne=!1,ye=!0,De.release()},nt=Xe=>{const Dt=Ue,ft=ye;if(Qe(),ft){if(ce(Be,Xe),Dt)return void(Ve&&Ve(Be));rt&&rt(Be)}},at=((de,Ue,Pe,ye,Ne)=>{let Fe,ht,_e,ot,Ve,rt,_t,St=0;const qe=pt=>{St=Date.now()+2e3,Ue(pt)&&(!ht&&Pe&&(ht=se(de,"touchmove",Pe,Ne)),_e||(_e=se(pt.target,"touchend",Be,Ne)),ot||(ot=se(pt.target,"touchcancel",Be,Ne)))},pe=pt=>{St>Date.now()||!Ue(pt)||(!rt&&Pe&&(rt=se(we(de),"mousemove",Pe,Ne)),_t||(_t=se(we(de),"mouseup",ve,Ne)))},Be=pt=>{De(),ye&&ye(pt)},ve=pt=>{Je(),ye&&ye(pt)},De=()=>{ht&&ht(),_e&&_e(),ot&&ot(),ht=_e=ot=void 0},Je=()=>{rt&&rt(),_t&&_t(),rt=_t=void 0},Ze=()=>{De(),Je()},jt=(pt=!0)=>{pt?(Fe||(Fe=se(de,"touchstart",qe,Ne)),Ve||(Ve=se(de,"mousedown",pe,Ne))):(Fe&&Fe(),Ve&&Ve(),Fe=Ve=void 0,Ze())};return{enable:jt,stop:Ze,destroy:()=>{jt(!1),ye=Pe=Ue=void 0}}})(Fe.el,Xe=>{const Dt=te(Xe);return!(Pe||!ye||(ge(Xe,Be),Be.startX=Be.currentX,Be.startY=Be.currentY,Be.startTime=Be.currentTime=Dt,Be.velocityX=Be.velocityY=Be.deltaX=Be.deltaY=0,Be.event=Xe,ht&&!1===ht(Be))||(De.release(),!De.start()))&&(Pe=!0,0===St?Jt():(ve.start(Be.startX,Be.startY),!0))},Xe=>{Ue?!Ne&&ye&&(Ne=!0,ce(Be,Xe),requestAnimationFrame(jt)):(ce(Be,Xe),ve.detect(Be.currentX,Be.currentY)&&(!ve.isGesture()||!Jt())&&Oe())},nt,{capture:!1,passive:qe}),Oe=()=>{Qe(),at.stop(),rt&&rt(Be)};return{enable(Xe=!0){Xe||(Ue&&nt(void 0),Qe()),at.enable(Xe)},destroy(){De.destroy(),at.destroy()}}},ce=(de,Ue)=>{if(!Ue)return;const Pe=de.currentX,ye=de.currentY,Ne=de.currentTime;ge(Ue,de);const Fe=de.currentX,ht=de.currentY,ot=(de.currentTime=te(Ue))-Ne;if(ot>0&&ot<100){const rt=(ht-ye)/ot;de.velocityX=(Fe-Pe)/ot*.7+.3*de.velocityX,de.velocityY=.7*rt+.3*de.velocityY}de.deltaX=Fe-de.startX,de.deltaY=ht-de.startY,de.event=Ue},ge=(de,Ue)=>{let Pe=0,ye=0;if(de){const Ne=de.changedTouches;if(Ne&&Ne.length>0){const Fe=Ne[0];Pe=Fe.clientX,ye=Fe.clientY}else void 0!==de.pageX&&(Pe=de.pageX,ye=de.pageY)}Ue.currentX=Pe,Ue.currentY=ye},te=de=>de.timeStamp||Date.now()},2361:(en,ut,H)=>{"use strict";H.d(ut,{B:()=>di,H:()=>fr,a:()=>Oe,b:()=>Or,c:()=>Mi,e:()=>ir,f:()=>Xr,g:()=>Xe,h:()=>un,i:()=>ci,j:()=>Ie,k:()=>_i,p:()=>ye,r:()=>vn,s:()=>Ue});var u=H(5861);let Z,ke,Te,ae=!1,we=!1,be=!1,me=!1,ce=!1;const ge="undefined"!=typeof window?window:{},te=ge.document||{head:{}},de={$flags$:0,$resourcesUrl$:"",jmp:Q=>Q(),raf:Q=>requestAnimationFrame(Q),ael:(Q,fe,O,Se)=>Q.addEventListener(fe,O,Se),rel:(Q,fe,O,Se)=>Q.removeEventListener(fe,O,Se),ce:(Q,fe)=>new CustomEvent(Q,fe)},Ue=Q=>{Object.assign(de,Q)},ye=Q=>Promise.resolve(Q),Ne=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(Q){}return!1})(),Fe=(Q,fe,O,Se)=>{O&&O.map(([Ge,et,Et])=>{const xt=_e(Q,Ge),Nt=ht(fe,Et),Mt=ot(Ge);de.ael(xt,et,Nt,Mt),(fe.$rmListeners$=fe.$rmListeners$||[]).push(()=>de.rel(xt,et,Nt,Mt))})},ht=(Q,fe)=>O=>{try{256&Q.$flags$?Q.$lazyInstance$[fe](O):(Q.$queuedListeners$=Q.$queuedListeners$||[]).push([fe,O])}catch(Se){ti(Se)}},_e=(Q,fe)=>4&fe?te:8&fe?ge:16&fe?te.body:Q,ot=Q=>0!=(2&Q),qe="s-id",pe="sty-id",De="http://www.w3.org/1999/xlink",jt=new WeakMap,Jt=(Q,fe,O)=>{let Se=dr.get(Q);Ne&&O?(Se=Se||new CSSStyleSheet,Se.replace(fe)):Se=fe,dr.set(Q,Se)},pt=(Q,fe,O,Se)=>{let Ge=Qe(fe,O),et=dr.get(Ge);if(Q=11===Q.nodeType?Q:te,et)if("string"==typeof et){let xt,Et=jt.get(Q=Q.head||Q);Et||jt.set(Q,Et=new Set),Et.has(Ge)||(Q.host&&(xt=Q.querySelector(`[${pe}="${Ge}"]`))?xt.innerHTML=et:(xt=te.createElement("style"),xt.innerHTML=et,Q.insertBefore(xt,Q.querySelector("link"))),Et&&Et.add(Ge))}else Q.adoptedStyleSheets.includes(et)||(Q.adoptedStyleSheets=[...Q.adoptedStyleSheets,et]);return Ge},Qe=(Q,fe)=>"sc-"+(fe&&32&Q.$flags$?Q.$tagName$+"-"+fe:Q.$tagName$),nt=Q=>Q.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Oe=Q=>Ur.push(Q),Xe=Q=>At(Q).$modeName$,Dt={},xn=Q=>"object"==(Q=typeof Q)||"function"===Q,un=(Q,fe,...O)=>{let Se=null,Ge=null,et=null,Et=!1,xt=!1,Nt=[];const Mt=En=>{for(let Mn=0;Mn<En.length;Mn++)Se=En[Mn],Array.isArray(Se)?Mt(Se):null!=Se&&"boolean"!=typeof Se&&((Et="function"!=typeof Q&&!xn(Se))&&(Se=String(Se)),Et&&xt?Nt[Nt.length-1].$text$+=Se:Nt.push(Et?rn(null,Se):Se),xt=Et)};if(Mt(O),fe){fe.key&&(Ge=fe.key),fe.name&&(et=fe.name);{const En=fe.className||fe.class;En&&(fe.class="object"!=typeof En?En:Object.keys(En).filter(Mn=>En[Mn]).join(" "))}}if("function"==typeof Q)return Q(null===fe?{}:fe,Nt,Zn);const hn=rn(Q,null);return hn.$attrs$=fe,Nt.length>0&&(hn.$children$=Nt),hn.$key$=Ge,hn.$name$=et,hn},rn=(Q,fe)=>({$flags$:0,$tag$:Q,$text$:fe,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),fr={},Zn={forEach:(Q,fe)=>Q.map(Yn).forEach(fe),map:(Q,fe)=>Q.map(Yn).map(fe).map(Ht)},Yn=Q=>({vattrs:Q.$attrs$,vchildren:Q.$children$,vkey:Q.$key$,vname:Q.$name$,vtag:Q.$tag$,vtext:Q.$text$}),Ht=Q=>{if("function"==typeof Q.vtag){const O=Object.assign({},Q.vattrs);return Q.vkey&&(O.key=Q.vkey),Q.vname&&(O.name=Q.vname),un(Q.vtag,O,...Q.vchildren||[])}const fe=rn(Q.vtag,Q.vtext);return fe.$attrs$=Q.vattrs,fe.$children$=Q.vchildren,fe.$key$=Q.vkey,fe.$name$=Q.vname,fe},rr=(Q,fe,O,Se,Ge,et)=>{if(O!==Se){let Et=hr(Q,fe),xt=fe.toLowerCase();if("class"===fe){const Nt=Q.classList,Mt=Jn(O),hn=Jn(Se);Nt.remove(...Mt.filter(En=>En&&!hn.includes(En))),Nt.add(...hn.filter(En=>En&&!Mt.includes(En)))}else if("style"===fe){for(const Nt in O)(!Se||null==Se[Nt])&&(Nt.includes("-")?Q.style.removeProperty(Nt):Q.style[Nt]="");for(const Nt in Se)(!O||Se[Nt]!==O[Nt])&&(Nt.includes("-")?Q.style.setProperty(Nt,Se[Nt]):Q.style[Nt]=Se[Nt])}else if("key"!==fe)if("ref"===fe)Se&&Se(Q);else if(Et||"o"!==fe[0]||"n"!==fe[1]){const Nt=xn(Se);if((Et||Nt&&null!==Se)&&!Ge)try{if(Q.tagName.includes("-"))Q[fe]=Se;else{let hn=null==Se?"":Se;"list"===fe?Et=!1:(null==O||Q[fe]!=hn)&&(Q[fe]=hn)}}catch(hn){}let Mt=!1;xt!==(xt=xt.replace(/^xlink\:?/,""))&&(fe=xt,Mt=!0),null==Se||!1===Se?(!1!==Se||""===Q.getAttribute(fe))&&(Mt?Q.removeAttributeNS(De,fe):Q.removeAttribute(fe)):(!Et||4&et||Ge)&&!Nt&&(Se=!0===Se?"":Se,Mt?Q.setAttributeNS(De,fe,Se):Q.setAttribute(fe,Se))}else fe="-"===fe[2]?fe.slice(3):hr(ge,xt)?xt.slice(2):xt[2]+fe.slice(3),O&&de.rel(Q,fe,O,!1),Se&&de.ael(Q,fe,Se,!1)}},qr=/\s/,Jn=Q=>Q?Q.split(qr):[],cr=(Q,fe,O,Se)=>{const Ge=11===fe.$elm$.nodeType&&fe.$elm$.host?fe.$elm$.host:fe.$elm$,et=Q&&Q.$attrs$||Dt,Et=fe.$attrs$||Dt;for(Se in et)Se in Et||rr(Ge,Se,et[Se],void 0,O,fe.$flags$);for(Se in Et)rr(Ge,Se,et[Se],Et[Se],O,fe.$flags$)},Hr=(Q,fe,O,Se)=>{let Et,xt,Nt,Ge=fe.$children$[O],et=0;if(ae||(be=!0,"slot"===Ge.$tag$&&(Z&&Se.classList.add(Z+"-s"),Ge.$flags$|=Ge.$children$?2:1)),null!==Ge.$text$)Et=Ge.$elm$=te.createTextNode(Ge.$text$);else if(1&Ge.$flags$)Et=Ge.$elm$=te.createTextNode("");else{if(me||(me="svg"===Ge.$tag$),Et=Ge.$elm$=te.createElementNS(me?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ge.$flags$?"slot-fb":Ge.$tag$),me&&"foreignObject"===Ge.$tag$&&(me=!1),cr(null,Ge,me),(Q=>null!=Q)(Z)&&Et["s-si"]!==Z&&Et.classList.add(Et["s-si"]=Z),Ge.$children$)for(et=0;et<Ge.$children$.length;++et)xt=Hr(Q,Ge,et,Et),xt&&Et.appendChild(xt);"svg"===Ge.$tag$?me=!1:"foreignObject"===Et.tagName&&(me=!0)}return Et["s-hn"]=Te,3&Ge.$flags$&&(Et["s-sr"]=!0,Et["s-cr"]=ke,Et["s-sn"]=Ge.$name$||"",Nt=Q&&Q.$children$&&Q.$children$[O],Nt&&Nt.$tag$===Ge.$tag$&&Q.$elm$&&on(Q.$elm$,!1)),Et},on=(Q,fe)=>{de.$flags$|=1;const O=Q.childNodes;for(let Se=O.length-1;Se>=0;Se--){const Ge=O[Se];Ge["s-hn"]!==Te&&Ge["s-ol"]&&(Sn(Ge).insertBefore(Ge,dn(Ge)),Ge["s-ol"].remove(),Ge["s-ol"]=void 0,be=!0),fe&&on(Ge,fe)}de.$flags$&=-2},Zr=(Q,fe,O,Se,Ge,et)=>{let xt,Et=Q["s-cr"]&&Q["s-cr"].parentNode||Q;for(Et.shadowRoot&&Et.tagName===Te&&(Et=Et.shadowRoot);Ge<=et;++Ge)Se[Ge]&&(xt=Hr(null,O,Ge,Q),xt&&(Se[Ge].$elm$=xt,Et.insertBefore(xt,dn(fe))))},zt=(Q,fe,O,Se,Ge)=>{for(;fe<=O;++fe)(Se=Q[fe])&&(Ge=Se.$elm$,Lr(Se),we=!0,Ge["s-ol"]?Ge["s-ol"].remove():on(Ge,!0),Ge.remove())},kn=(Q,fe)=>Q.$tag$===fe.$tag$&&("slot"===Q.$tag$?Q.$name$===fe.$name$:Q.$key$===fe.$key$),dn=Q=>Q&&Q["s-ol"]||Q,Sn=Q=>(Q["s-ol"]?Q["s-ol"]:Q).parentNode,Gr=(Q,fe)=>{const O=fe.$elm$=Q.$elm$,Se=Q.$children$,Ge=fe.$children$,et=fe.$tag$,Et=fe.$text$;let xt;null===Et?(me="svg"===et||"foreignObject"!==et&&me,"slot"===et||cr(Q,fe,me),null!==Se&&null!==Ge?((Q,fe,O,Se)=>{let gi,Ki,Ge=0,et=0,Et=0,xt=0,Nt=fe.length-1,Mt=fe[0],hn=fe[Nt],En=Se.length-1,Mn=Se[0],$n=Se[En];for(;Ge<=Nt&&et<=En;)if(null==Mt)Mt=fe[++Ge];else if(null==hn)hn=fe[--Nt];else if(null==Mn)Mn=Se[++et];else if(null==$n)$n=Se[--En];else if(kn(Mt,Mn))Gr(Mt,Mn),Mt=fe[++Ge],Mn=Se[++et];else if(kn(hn,$n))Gr(hn,$n),hn=fe[--Nt],$n=Se[--En];else if(kn(Mt,$n))("slot"===Mt.$tag$||"slot"===$n.$tag$)&&on(Mt.$elm$.parentNode,!1),Gr(Mt,$n),Q.insertBefore(Mt.$elm$,hn.$elm$.nextSibling),Mt=fe[++Ge],$n=Se[--En];else if(kn(hn,Mn))("slot"===Mt.$tag$||"slot"===$n.$tag$)&&on(hn.$elm$.parentNode,!1),Gr(hn,Mn),Q.insertBefore(hn.$elm$,Mt.$elm$),hn=fe[--Nt],Mn=Se[++et];else{for(Et=-1,xt=Ge;xt<=Nt;++xt)if(fe[xt]&&null!==fe[xt].$key$&&fe[xt].$key$===Mn.$key$){Et=xt;break}Et>=0?(Ki=fe[Et],Ki.$tag$!==Mn.$tag$?gi=Hr(fe&&fe[et],O,Et,Q):(Gr(Ki,Mn),fe[Et]=void 0,gi=Ki.$elm$),Mn=Se[++et]):(gi=Hr(fe&&fe[et],O,et,Q),Mn=Se[++et]),gi&&Sn(Mt.$elm$).insertBefore(gi,dn(Mt.$elm$))}Ge>Nt?Zr(Q,null==Se[En+1]?null:Se[En+1].$elm$,O,Se,et,En):et>En&&zt(fe,Ge,Nt)})(O,Se,fe,Ge):null!==Ge?(null!==Q.$text$&&(O.textContent=""),Zr(O,null,fe,Ge,0,Ge.length-1)):null!==Se&&zt(Se,0,Se.length-1),me&&"svg"===et&&(me=!1)):(xt=O["s-cr"])?xt.parentNode.textContent=Et:Q.$text$!==Et&&(O.data=Et)},Ai=Q=>{let O,Se,Ge,et,Et,xt,fe=Q.childNodes;for(Se=0,Ge=fe.length;Se<Ge;Se++)if(O=fe[Se],1===O.nodeType){if(O["s-sr"])for(Et=O["s-sn"],O.hidden=!1,et=0;et<Ge;et++)if(xt=fe[et].nodeType,fe[et]["s-hn"]!==O["s-hn"]||""!==Et){if(1===xt&&Et===fe[et].getAttribute("slot")){O.hidden=!0;break}}else if(1===xt||3===xt&&""!==fe[et].textContent.trim()){O.hidden=!0;break}Ai(O)}},Vn=[],Pn=Q=>{let fe,O,Se,Ge,et,Et,xt=0,Nt=Q.childNodes,Mt=Nt.length;for(;xt<Mt;xt++){if(fe=Nt[xt],fe["s-sr"]&&(O=fe["s-cr"])&&O.parentNode)for(Se=O.parentNode.childNodes,Ge=fe["s-sn"],Et=Se.length-1;Et>=0;Et--)O=Se[Et],!O["s-cn"]&&!O["s-nr"]&&O["s-hn"]!==fe["s-hn"]&&(si(O,Ge)?(et=Vn.find(hn=>hn.$nodeToRelocate$===O),we=!0,O["s-sn"]=O["s-sn"]||Ge,et?et.$slotRefNode$=fe:Vn.push({$slotRefNode$:fe,$nodeToRelocate$:O}),O["s-sr"]&&Vn.map(hn=>{si(hn.$nodeToRelocate$,O["s-sn"])&&(et=Vn.find(En=>En.$nodeToRelocate$===O),et&&!hn.$slotRefNode$&&(hn.$slotRefNode$=et.$slotRefNode$))})):Vn.some(hn=>hn.$nodeToRelocate$===O)||Vn.push({$nodeToRelocate$:O}));1===fe.nodeType&&Pn(fe)}},si=(Q,fe)=>1===Q.nodeType?null===Q.getAttribute("slot")&&""===fe||Q.getAttribute("slot")===fe:Q["s-sn"]===fe||""===fe,Lr=Q=>{Q.$attrs$&&Q.$attrs$.ref&&Q.$attrs$.ref(null),Q.$children$&&Q.$children$.map(Lr)},ci=Q=>At(Q).$hostElement$,ir=(Q,fe,O)=>{const Se=ci(Q);return{emit:Ge=>sn(Se,fe,{bubbles:!!(4&O),composed:!!(2&O),cancelable:!!(1&O),detail:Ge})}},sn=(Q,fe,O)=>{const Se=de.ce(fe,O);return Q.dispatchEvent(Se),Se},kt=(Q,fe)=>{fe&&!Q.$onRenderResolve$&&fe["s-p"]&&fe["s-p"].push(new Promise(O=>Q.$onRenderResolve$=O))},tn=(Q,fe)=>{if(Q.$flags$|=16,!(4&Q.$flags$))return kt(Q,Q.$ancestorComponent$),Mi(()=>yn(Q,fe));Q.$flags$|=512},yn=(Q,fe)=>{const Se=Q.$lazyInstance$;let Ge;return fe&&(Q.$flags$|=256,Q.$queuedListeners$&&(Q.$queuedListeners$.map(([et,Et])=>vt(Se,et,Et)),Q.$queuedListeners$=null),Ge=vt(Se,"componentWillLoad")),Ge=lt(Ge,()=>vt(Se,"componentWillRender")),lt(Ge,()=>_n(Q,Se,fe))},_n=function(){var Q=(0,u.Z)(function*(fe,O,Se){const Ge=fe.$hostElement$,Et=Ge["s-rc"];Se&&(Q=>{const fe=Q.$cmpMeta$,O=Q.$hostElement$,Se=fe.$flags$,et=pt(O.shadowRoot?O.shadowRoot:O.getRootNode(),fe,Q.$modeName$);10&Se&&(O["s-sc"]=et,O.classList.add(et+"-h"),2&Se&&O.classList.add(et+"-s"))})(fe);Rn(fe,O),Et&&(Et.map(Nt=>Nt()),Ge["s-rc"]=void 0);{const Nt=Ge["s-p"],Mt=()=>Le(fe);0===Nt.length?Mt():(Promise.all(Nt).then(Mt),fe.$flags$|=4,Nt.length=0)}});return function(O,Se,Ge){return Q.apply(this,arguments)}}(),Rn=(Q,fe,O)=>{try{fe=fe.render&&fe.render(),Q.$flags$&=-17,Q.$flags$|=2,((Q,fe)=>{const O=Q.$hostElement$,Se=Q.$cmpMeta$,Ge=Q.$vnode$||rn(null,null),et=(Q=>Q&&Q.$tag$===fr)(fe)?fe:un(null,null,fe);if(Te=O.tagName,Se.$attrsToReflect$&&(et.$attrs$=et.$attrs$||{},Se.$attrsToReflect$.map(([Et,xt])=>et.$attrs$[xt]=O[Et])),et.$tag$=null,et.$flags$|=4,Q.$vnode$=et,et.$elm$=Ge.$elm$=O.shadowRoot||O,Z=O["s-sc"],ke=O["s-cr"],ae=0!=(1&Se.$flags$),we=!1,Gr(Ge,et),de.$flags$|=1,be){Pn(et.$elm$);let Et,xt,Nt,Mt,hn,En,Mn=0;for(;Mn<Vn.length;Mn++)Et=Vn[Mn],xt=Et.$nodeToRelocate$,xt["s-ol"]||(Nt=te.createTextNode(""),Nt["s-nr"]=xt,xt.parentNode.insertBefore(xt["s-ol"]=Nt,xt));for(Mn=0;Mn<Vn.length;Mn++)if(Et=Vn[Mn],xt=Et.$nodeToRelocate$,Et.$slotRefNode$){for(Mt=Et.$slotRefNode$.parentNode,hn=Et.$slotRefNode$.nextSibling,Nt=xt["s-ol"];Nt=Nt.previousSibling;)if(En=Nt["s-nr"],En&&En["s-sn"]===xt["s-sn"]&&Mt===En.parentNode&&(En=En.nextSibling,!En||!En["s-nr"])){hn=En;break}(!hn&&Mt!==xt.parentNode||xt.nextSibling!==hn)&&xt!==hn&&(!xt["s-hn"]&&xt["s-ol"]&&(xt["s-hn"]=xt["s-ol"].parentNode.nodeName),Mt.insertBefore(xt,hn))}else 1===xt.nodeType&&(xt.hidden=!0)}we&&Ai(et.$elm$),de.$flags$&=-2,Vn.length=0})(Q,fe)}catch(Se){ti(Se,Q.$hostElement$)}return null},Le=Q=>{const O=Q.$hostElement$,Ge=Q.$lazyInstance$,et=Q.$ancestorComponent$;vt(Ge,"componentDidRender"),64&Q.$flags$?vt(Ge,"componentDidUpdate"):(Q.$flags$|=64,qt(O),vt(Ge,"componentDidLoad"),Q.$onReadyResolve$(O),et||je()),Q.$onInstanceResolve$(O),Q.$onRenderResolve$&&(Q.$onRenderResolve$(),Q.$onRenderResolve$=void 0),512&Q.$flags$&&ni(()=>tn(Q,!1)),Q.$flags$&=-517},Ie=Q=>{{const fe=At(Q),O=fe.$hostElement$.isConnected;return O&&2==(18&fe.$flags$)&&tn(fe,!1),O}},je=Q=>{qt(te.documentElement),ni(()=>sn(ge,"appload",{detail:{namespace:"ionic"}}))},vt=(Q,fe,O)=>{if(Q&&Q[fe])try{return Q[fe](O)}catch(Se){ti(Se)}},lt=(Q,fe)=>Q&&Q.then?Q.then(fe):fe(),qt=Q=>Q.classList.add("hydrated"),Qn=(Q,fe,O,Se,Ge,et,Et)=>{let xt,Nt,Mt,hn;if(1===et.nodeType){for(xt=et.getAttribute("c-id"),xt&&(Nt=xt.split("."),(Nt[0]===Et||"0"===Nt[0])&&(Mt={$flags$:0,$hostId$:Nt[0],$nodeId$:Nt[1],$depth$:Nt[2],$index$:Nt[3],$tag$:et.tagName.toLowerCase(),$elm$:et,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},fe.push(Mt),et.removeAttribute("c-id"),Q.$children$||(Q.$children$=[]),Q.$children$[Mt.$index$]=Mt,Q=Mt,Se&&"0"===Mt.$depth$&&(Se[Mt.$index$]=Mt.$elm$))),hn=et.childNodes.length-1;hn>=0;hn--)Qn(Q,fe,O,Se,Ge,et.childNodes[hn],Et);if(et.shadowRoot)for(hn=et.shadowRoot.childNodes.length-1;hn>=0;hn--)Qn(Q,fe,O,Se,Ge,et.shadowRoot.childNodes[hn],Et)}else if(8===et.nodeType)Nt=et.nodeValue.split("."),(Nt[1]===Et||"0"===Nt[1])&&(xt=Nt[0],Mt={$flags$:0,$hostId$:Nt[1],$nodeId$:Nt[2],$depth$:Nt[3],$index$:Nt[4],$elm$:et,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===xt?(Mt.$elm$=et.nextSibling,Mt.$elm$&&3===Mt.$elm$.nodeType&&(Mt.$text$=Mt.$elm$.textContent,fe.push(Mt),et.remove(),Q.$children$||(Q.$children$=[]),Q.$children$[Mt.$index$]=Mt,Se&&"0"===Mt.$depth$&&(Se[Mt.$index$]=Mt.$elm$))):Mt.$hostId$===Et&&("s"===xt?(Mt.$tag$="slot",et["s-sn"]=Nt[5]?Mt.$name$=Nt[5]:"",et["s-sr"]=!0,Se&&(Mt.$elm$=te.createElement(Mt.$tag$),Mt.$name$&&Mt.$elm$.setAttribute("name",Mt.$name$),et.parentNode.insertBefore(Mt.$elm$,et),et.remove(),"0"===Mt.$depth$&&(Se[Mt.$index$]=Mt.$elm$)),O.push(Mt),Q.$children$||(Q.$children$=[]),Q.$children$[Mt.$index$]=Mt):"r"===xt&&(Se?et.remove():(Ge["s-cr"]=et,et["s-cn"]=!0))));else if(Q&&"style"===Q.$tag$){const En=rn(null,et.textContent);En.$elm$=et,En.$index$="0",Q.$children$=[En]}},Qr=(Q,fe)=>{if(1===Q.nodeType){let O=0;for(;O<Q.childNodes.length;O++)Qr(Q.childNodes[O],fe);if(Q.shadowRoot)for(O=0;O<Q.shadowRoot.childNodes.length;O++)Qr(Q.shadowRoot.childNodes[O],fe)}else if(8===Q.nodeType){const O=Q.nodeValue.split(".");"o"===O[0]&&(fe.set(O[1]+"."+O[2],Q),Q.nodeValue="",Q["s-en"]=O[3])}},vr=(Q,fe,O)=>{if(fe.$members$){Q.watchers&&(fe.$watchers$=Q.watchers);const Se=Object.entries(fe.$members$),Ge=Q.prototype;if(Se.map(([et,[Et]])=>{31&Et||2&O&&32&Et?Object.defineProperty(Ge,et,{get(){return((Q,fe)=>At(this).$instanceValues$.get(fe))(0,et)},set(xt){((Q,fe,O,Se)=>{const Ge=At(Q),et=Ge.$hostElement$,Et=Ge.$instanceValues$.get(fe),xt=Ge.$flags$,Nt=Ge.$lazyInstance$;O=((Q,fe)=>null==Q||xn(Q)?Q:4&fe?"false"!==Q&&(""===Q||!!Q):2&fe?parseFloat(Q):1&fe?String(Q):Q)(O,Se.$members$[fe][0]);const Mt=Number.isNaN(Et)&&Number.isNaN(O);if((!(8&xt)||void 0===Et)&&O!==Et&&!Mt&&(Ge.$instanceValues$.set(fe,O),Nt)){if(Se.$watchers$&&128&xt){const En=Se.$watchers$[fe];En&&En.map(Mn=>{try{Nt[Mn](O,Et,fe)}catch($n){ti($n,et)}})}2==(18&xt)&&tn(Ge,!1)}})(this,et,xt,fe)},configurable:!0,enumerable:!0}):1&O&&64&Et&&Object.defineProperty(Ge,et,{value(...xt){const Nt=At(this);return Nt.$onInstancePromise$.then(()=>Nt.$lazyInstance$[et](...xt))}})}),1&O){const et=new Map;Ge.attributeChangedCallback=function(Et,xt,Nt){de.jmp(()=>{const Mt=et.get(Et);if(this.hasOwnProperty(Mt))Nt=this[Mt],delete this[Mt];else if(Ge.hasOwnProperty(Mt)&&"number"==typeof this[Mt]&&this[Mt]==Nt)return;this[Mt]=(null!==Nt||"boolean"!=typeof this[Mt])&&Nt})},Q.observedAttributes=Se.filter(([Et,xt])=>15&xt[0]).map(([Et,xt])=>{const Nt=xt[1]||Et;return et.set(Nt,Et),512&xt[0]&&fe.$attrsToReflect$.push([Et,Nt]),Nt})}}return Q},Rr=function(){var Q=(0,u.Z)(function*(fe,O,Se,Ge,et){if(0==(32&O.$flags$)){{if(O.$flags$|=32,(et=fi(Se)).then){const Mt=()=>{};et=yield et,Mt()}et.isProxied||(Se.$watchers$=et.watchers,vr(et,Se,2),et.isProxied=!0);const Nt=()=>{};O.$flags$|=8;try{new et(O)}catch(Mt){ti(Mt)}O.$flags$&=-9,O.$flags$|=128,Nt(),Fn(O.$lazyInstance$)}if(et.style){let Nt=et.style;"string"!=typeof Nt&&(Nt=Nt[O.$modeName$=(Q=>Ur.map(fe=>fe(Q)).find(fe=>!!fe))(fe)]);const Mt=Qe(Se,O.$modeName$);if(!dr.has(Mt)){const hn=()=>{};Jt(Mt,Nt,!!(1&Se.$flags$)),hn()}}}const Et=O.$ancestorComponent$,xt=()=>tn(O,!0);Et&&Et["s-rc"]?Et["s-rc"].push(xt):xt()});return function(O,Se,Ge,et,Et){return Q.apply(this,arguments)}}(),Fn=Q=>{vt(Q,"connectedCallback")},as=Q=>{const fe=Q["s-cr"]=te.createComment("");fe["s-cn"]=!0,Q.insertBefore(fe,Q.firstChild)},Or=(Q,fe={})=>{const Se=[],Ge=fe.exclude||[],et=ge.customElements,Et=te.head,xt=Et.querySelector("meta[charset]"),Nt=te.createElement("style"),Mt=[],hn=te.querySelectorAll(`[${pe}]`);let En,Mn=!0,$n=0;for(Object.assign(de,fe),de.$resourcesUrl$=new URL(fe.resourcesUrl||"./",te.baseURI).href,de.$flags$|=2;$n<hn.length;$n++)Jt(hn[$n].getAttribute(pe),nt(hn[$n].innerHTML),!0);Q.map(gi=>{gi[1].map(Ki=>{const He={$flags$:Ki[0],$tagName$:Ki[1],$members$:Ki[2],$listeners$:Ki[3]};He.$members$=Ki[2],He.$listeners$=Ki[3],He.$attrsToReflect$=[],He.$watchers$={};const We=He.$tagName$,ct=class extends HTMLElement{constructor(Ot){super(Ot),sr(Ot=this,He),1&He.$flags$&&Ot.attachShadow({mode:"open",delegatesFocus:!!(16&He.$flags$)})}connectedCallback(){En&&(clearTimeout(En),En=null),Mn?Mt.push(this):de.jmp(()=>(Q=>{if(0==(1&de.$flags$)){const fe=At(Q),O=fe.$cmpMeta$,Se=()=>{};if(1&fe.$flags$)Fe(Q,fe,O.$listeners$),Fn(fe.$lazyInstance$);else{let Ge;if(fe.$flags$|=1,Ge=Q.getAttribute(qe),Ge){if(1&O.$flags$){const et=pt(Q.shadowRoot,O,Q.getAttribute("s-mode"));Q.classList.remove(et+"-h",et+"-s")}((Q,fe,O,Se)=>{const et=Q.shadowRoot,Et=[],Nt=et?[]:null,Mt=Se.$vnode$=rn(fe,null);de.$orgLocNodes$||Qr(te.body,de.$orgLocNodes$=new Map),Q[qe]=O,Q.removeAttribute(qe),Qn(Mt,Et,[],Nt,Q,Q,O),Et.map(hn=>{const En=hn.$hostId$+"."+hn.$nodeId$,Mn=de.$orgLocNodes$.get(En),$n=hn.$elm$;Mn&&""===Mn["s-en"]&&Mn.parentNode.insertBefore($n,Mn.nextSibling),et||($n["s-hn"]=fe,Mn&&($n["s-ol"]=Mn,$n["s-ol"]["s-nr"]=$n)),de.$orgLocNodes$.delete(En)}),et&&Nt.map(hn=>{hn&&et.appendChild(hn)})})(Q,O.$tagName$,Ge,fe)}Ge||12&O.$flags$&&as(Q);{let et=Q;for(;et=et.parentNode||et.host;)if(1===et.nodeType&&et.hasAttribute("s-id")&&et["s-p"]||et["s-p"]){kt(fe,fe.$ancestorComponent$=et);break}}O.$members$&&Object.entries(O.$members$).map(([et,[Et]])=>{if(31&Et&&Q.hasOwnProperty(et)){const xt=Q[et];delete Q[et],Q[et]=xt}}),ni(()=>Rr(Q,fe,O))}Se()}})(this))}disconnectedCallback(){de.jmp(()=>(Q=>{if(0==(1&de.$flags$)){const fe=At(this),O=fe.$lazyInstance$;fe.$rmListeners$&&(fe.$rmListeners$.map(Se=>Se()),fe.$rmListeners$=void 0),vt(O,"disconnectedCallback")}})())}componentOnReady(){return At(this).$onReadyPromise$}};He.$lazyBundleId$=gi[0],!Ge.includes(We)&&!et.get(We)&&(Se.push(We),et.define(We,vr(ct,He,1)))})}),Nt.innerHTML=Se+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.setAttribute("data-styles",""),Et.insertBefore(Nt,xt?xt.nextSibling:Et.firstChild),Mn=!1,Mt.length?Mt.map(gi=>gi.connectedCallback()):de.jmp(()=>En=setTimeout(je,30))},_i=Q=>{const fe=new URL(Q,de.$resourcesUrl$);return fe.origin!==ge.location.origin?fe.href:fe.pathname},$r=new WeakMap,At=Q=>$r.get(Q),vn=(Q,fe)=>$r.set(fe.$lazyInstance$=Q,fe),sr=(Q,fe)=>{const O={$flags$:0,$hostElement$:Q,$cmpMeta$:fe,$instanceValues$:new Map};return O.$onInstancePromise$=new Promise(Se=>O.$onInstanceResolve$=Se),O.$onReadyPromise$=new Promise(Se=>O.$onReadyResolve$=Se),Q["s-p"]=[],Q["s-rc"]=[],Fe(Q,O,fe.$listeners$),$r.set(Q,O)},hr=(Q,fe)=>fe in Q,ti=(Q,fe)=>(0,console.error)(Q,fe),Yr=new Map,fi=(Q,fe,O)=>{const Se=Q.$tagName$.replace(/-/g,"_"),Ge=Q.$lazyBundleId$,et=Yr.get(Ge);return et?et[Se]:H(863)(`./${Ge}.entry.js`).then(Et=>(Yr.set(Ge,Et),Et[Se]),ti)},dr=new Map,Ur=[],Vi=[],Ln=[],qi=(Q,fe)=>O=>{Q.push(O),ce||(ce=!0,fe&&4&de.$flags$?ni(xi):de.raf(xi))},Yi=Q=>{for(let fe=0;fe<Q.length;fe++)try{Q[fe](performance.now())}catch(O){ti(O)}Q.length=0},xi=()=>{Yi(Vi),Yi(Ln),(ce=Vi.length>0)&&de.raf(xi)},ni=Q=>ye().then(Q),Xr=qi(Vi,!1),Mi=qi(Ln,!0),di={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5970:(en,ut,H)=>{"use strict";H.d(ut,{m:()=>ge});var u=H(5861),se=H(527),Z=H(206),ke=H(8686),Te=H(6304);const ae=te=>(0,Te.c)().duration(te?400:300),we=te=>{let de,Ue;const Pe=te.width+8,ye=(0,Te.c)(),Ne=(0,Te.c)();te.isEndSide?(de=Pe+"px",Ue="0px"):(de=-Pe+"px",Ue="0px"),ye.addElement(te.menuInnerEl).fromTo("transform",`translateX(${de})`,`translateX(${Ue})`);const ht="ios"===(0,ke.b)(te),_e=ht?.2:.25;return Ne.addElement(te.backdropEl).fromTo("opacity",.01,_e),ae(ht).addAnimation([ye,Ne])},be=te=>{let de,Ue;const Pe=(0,ke.b)(te),ye=te.width;te.isEndSide?(de=-ye+"px",Ue=ye+"px"):(de=ye+"px",Ue=-ye+"px");const Ne=(0,Te.c)().addElement(te.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),Fe=(0,Te.c)().addElement(te.contentEl).fromTo("transform","translateX(0px)",`translateX(${de})`),ht=(0,Te.c)().addElement(te.backdropEl).fromTo("opacity",.01,.32);return ae("ios"===Pe).addAnimation([Ne,Fe,ht])},me=te=>{const de=(0,ke.b)(te),Ue=te.width*(te.isEndSide?-1:1)+"px",Pe=(0,Te.c)().addElement(te.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return ae("ios"===de).addAnimation(Pe)},ge=(()=>{const te=new Map,de=[],Ue=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&nt.open()});return function(nt){return st.apply(this,arguments)}}(),Pe=function(){var st=(0,u.Z)(function*(Qe){const nt=yield void 0!==Qe?ot(Qe):Ve();return void 0!==nt&&nt.close()});return function(nt){return st.apply(this,arguments)}}(),ye=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&nt.toggle()});return function(nt){return st.apply(this,arguments)}}(),Ne=function(){var st=(0,u.Z)(function*(Qe,nt){const at=yield ot(nt);return at&&(at.disabled=!Qe),at});return function(nt,at){return st.apply(this,arguments)}}(),Fe=function(){var st=(0,u.Z)(function*(Qe,nt){const at=yield ot(nt);return at&&(at.swipeGesture=Qe),at});return function(nt,at){return st.apply(this,arguments)}}(),ht=function(){var st=(0,u.Z)(function*(Qe){if(null!=Qe){const nt=yield ot(Qe);return void 0!==nt&&nt.isOpen()}return void 0!==(yield Ve())});return function(nt){return st.apply(this,arguments)}}(),_e=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&!nt.disabled});return function(nt){return st.apply(this,arguments)}}(),ot=function(){var st=(0,u.Z)(function*(Qe){return yield pt(),"start"===Qe||"end"===Qe?Jt(Oe=>Oe.side===Qe&&!Oe.disabled)||Jt(Oe=>Oe.side===Qe):null!=Qe?Jt(at=>at.menuId===Qe):Jt(at=>!at.disabled)||(de.length>0?de[0].el:void 0)});return function(nt){return st.apply(this,arguments)}}(),Ve=function(){var st=(0,u.Z)(function*(){return yield pt(),Je()});return function(){return st.apply(this,arguments)}}(),rt=function(){var st=(0,u.Z)(function*(){return yield pt(),Ze()});return function(){return st.apply(this,arguments)}}(),_t=function(){var st=(0,u.Z)(function*(){return yield pt(),jt()});return function(){return st.apply(this,arguments)}}(),St=(st,Qe)=>{te.set(st,Qe)},Be=st=>{const Qe=st.side;de.filter(nt=>nt.side===Qe&&nt!==st).forEach(nt=>nt.disabled=!0)},ve=function(){var st=(0,u.Z)(function*(Qe,nt,at){if(jt())return!1;if(nt){const Oe=yield Ve();Oe&&Qe.el!==Oe&&(yield Oe.setOpen(!1,!1))}return Qe._setOpen(nt,at)});return function(nt,at,Oe){return st.apply(this,arguments)}}(),Je=()=>Jt(st=>st._isOpen),Ze=()=>de.map(st=>st.el),jt=()=>de.some(st=>st.isAnimating),Jt=st=>{const Qe=de.find(st);if(void 0!==Qe)return Qe.el},pt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(st=>new Promise(Qe=>(0,Z.c)(st,Qe))));return St("reveal",me),St("push",be),St("overlay",we),"undefined"!=typeof document&&document.addEventListener("ionBackButton",st=>{const Qe=Je();Qe&&st.detail.register(se.MENU_BACK_BUTTON_PRIORITY,()=>Qe.close())}),{registerAnimation:St,get:ot,getMenus:rt,getOpen:Ve,isEnabled:_e,swipeGesture:Fe,isAnimating:_t,isOpen:ht,enable:Ne,toggle:ye,close:Pe,open:Ue,_getOpenSync:Je,_createAnimation:(st,Qe)=>{const nt=te.get(st);if(!nt)throw new Error("animation not registered");return nt(Qe)},_register:st=>{de.indexOf(st)<0&&(st.disabled||Be(st),de.push(st))},_unregister:st=>{const Qe=de.indexOf(st);Qe>-1&&de.splice(Qe,1)},_setOpen:ve,_setActiveMenu:Be}})()},358:(en,ut,H)=>{"use strict";H.d(ut,{L:()=>ke,a:()=>Te,b:()=>ae,c:()=>we,d:()=>be,e:()=>St,g:()=>Be,l:()=>rt,s:()=>qe,t:()=>ge});var u=H(5861),se=H(2361),Z=H(206);const ke="ionViewWillEnter",Te="ionViewDidEnter",ae="ionViewWillLeave",we="ionViewDidLeave",be="ionViewWillUnload",ge=ve=>new Promise((De,Je)=>{(0,se.c)(()=>{te(ve),de(ve).then(Ze=>{Ze.animation&&Ze.animation.destroy(),Ue(ve),De(Ze)},Ze=>{Ue(ve),Je(Ze)})})}),te=ve=>{const De=ve.enteringEl,Je=ve.leavingEl;pe(De,Je,ve.direction),ve.showGoBack?De.classList.add("can-go-back"):De.classList.remove("can-go-back"),qe(De,!1),De.style.setProperty("pointer-events","none"),Je&&(qe(Je,!1),Je.style.setProperty("pointer-events","none"))},de=function(){var ve=(0,u.Z)(function*(De){const Je=yield Pe(De);return Je&&se.B.isBrowser?ye(Je,De):Ne(De)});return function(Je){return ve.apply(this,arguments)}}(),Ue=ve=>{const De=ve.enteringEl,Je=ve.leavingEl;De.classList.remove("ion-page-invisible"),De.style.removeProperty("pointer-events"),void 0!==Je&&(Je.classList.remove("ion-page-invisible"),Je.style.removeProperty("pointer-events"))},Pe=function(){var ve=(0,u.Z)(function*(De){return De.leavingEl&&De.animated&&0!==De.duration?De.animationBuilder?De.animationBuilder:"ios"===De.mode?(yield Promise.resolve().then(H.bind(H,5797))).iosTransitionAnimation:(yield Promise.resolve().then(H.bind(H,6409))).mdTransitionAnimation:void 0});return function(Je){return ve.apply(this,arguments)}}(),ye=function(){var ve=(0,u.Z)(function*(De,Je){yield Fe(Je,!0);const Ze=De(Je.baseEl,Je);ot(Je.enteringEl,Je.leavingEl);const jt=yield _e(Ze,Je);return Je.progressCallback&&Je.progressCallback(void 0),jt&&Ve(Je.enteringEl,Je.leavingEl),{hasCompleted:jt,animation:Ze}});return function(Je,Ze){return ve.apply(this,arguments)}}(),Ne=function(){var ve=(0,u.Z)(function*(De){const Je=De.enteringEl,Ze=De.leavingEl;return yield Fe(De,!1),ot(Je,Ze),Ve(Je,Ze),{hasCompleted:!0}});return function(Je){return ve.apply(this,arguments)}}(),Fe=function(){var ve=(0,u.Z)(function*(De,Je){const jt=(void 0!==De.deepWait?De.deepWait:Je)?[St(De.enteringEl),St(De.leavingEl)]:[_t(De.enteringEl),_t(De.leavingEl)];yield Promise.all(jt),yield ht(De.viewIsReady,De.enteringEl)});return function(Je,Ze){return ve.apply(this,arguments)}}(),ht=function(){var ve=(0,u.Z)(function*(De,Je){De&&(yield De(Je))});return function(Je,Ze){return ve.apply(this,arguments)}}(),_e=(ve,De)=>{const Je=De.progressCallback,Ze=new Promise(jt=>{ve.onFinish(Jt=>jt(1===Jt))});return Je?(ve.progressStart(!0),Je(ve)):ve.play(),Ze},ot=(ve,De)=>{rt(De,ae),rt(ve,ke)},Ve=(ve,De)=>{rt(ve,Te),rt(De,we)},rt=(ve,De)=>{if(ve){const Je=new CustomEvent(De,{bubbles:!1,cancelable:!1});ve.dispatchEvent(Je)}},_t=ve=>ve?new Promise(De=>(0,Z.c)(ve,De)):Promise.resolve(),St=function(){var ve=(0,u.Z)(function*(De){const Je=De;if(Je){if(null!=Je.componentOnReady){if(null!=(yield Je.componentOnReady()))return}else if(null!=Je.__registerHost)return void(yield new Promise(jt=>(0,Z.r)(jt)));yield Promise.all(Array.from(Je.children).map(St))}});return function(Je){return ve.apply(this,arguments)}}(),qe=(ve,De)=>{De?(ve.setAttribute("aria-hidden","true"),ve.classList.add("ion-page-hidden")):(ve.hidden=!1,ve.removeAttribute("aria-hidden"),ve.classList.remove("ion-page-hidden"))},pe=(ve,De,Je)=>{void 0!==ve&&(ve.style.zIndex="back"===Je?"99":"101"),void 0!==De&&(De.style.zIndex="100")},Be=ve=>ve.classList.contains("ion-page")?ve:ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ve},8686:(en,ut,H)=>{"use strict";H.d(ut,{a:()=>ge,b:()=>jt,c:()=>Z,g:()=>ce,i:()=>Jt});var u=H(2361);class se{constructor(){this.m=new Map}reset(st){this.m=new Map(Object.entries(st))}get(st,Qe){const nt=this.m.get(st);return void 0!==nt?nt:Qe}getBoolean(st,Qe=!1){const nt=this.m.get(st);return void 0===nt?Qe:"string"==typeof nt?"true"===nt:!!nt}getNumber(st,Qe){const nt=parseFloat(this.m.get(st));return isNaN(nt)?void 0!==Qe?Qe:NaN:nt}set(st,Qe){this.m.set(st,Qe)}}const Z=new se,me="ionic-persist-config",ce=pt=>te(pt),ge=(pt,st)=>("string"==typeof pt&&(st=pt,pt=void 0),ce(pt).includes(st)),te=(pt=window)=>{if(void 0===pt)return[];pt.Ionic=pt.Ionic||{};let st=pt.Ionic.platforms;return null==st&&(st=pt.Ionic.platforms=de(pt),st.forEach(Qe=>pt.document.documentElement.classList.add(`plt-${Qe}`))),st},de=pt=>{const st=Z.get("platform");return Object.keys(Je).filter(Qe=>{const nt=st&&st[Qe];return"function"==typeof nt?nt(pt):Je[Qe](pt)})},Pe=pt=>!!(ve(pt,/iPad/i)||ve(pt,/Macintosh/i)&&Ve(pt)),Fe=pt=>ve(pt,/android|sink/i),Ve=pt=>De(pt,"(any-pointer:coarse)"),_t=pt=>St(pt)||qe(pt),St=pt=>!!(pt.cordova||pt.phonegap||pt.PhoneGap),qe=pt=>{const st=pt.Capacitor;return!(!st||!st.isNative)},ve=(pt,st)=>st.test(pt.navigator.userAgent),De=(pt,st)=>pt.matchMedia&&pt.matchMedia(st).matches,Je={ipad:Pe,iphone:pt=>ve(pt,/iPhone/i),ios:pt=>ve(pt,/iPhone|iPod/i)||Pe(pt),android:Fe,phablet:pt=>{const st=pt.innerWidth,Qe=pt.innerHeight,nt=Math.min(st,Qe),at=Math.max(st,Qe);return nt>390&&nt<520&&at>620&&at<800},tablet:pt=>{const st=pt.innerWidth,Qe=pt.innerHeight,nt=Math.min(st,Qe),at=Math.max(st,Qe);return Pe(pt)||(pt=>Fe(pt)&&!ve(pt,/mobile/i))(pt)||nt>460&&nt<820&&at>780&&at<1400},cordova:St,capacitor:qe,electron:pt=>ve(pt,/electron/i),pwa:pt=>!!(pt.matchMedia&&pt.matchMedia("(display-mode: standalone)").matches||pt.navigator.standalone),mobile:Ve,mobileweb:pt=>Ve(pt)&&!_t(pt),desktop:pt=>!Ve(pt),hybrid:_t};let Ze;const jt=pt=>pt&&(0,u.g)(pt)||Ze,Jt=(pt={})=>{if("undefined"==typeof window)return;const st=window.document,Qe=window,nt=Qe.Ionic=Qe.Ionic||{},at={};pt._ael&&(at.ael=pt._ael),pt._rel&&(at.rel=pt._rel),pt._ce&&(at.ce=pt._ce),(0,u.s)(at);const Oe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(pt=>{try{const st=pt.sessionStorage.getItem(me);return null!==st?JSON.parse(st):{}}catch(st){return{}}})(Qe)),{persistConfig:!1}),nt.config),(pt=>{const st={};return pt.location.search.slice(1).split("&").map(Qe=>Qe.split("=")).map(([Qe,nt])=>[decodeURIComponent(Qe),decodeURIComponent(nt)]).filter(([Qe])=>((pt,st)=>pt.substr(0,st.length)===st)(Qe,"ionic:")).map(([Qe,nt])=>[Qe.slice("ionic:".length),nt]).forEach(([Qe,nt])=>{st[Qe]=nt}),st})(Qe)),pt);Z.reset(Oe),Z.getBoolean("persistConfig")&&((pt,st)=>{try{pt.sessionStorage.setItem(me,JSON.stringify(st))}catch(Qe){return}})(Qe,Oe),te(Qe),nt.config=Z,nt.mode=Ze=Z.get("mode",st.documentElement.getAttribute("mode")||(ge(Qe,"ios")?"ios":"md")),Z.set("mode",Ze),st.documentElement.setAttribute("mode",Ze),st.documentElement.classList.add(Ze),Z.getBoolean("_testing")&&Z.set("animated",!1);const Xe=ft=>ft.tagName&&ft.tagName.startsWith("ION-"),Dt=ft=>["ios","md"].includes(ft);(0,u.a)(ft=>{for(;ft;){const Kt=ft.mode||ft.getAttribute("mode");if(Kt){if(Dt(Kt))return Kt;Xe(ft)&&console.warn('Invalid ionic mode: "'+Kt+'", expected: "ios" or "md"')}ft=ft.parentElement}return Ze})}},5797:(en,ut,H)=>{"use strict";H.r(ut),H.d(ut,{iosTransitionAnimation:()=>te,shadow:()=>ae});var u=H(6304),se=H(358);H(2361);const Te=de=>document.querySelector(`${de}.ion-cloned-element`),ae=de=>de.shadowRoot||de,we=de=>{const Ue="ION-TABS"===de.tagName?de:de.querySelector("ion-tabs"),Pe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ue){const ye=Ue.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=ye?ye.querySelector(Pe):null}return de.querySelector(Pe)},be=(de,Ue)=>{const Pe="ION-TABS"===de.tagName?de:de.querySelector("ion-tabs");let ye=[];if(null!=Pe){const Ne=Pe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ne&&(ye=Ne.querySelectorAll("ion-buttons"))}else ye=de.querySelectorAll("ion-buttons");for(const Ne of ye){const Fe=Ne.closest("ion-header"),ht=Fe&&!Fe.classList.contains("header-collapse-condense-inactive"),_e=Ne.querySelector("ion-back-button"),ot=Ne.classList.contains("buttons-collapse"),Ve="start"===Ne.slot||""===Ne.slot;if(null!==_e&&Ve&&(ot&&ht&&Ue||!ot))return _e}return null},ce=(de,Ue,Pe,ye,Ne,Fe)=>{const ht=Ue?`calc(100% - ${Fe.right+4}px)`:Fe.left-4+"px",_e=Ue?"7px":"-7px",ot=Ue?"-4px":"4px",Ve=Ue?"-4px":"4px",rt=Ue?"right":"left",_t=Ue?"left":"right",pe=Pe?[{offset:0,opacity:1,transform:`translate3d(${ot}, ${Fe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${_e}, ${Ne.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${_e}, ${Ne.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${ot}, ${Fe.top-46}px, 0) scale(1)`}],De=Pe?[{offset:0,opacity:1,transform:`translate3d(${Ve}, ${Fe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Ve}, ${Fe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Ve}, ${Fe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ve}, ${Fe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Ve}, ${Fe.top-46}px, 0) scale(1)`}],Je=(0,u.c)(),Ze=(0,u.c)(),jt=Te("ion-back-button"),Jt=ae(jt).querySelector(".button-text"),pt=ae(jt).querySelector("ion-icon");jt.text=ye.text,jt.mode=ye.mode,jt.icon=ye.icon,jt.color=ye.color,jt.disabled=ye.disabled,jt.style.setProperty("display","block"),jt.style.setProperty("position","fixed"),Ze.addElement(pt),Je.addElement(Jt),Je.beforeStyles({"transform-origin":`${rt} center`}).beforeAddWrite(()=>{ye.style.setProperty("display","none"),jt.style.setProperty(rt,ht)}).afterAddWrite(()=>{ye.style.setProperty("display",""),jt.style.setProperty("display","none"),jt.style.removeProperty(rt)}).keyframes(pe),Ze.beforeStyles({"transform-origin":`${_t} center`}).keyframes(De),de.addAnimation([Je,Ze])},ge=(de,Ue,Pe,ye,Ne,Fe)=>{const ht=Ue?`calc(100% - ${Ne.right}px)`:`${Ne.left}px`,_e=Ue?"-18px":"18px",ot=Ue?"right":"left",_t=Pe?[{offset:0,opacity:0,transform:`translate3d(${_e}, ${Fe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ne.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ne.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${_e}, ${Fe.top-4}px, 0) scale(0.5)`}],St=Te("ion-title"),qe=(0,u.c)();St.innerText=ye.innerText,St.size=ye.size,St.color=ye.color,qe.addElement(St),qe.beforeStyles({"transform-origin":`${ot} center`,height:"46px",display:"",position:"relative",[ot]:ht}).beforeAddWrite(()=>{ye.style.setProperty("display","none")}).afterAddWrite(()=>{ye.style.setProperty("display",""),St.style.setProperty("display","none")}).keyframes(_t),de.addAnimation(qe)},te=(de,Ue)=>{try{const Pe="cubic-bezier(0.32,0.72,0,1)",ye="opacity",Ne="transform",Fe="0%",_e="rtl"===de.ownerDocument.dir,ot=_e?"-99.5%":"99.5%",Ve=_e?"33%":"-33%",rt=Ue.enteringEl,_t=Ue.leavingEl,St="back"===Ue.direction,qe=rt.querySelector(":scope > ion-content"),pe=rt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Be=rt.querySelectorAll(":scope > ion-header > ion-toolbar"),ve=(0,u.c)(),De=(0,u.c)();if(ve.addElement(rt).duration(Ue.duration||540).easing(Ue.easing||Pe).fill("both").beforeRemoveClass("ion-page-invisible"),_t&&de){const Jt=(0,u.c)();Jt.addElement(de),ve.addAnimation(Jt)}if(qe||0!==Be.length||0!==pe.length?(De.addElement(qe),De.addElement(pe)):De.addElement(rt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ve.addAnimation(De),St?De.beforeClearStyles([ye]).fromTo("transform",`translateX(${Ve})`,`translateX(${Fe})`).fromTo(ye,.8,1):De.beforeClearStyles([ye]).fromTo("transform",`translateX(${ot})`,`translateX(${Fe})`),qe){const Jt=ae(qe).querySelector(".transition-effect");if(Jt){const pt=Jt.querySelector(".transition-cover"),st=Jt.querySelector(".transition-shadow"),Qe=(0,u.c)(),nt=(0,u.c)(),at=(0,u.c)();Qe.addElement(Jt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),nt.addElement(pt).beforeClearStyles([ye]).fromTo(ye,0,.1),at.addElement(st).beforeClearStyles([ye]).fromTo(ye,.03,.7),Qe.addAnimation([nt,at]),De.addAnimation([Qe])}}const Je=rt.querySelector("ion-header.header-collapse-condense"),{forward:Ze,backward:jt}=((de,Ue,Pe,ye,Ne)=>{const Fe=be(ye,Pe),ht=we(Ne),_e=we(ye),ot=be(Ne,Pe),Ve=null!==Fe&&null!==ht&&!Pe,rt=null!==_e&&null!==ot&&Pe;if(Ve){const _t=ht.getBoundingClientRect(),St=Fe.getBoundingClientRect();ge(de,Ue,Pe,ht,_t,St),ce(de,Ue,Pe,Fe,_t,St)}else if(rt){const _t=_e.getBoundingClientRect(),St=ot.getBoundingClientRect();ge(de,Ue,Pe,_e,_t,St),ce(de,Ue,Pe,ot,_t,St)}return{forward:Ve,backward:rt}})(ve,_e,St,rt,_t);if(Be.forEach(Jt=>{const pt=(0,u.c)();pt.addElement(Jt),ve.addAnimation(pt);const st=(0,u.c)();st.addElement(Jt.querySelector("ion-title"));const Qe=(0,u.c)(),nt=Array.from(Jt.querySelectorAll("ion-buttons,[menuToggle]")),at=Jt.closest("ion-header"),Oe=at&&at.classList.contains("header-collapse-condense-inactive");let Xe;Xe=nt.filter(St?xn=>{const un=xn.classList.contains("buttons-collapse");return un&&!Oe||!un}:xn=>!xn.classList.contains("buttons-collapse")),Qe.addElement(Xe);const Dt=(0,u.c)();Dt.addElement(Jt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const ft=(0,u.c)();ft.addElement(ae(Jt).querySelector(".toolbar-background"));const Kt=(0,u.c)(),gn=Jt.querySelector("ion-back-button");if(gn&&Kt.addElement(gn),pt.addAnimation([st,Qe,Dt,ft,Kt]),Qe.fromTo(ye,.01,1),Dt.fromTo(ye,.01,1),St)Oe||st.fromTo("transform",`translateX(${Ve})`,`translateX(${Fe})`).fromTo(ye,.01,1),Dt.fromTo("transform",`translateX(${Ve})`,`translateX(${Fe})`),Kt.fromTo(ye,.01,1);else if(Je||st.fromTo("transform",`translateX(${ot})`,`translateX(${Fe})`).fromTo(ye,.01,1),Dt.fromTo("transform",`translateX(${ot})`,`translateX(${Fe})`),ft.beforeClearStyles([ye,"transform"]),(null==at?void 0:at.translucent)?ft.fromTo("transform",_e?"translateX(-100%)":"translateX(100%)","translateX(0px)"):ft.fromTo(ye,.01,"var(--opacity)"),Ze||Kt.fromTo(ye,.01,1),gn&&!Ze){const un=(0,u.c)();un.addElement(ae(gn).querySelector(".button-text")).fromTo("transform",_e?"translateX(-100px)":"translateX(100px)","translateX(0px)"),pt.addAnimation(un)}}),_t){const Jt=(0,u.c)(),pt=_t.querySelector(":scope > ion-content"),st=_t.querySelectorAll(":scope > ion-header > ion-toolbar"),Qe=_t.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(pt||0!==st.length||0!==Qe.length?(Jt.addElement(pt),Jt.addElement(Qe)):Jt.addElement(_t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ve.addAnimation(Jt),St){Jt.beforeClearStyles([ye]).fromTo("transform",`translateX(${Fe})`,_e?"translateX(-100%)":"translateX(100%)");const nt=(0,se.g)(_t);ve.afterAddWrite(()=>{"normal"===ve.getDirection()&&nt.style.setProperty("display","none")})}else Jt.fromTo("transform",`translateX(${Fe})`,`translateX(${Ve})`).fromTo(ye,1,.8);if(pt){const nt=ae(pt).querySelector(".transition-effect");if(nt){const at=nt.querySelector(".transition-cover"),Oe=nt.querySelector(".transition-shadow"),Xe=(0,u.c)(),Dt=(0,u.c)(),ft=(0,u.c)();Xe.addElement(nt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Dt.addElement(at).beforeClearStyles([ye]).fromTo(ye,.1,0),ft.addElement(Oe).beforeClearStyles([ye]).fromTo(ye,.7,.03),Xe.addAnimation([Dt,ft]),Jt.addAnimation([Xe])}}st.forEach(nt=>{const at=(0,u.c)();at.addElement(nt);const Oe=(0,u.c)();Oe.addElement(nt.querySelector("ion-title"));const Xe=(0,u.c)(),Dt=nt.querySelectorAll("ion-buttons,[menuToggle]"),ft=nt.closest("ion-header"),Kt=ft&&ft.classList.contains("header-collapse-condense-inactive"),gn=Array.from(Dt).filter(Zn=>{const Yn=Zn.classList.contains("buttons-collapse");return Yn&&!Kt||!Yn});Xe.addElement(gn);const xn=(0,u.c)(),un=nt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");un.length>0&&xn.addElement(un);const rn=(0,u.c)();rn.addElement(ae(nt).querySelector(".toolbar-background"));const fr=(0,u.c)(),Dr=nt.querySelector("ion-back-button");if(Dr&&fr.addElement(Dr),at.addAnimation([Oe,Xe,xn,fr,rn]),ve.addAnimation(at),fr.fromTo(ye,.99,0),Xe.fromTo(ye,.99,0),xn.fromTo(ye,.99,0),St){if(Kt||Oe.fromTo("transform",`translateX(${Fe})`,_e?"translateX(-100%)":"translateX(100%)").fromTo(ye,.99,0),xn.fromTo("transform",`translateX(${Fe})`,_e?"translateX(-100%)":"translateX(100%)"),rn.beforeClearStyles([ye,"transform"]),(null==ft?void 0:ft.translucent)?rn.fromTo("transform","translateX(0px)",_e?"translateX(-100%)":"translateX(100%)"):rn.fromTo(ye,"var(--opacity)",0),Dr&&!jt){const Yn=(0,u.c)();Yn.addElement(ae(Dr).querySelector(".button-text")).fromTo("transform",`translateX(${Fe})`,`translateX(${(_e?-124:124)+"px"})`),at.addAnimation(Yn)}}else Kt||Oe.fromTo("transform",`translateX(${Fe})`,`translateX(${Ve})`).fromTo(ye,.99,0).afterClearStyles([Ne,ye]),xn.fromTo("transform",`translateX(${Fe})`,`translateX(${Ve})`).afterClearStyles([Ne,ye]),fr.afterClearStyles([ye]),Oe.afterClearStyles([ye]),Xe.afterClearStyles([ye])})}return ve}catch(Pe){throw Pe}}},6409:(en,ut,H)=>{"use strict";H.r(ut),H.d(ut,{mdTransitionAnimation:()=>ke});var u=H(6304),se=H(358);H(2361);const ke=(Te,ae)=>{const me="back"===ae.direction,ge=ae.leavingEl,te=(0,se.g)(ae.enteringEl),de=te.querySelector("ion-toolbar"),Ue=(0,u.c)();if(Ue.addElement(te).fill("both").beforeRemoveClass("ion-page-invisible"),me?Ue.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ue.duration(ae.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),de){const Pe=(0,u.c)();Pe.addElement(de),Ue.addAnimation(Pe)}if(ge&&me){Ue.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Pe=(0,u.c)();Pe.addElement((0,se.g)(ge)).onFinish(ye=>{1===ye&&Pe.elements.length>0&&Pe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ue.addAnimation(Pe)}return Ue}},3986:(en,ut,H)=>{"use strict";H.d(ut,{B:()=>nt,a:()=>be,b:()=>me,c:()=>de,d:()=>Be,e:()=>Pe,f:()=>De,g:()=>jt,h:()=>ae,i:()=>pt,j:()=>ht,k:()=>qe,m:()=>ge,s:()=>Qe});var u=H(5861),se=H(8686),Z=H(527),ke=H(206);let Te=0;const ae=new WeakMap,we=at=>({create:Oe=>ye(at,Oe),dismiss:(Oe,Xe,Dt)=>_t(document,Oe,Xe,at,Dt),getTop:()=>(0,u.Z)(function*(){return qe(document,at)})()}),be=we("ion-alert"),me=we("ion-action-sheet"),ge=we("ion-modal"),de=we("ion-popover"),Pe=at=>{"undefined"!=typeof document&&rt(document);const Oe=Te++;at.overlayIndex=Oe,at.hasAttribute("id")||(at.id=`ion-overlay-${Oe}`)},ye=(at,Oe)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(at).then(()=>{const Xe=document.createElement(at);return Xe.classList.add("overlay-hidden"),Object.assign(Xe,Object.assign(Object.assign({},Oe),{hasController:!0})),Je(document).appendChild(Xe),new Promise(Dt=>(0,ke.c)(Xe,Dt))}):Promise.resolve(),Ne='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Fe="input:not([type=hidden]), textarea, button, select",ht=(at,Oe)=>{let Xe=at.querySelector(Ne);const Dt=Xe&&Xe.shadowRoot;Dt&&(Xe=Dt.querySelector(Fe)||Xe),Xe?(0,ke.f)(Xe):Oe.focus()},ot=(at,Oe)=>{const Xe=Array.from(at.querySelectorAll(Ne));let Dt=Xe.length>0?Xe[Xe.length-1]:null;const ft=Dt&&Dt.shadowRoot;ft&&(Dt=ft.querySelector(Fe)||Dt),Dt?Dt.focus():Oe.focus()},rt=at=>{0===Te&&(Te=1,at.addEventListener("focus",Oe=>{((at,Oe)=>{const Xe=qe(Oe,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Dt=at.target;Xe&&Dt&&!Xe.classList.contains("ion-disable-focus-trap")&&(Xe.shadowRoot?(()=>{if(Xe.contains(Dt))Xe.lastFocus=Dt;else{const gn=Xe.lastFocus;ht(Xe,Xe),gn===Oe.activeElement&&ot(Xe,Xe),Xe.lastFocus=Oe.activeElement}})():(()=>{if(Xe===Dt)Xe.lastFocus=void 0;else{const gn=(0,ke.g)(Xe);if(!gn.contains(Dt))return;const xn=gn.querySelector(".ion-overlay-wrapper");if(!xn)return;if(xn.contains(Dt))Xe.lastFocus=Dt;else{const un=Xe.lastFocus;ht(xn,Xe),un===Oe.activeElement&&ot(xn,Xe),Xe.lastFocus=Oe.activeElement}}})())})(Oe,at)},!0),at.addEventListener("ionBackButton",Oe=>{const Xe=qe(at);Xe&&Xe.backdropDismiss&&Oe.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>Xe.dismiss(void 0,nt))}),at.addEventListener("keyup",Oe=>{if("Escape"===Oe.key){const Xe=qe(at);Xe&&Xe.backdropDismiss&&Xe.dismiss(void 0,nt)}}))},_t=(at,Oe,Xe,Dt,ft)=>{const Kt=qe(at,Dt,ft);return Kt?Kt.dismiss(Oe,Xe):Promise.reject("overlay does not exist")},qe=(at,Oe,Xe)=>{const Dt=((at,Oe)=>(void 0===Oe&&(Oe="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(at.querySelectorAll(Oe)).filter(Xe=>Xe.overlayIndex>0)))(at,Oe).filter(ft=>!(at=>at.classList.contains("overlay-hidden"))(ft));return void 0===Xe?Dt[Dt.length-1]:Dt.find(ft=>ft.id===Xe)},pe=(at=!1)=>{const Xe=Je(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Xe||(at?Xe.setAttribute("aria-hidden","true"):Xe.removeAttribute("aria-hidden"))},Be=function(){var at=(0,u.Z)(function*(Oe,Xe,Dt,ft,Kt){var gn,xn;if(Oe.presented)return;pe(!0),Oe.presented=!0,Oe.willPresent.emit(),null===(gn=Oe.willPresentShorthand)||void 0===gn||gn.emit();const un=(0,se.b)(Oe),rn=Oe.enterAnimation?Oe.enterAnimation:se.c.get(Xe,"ios"===un?Dt:ft);(yield Ze(Oe,rn,Oe.el,Kt))&&(Oe.didPresent.emit(),null===(xn=Oe.didPresentShorthand)||void 0===xn||xn.emit()),"ION-TOAST"!==Oe.el.tagName&&ve(Oe.el),Oe.keyboardClose&&Oe.el.focus()});return function(Xe,Dt,ft,Kt,gn){return at.apply(this,arguments)}}(),ve=function(){var at=(0,u.Z)(function*(Oe){let Xe=document.activeElement;if(!Xe)return;const Dt=Xe&&Xe.shadowRoot;Dt&&(Xe=Dt.querySelector(Fe)||Xe),yield Oe.onDidDismiss(),Xe.focus()});return function(Xe){return at.apply(this,arguments)}}(),De=function(){var at=(0,u.Z)(function*(Oe,Xe,Dt,ft,Kt,gn,xn){var un,rn;if(!Oe.presented)return!1;pe(!1),Oe.presented=!1;try{Oe.el.style.setProperty("pointer-events","none"),Oe.willDismiss.emit({data:Xe,role:Dt}),null===(un=Oe.willDismissShorthand)||void 0===un||un.emit({data:Xe,role:Dt});const fr=(0,se.b)(Oe),Dr=Oe.leaveAnimation?Oe.leaveAnimation:se.c.get(ft,"ios"===fr?Kt:gn);"gesture"!==Dt&&(yield Ze(Oe,Dr,Oe.el,xn)),Oe.didDismiss.emit({data:Xe,role:Dt}),null===(rn=Oe.didDismissShorthand)||void 0===rn||rn.emit({data:Xe,role:Dt}),ae.delete(Oe),Oe.el.classList.add("overlay-hidden"),Oe.el.style.removeProperty("pointer-events")}catch(fr){console.error(fr)}return Oe.el.remove(),!0});return function(Xe,Dt,ft,Kt,gn,xn,un){return at.apply(this,arguments)}}(),Je=at=>at.querySelector("ion-app")||at.body,Ze=function(){var at=(0,u.Z)(function*(Oe,Xe,Dt,ft){Dt.classList.remove("overlay-hidden");const gn=Xe(Oe.el,ft);(!Oe.animated||!se.c.getBoolean("animated",!0))&&gn.duration(0),Oe.keyboardClose&&gn.beforeAddWrite(()=>{const un=Dt.ownerDocument.activeElement;un&&un.matches("input,ion-input, ion-textarea")&&un.blur()});const xn=ae.get(Oe)||[];return ae.set(Oe,[...xn,gn]),yield gn.play(),!0});return function(Xe,Dt,ft,Kt){return at.apply(this,arguments)}}(),jt=(at,Oe)=>{let Xe;const Dt=new Promise(ft=>Xe=ft);return Jt(at,Oe,ft=>{Xe(ft.detail)}),Dt},Jt=(at,Oe,Xe)=>{const Dt=ft=>{(0,ke.b)(at,Oe,Dt),Xe(ft)};(0,ke.a)(at,Oe,Dt)},pt=at=>"cancel"===at||at===nt,st=at=>at(),Qe=(at,Oe)=>{if("function"==typeof at)return se.c.get("_zoneGate",st)(()=>{try{return at(Oe)}catch(Dt){throw Dt}})},nt="backdrop"},6893:(en,ut,H)=>{"use strict";H.d(ut,{e:()=>Te});var u=H(5e3),se=H(4941),Z=H(8186),ke=H(2796);let Te=(()=>{class ae{constructor(be,me,ce){this.AFauth=be,this.router=me,this.db=ce}login(be,me){return new Promise((ce,ge)=>{this.AFauth.signInWithEmailAndPassword(be,me).then(te=>{ce(te)}).catch(te=>ge(te))})}logout(){this.AFauth.signOut().then(()=>{this.router.navigate(["/login"])})}register(be,me,ce){return new Promise((ge,te)=>{this.AFauth.createUserWithEmailAndPassword(be,ce).then(de=>{const Ue=de.user.uid;this.db.collection("users").doc(de.user.uid).set({name:me,uid:Ue}),ge(de)}).catch(de=>te(de))})}}return ae.\u0275fac=function(be){return new(be||ae)(u.LFG(se.zQ),u.LFG(Z.F0),u.LFG(ke.ST))},ae.\u0275prov=u.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},3569:(en,ut,H)=>{"use strict";H.d(ut,{R:()=>ke});var u=H(127),se=H(5e3),Z=H(2796);let ke=(()=>{class Te{constructor(we){this.db=we}getChatRooms(){return this.db.collection("chatRoom").valueChanges({idField:"id"})}getChat(we){return this.db.collection("chatRoom").doc(we).valueChanges()}sendMsgToFireBase(we,be){we.type="text",this.db.collection("chatRoom").doc(be).update({Messages:u.Z.firestore.FieldValue.arrayUnion(we)})}}return Te.\u0275fac=function(we){return new(we||Te)(se.LFG(Z.ST))},Te.\u0275prov=se.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},2646:(en,ut,H)=>{"use strict";var u=H(9808),se=H(5e3);class Z extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends Z{static makeCurrent(){(0,u.HT)(new ke)}onAndCancel(l,a,p){return l.addEventListener(a,p,!1),()=>{l.removeEventListener(a,p,!1)}}dispatchEvent(l,a){l.dispatchEvent(a)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,a){return(a=a||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,a){return"window"===a?window:"document"===a?l:"body"===a?l.body:null}getBaseHref(l){const a=function ae(){return Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null}();return null==a?null:function be(h){we=we||document.createElement("a"),we.setAttribute("href",h);const l=we.pathname;return"/"===l.charAt(0)?l:`/${l}`}(a)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return(0,u.Mx)(document.cookie,l)}}let we,Te=null;const me=new se.OlP("TRANSITION_ID"),ge=[{provide:se.ip1,useFactory:function ce(h,l,a){return()=>{a.get(se.CZH).donePromise.then(()=>{const p=(0,u.q)(),b=l.querySelectorAll(`style[ng-transition="${h}"]`);for(let M=0;M<b.length;M++)p.remove(b[M])})}},deps:[me,u.K0,se.zs3],multi:!0}];class te{static init(){(0,se.VLi)(new te)}addToWindow(l){se.dqk.getAngularTestability=(p,b=!0)=>{const M=l.findTestabilityInTree(p,b);if(null==M)throw new Error("Could not find testability for element.");return M},se.dqk.getAllAngularTestabilities=()=>l.getAllTestabilities(),se.dqk.getAllAngularRootElements=()=>l.getAllRootElements(),se.dqk.frameworkStabilizers||(se.dqk.frameworkStabilizers=[]),se.dqk.frameworkStabilizers.push(p=>{const b=se.dqk.getAllAngularTestabilities();let M=b.length,j=!1;const re=function(Ee){j=j||Ee,M--,0==M&&p(j)};b.forEach(function(Ee){Ee.whenStable(re)})})}findTestabilityInTree(l,a,p){if(null==a)return null;const b=l.getTestability(a);return null!=b?b:p?(0,u.q)().isShadowRoot(a)?this.findTestabilityInTree(l,a.host,!0):this.findTestabilityInTree(l,a.parentElement,!0):null}}let de=(()=>{class h{build(){return new XMLHttpRequest}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();const Ue=new se.OlP("EventManagerPlugins");let Pe=(()=>{class h{constructor(a,p){this._zone=p,this._eventNameToPlugin=new Map,a.forEach(b=>b.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,p,b){return this._findPluginFor(p).addEventListener(a,p,b)}addGlobalEventListener(a,p,b){return this._findPluginFor(p).addGlobalEventListener(a,p,b)}getZone(){return this._zone}_findPluginFor(a){const p=this._eventNameToPlugin.get(a);if(p)return p;const b=this._plugins;for(let M=0;M<b.length;M++){const j=b[M];if(j.supports(a))return this._eventNameToPlugin.set(a,j),j}throw new Error(`No event manager plugin found for event ${a}`)}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(Ue),se.LFG(se.R0b))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();class ye{constructor(l){this._doc=l}addGlobalEventListener(l,a,p){const b=(0,u.q)().getGlobalEventTarget(this._doc,l);if(!b)throw new Error(`Unsupported event target ${b} for event ${a}`);return this.addEventListener(b,a,p)}}let Ne=(()=>{class h{constructor(){this._stylesSet=new Set}addStyles(a){const p=new Set;a.forEach(b=>{this._stylesSet.has(b)||(this._stylesSet.add(b),p.add(b))}),this.onStylesAdded(p)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})(),Fe=(()=>{class h extends Ne{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,p,b){a.forEach(M=>{const j=this._doc.createElement("style");j.textContent=M,b.push(p.appendChild(j))})}addHost(a){const p=[];this._addStylesToHost(this._stylesSet,a,p),this._hostNodes.set(a,p)}removeHost(a){const p=this._hostNodes.get(a);p&&p.forEach(ht),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((p,b)=>{this._addStylesToHost(a,b,p)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(ht))}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(u.K0))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();function ht(h){(0,u.q)().remove(h)}const _e={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ot=/%COMP%/g;function Be(h,l,a){for(let p=0;p<l.length;p++){let b=l[p];Array.isArray(b)?Be(h,b,a):(b=b.replace(ot,h),a.push(b))}return a}function ve(h){return l=>{if("__ngUnwrap__"===l)return h;!1===h(l)&&(l.preventDefault(),l.returnValue=!1)}}let Je=(()=>{class h{constructor(a,p,b){this.eventManager=a,this.sharedStylesHost=p,this.appId=b,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(a)}createRenderer(a,p){if(!a||!p)return this.defaultRenderer;switch(p.encapsulation){case se.ifc.Emulated:{let b=this.rendererByCompId.get(p.id);return b||(b=new pt(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,b)),b.applyToHost(a),b}case 1:case se.ifc.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,a,p);default:if(!this.rendererByCompId.has(p.id)){const b=Be(p.id,p.styles,[]);this.sharedStylesHost.addStyles(b),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(Pe),se.LFG(Fe),se.LFG(se.AFp))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();class Ze{constructor(l){this.eventManager=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(l,a){return a?document.createElementNS(_e[a]||a,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,a){l.appendChild(a)}insertBefore(l,a,p){l&&l.insertBefore(a,p)}removeChild(l,a){l&&l.removeChild(a)}selectRootElement(l,a){let p="string"==typeof l?document.querySelector(l):l;if(!p)throw new Error(`The selector "${l}" did not match any elements`);return a||(p.textContent=""),p}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,a,p,b){if(b){a=b+":"+a;const M=_e[b];M?l.setAttributeNS(M,a,p):l.setAttribute(a,p)}else l.setAttribute(a,p)}removeAttribute(l,a,p){if(p){const b=_e[p];b?l.removeAttributeNS(b,a):l.removeAttribute(`${p}:${a}`)}else l.removeAttribute(a)}addClass(l,a){l.classList.add(a)}removeClass(l,a){l.classList.remove(a)}setStyle(l,a,p,b){b&(se.JOm.DashCase|se.JOm.Important)?l.style.setProperty(a,p,b&se.JOm.Important?"important":""):l.style[a]=p}removeStyle(l,a,p){p&se.JOm.DashCase?l.style.removeProperty(a):l.style[a]=""}setProperty(l,a,p){l[a]=p}setValue(l,a){l.nodeValue=a}listen(l,a,p){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,a,ve(p)):this.eventManager.addEventListener(l,a,ve(p))}}class pt extends Ze{constructor(l,a,p,b){super(l),this.component=p;const M=Be(b+"-"+p.id,p.styles,[]);a.addStyles(M),this.contentAttr=function qe(h){return"_ngcontent-%COMP%".replace(ot,h)}(b+"-"+p.id),this.hostAttr=function pe(h){return"_nghost-%COMP%".replace(ot,h)}(b+"-"+p.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,a){const p=super.createElement(l,a);return super.setAttribute(p,this.contentAttr,""),p}}class st extends Ze{constructor(l,a,p,b){super(l),this.sharedStylesHost=a,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const M=Be(b.id,b.styles,[]);for(let j=0;j<M.length;j++){const re=document.createElement("style");re.textContent=M[j],this.shadowRoot.appendChild(re)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,a){return super.appendChild(this.nodeOrShadowRoot(l),a)}insertBefore(l,a,p){return super.insertBefore(this.nodeOrShadowRoot(l),a,p)}removeChild(l,a){return super.removeChild(this.nodeOrShadowRoot(l),a)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let Qe=(()=>{class h extends ye{constructor(a){super(a)}supports(a){return!0}addEventListener(a,p,b){return a.addEventListener(p,b,!1),()=>this.removeEventListener(a,p,b)}removeEventListener(a,p,b){return a.removeEventListener(p,b)}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(u.K0))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();const nt=["alt","control","meta","shift"],Oe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dt={alt:h=>h.altKey,control:h=>h.ctrlKey,meta:h=>h.metaKey,shift:h=>h.shiftKey};let ft=(()=>{class h extends ye{constructor(a){super(a)}supports(a){return null!=h.parseEventName(a)}addEventListener(a,p,b){const M=h.parseEventName(p),j=h.eventCallback(M.fullKey,b,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(a,M.domEventName,j))}static parseEventName(a){const p=a.toLowerCase().split("."),b=p.shift();if(0===p.length||"keydown"!==b&&"keyup"!==b)return null;const M=h._normalizeKey(p.pop());let j="";if(nt.forEach(Ee=>{const $e=p.indexOf(Ee);$e>-1&&(p.splice($e,1),j+=Ee+".")}),j+=M,0!=p.length||0===M.length)return null;const re={};return re.domEventName=b,re.fullKey=j,re}static getEventFullKey(a){let p="",b=function Kt(h){let l=h.key;if(null==l){if(l=h.keyIdentifier,null==l)return"Unidentified";l.startsWith("U+")&&(l=String.fromCharCode(parseInt(l.substring(2),16)),3===h.location&&Xe.hasOwnProperty(l)&&(l=Xe[l]))}return Oe[l]||l}(a);return b=b.toLowerCase()," "===b?b="space":"."===b&&(b="dot"),nt.forEach(M=>{M!=b&&Dt[M](a)&&(p+=M+".")}),p+=b,p}static eventCallback(a,p,b){return M=>{h.getEventFullKey(M)===a&&b.runGuarded(()=>p(M))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(u.K0))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac}),h})();const fr=(0,se.eFA)(se._c5,"browser",[{provide:se.Lbi,useValue:u.bD},{provide:se.g9A,useValue:function gn(){ke.makeCurrent(),te.init()},multi:!0},{provide:u.K0,useFactory:function un(){return(0,se.RDi)(document),document},deps:[]}]),Dr=[{provide:se.zSh,useValue:"root"},{provide:se.qLn,useFactory:function xn(){return new se.qLn},deps:[]},{provide:Ue,useClass:Qe,multi:!0,deps:[u.K0,se.R0b,se.Lbi]},{provide:Ue,useClass:ft,multi:!0,deps:[u.K0]},{provide:Je,useClass:Je,deps:[Pe,Fe,se.AFp]},{provide:se.FYo,useExisting:Je},{provide:Ne,useExisting:Fe},{provide:Fe,useClass:Fe,deps:[u.K0]},{provide:se.dDg,useClass:se.dDg,deps:[se.R0b]},{provide:Pe,useClass:Pe,deps:[Ue,se.R0b]},{provide:u.JF,useClass:de,deps:[]}];let Zn=(()=>{class h{constructor(a){if(a)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(a){return{ngModule:h,providers:[{provide:se.AFp,useValue:a.appId},{provide:me,useExisting:se.AFp},ge]}}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(h,12))},h.\u0275mod=se.oAB({type:h}),h.\u0275inj=se.cJS({providers:Dr,imports:[u.ez,se.hGG]}),h})();"undefined"!=typeof window&&window;var Cn=H(8186),Qn=H(6926);let Qr=(()=>{class h{constructor(){}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275cmp=se.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(a,p){1&a&&(se.TgZ(0,"ion-app"),se._UZ(1,"ion-router-outlet"),se.qZA())},directives:[Qn.dr,Qn.jP],styles:[""]}),h})();var Bn=H(4850),_r=H(4941);let jn=(()=>{class h{constructor(a,p){this.aFauth=a,this.router=p}canActivate(a,p){return this.aFauth.authState.pipe((0,Bn.U)(b=>null!=b||(this.router.navigate(["/login"]),!1)))}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(_r.zQ),se.LFG(Cn.F0))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})(),vr=(()=>{class h{constructor(a,p){this.AFauth=a,this.router=p}canActivate(a,p){return this.AFauth.authState.pipe((0,Bn.U)(b=>null==b||(this.router.navigate(["/home"]),!1)))}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(_r.zQ),se.LFG(Cn.F0))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const Rr=[{path:"home",canActivate:[jn],loadChildren:()=>H.e(7766).then(H.bind(H,7766)).then(h=>h.HomePageModule)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[vr],loadChildren:()=>H.e(7169).then(H.bind(H,7169)).then(h=>h.LoginPageModule)},{path:"registro",canActivate:[vr],loadChildren:()=>H.e(9056).then(H.bind(H,9056)).then(h=>h.RegistroPageModule)}];let Fn=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=se.oAB({type:h}),h.\u0275inj=se.cJS({imports:[[Cn.Bz.forRoot(Rr,{preloadingStrategy:Cn.wm})],Cn.Bz]}),h})();const as={apiKey:"AIzaSyAo6VmUJQ3V0N1W_Gdb0ZQXQFl4RWEffuU",authDomain:"chatonline-81ed2.firebaseapp.com",projectId:"chatonline-81ed2",storageBucket:"chatonline-81ed2.appspot.com",messagingSenderId:"930477714464",appId:"1:930477714464:web:376fe540cc44ab5fd9e045",measurementId:"G-GXVFXZR31D"};var Sr=H(2011),Or=H(353),_i=H(2916),$r=H(1086),At=H(6787),vn=H(2474),sr=H(7545),hr=H(2014),ti=H(5778),Yr=H(826),fi=H(448);class Ur{constructor(l,a){this.observables=l,this.project=a}call(l,a){return a.subscribe(new Vi(l,this.observables,this.project))}}class Vi extends Yr.L{constructor(l,a,p){super(l),this.observables=a,this.project=p,this.toRespond=[];const b=a.length;this.values=new Array(b);for(let M=0;M<b;M++)this.toRespond.push(M);for(let M=0;M<b;M++)this.add((0,fi.D)(this,a[M],void 0,M))}notifyNext(l,a,p){this.values[p]=a;const b=this.toRespond;if(b.length>0){const M=b.indexOf(p);-1!==M&&b.splice(M,1)}}notifyComplete(){}_next(l){if(0===this.toRespond.length){const a=[l,...this.values];this.project?this._tryProject(a):this.destination.next(a)}}_tryProject(l){let a;try{a=this.project.apply(this,l)}catch(p){return void this.destination.error(p)}this.destination.next(a)}}var Ln=H(3489);class Yi{constructor(l){this.predicate=l}call(l,a){return a.subscribe(new xi(l,this.predicate))}}class xi extends Ln.L{constructor(l,a){super(l),this.predicate=a,this.skipping=!0,this.index=0}_next(l){const a=this.destination;this.skipping&&this.tryCallPredicate(l),this.skipping||a.next(l)}tryCallPredicate(l){try{const a=this.predicate(l,this.index++);this.skipping=Boolean(a)}catch(a){this.destination.error(a)}}}var ni=H(6351),Mi=(H(4087),H(3942)),di=H(4859),Q=H(5861),fe=H(9681),O=H(2090),Se=H(1877);const Ge="@firebase/database";let Et="";function xt(h){Et=h}class Nt{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,a){null==a?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,O.Pz)(a))}get(l){const a=this.domStorage_.getItem(this.prefixedName_(l));return null==a?null:(0,O.cI)(a)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Mt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,a){null==a?delete this.cache_[l]:this.cache_[l]=a}get(l){return(0,O.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const hn=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Nt(l)}}catch(l){}return new Mt},En=hn("localStorage"),Mn=hn("sessionStorage"),$n=new Se.Yd("@firebase/database"),gi=function(){let h=1;return function(){return h++}}(),Ki=function(h){const l=(0,O.dS)(h),a=new O.gQ;a.update(l);const p=a.digest();return O.US.encodeByteArray(p)},He=function(...h){let l="";for(let a=0;a<h.length;a++){const p=h[a];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=He.apply(null,p):l+="object"==typeof p?(0,O.Pz)(p):p,l+=" "}return l};let We=null,ct=!0;const Ot=function(h,l){(0,O.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?($n.logLevel=Se.in.VERBOSE,We=$n.log.bind($n),l&&Mn.set("logging_enabled",!0)):"function"==typeof h?We=h:(We=null,Mn.remove("logging_enabled"))},Lt=function(...h){if(!0===ct&&(ct=!1,null===We&&!0===Mn.get("logging_enabled")&&Ot(!0)),We){const l=He.apply(null,h);We(l)}},mn=function(h){return function(...l){Lt(h,...l)}},Ar=function(...h){const l="FIREBASE INTERNAL ERROR: "+He(...h);$n.error(l)},xr=function(...h){const l=`FIREBASE FATAL ERROR: ${He(...h)}`;throw $n.error(l),new Error(l)},Hn=function(...h){const l="FIREBASE WARNING: "+He(...h);$n.warn(l)},Ri=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Zi="[MIN_NAME]",wi="[MAX_NAME]",ls=function(h,l){if(h===l)return 0;if(h===Zi||l===wi)return-1;if(l===Zi||h===wi)return 1;{const a=Oi(h),p=Oi(l);return null!==a?null!==p?a-p==0?h.length-l.length:a-p:-1:null!==p?1:h<l?-1:1}},to=function(h,l){return h===l?0:h<l?-1:1},gs=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,O.Pz)(l))},Bi=function(h){if("object"!=typeof h||null===h)return(0,O.Pz)(h);const l=[];for(const p in h)l.push(p);l.sort();let a="{";for(let p=0;p<l.length;p++)0!==p&&(a+=","),a+=(0,O.Pz)(l[p]),a+=":",a+=Bi(h[l[p]]);return a+="}",a},ms=function(h,l){const a=h.length;if(a<=l)return[h];const p=[];for(let b=0;b<a;b+=l)p.push(h.substring(b,b+l>a?a:b+l));return p};function Kr(h,l){for(const a in h)h.hasOwnProperty(a)&&l(a,h[a])}const $s=function(h){(0,O.hu)(!Ri(h),"Invalid JSON number");const p=1023;let b,M,j,re,Ee;0===h?(M=0,j=0,b=1/h==-1/0?1:0):(b=h<0,(h=Math.abs(h))>=Math.pow(2,1-p)?(re=Math.min(Math.floor(Math.log(h)/Math.LN2),p),M=re+p,j=Math.round(h*Math.pow(2,52-re)-Math.pow(2,52))):(M=0,j=Math.round(h/Math.pow(2,-1074))));const $e=[];for(Ee=52;Ee;Ee-=1)$e.push(j%2?1:0),j=Math.floor(j/2);for(Ee=11;Ee;Ee-=1)$e.push(M%2?1:0),M=Math.floor(M/2);$e.push(b?1:0),$e.reverse();const It=$e.join("");let bt="";for(Ee=0;Ee<64;Ee+=8){let $t=parseInt(It.substr(Ee,8),2).toString(16);1===$t.length&&($t="0"+$t),bt+=$t}return bt.toLowerCase()},Ns=new RegExp("^-?(0*)\\d{1,10}$"),Hi=-2147483648,_o=2147483647,Oi=function(h){if(Ns.test(h)){const l=Number(h);if(l>=Hi&&l<=_o)return l}return null},Pr=function(h){try{h()}catch(l){setTimeout(()=>{throw Hn("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},us=function(h,l){const a=setTimeout(h,l);return"object"==typeof a&&a.unref&&a.unref(),a};class vo{constructor(l,a){this.appName_=l,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((a,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){Hn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cs{constructor(l,a,p){this.appName_=l,this.firebaseOptions_=a,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(b=>this.auth_=b)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(a=>a&&"auth/token-not-initialized"===a.code?(Lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(a=>a.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(a=>a.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hn(l)}}let ys=(()=>{class h{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const $=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ze="websocket",mt="long_polling";class Ft{constructor(l,a,p,b,M=!1,j="",re=!1){this.secure=a,this.namespace=p,this.webSocketOnly=b,this.nodeAdmin=M,this.persistenceKey=j,this.includeNamespaceInQueryParams=re,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=En.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&En.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zr(h,l,a){let p;if((0,O.hu)("string"==typeof l,"typeof type must == string"),(0,O.hu)("object"==typeof a,"typeof params must == object"),l===ze)p=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==mt)throw new Error("Unknown connection type: "+l);p=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Qt(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(a.ns=h.namespace);const b=[];return Kr(a,(M,j)=>{b.push(M+"="+j)}),p+b.join("&")}class br{constructor(){this.counters_={}}incrementCounter(l,a=1){(0,O.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=a}get(){return(0,O.p$)(this.counters_)}}const Xn={},pr={};function hi(h){const l=h.toString();return Xn[l]||(Xn[l]=new br),Xn[l]}class ai{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,a){this.closeAfterResponse=l,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,a){for(this.pendingResponses[l]=a;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<p.length;++b)p[b]&&Pr(()=>{this.onMessage_(p[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Nr{constructor(l,a,p,b,M,j,re){this.connId=l,this.repoInfo=a,this.applicationId=p,this.appCheckToken=b,this.authToken=M,this.transportSessionId=j,this.lastSessionId=re,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mn(l),this.stats_=hi(a),this.urlFn=Ee=>(this.appCheckToken&&(Ee.ac=this.appCheckToken),zr(a,mt,Ee))}open(l,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new ai(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,O.Yr)()||"complete"===document.readyState)h();else{let l=!1;const a=function(){document.body?l||(l=!0,h()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yi((...M)=>{const[j,re,Ee,$e,It]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===j)this.id=re,this.password=Ee;else{if("close"!==j)throw new Error("Unrecognized command received: "+j);re?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(re,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[j,re]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(j,re)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$.test(location.hostname)&&(p.r="f");const b=this.urlFn(p);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nr.forceAllow_=!0}static forceDisallow(){Nr.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Nr.forceAllow_&&(Nr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const a=(0,O.Pz)(l);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const p=(0,O.h$)(a),b=ms(p,1840);for(let M=0;M<b.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[M]),this.curSegmentNum++}addDisconnectPingFrame(l,a){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=a,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const a=(0,O.Pz)(l).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class yi{constructor(l,a,p,b){if(this.onDisconnect=p,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=l,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=gi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=yi.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const j="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(j),this.myIFrame.doc.close()}catch(re){Lt("frame writing exception"),re.stack&&Lt(re.stack),Lt(re)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Lt("No IE domain setting required")}catch(a){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,a){for(this.myID=l,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let a=this.urlFn(l),p="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const j=this.pendingSegs.shift();p=p+"&seg"+b+"="+j.seg+"&ts"+b+"="+j.ts+"&d"+b+"="+j.d,b++}return a+=p,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(l,a,p){this.pendingSegs.push({seg:l,ts:a,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,a){this.outstandingRequests.add(a);const p=()=>{this.outstandingRequests.delete(a),this.newRequest_()},b=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(b),p()})}addTag(l,a){(0,O.Yr)()?this.doNodeLongPoll(l,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const b=p.readyState;(!b||"loaded"===b||"complete"===b)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),a())},p.onerror=()=>{Lt("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let Qi=null;"undefined"!=typeof MozWebSocket?Qi=MozWebSocket:"undefined"!=typeof WebSocket&&(Qi=WebSocket);let Xi=(()=>{class h{constructor(a,p,b,M,j,re,Ee){this.connId=a,this.applicationId=b,this.appCheckToken=M,this.authToken=j,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mn(this.connId),this.stats_=hi(p),this.connURL=h.connectionURL_(p,re,Ee,M),this.nodeAdmin=p.nodeAdmin}static connectionURL_(a,p,b,M){const j={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&$.test(location.hostname)&&(j.r="f"),p&&(j.s=p),b&&(j.ls=b),M&&(j.ac=M),zr(a,ze,j)}open(a,p){this.onDisconnect=p,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,En.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const M={headers:{"User-Agent":`Firebase/5/${Et}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const j=process.env,re=0===this.connURL.indexOf("wss://")?j.HTTPS_PROXY||j.https_proxy:j.HTTP_PROXY||j.http_proxy;re&&(M.proxy={origin:re}),this.mySock=new Qi(this.connURL,[],M)}else this.mySock=new Qi(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(b){this.log_("Error instantiating WebSocket.");const M=b.message||b.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const M=b.message||b.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(a=!0)}return!a&&null!==Qi&&!h.forceDisallow_}static previouslyFailed(){return En.isInMemoryStorage||!0===En.get("previous_websocket_failure")}markConnectionHealthy(){En.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const b=(0,O.cI)(p);this.onMessage(b)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const p=Number(a);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const p=a.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const b=this.extractFrameCount_(p);null!==b&&this.appendFrame_(b)}}send(a){this.resetKeepAlive();const p=(0,O.Pz)(a);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const b=ms(p,16384);b.length>1&&this.sendString_(String(b.length));for(let M=0;M<b.length;M++)this.sendString_(b[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})();class li{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Nr,Xi]}initTransports_(l){const a=Xi&&Xi.isAvailable();let p=a&&!Xi.previouslyFailed();if(l.webSocketOnly&&(a||Hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[Xi];else{const b=this.transports_=[];for(const M of li.ALL_TRANSPORTS)M&&M.isAvailable()&&b.push(M)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Xo{constructor(l,a,p,b,M,j,re,Ee,$e,It){this.id=l,this.repoInfo_=a,this.applicationId_=p,this.appCheckToken_=b,this.authToken_=M,this.onMessage_=j,this.onReady_=re,this.onDisconnect_=Ee,this.onKill_=$e,this.lastSessionId=It,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mn("c:"+this.id+":"),this.transportManager_=new li(a),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,p)},Math.floor(0));const b=l.healthyTimeout||0;b>0&&(this.healthyTimeout_=us(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return a=>{l===this.conn_?this.onConnectionLost_(a):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return a=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(a):l===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const a=l.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const a=gs("t",l),p=gs("d",l);if("c"===a)this.onSecondaryControl_(p);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const a=gs("t",l),p=gs("d",l);"c"===a?this.onControl_(p):"d"===a&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const a=gs("t",l);if("d"in l){const p=l.d;if("h"===a)this.onHandshake_(p);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(p):"r"===a?this.onReset_(p):"e"===a?Ar("Server Error: "+p):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ar("Unknown control packet command: "+a)}}onHandshake_(l){const a=l.ts,p=l.v,b=l.h;this.sessionId=l.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==p&&Hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,p),us(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,a){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):us(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(En.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xa{put(l,a,p,b){}merge(l,a,p,b){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,a,p){}onDisconnectMerge(l,a,p){}onDisconnectCancel(l,a){}reportStats(l){}}class Lo{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,O.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...a){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let b=0;b<p.length;b++)p[b].callback.apply(p[b].context,a)}}on(l,a,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:a,context:p});const b=this.getInitialEvent(l);b&&a.apply(p,b)}off(l,a,p){this.validateEventType_(l);const b=this.listeners_[l]||[];for(let M=0;M<b.length;M++)if(b[M].callback===a&&(!p||p===b[M].context))return void b.splice(M,1)}validateEventType_(l){(0,O.hu)(this.allowedEvents_.find(a=>a===l),"Unknown event: "+l)}}class co extends Lo{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new co}getInitialEvent(l){return(0,O.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Jr{constructor(l,a){if(void 0===a){this.pieces_=l.split("/");let p=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[p]=this.pieces_[b],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=a}toString(){let l="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(l+="/"+this.pieces_[a]);return l||"/"}}function Mr(){return new Jr("")}function Wn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function qs(h){return h.pieces_.length-h.pieceNum_}function or(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new Jr(h.pieces_,l)}function rl(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Ra(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Oa(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let a=h.pieceNum_;a<h.pieces_.length-1;a++)l.push(h.pieces_[a]);return new Jr(l,0)}function Ni(h,l){const a=[];for(let p=h.pieceNum_;p<h.pieces_.length;p++)a.push(h.pieces_[p]);if(l instanceof Jr)for(let p=l.pieceNum_;p<l.pieces_.length;p++)a.push(l.pieces_[p]);else{const p=l.split("/");for(let b=0;b<p.length;b++)p[b].length>0&&a.push(p[b])}return new Jr(a,0)}function gr(h){return h.pieceNum_>=h.pieces_.length}function ki(h,l){const a=Wn(h),p=Wn(l);if(null===a)return l;if(a===p)return ki(or(h),or(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function Jo(h,l){const a=Ra(h,0),p=Ra(l,0);for(let b=0;b<a.length&&b<p.length;b++){const M=ls(a[b],p[b]);if(0!==M)return M}return a.length===p.length?0:a.length<p.length?-1:1}function Vo(h,l){if(qs(h)!==qs(l))return!1;for(let a=h.pieceNum_,p=l.pieceNum_;a<=h.pieces_.length;a++,p++)if(h.pieces_[a]!==l.pieces_[p])return!1;return!0}function ri(h,l){let a=h.pieceNum_,p=l.pieceNum_;if(qs(h)>qs(l))return!1;for(;a<h.pieces_.length;){if(h.pieces_[a]!==l.pieces_[p])return!1;++a,++p}return!0}class Al{constructor(l,a){this.errorPrefix_=a,this.parts_=Ra(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,O.ug)(this.parts_[p]);Bo(this)}}function Bo(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ys(h))}function Ys(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class va extends Lo{constructor(){let l,a;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",l="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new va}getInitialEvent(l){return(0,O.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Ci=1e3;let Pa,$o=(()=>{class h extends xa{constructor(a,p,b,M,j,re,Ee,$e){if(super(),this.repoInfo_=a,this.applicationId_=p,this.onDataUpdate_=b,this.onConnectStatus_=M,this.onServerInfoUpdate_=j,this.authTokenProvider_=re,this.appCheckTokenProvider_=Ee,this.authOverride_=$e,this.id=h.nextPersistentConnectionId_++,this.log_=mn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ci,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,$e&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");va.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&co.getInstance().on("online",this.onOnline_,this)}sendRequest(a,p,b){const M=++this.requestNumber_,j={r:M,a,b:p};this.log_((0,O.Pz)(j)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(j),b&&(this.requestCBHash_[M]=b)}get(a){this.initConnection_();const p=new O.BH,b={p:a._path.toString(),q:a._queryObject},M={action:"g",request:b,onComplete:re=>{const Ee=re.d;"ok"===re.s?(this.onDataUpdate_(b.p,Ee,!1,null),p.resolve(Ee)):p.reject(Ee)}};this.outstandingGets_.push(M),this.outstandingGetCount_++;const j=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const re=this.outstandingGets_[j];void 0===re||M!==re||(delete this.outstandingGets_[j],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+j+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(j),p.promise}listen(a,p,b,M){this.initConnection_();const j=a._queryIdentifier,re=a._path.toString();this.log_("Listen called for "+re+" "+j),this.listens.has(re)||this.listens.set(re,new Map),(0,O.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(re).has(j),"listen() called twice for same path/queryId.");const Ee={onComplete:M,hashFn:p,query:a,tag:b};this.listens.get(re).set(j,Ee),this.connected_&&this.sendListen_(Ee)}sendGet_(a){const p=this.outstandingGets_[a];this.sendRequest("g",p.request,b=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(b)})}sendListen_(a){const p=a.query,b=p._path.toString(),M=p._queryIdentifier;this.log_("Listen on "+b+" for "+M);const j={p:b};a.tag&&(j.q=p._queryObject,j.t=a.tag),j.h=a.hashFn(),this.sendRequest("q",j,Ee=>{const $e=Ee.d,It=Ee.s;h.warnOnListenWarnings_($e,p),(this.listens.get(b)&&this.listens.get(b).get(M))===a&&(this.log_("listen response",Ee),"ok"!==It&&this.removeListen_(b,M),a.onComplete&&a.onComplete(It,$e))})}static warnOnListenWarnings_(a,p){if(a&&"object"==typeof a&&(0,O.r3)(a,"w")){const b=(0,O.DV)(a,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const M='".indexOn": "'+p._queryParams.getIndex().toString()+'"',j=p._path.toString();Hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${j} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,O.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,p=(0,O.w9)(a)?"auth":"gauth",b={cred:a};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(p,b,M=>{const j=M.s,re=M.d||"error";this.authToken_===a&&("ok"===j?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(j,re))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const p=a.s,b=a.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,b)})}unlisten(a,p){const b=a._path.toString(),M=a._queryIdentifier;this.log_("Unlisten called for "+b+" "+M),(0,O.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,M)&&this.connected_&&this.sendUnlisten_(b,M,a._queryObject,p)}sendUnlisten_(a,p,b,M){this.log_("Unlisten on "+a+" for "+p);const j={p:a};M&&(j.q=b,j.t=M),this.sendRequest("n",j)}onDisconnectPut(a,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,p,b):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:p,onComplete:b})}onDisconnectMerge(a,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,p,b):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:p,onComplete:b})}onDisconnectCancel(a,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,p):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(a,p,b,M){const j={p,d:b};this.log_("onDisconnect "+a,j),this.sendRequest(a,j,re=>{M&&setTimeout(()=>{M(re.s,re.d)},Math.floor(0))})}put(a,p,b,M){this.putInternal("p",a,p,b,M)}merge(a,p,b,M){this.putInternal("m",a,p,b,M)}putInternal(a,p,b,M,j){this.initConnection_();const re={p,d:b};void 0!==j&&(re.h=j),this.outstandingPuts_.push({action:a,request:re,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(a){const p=this.outstandingPuts_[a].action,b=this.outstandingPuts_[a].request,M=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(p,b,j=>{this.log_(p+" response",j),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(j.s,j.d)})}reportStats(a){if(this.connected_){const p={c:a};this.log_("reportStats",p),this.sendRequest("s",p,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,O.Pz)(a));const p=a.r,b=this.requestCBHash_[p];b&&(delete this.requestCBHash_[p],b(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,p){this.log_("handleServerMessage",a,p),"d"===a?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===a?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===a?this.onListenRevoked_(p.p,p.q):"ac"===a?this.onAuthRevoked_(p.s,p.d):"apc"===a?this.onAppCheckRevoked_(p.s,p.d):"sd"===a?this.onSecurityDebugPacket_(p):Ar("Unrecognized action received from server: "+(0,O.Pz)(a)+"\nAre you using the latest client?")}onReady_(a,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-a);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,Q.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const p=a.onDataMessage_.bind(a),b=a.onReady_.bind(a),M=a.onRealtimeDisconnect_.bind(a),j=a.id+":"+h.nextConnectionId_++,re=a.lastSessionId;let Ee=!1,$e=null;const It=function(){$e?$e.close():(Ee=!0,M())};a.realtime_={close:It,sendRequest:function(Tn){(0,O.hu)($e,"sendRequest call when we're not connected not allowed."),$e.sendRequest(Tn)}};const $t=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[Tn,tr]=yield Promise.all([a.authTokenProvider_.getToken($t),a.appCheckTokenProvider_.getToken($t)]);Ee?Lt("getToken() completed but was canceled"):(Lt("getToken() completed. Creating connection."),a.authToken_=Tn&&Tn.accessToken,a.appCheckToken_=tr&&tr.token,$e=new Xo(j,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,p,b,M,Ui=>{Hn(Ui+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},re))}catch(Tn){a.log_("Failed to get token: "+Tn),Ee||(a.repoInfo_.nodeAdmin&&Hn(Tn),It())}}})()}interrupt(a){Lt("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){Lt("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const p=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const p=this.outstandingPuts_[a];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,p){let b;b=p?p.map(j=>Bi(j)).join("$"):"default";const M=this.removeListen_(a,b);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(a,p){const b=new Jr(a).toString();let M;if(this.listens.has(b)){const j=this.listens.get(b);M=j.get(p),j.delete(p),0===j.size&&this.listens.delete(b)}else M=void 0;return M}onAuthRevoked_(a,p){Lt("Auth token revoked: "+a+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,p){Lt("App check token revoked: "+a+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const p of a.values())this.sendListen_(p);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let p="js";(0,O.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+p+"."+Et.replace(/\./g,"-")]=1,(0,O.uI)()?a["framework.cordova"]=1:(0,O.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=co.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&a}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class wr{constructor(l,a){this.name=l,this.node=a}static Wrap(l,a){return new wr(l,a)}}class Eo{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,a){const p=new wr(Zi,l),b=new wr(Zi,a);return 0!==this.compare(p,b)}minPost(){return wr.MIN}}class pi extends Eo{static get __EMPTY_NODE(){return Pa}static set __EMPTY_NODE(l){Pa=l}compare(l,a){return ls(l.name,a.name)}isDefinedOn(l){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,a){return!1}minPost(){return wr.MIN}maxPost(){return new wr(wi,Pa)}makePost(l,a){return(0,O.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new wr(l,Pa)}toString(){return".key"}}const Uo=new pi;class vs{constructor(l,a,p,b,M=null){this.isReverse_=b,this.resultGenerator_=M,this.nodeStack_=[];let j=1;for(;!l.isEmpty();)if(l=l,j=a?p(l.key,a):1,b&&(j*=-1),j<0)l=this.isReverse_?l.left:l.right;else{if(0===j){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,l=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Ho,Ss=(()=>{class h{constructor(a,p,b,M,j){this.key=a,this.value=p,this.color=null!=b?b:h.RED,this.left=null!=M?M:ro.EMPTY_NODE,this.right=null!=j?j:ro.EMPTY_NODE}copy(a,p,b,M,j){return new h(null!=a?a:this.key,null!=p?p:this.value,null!=b?b:this.color,null!=M?M:this.left,null!=j?j:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,b){let M=this;const j=b(a,M.key);return M=j<0?M.copy(null,null,null,M.left.insert(a,p,b),null):0===j?M.copy(null,p,null,null,null):M.copy(null,null,null,null,M.right.insert(a,p,b)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return ro.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,p){let b,M;if(b=this,p(a,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(a,p),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===p(a,b.key)){if(b.right.isEmpty())return ro.EMPTY_NODE;M=b.right.min_(),b=b.copy(M.key,M.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(a,p))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class ro{constructor(l,a=ro.EMPTY_NODE){this.comparator_=l,this.root_=a}insert(l,a){return new ro(this.comparator_,this.root_.insert(l,a,this.comparator_).copy(null,null,Ss.BLACK,null,null))}remove(l){return new ro(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Ss.BLACK,null,null))}get(l){let a,p=this.root_;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a)return p.value;a<0?p=p.left:a>0&&(p=p.right)}return null}getPredecessorKey(l){let a,p=this.root_,b=null;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a){if(p.left.isEmpty())return b?b.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}a<0?p=p.left:a>0&&(b=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new vs(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,a){return new vs(this.root_,l,this.comparator_,!1,a)}getReverseIteratorFrom(l,a){return new vs(this.root_,l,this.comparator_,!0,a)}getReverseIterator(l){return new vs(this.root_,null,this.comparator_,!0,l)}}function As(h,l){return ls(h.name,l.name)}function jo(h,l){return ls(h,l)}ro.EMPTY_NODE=new class la{copy(l,a,p,b,M){return this}insert(l,a,p){return new Ss(l,a,null)}remove(l,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ca=function(h){return"number"==typeof h?"number:"+$s(h):"string:"+h},Wt=function(h){if(h.isLeafNode()){const l=h.val();(0,O.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,O.r3)(l,".sv"),"Priority must be a string or number.")}else(0,O.hu)(h===Ho||h.isEmpty(),"priority of unexpected type.");(0,O.hu)(h===Ho||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Di,bo,An,ns=(()=>{class h{constructor(a,p=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=p,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wt(this.priorityNode_)}static set __childrenNodeConstructor(a){Di=a}static get __childrenNodeConstructor(){return Di}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new h(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return gr(a)?this:".priority"===Wn(a)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,p){return null}updateImmediateChild(a,p){return".priority"===a?this.updatePriority(p):p.isEmpty()&&".priority"!==a?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,p).updatePriority(this.priorityNode_)}updateChild(a,p){const b=Wn(a);return null===b?p:p.isEmpty()&&".priority"!==b?this:((0,O.hu)(".priority"!==b||1===qs(a),".priority must be the last token in a path"),this.updateImmediateChild(b,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(a),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,p){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+ca(this.priorityNode_.val())+":");const p=typeof this.value_;a+=p+":",a+="number"===p?$s(this.value_):this.value_,this.lazyHash_=Ki(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===h.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof h.__childrenNodeConstructor?-1:((0,O.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const p=typeof a.value_,b=typeof this.value_,M=h.VALUE_TYPE_ORDER.indexOf(p),j=h.VALUE_TYPE_ORDER.indexOf(b);return(0,O.hu)(M>=0,"Unknown leaf type: "+p),(0,O.hu)(j>=0,"Unknown leaf type: "+b),M===j?"object"===b?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:j-M}withIndex(){return this}isIndexed(){return!0}equals(a){if(a===this)return!0;if(a.isLeafNode()){const p=a;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const gt=new class cn extends Eo{compare(l,a){const p=l.node.getPriority(),b=a.node.getPriority(),M=p.compareTo(b);return 0===M?ls(l.name,a.name):M}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,a){return!l.getPriority().equals(a.getPriority())}minPost(){return wr.MIN}maxPost(){return new wr(wi,new ns("[PRIORITY-POST]",An))}makePost(l,a){const p=bo(l);return new wr(a,new ns("[PRIORITY-POST]",p))}toString(){return".priority"}},A=Math.log(2);class T{constructor(l){this.count=parseInt(Math.log(l+1)/A,10),this.current_=this.count-1;const b=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&b}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const D=function(h,l,a,p){h.sort(l);const b=function(Ee,$e){const It=$e-Ee;let bt,$t;if(0===It)return null;if(1===It)return bt=h[Ee],$t=a?a(bt):bt,new Ss($t,bt.node,Ss.BLACK,null,null);{const Tn=parseInt(It/2,10)+Ee,tr=b(Ee,Tn),Ui=b(Tn+1,$e);return bt=h[Tn],$t=a?a(bt):bt,new Ss($t,bt.node,Ss.BLACK,tr,Ui)}},re=function(Ee){let $e=null,It=null,bt=h.length;const $t=function(tr,Ui){const go=bt-tr,du=bt;bt-=tr;const Il=b(go+1,du),_c=h[go],Wh=a?a(_c):_c;Tn(new Ss(Wh,_c.node,Ui,null,Il))},Tn=function(tr){$e?($e.left=tr,$e=tr):(It=tr,$e=tr)};for(let tr=0;tr<Ee.count;++tr){const Ui=Ee.nextBitIsOne(),go=Math.pow(2,Ee.count-(tr+1));Ui?$t(go,Ss.BLACK):($t(go,Ss.BLACK),$t(go,Ss.RED))}return It}(new T(h.length));return new ro(p||l,re)};let B;const W={};class ne{constructor(l,a){this.indexes_=l,this.indexSet_=a}static get Default(){return(0,O.hu)(W&&gt,"ChildrenNode.ts has not been loaded"),B=B||new ne({".priority":W},{".priority":gt}),B}get(l){const a=(0,O.DV)(this.indexes_,l);if(!a)throw new Error("No index defined for "+l);return a instanceof ro?a:null}hasIndex(l){return(0,O.r3)(this.indexSet_,l.toString())}addIndex(l,a){(0,O.hu)(l!==Uo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let b=!1;const M=a.getIterator(wr.Wrap);let re,j=M.getNext();for(;j;)b=b||l.isDefinedOn(j.node),p.push(j),j=M.getNext();re=b?D(p,l.getCompare()):W;const Ee=l.toString(),$e=Object.assign({},this.indexSet_);$e[Ee]=l;const It=Object.assign({},this.indexes_);return It[Ee]=re,new ne(It,$e)}addToIndexes(l,a){const p=(0,O.UI)(this.indexes_,(b,M)=>{const j=(0,O.DV)(this.indexSet_,M);if((0,O.hu)(j,"Missing index implementation for "+M),b===W){if(j.isDefinedOn(l.node)){const re=[],Ee=a.getIterator(wr.Wrap);let $e=Ee.getNext();for(;$e;)$e.name!==l.name&&re.push($e),$e=Ee.getNext();return re.push(l),D(re,j.getCompare())}return W}{const re=a.get(l.name);let Ee=b;return re&&(Ee=Ee.remove(new wr(l.name,re))),Ee.insert(l,l.node)}});return new ne(p,this.indexSet_)}removeFromIndexes(l,a){const p=(0,O.UI)(this.indexes_,b=>{if(b===W)return b;{const M=a.get(l.name);return M?b.remove(new wr(l.name,M)):b}});return new ne(p,this.indexSet_)}}let xe,Ae=(()=>{class h{constructor(a,p,b){this.children_=a,this.priorityNode_=p,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&Wt(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xe||(xe=new h(new ro(jo),null,ne.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xe}updatePriority(a){return this.children_.isEmpty()?this:new h(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const p=this.children_.get(a);return null===p?xe:p}}getChild(a){const p=Wn(a);return null===p?this:this.getImmediateChild(p).getChild(or(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,p){if((0,O.hu)(p,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(p);{const b=new wr(a,p);let M,j;p.isEmpty()?(M=this.children_.remove(a),j=this.indexMap_.removeFromIndexes(b,this.children_)):(M=this.children_.insert(a,p),j=this.indexMap_.addToIndexes(b,this.children_));const re=M.isEmpty()?xe:this.priorityNode_;return new h(M,re,j)}}updateChild(a,p){const b=Wn(a);if(null===b)return p;{(0,O.hu)(".priority"!==Wn(a)||1===qs(a),".priority must be the last token in a path");const M=this.getImmediateChild(b).updateChild(or(a),p);return this.updateImmediateChild(b,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const p={};let b=0,M=0,j=!0;if(this.forEachChild(gt,(re,Ee)=>{p[re]=Ee.val(a),b++,j&&h.INTEGER_REGEXP_.test(re)?M=Math.max(M,Number(re)):j=!1}),!a&&j&&M<2*b){const re=[];for(const Ee in p)re[Ee]=p[Ee];return re}return a&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+ca(this.getPriority().val())+":"),this.forEachChild(gt,(p,b)=>{const M=b.hash();""!==M&&(a+=":"+p+":"+M)}),this.lazyHash_=""===a?"":Ki(a)}return this.lazyHash_}getPredecessorChildName(a,p,b){const M=this.resolveIndex_(b);if(M){const j=M.getPredecessorKey(new wr(a,p));return j?j.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const p=this.resolveIndex_(a);if(p){const b=p.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(a){const p=this.getFirstChildName(a);return p?new wr(p,this.children_.get(p)):null}getLastChildName(a){const p=this.resolveIndex_(a);if(p){const b=p.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(a){const p=this.getLastChildName(a);return p?new wr(p,this.children_.get(p)):null}forEachChild(a,p){const b=this.resolveIndex_(a);return b?b.inorderTraversal(M=>p(M.name,M.node)):this.children_.inorderTraversal(p)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,p){const b=this.resolveIndex_(p);if(b)return b.getIteratorFrom(a,M=>M);{const M=this.children_.getIteratorFrom(a.name,wr.Wrap);let j=M.peek();for(;null!=j&&p.compare(j,a)<0;)M.getNext(),j=M.peek();return M}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,p){const b=this.resolveIndex_(p);if(b)return b.getReverseIteratorFrom(a,M=>M);{const M=this.children_.getReverseIteratorFrom(a.name,wr.Wrap);let j=M.peek();for(;null!=j&&p.compare(j,a)>0;)M.getNext(),j=M.peek();return M}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===fn?-1:0}withIndex(a){if(a===Uo||this.indexMap_.hasIndex(a))return this;{const p=this.indexMap_.addIndex(a,this.children_);return new h(this.children_,this.priorityNode_,p)}}isIndexed(a){return a===Uo||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const p=a;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const b=this.getIterator(gt),M=p.getIterator(gt);let j=b.getNext(),re=M.getNext();for(;j&&re;){if(j.name!==re.name||!j.node.equals(re.node))return!1;j=b.getNext(),re=M.getNext()}return null===j&&null===re}return!1}return!1}}resolveIndex_(a){return a===Uo?null:this.indexMap_.get(a.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const fn=new class Pt extends Ae{constructor(){super(new ro(jo),Ae.EMPTY_NODE,ne.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return Ae.EMPTY_NODE}isEmpty(){return!1}};function Yt(h,l=null){if(null===h)return Ae.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,O.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ns(h,Yt(l));if(h instanceof Array){let a=Ae.EMPTY_NODE;return Kr(h,(p,b)=>{if((0,O.r3)(h,p)&&"."!==p.substring(0,1)){const M=Yt(b);(M.isLeafNode()||!M.isEmpty())&&(a=a.updateImmediateChild(p,M))}}),a.updatePriority(Yt(l))}{const a=[];let p=!1;if(Kr(h,(j,re)=>{if("."!==j.substring(0,1)){const Ee=Yt(re);Ee.isEmpty()||(p=p||!Ee.getPriority().isEmpty(),a.push(new wr(j,Ee)))}}),0===a.length)return Ae.EMPTY_NODE;const M=D(a,As,j=>j.name,jo);if(p){const j=D(a,gt.getCompare());return new Ae(M,Yt(l),new ne({".priority":j},{".priority":gt}))}return new Ae(M,Yt(l),ne.Default)}}Object.defineProperties(wr,{MIN:{value:new wr(Zi,Ae.EMPTY_NODE)},MAX:{value:new wr(wi,fn)}}),pi.__EMPTY_NODE=Ae.EMPTY_NODE,ns.__childrenNodeConstructor=Ae,function ua(h){Ho=h}(fn),function Ol(h){An=h}(fn),function Kn(h){bo=h}(Yt);class jr extends Eo{constructor(l){super(),this.indexPath_=l,(0,O.hu)(!gr(l)&&".priority"!==Wn(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,a){const p=this.extractChild(l.node),b=this.extractChild(a.node),M=p.compareTo(b);return 0===M?ls(l.name,a.name):M}makePost(l,a){const p=Yt(l),b=Ae.EMPTY_NODE.updateChild(this.indexPath_,p);return new wr(a,b)}maxPost(){const l=Ae.EMPTY_NODE.updateChild(this.indexPath_,fn);return new wr(wi,l)}toString(){return Ra(this.indexPath_,0).join("/")}}const ar=new class Ir extends Eo{compare(l,a){const p=l.node.compareTo(a.node);return 0===p?ls(l.name,a.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,a){return!l.equals(a)}minPost(){return wr.MIN}maxPost(){return wr.MAX}makePost(l,a){const p=Yt(l);return new wr(a,p)}toString(){return".value"}},Es="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rs=function(){let h=0;const l=[];return function(a){const p=a===h;let b;h=a;const M=new Array(8);for(b=7;b>=0;b--)M[b]=Es.charAt(a%64),a=Math.floor(a/64);(0,O.hu)(0===a,"Cannot push at time == 0");let j=M.join("");if(p){for(b=11;b>=0&&63===l[b];b--)l[b]=0;l[b]++}else for(b=0;b<12;b++)l[b]=Math.floor(64*Math.random());for(b=0;b<12;b++)j+=Es.charAt(l[b]);return(0,O.hu)(20===j.length,"nextPushId: Length should be 20."),j}}(),il=function(h){if(h===""+_o)return"-";const l=Oi(h);if(null!=l)return""+(l+1);const a=new Array(h.length);for(let j=0;j<a.length;j++)a[j]=h.charAt(j);if(a.length<786)return a.push("-"),a.join("");let p=a.length-1;for(;p>=0&&"z"===a[p];)p--;if(-1===p)return wi;const M=Es.charAt(Es.indexOf(a[p])+1);return a[p]=M,a.slice(0,p+1).join("")},vd=function(h){if(h===""+Hi)return Zi;const l=Oi(h);if(null!=l)return""+(l-1);const a=new Array(h.length);for(let p=0;p<a.length;p++)a[p]=h.charAt(p);return"-"===a[a.length-1]?1===a.length?""+_o:(delete a[a.length-1],a.join("")):(a[a.length-1]=Es.charAt(Es.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function Yl(h){return{type:"value",snapshotNode:h}}function Fr(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function Kl(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function bs(h,l,a){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:a}}class Ea{constructor(l){this.index_=l}updateChild(l,a,p,b,M,j){(0,O.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const re=l.getImmediateChild(a);return re.getChild(b).equals(p.getChild(b))&&re.isEmpty()===p.isEmpty()||(null!=j&&(p.isEmpty()?l.hasChild(a)?j.trackChildChange(Kl(a,re)):(0,O.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):re.isEmpty()?j.trackChildChange(Fr(a,p)):j.trackChildChange(bs(a,p,re))),l.isLeafNode()&&p.isEmpty())?l:l.updateImmediateChild(a,p).withIndex(this.index_)}updateFullNode(l,a,p){return null!=p&&(l.isLeafNode()||l.forEachChild(gt,(b,M)=>{a.hasChild(b)||p.trackChildChange(Kl(b,M))}),a.isLeafNode()||a.forEachChild(gt,(b,M)=>{if(l.hasChild(b)){const j=l.getImmediateChild(b);j.equals(M)||p.trackChildChange(bs(b,M,j))}else p.trackChildChange(Fr(b,M))})),a.withIndex(this.index_)}updatePriority(l,a){return l.isEmpty()?Ae.EMPTY_NODE:l.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hs{constructor(l){this.indexedFilter_=new Ea(l.getIndex()),this.index_=l.getIndex(),this.startPost_=hs.getStartPost_(l),this.endPost_=hs.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,a,p,b,M,j){return this.matches(new wr(a,p))||(p=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(l,a,p,b,M,j)}updateFullNode(l,a,p){a.isLeafNode()&&(a=Ae.EMPTY_NODE);let b=a.withIndex(this.index_);b=b.updatePriority(Ae.EMPTY_NODE);const M=this;return a.forEachChild(gt,(j,re)=>{M.matches(new wr(j,re))||(b=b.updateImmediateChild(j,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,b,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const a=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),a)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const a=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),a)}return l.getIndex().maxPost()}}class ws{constructor(l){this.rangedFilter_=new hs(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,a,p,b,M,j){return this.rangedFilter_.matches(new wr(a,p))||(p=Ae.EMPTY_NODE),l.getImmediateChild(a).equals(p)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,a,p,b,M,j):this.fullLimitUpdateChild_(l,a,p,M,j)}updateFullNode(l,a,p){let b;if(a.isLeafNode()||a.isEmpty())b=Ae.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let M;b=Ae.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let j=0;for(;M.hasNext()&&j<this.limit_;){const re=M.getNext();let Ee;if(Ee=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),re)<=0:this.index_.compare(re,this.rangedFilter_.getEndPost())<=0,!Ee)break;b=b.updateImmediateChild(re.name,re.node),j++}}else{let M,j,re,Ee;if(b=a.withIndex(this.index_),b=b.updatePriority(Ae.EMPTY_NODE),this.reverse_){Ee=b.getReverseIterator(this.index_),M=this.rangedFilter_.getEndPost(),j=this.rangedFilter_.getStartPost();const bt=this.index_.getCompare();re=($t,Tn)=>bt(Tn,$t)}else Ee=b.getIterator(this.index_),M=this.rangedFilter_.getStartPost(),j=this.rangedFilter_.getEndPost(),re=this.index_.getCompare();let $e=0,It=!1;for(;Ee.hasNext();){const bt=Ee.getNext();!It&&re(M,bt)<=0&&(It=!0),It&&$e<this.limit_&&re(bt,j)<=0?$e++:b=b.updateImmediateChild(bt.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,b,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,a,p,b,M){let j;if(this.reverse_){const bt=this.index_.getCompare();j=($t,Tn)=>bt(Tn,$t)}else j=this.index_.getCompare();const re=l;(0,O.hu)(re.numChildren()===this.limit_,"");const Ee=new wr(a,p),$e=this.reverse_?re.getFirstChild(this.index_):re.getLastChild(this.index_),It=this.rangedFilter_.matches(Ee);if(re.hasChild(a)){const bt=re.getImmediateChild(a);let $t=b.getChildAfterChild(this.index_,$e,this.reverse_);for(;null!=$t&&($t.name===a||re.hasChild($t.name));)$t=b.getChildAfterChild(this.index_,$t,this.reverse_);const Tn=null==$t?1:j($t,Ee);if(It&&!p.isEmpty()&&Tn>=0)return null!=M&&M.trackChildChange(bs(a,p,bt)),re.updateImmediateChild(a,p);{null!=M&&M.trackChildChange(Kl(a,bt));const Ui=re.updateImmediateChild(a,Ae.EMPTY_NODE);return null!=$t&&this.rangedFilter_.matches($t)?(null!=M&&M.trackChildChange(Fr($t.name,$t.node)),Ui.updateImmediateChild($t.name,$t.node)):Ui}}return p.isEmpty()?l:It&&j($e,Ee)>=0?(null!=M&&(M.trackChildChange(Kl($e.name,$e.node)),M.trackChildChange(Fr(a,p))),re.updateImmediateChild(a,p).updateImmediateChild($e.name,Ae.EMPTY_NODE)):l}}class Mo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gt}copy(){const l=new Mo;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function xs(h,l,a){const p=h.copy();return p.startSet_=!0,void 0===l&&(l=null),p.indexStartValue_=l,null!=a?(p.startNameSet_=!0,p.indexStartName_=a):(p.startNameSet_=!1,p.indexStartName_=""),p}function Pl(h,l,a){const p=h.copy();return p.endSet_=!0,void 0===l&&(l=null),p.indexEndValue_=l,void 0!==a?(p.endNameSet_=!0,p.indexEndName_=a):(p.endNameSet_=!1,p.indexEndName_=""),p}function Ms(h,l){const a=h.copy();return a.index_=l,a}function Go(h){const l={};if(h.isDefault())return l;let a;return h.index_===gt?a="$priority":h.index_===ar?a="$value":h.index_===Uo?a="$key":((0,O.hu)(h.index_ instanceof jr,"Unrecognized index type!"),a=h.index_.toString()),l.orderBy=(0,O.Pz)(a),h.startSet_&&(l.startAt=(0,O.Pz)(h.indexStartValue_),h.startNameSet_&&(l.startAt+=","+(0,O.Pz)(h.indexStartName_))),h.endSet_&&(l.endAt=(0,O.Pz)(h.indexEndValue_),h.endNameSet_&&(l.endAt+=","+(0,O.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function Eu(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_)),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_)),h.limitSet_){l.l=h.limit_;let a=h.viewFrom_;""===a&&(a=h.isViewFromLeft()?"l":"r"),l.vf=a}return h.index_!==gt&&(l.i=h.index_.toString()),l}class an extends xa{constructor(l,a,p,b){super(),this.repoInfo_=l,this.onDataUpdate_=a,this.authTokenProvider_=p,this.appCheckTokenProvider_=b,this.log_=mn("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,a){return void 0!==a?"tag$"+a:((0,O.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,a,p,b){const M=l._path.toString();this.log_("Listen called for "+M+" "+l._queryIdentifier);const j=an.getListenId_(l,p),re={};this.listens_[j]=re;const Ee=Go(l._queryParams);this.restRequest_(M+".json",Ee,($e,It)=>{let bt=It;if(404===$e&&(bt=null,$e=null),null===$e&&this.onDataUpdate_(M,bt,!1,p),(0,O.DV)(this.listens_,j)===re){let $t;$t=$e?401===$e?"permission_denied":"rest_error:"+$e:"ok",b($t,null)}})}unlisten(l,a){const p=an.getListenId_(l,a);delete this.listens_[p]}get(l){const a=Go(l._queryParams),p=l._path.toString(),b=new O.BH;return this.restRequest_(p+".json",a,(M,j)=>{let re=j;404===M&&(re=null,M=null),null===M?(this.onDataUpdate_(p,re,!1,null),b.resolve(re)):b.reject(new Error(re))}),b.promise}refreshAuthToken(l){}restRequest_(l,a={},p){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,M])=>{b&&b.accessToken&&(a.auth=b.accessToken),M&&M.token&&(a.ac=M.token);const j=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,O.xO)(a);this.log_("Sending REST request for "+j);const re=new XMLHttpRequest;re.onreadystatechange=()=>{if(p&&4===re.readyState){this.log_("REST Response for "+j+" received. status:",re.status,"response:",re.responseText);let Ee=null;if(re.status>=200&&re.status<300){try{Ee=(0,O.cI)(re.responseText)}catch($e){Hn("Failed to parse JSON response for "+j+": "+re.responseText)}p(null,Ee)}else 401!==re.status&&404!==re.status&&Hn("Got unsuccessful REST response for "+j+" Status: "+re.status),p(re.status);p=null}},re.open("GET",j,!0),re.send()})}}class Ed{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,a){this.rootNode_=this.rootNode_.updateChild(l,a)}}function bu(){return{value:null,children:new Map}}function Rs(h,l,a){if(gr(l))h.value=a,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,a);else{const p=Wn(l);h.children.has(p)||h.children.set(p,bu()),Rs(h.children.get(p),l=or(l),a)}}function $i(h,l){if(gr(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const a=h.value;return h.value=null,a.forEachChild(gt,(p,b)=>{Rs(h,new Jr(p),b)}),$i(h,l)}}if(h.children.size>0){const a=Wn(l);return l=or(l),h.children.has(a)&&$i(h.children.get(a),l)&&h.children.delete(a),0===h.children.size}return!0}function ba(h,l,a){null!==h.value?a(l,h.value):function Ro(h,l){h.children.forEach((a,p)=>{l(p,a)})}(h,(p,b)=>{ba(b,new Jr(l.toString()+"/"+p),a)})}class wa{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),a=Object.assign({},l);return this.last_&&Kr(this.last_,(p,b)=>{a[p]=a[p]-b}),this.last_=l,a}}class wu{constructor(l,a){this.server_=a,this.statsToReport_={},this.statsListener_=new wa(l);const p=1e4+2e4*Math.random();us(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),a={};let p=!1;Kr(l,(b,M)=>{M>0&&(0,O.r3)(this.statsToReport_,b)&&(a[b]=M,p=!0)}),p&&this.server_.reportStats(a),us(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ks=(()=>{return(h=ks||(ks={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ks;var h})();function ol(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class k{constructor(l,a,p){this.path=l,this.affectedTree=a,this.revert=p,this.type=ks.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(gr(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new Jr(l));return new k(Mr(),a,this.revert)}}return(0,O.hu)(Wn(this.path)===l,"operationForChild called for unrelated child."),new k(or(this.path),this.affectedTree,this.revert)}}class z{constructor(l,a){this.source=l,this.path=a,this.type=ks.LISTEN_COMPLETE}operationForChild(l){return gr(this.path)?new z(this.source,Mr()):new z(this.source,or(this.path))}}class ie{constructor(l,a,p){this.source=l,this.path=a,this.snap=p,this.type=ks.OVERWRITE}operationForChild(l){return gr(this.path)?new ie(this.source,Mr(),this.snap.getImmediateChild(l)):new ie(this.source,or(this.path),this.snap)}}class Me{constructor(l,a,p){this.source=l,this.path=a,this.children=p,this.type=ks.MERGE}operationForChild(l){if(gr(this.path)){const a=this.children.subtree(new Jr(l));return a.isEmpty()?null:a.value?new ie(this.source,Mr(),a.value):new Me(this.source,Mr(),a)}return(0,O.hu)(Wn(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Me(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class it{constructor(l,a,p){this.node_=l,this.fullyInitialized_=a,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(gr(l))return this.isFullyInitialized()&&!this.filtered_;const a=Wn(l);return this.isCompleteForChild(a)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class wt{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function Dn(h,l,a,p,b,M){const j=p.filter(re=>re.type===a);j.sort((re,Ee)=>function er(h,l,a){if(null==l.childName||null==a.childName)throw(0,O.g5)("Should only compare child_ events.");const p=new wr(l.childName,l.snapshotNode),b=new wr(a.childName,a.snapshotNode);return h.index_.compare(p,b)}(h,re,Ee)),j.forEach(re=>{const Ee=function mr(h,l,a){return"value"===l.type||"child_removed"===l.type||(l.prevName=a.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,re,M);b.forEach($e=>{$e.respondsTo(re.type)&&l.push($e.createEvent(Ee,h.query_))})})}function Tr(h,l){return{eventCache:h,serverCache:l}}function lr(h,l,a,p){return Tr(new it(l,a,p),h.serverCache)}function so(h,l,a,p){return Tr(h.eventCache,new it(l,a,p))}function Wr(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Fs(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let al;class Vr{constructor(l,a=(()=>(al||(al=new ro(to)),al))()){this.value=l,this.children=a}static fromObject(l){let a=new Vr(null);return Kr(l,(p,b)=>{a=a.set(new Jr(p),b)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,a){if(null!=this.value&&a(this.value))return{path:Mr(),value:this.value};if(gr(l))return null;{const p=Wn(l),b=this.children.get(p);if(null!==b){const M=b.findRootMostMatchingPathAndValue(or(l),a);return null!=M?{path:Ni(new Jr(p),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(gr(l))return this;{const a=Wn(l),p=this.children.get(a);return null!==p?p.subtree(or(l)):new Vr(null)}}set(l,a){if(gr(l))return new Vr(a,this.children);{const p=Wn(l),M=(this.children.get(p)||new Vr(null)).set(or(l),a),j=this.children.insert(p,M);return new Vr(this.value,j)}}remove(l){if(gr(l))return this.children.isEmpty()?new Vr(null):new Vr(null,this.children);{const a=Wn(l),p=this.children.get(a);if(p){const b=p.remove(or(l));let M;return M=b.isEmpty()?this.children.remove(a):this.children.insert(a,b),null===this.value&&M.isEmpty()?new Vr(null):new Vr(this.value,M)}return this}}get(l){if(gr(l))return this.value;{const a=Wn(l),p=this.children.get(a);return p?p.get(or(l)):null}}setTree(l,a){if(gr(l))return a;{const p=Wn(l),M=(this.children.get(p)||new Vr(null)).setTree(or(l),a);let j;return j=M.isEmpty()?this.children.remove(p):this.children.insert(p,M),new Vr(this.value,j)}}fold(l){return this.fold_(Mr(),l)}fold_(l,a){const p={};return this.children.inorderTraversal((b,M)=>{p[b]=M.fold_(Ni(l,b),a)}),a(l,this.value,p)}findOnPath(l,a){return this.findOnPath_(l,Mr(),a)}findOnPath_(l,a,p){const b=!!this.value&&p(a,this.value);if(b)return b;if(gr(l))return null;{const M=Wn(l),j=this.children.get(M);return j?j.findOnPath_(or(l),Ni(a,M),p):null}}foreachOnPath(l,a){return this.foreachOnPath_(l,Mr(),a)}foreachOnPath_(l,a,p){if(gr(l))return this;{this.value&&p(a,this.value);const b=Wn(l),M=this.children.get(b);return M?M.foreachOnPath_(or(l),Ni(a,b),p):new Vr(null)}}foreach(l){this.foreach_(Mr(),l)}foreach_(l,a){this.children.inorderTraversal((p,b)=>{b.foreach_(Ni(l,p),a)}),this.value&&a(l,this.value)}foreachChild(l){this.children.inorderTraversal((a,p)=>{p.value&&l(a,p.value)})}}class zi{constructor(l){this.writeTree_=l}static empty(){return new zi(new Vr(null))}}function La(h,l,a){if(gr(l))return new zi(new Vr(a));{const p=h.writeTree_.findRootMostValueAndPath(l);if(null!=p){const b=p.path;let M=p.value;const j=ki(b,l);return M=M.updateChild(j,a),new zi(h.writeTree_.set(b,M))}{const b=new Vr(a),M=h.writeTree_.setTree(l,b);return new zi(M)}}}function Nl(h,l,a){let p=h;return Kr(a,(b,M)=>{p=La(p,Ni(l,b),M)}),p}function Va(h,l){if(gr(l))return zi.empty();{const a=h.writeTree_.setTree(l,new Vr(null));return new zi(a)}}function Ba(h,l){return null!=is(h,l)}function is(h,l){const a=h.writeTree_.findRootMostValueAndPath(l);return null!=a?h.writeTree_.get(a.path).getChild(ki(a.path,l)):null}function Xl(h){const l=[],a=h.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(gt,(p,b)=>{l.push(new wr(p,b))}):h.writeTree_.children.inorderTraversal((p,b)=>{null!=b.value&&l.push(new wr(p,b.value))}),l}function ul(h,l){if(gr(l))return h;{const a=is(h,l);return new zi(null!=a?new Vr(a):h.writeTree_.subtree(l))}}function Dc(h){return h.writeTree_.isEmpty()}function $a(h,l){return Jl(Mr(),h.writeTree_,l)}function Jl(h,l,a){if(null!=l.value)return a.updateChild(h,l.value);{let p=null;return l.children.inorderTraversal((b,M)=>{".priority"===b?((0,O.hu)(null!==M.value,"Priority writes must always be leaf nodes"),p=M.value):a=Jl(Ni(h,b),M,a)}),!a.getChild(h).isEmpty()&&null!==p&&(a=a.updateChild(Ni(h,".priority"),p)),a}}function Wu(h,l){return Ku(l,h)}function cf(h,l){if(h.snap)return ri(h.path,l);for(const a in h.children)if(h.children.hasOwnProperty(a)&&ri(Ni(h.path,a),l))return!0;return!1}function bd(h){return h.visible}function ta(h,l,a){let p=zi.empty();for(let b=0;b<h.length;++b){const M=h[b];if(l(M)){const j=M.path;let re;if(M.snap)ri(a,j)?(re=ki(a,j),p=La(p,re,M.snap)):ri(j,a)&&(re=ki(j,a),p=La(p,Mr(),M.snap.getChild(re)));else{if(!M.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(ri(a,j))re=ki(a,j),p=Nl(p,re,M.children);else if(ri(j,a))if(re=ki(j,a),gr(re))p=Nl(p,Mr(),M.children);else{const Ee=(0,O.DV)(M.children,Wn(re));if(Ee){const $e=Ee.getChild(or(re));p=La(p,Mr(),$e)}}}}}return p}function ih(h,l,a,p,b){if(p||b){const M=ul(h.visibleWrites,l);return!b&&Dc(M)?a:b||null!=a||Ba(M,Mr())?$a(ta(h.allWrites,function($e){return($e.visible||b)&&(!p||!~p.indexOf($e.writeId))&&(ri($e.path,l)||ri(l,$e.path))},l),a||Ae.EMPTY_NODE):null}{const M=is(h.visibleWrites,l);if(null!=M)return M;{const j=ul(h.visibleWrites,l);return Dc(j)?a:null!=a||Ba(j,Mr())?$a(j,a||Ae.EMPTY_NODE):null}}}function cl(h,l,a,p){return ih(h.writeTree,h.treePath,l,a,p)}function wo(h,l){return function Cu(h,l,a){let p=Ae.EMPTY_NODE;const b=is(h.visibleWrites,l);if(b)return b.isLeafNode()||b.forEachChild(gt,(M,j)=>{p=p.updateImmediateChild(M,j)}),p;if(a){const M=ul(h.visibleWrites,l);return a.forEachChild(gt,(j,re)=>{const Ee=$a(ul(M,new Jr(j)),re);p=p.updateImmediateChild(j,Ee)}),Xl(M).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}return Xl(ul(h.visibleWrites,l)).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}(h.writeTree,h.treePath,l)}function sh(h,l,a,p){return function Tc(h,l,a,p,b){(0,O.hu)(p||b,"Either existingEventSnap or existingServerSnap must exist");const M=Ni(l,a);if(Ba(h.visibleWrites,M))return null;{const j=ul(h.visibleWrites,M);return Dc(j)?b.getChild(a):$a(j,b.getChild(a))}}(h.writeTree,h.treePath,l,a,p)}function Ia(h,l){return function Du(h,l){return is(h.visibleWrites,l)}(h.writeTree,Ni(h.treePath,l))}function Tu(h,l,a){return function Sc(h,l,a,p){const b=Ni(l,a),M=is(h.visibleWrites,b);return null!=M?M:p.isCompleteForChild(a)?$a(ul(h.visibleWrites,b),p.getNode().getImmediateChild(a)):null}(h.writeTree,h.treePath,l,a)}function Yu(h,l){return Ku(Ni(h.treePath,l),h.writeTree)}function Ku(h,l){return{treePath:h,writeTree:l}}class wd{constructor(){this.changeMap=new Map}trackChildChange(l){const a=l.type,p=l.childName;(0,O.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(p);if(b){const M=b.type;if("child_added"===a&&"child_removed"===M)this.changeMap.set(p,bs(p,l.snapshotNode,b.snapshotNode));else if("child_removed"===a&&"child_added"===M)this.changeMap.delete(p);else if("child_removed"===a&&"child_changed"===M)this.changeMap.set(p,Kl(p,b.oldSnap));else if("child_changed"===a&&"child_added"===M)this.changeMap.set(p,Fr(p,l.snapshotNode));else{if("child_changed"!==a||"child_changed"!==M)throw(0,O.g5)("Illegal combination of changes: "+l+" occurred after "+b);this.changeMap.set(p,bs(p,l.snapshotNode,b.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const Id=new class df{getCompleteChild(l){return null}getChildAfterChild(l,a,p){return null}};class xc{constructor(l,a,p=null){this.writes_=l,this.viewCache_=a,this.optCompleteServerCache_=p}getCompleteChild(l){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(l))return a.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new it(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tu(this.writes_,l,p)}}getChildAfterChild(l,a,p){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fs(this.viewCache_),M=function Ac(h,l,a,p,b,M){return function qu(h,l,a,p,b,M,j){let re;const Ee=ul(h.visibleWrites,l),$e=is(Ee,Mr());if(null!=$e)re=$e;else{if(null==a)return[];re=$a(Ee,a)}if(re=re.withIndex(j),re.isEmpty()||re.isLeafNode())return[];{const It=[],bt=j.getCompare(),$t=M?re.getReverseIteratorFrom(p,j):re.getIteratorFrom(p,j);let Tn=$t.getNext();for(;Tn&&It.length<b;)0!==bt(Tn,p)&&It.push(Tn),Tn=$t.getNext();return It}}(h.writeTree,h.treePath,l,a,p,b,M)}(this.writes_,b,a,1,p,l);return 0===M.length?null:M[0]}}function Oc(h,l,a,p,b,M){const j=l.eventCache;if(null!=Ia(p,a))return l;{let re,Ee;if(gr(a))if((0,O.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const $e=Fs(l),bt=wo(p,$e instanceof Ae?$e:Ae.EMPTY_NODE);re=h.filter.updateFullNode(l.eventCache.getNode(),bt,M)}else{const $e=cl(p,Fs(l));re=h.filter.updateFullNode(l.eventCache.getNode(),$e,M)}else{const $e=Wn(a);if(".priority"===$e){(0,O.hu)(1===qs(a),"Can't have a priority with additional path components");const It=j.getNode();Ee=l.serverCache.getNode();const bt=sh(p,a,It,Ee);re=null!=bt?h.filter.updatePriority(It,bt):j.getNode()}else{const It=or(a);let bt;if(j.isCompleteForChild($e)){Ee=l.serverCache.getNode();const $t=sh(p,a,j.getNode(),Ee);bt=null!=$t?j.getNode().getImmediateChild($e).updateChild(It,$t):j.getNode().getImmediateChild($e)}else bt=Tu(p,$e,l.serverCache);re=null!=bt?h.filter.updateChild(j.getNode(),$e,bt,It,b,M):j.getNode()}}return lr(l,re,j.isFullyInitialized()||gr(a),h.filter.filtersNodes())}}function Fl(h,l,a,p,b,M,j,re){const Ee=l.serverCache;let $e;const It=j?h.filter:h.filter.getIndexedFilter();if(gr(a))$e=It.updateFullNode(Ee.getNode(),p,null);else if(It.filtersNodes()&&!Ee.isFiltered()){const Tn=Ee.getNode().updateChild(a,p);$e=It.updateFullNode(Ee.getNode(),Tn,null)}else{const Tn=Wn(a);if(!Ee.isCompleteForPath(a)&&qs(a)>1)return l;const tr=or(a),go=Ee.getNode().getImmediateChild(Tn).updateChild(tr,p);$e=".priority"===Tn?It.updatePriority(Ee.getNode(),go):It.updateChild(Ee.getNode(),Tn,go,tr,Id,null)}const bt=so(l,$e,Ee.isFullyInitialized()||gr(a),It.filtersNodes());return Oc(h,bt,a,b,new xc(b,bt,M),re)}function Ha(h,l,a,p,b,M,j){const re=l.eventCache;let Ee,$e;const It=new xc(b,l,M);if(gr(a))$e=h.filter.updateFullNode(l.eventCache.getNode(),p,j),Ee=lr(l,$e,!0,h.filter.filtersNodes());else{const bt=Wn(a);if(".priority"===bt)$e=h.filter.updatePriority(l.eventCache.getNode(),p),Ee=lr(l,$e,re.isFullyInitialized(),re.isFiltered());else{const $t=or(a),Tn=re.getNode().getImmediateChild(bt);let tr;if(gr($t))tr=p;else{const Ui=It.getCompleteChild(bt);tr=null!=Ui?".priority"===rl($t)&&Ui.getChild(Oa($t)).isEmpty()?Ui:Ui.updateChild($t,p):Ae.EMPTY_NODE}Ee=Tn.equals(tr)?l:lr(l,h.filter.updateChild(re.getNode(),bt,tr,$t,It,j),re.isFullyInitialized(),h.filter.filtersNodes())}}return Ee}function oh(h,l){return h.eventCache.isCompleteForChild(l)}function Cd(h,l,a){return a.foreach((p,b)=>{l=l.updateChild(p,b)}),l}function dl(h,l,a,p,b,M,j,re){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let $e,Ee=l;$e=gr(a)?p:new Vr(null).setTree(a,p);const It=l.serverCache.getNode();return $e.children.inorderTraversal((bt,$t)=>{if(It.hasChild(bt)){const tr=Cd(0,l.serverCache.getNode().getImmediateChild(bt),$t);Ee=Fl(h,Ee,new Jr(bt),tr,b,M,j,re)}}),$e.children.inorderTraversal((bt,$t)=>{const Tn=!l.serverCache.isCompleteForChild(bt)&&void 0===$t.value;if(!It.hasChild(bt)&&!Tn){const Ui=Cd(0,l.serverCache.getNode().getImmediateChild(bt),$t);Ee=Fl(h,Ee,new Jr(bt),Ui,b,M,j,re)}}),Ee}class tu{constructor(l,a){this.query_=l,this.eventRegistrations_=[];const p=this.query_._queryParams,b=new Ea(p.getIndex()),M=function Si(h){return h.loadsAllData()?new Ea(h.getIndex()):h.hasLimit()?new ws(h):new hs(h)}(p);this.processor_=function Mc(h){return{filter:h}}(M);const j=a.serverCache,re=a.eventCache,Ee=b.updateFullNode(Ae.EMPTY_NODE,j.getNode(),null),$e=M.updateFullNode(Ae.EMPTY_NODE,re.getNode(),null),It=new it(Ee,j.isFullyInitialized(),b.filtersNodes()),bt=new it($e,re.isFullyInitialized(),M.filtersNodes());this.viewCache_=Tr(bt,It),this.eventGenerator_=new wt(this.query_)}get query(){return this.query_}}function hl(h,l){const a=Fs(h.viewCache_);return a&&(h.query._queryParams.loadsAllData()||!gr(l)&&!a.getImmediateChild(Wn(l)).isEmpty())?a.getChild(l):null}function Su(h){return 0===h.eventRegistrations_.length}function Ll(h,l,a){const p=[];if(a){(0,O.hu)(null==l,"A cancel should cancel all event registrations.");const b=h.query._path;h.eventRegistrations_.forEach(M=>{const j=M.createCancelEvent(a,b);j&&p.push(j)})}if(l){let b=[];for(let M=0;M<h.eventRegistrations_.length;++M){const j=h.eventRegistrations_[M];if(j.matches(l)){if(l.hasAnyCallback()){b=b.concat(h.eventRegistrations_.slice(M+1));break}}else b.push(j)}h.eventRegistrations_=b}else h.eventRegistrations_=[];return p}function Dd(h,l,a,p){l.type===ks.MERGE&&null!==l.source.queryId&&((0,O.hu)(Fs(h.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Wr(h.viewCache_),"Missing event cache, even though we have a server cache"));const b=h.viewCache_,M=function ja(h,l,a,p,b){const M=new wd;let j,re;if(a.type===ks.OVERWRITE){const $e=a;$e.source.fromUser?j=Ha(h,l,$e.path,$e.snap,p,b,M):((0,O.hu)($e.source.fromServer,"Unknown source."),re=$e.source.tagged||l.serverCache.isFiltered()&&!gr($e.path),j=Fl(h,l,$e.path,$e.snap,p,b,re,M))}else if(a.type===ks.MERGE){const $e=a;$e.source.fromUser?j=function eu(h,l,a,p,b,M,j){let re=l;return p.foreach((Ee,$e)=>{const It=Ni(a,Ee);oh(l,Wn(It))&&(re=Ha(h,re,It,$e,b,M,j))}),p.foreach((Ee,$e)=>{const It=Ni(a,Ee);oh(l,Wn(It))||(re=Ha(h,re,It,$e,b,M,j))}),re}(h,l,$e.path,$e.children,p,b,M):((0,O.hu)($e.source.fromServer,"Unknown source."),re=$e.source.tagged||l.serverCache.isFiltered(),j=dl(h,l,$e.path,$e.children,p,b,re,M))}else if(a.type===ks.ACK_USER_WRITE){const $e=a;j=$e.revert?function Pc(h,l,a,p,b,M){let j;if(null!=Ia(p,a))return l;{const re=new xc(p,l,b),Ee=l.eventCache.getNode();let $e;if(gr(a)||".priority"===Wn(a)){let It;if(l.serverCache.isFullyInitialized())It=cl(p,Fs(l));else{const bt=l.serverCache.getNode();(0,O.hu)(bt instanceof Ae,"serverChildren would be complete if leaf node"),It=wo(p,bt)}It=It,$e=h.filter.updateFullNode(Ee,It,M)}else{const It=Wn(a);let bt=Tu(p,It,l.serverCache);null==bt&&l.serverCache.isCompleteForChild(It)&&(bt=Ee.getImmediateChild(It)),$e=null!=bt?h.filter.updateChild(Ee,It,bt,or(a),re,M):l.eventCache.getNode().hasChild(It)?h.filter.updateChild(Ee,It,Ae.EMPTY_NODE,or(a),re,M):Ee,$e.isEmpty()&&l.serverCache.isFullyInitialized()&&(j=cl(p,Fs(l)),j.isLeafNode()&&($e=h.filter.updateFullNode($e,j,M)))}return j=l.serverCache.isFullyInitialized()||null!=Ia(p,Mr()),lr(l,$e,j,h.filter.filtersNodes())}}(h,l,$e.path,p,b,M):function ah(h,l,a,p,b,M,j){if(null!=Ia(b,a))return l;const re=l.serverCache.isFiltered(),Ee=l.serverCache;if(null!=p.value){if(gr(a)&&Ee.isFullyInitialized()||Ee.isCompleteForPath(a))return Fl(h,l,a,Ee.getNode().getChild(a),b,M,re,j);if(gr(a)){let $e=new Vr(null);return Ee.getNode().forEachChild(Uo,(It,bt)=>{$e=$e.set(new Jr(It),bt)}),dl(h,l,a,$e,b,M,re,j)}return l}{let $e=new Vr(null);return p.foreach((It,bt)=>{const $t=Ni(a,It);Ee.isCompleteForPath($t)&&($e=$e.set(It,Ee.getNode().getChild($t)))}),dl(h,l,a,$e,b,M,re,j)}}(h,l,$e.path,$e.affectedTree,p,b,M)}else{if(a.type!==ks.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+a.type);j=function lh(h,l,a,p,b){const M=l.serverCache;return Oc(h,so(l,M.getNode(),M.isFullyInitialized()||gr(a),M.isFiltered()),a,p,Id,b)}(h,l,a.path,p,M)}const Ee=M.getChanges();return function Zu(h,l,a){const p=l.eventCache;if(p.isFullyInitialized()){const b=p.getNode().isLeafNode()||p.getNode().isEmpty(),M=Wr(h);(a.length>0||!h.eventCache.isFullyInitialized()||b&&!p.getNode().equals(M)||!p.getNode().getPriority().equals(M.getPriority()))&&a.push(Yl(Wr(l)))}}(l,j,Ee),{viewCache:j,changes:Ee}}(h.processor_,b,l,a,p);return function Rc(h,l){(0,O.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,M.viewCache),(0,O.hu)(M.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=M.viewCache,Nc(h,M.changes,M.viewCache.eventCache.getNode(),null)}function Nc(h,l,a,p){return function Vt(h,l,a,p){const b=[],M=[];return l.forEach(j=>{"child_changed"===j.type&&h.index_.indexedValueChanged(j.oldSnap,j.snapshotNode)&&M.push(function Zl(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(j.childName,j.snapshotNode))}),Dn(h,b,"child_removed",l,p,a),Dn(h,b,"child_added",l,p,a),Dn(h,b,"child_moved",M,p,a),Dn(h,b,"child_changed",l,p,a),Dn(h,b,"value",l,p,a),b}(h.eventGenerator_,l,a,p?[p]:h.eventRegistrations_)}let nu,Cs;class fl{constructor(){this.views=new Map}}function pl(h,l,a,p){const b=l.source.queryId;if(null!==b){const M=h.views.get(b);return(0,O.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Dd(M,l,a,p)}{let M=[];for(const j of h.views.values())M=M.concat(Dd(j,l,a,p));return M}}function Td(h,l,a,p,b){const j=h.views.get(l._queryIdentifier);if(!j){let re=cl(a,b?p:null),Ee=!1;re?Ee=!0:p instanceof Ae?(re=wo(a,p),Ee=!1):(re=Ae.EMPTY_NODE,Ee=!1);const $e=Tr(new it(re,Ee,!1),new it(p,b,!1));return new tu(l,$e)}return j}function ui(h){const l=[];for(const a of h.views.values())a.query._queryParams.loadsAllData()||l.push(a);return l}function gl(h,l){let a=null;for(const p of h.views.values())a=a||hl(p,l);return a}function Xu(h,l){return l._queryParams.loadsAllData()?Ga(h):h.views.get(l._queryIdentifier)}function Ca(h,l){return null!=Xu(h,l)}function Fi(h){return null!=Ga(h)}function Ga(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let ss=1;class Sd{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Vr(null),this.pendingWriteTree_=function kl(){return{visibleWrites:zi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zo(h,l,a,p,b){return function lf(h,l,a,p,b){(0,O.hu)(p>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),h.allWrites.push({path:l,snap:a,writeId:p,visible:b}),b&&(h.visibleWrites=La(h.visibleWrites,l,a)),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p,b),b?Wa(h,new ie({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,a)):[]}function Da(h,l,a=!1){const p=function Oo(h,l){for(let a=0;a<h.allWrites.length;a++){const p=h.allWrites[a];if(p.writeId===l)return p}return null}(h.pendingWriteTree_,l);if(function Ua(h,l){const a=h.allWrites.findIndex(re=>re.writeId===l);(0,O.hu)(a>=0,"removeWrite called with nonexistent writeId.");const p=h.allWrites[a];h.allWrites.splice(a,1);let b=p.visible,M=!1,j=h.allWrites.length-1;for(;b&&j>=0;){const re=h.allWrites[j];re.visible&&(j>=a&&cf(re,p.path)?b=!1:ri(p.path,re.path)&&(M=!0)),j--}return!!b&&(M?(function rh(h){h.visibleWrites=ta(h.allWrites,bd,Mr()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(p.snap?h.visibleWrites=Va(h.visibleWrites,p.path):Kr(p.children,Ee=>{h.visibleWrites=Va(h.visibleWrites,Ni(p.path,Ee))}),!0))}(h.pendingWriteTree_,l)){let M=new Vr(null);return null!=p.snap?M=M.set(Mr(),!0):Kr(p.children,j=>{M=M.set(new Jr(j),!0)}),Wa(h,new k(p.path,M,a))}return[]}function ml(h,l,a){return Wa(h,new ie({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,a))}function xd(h,l,a,p){const b=l._path,M=h.syncPointTree_.get(b);let j=[];if(M&&("default"===l._queryIdentifier||Ca(M,l))){const re=function Is(h,l,a,p){const b=l._queryIdentifier,M=[];let j=[];const re=Fi(h);if("default"===b)for(const[Ee,$e]of h.views.entries())j=j.concat(Ll($e,a,p)),Su($e)&&(h.views.delete(Ee),$e.query._queryParams.loadsAllData()||M.push($e.query));else{const Ee=h.views.get(b);Ee&&(j=j.concat(Ll(Ee,a,p)),Su(Ee)&&(h.views.delete(b),Ee.query._queryParams.loadsAllData()||M.push(Ee.query)))}return re&&!Fi(h)&&M.push(new(function kc(){return(0,O.hu)(nu,"Reference.ts has not been loaded"),nu}())(l._repo,l._path)),{removed:M,events:j}}(M,l,a,p);(function Fc(h){return 0===h.views.size})(M)&&(h.syncPointTree_=h.syncPointTree_.remove(b));const Ee=re.removed;j=re.events;const $e=-1!==Ee.findIndex(bt=>bt._queryParams.loadsAllData()),It=h.syncPointTree_.findOnPath(b,(bt,$t)=>Fi($t));if($e&&!It){const bt=h.syncPointTree_.subtree(b);if(!bt.isEmpty()){const $t=function tc(h){return h.fold((l,a,p)=>{if(a&&Fi(a))return[Ga(a)];{let b=[];return a&&(b=ui(a)),Kr(p,(M,j)=>{b=b.concat(j)}),b}})}(bt);for(let Tn=0;Tn<$t.length;++Tn){const tr=$t[Tn],Ui=tr.query,go=yl(h,tr);h.listenProvider_.startListening(ou(Ui),ru(h,Ui),go.hashFn,go.onComplete)}}}!It&&Ee.length>0&&!p&&($e?h.listenProvider_.stopListening(ou(l),null):Ee.forEach(bt=>{const $t=h.queryToTagMap.get(Io(bt));h.listenProvider_.stopListening(ou(bt),$t)})),function Zs(h,l){for(let a=0;a<l.length;++a){const p=l[a];if(!p._queryParams.loadsAllData()){const b=Io(p),M=h.queryToTagMap.get(b);h.queryToTagMap.delete(b),h.tagToQueryMap.delete(M)}}}(h,Ee)}return j}function za(h,l,a){const p=l._path;let b=null,M=!1;h.syncPointTree_.foreachOnPath(p,(bt,$t)=>{const Tn=ki(bt,p);b=b||gl($t,Tn),M=M||Fi($t)});let re,j=h.syncPointTree_.get(p);j?(M=M||Fi(j),b=b||gl(j,Mr())):(j=new fl,h.syncPointTree_=h.syncPointTree_.set(p,j)),null!=b?re=!0:(re=!1,b=Ae.EMPTY_NODE,h.syncPointTree_.subtree(p).foreachChild(($t,Tn)=>{const tr=gl(Tn,Mr());tr&&(b=b.updateImmediateChild($t,tr))}));const Ee=Ca(j,l);if(!Ee&&!l._queryParams.loadsAllData()){const bt=Io(l);(0,O.hu)(!h.queryToTagMap.has(bt),"View does not exist, but we have a tag");const $t=function Bc(){return ss++}();h.queryToTagMap.set(bt,$t),h.tagToQueryMap.set($t,bt)}let It=function ff(h,l,a,p,b,M){const j=Td(h,l,p,b,M);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,j),function da(h,l){h.eventRegistrations_.push(l)}(j,a),function Qu(h,l){const a=h.viewCache_.eventCache,p=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(gt,(M,j)=>{p.push(Fr(M,j))}),a.isFullyInitialized()&&p.push(Yl(a.getNode())),Nc(h,p,a.getNode(),l)}(j,a)}(j,l,a,Wu(h.pendingWriteTree_,p),b,re);if(!Ee&&!M){const bt=Xu(j,l);It=It.concat(function ch(h,l,a){const p=l._path,b=ru(h,l),M=yl(h,a),j=h.listenProvider_.startListening(ou(l),b,M.hashFn,M.onComplete),re=h.syncPointTree_.subtree(p);if(b)(0,O.hu)(!Fi(re.value),"If we're adding a query, it shouldn't be shadowed");else{const Ee=re.fold(($e,It,bt)=>{if(!gr($e)&&It&&Fi(It))return[Ga(It).query];{let $t=[];return It&&($t=$t.concat(ui(It).map(Tn=>Tn.query))),Kr(bt,(Tn,tr)=>{$t=$t.concat(tr)}),$t}});for(let $e=0;$e<Ee.length;++$e){const It=Ee[$e];h.listenProvider_.stopListening(ou(It),ru(h,It))}}return j}(h,l,bt))}return It}function Os(h,l,a){const b=h.pendingWriteTree_,M=h.syncPointTree_.findOnPath(l,(j,re)=>{const $e=gl(re,ki(j,l));if($e)return $e});return ih(b,l,M,a,!0)}function Wa(h,l){return Ju(l,h.syncPointTree_,null,Wu(h.pendingWriteTree_,Mr()))}function Ju(h,l,a,p){if(gr(h.path))return fo(h,l,a,p);{const b=l.get(Mr());null==a&&null!=b&&(a=gl(b,Mr()));let M=[];const j=Wn(h.path),re=h.operationForChild(j),Ee=l.children.get(j);if(Ee&&re){const $e=a?a.getImmediateChild(j):null,It=Yu(p,j);M=M.concat(Ju(re,Ee,$e,It))}return b&&(M=M.concat(pl(b,h,p,a))),M}}function fo(h,l,a,p){const b=l.get(Mr());null==a&&null!=b&&(a=gl(b,Mr()));let M=[];return l.children.inorderTraversal((j,re)=>{const Ee=a?a.getImmediateChild(j):null,$e=Yu(p,j),It=h.operationForChild(j);It&&(M=M.concat(fo(It,re,Ee,$e)))}),b&&(M=M.concat(pl(b,h,p,a))),M}function yl(h,l){const a=l.query,p=ru(h,a);return{hashFn:()=>(function sp(h){return h.viewCache_.serverCache.getNode()}(l)||Ae.EMPTY_NODE).hash(),onComplete:b=>{if("ok"===b)return p?function vi(h,l,a){const p=iu(h,a);if(p){const b=ec(p),M=b.path,j=b.queryId,re=ki(M,l);return su(h,M,new z(ol(j),re))}return[]}(h,a._path,p):function pf(h,l){return Wa(h,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,a._path);{const M=function zs(h,l){let a="Unknown Error";"too_big"===h?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?a="Client doesn't have permission to access the desired data.":"unavailable"===h&&(a="The service is unavailable");const p=new Error(h+" at "+l._path.toString()+": "+a);return p.code=h.toUpperCase(),p}(b,a);return xd(h,a,null,M)}}}}function ru(h,l){const a=Io(l);return h.queryToTagMap.get(a)}function Io(h){return h._path.toString()+"$"+h._queryIdentifier}function iu(h,l){return h.tagToQueryMap.get(l)}function ec(h){const l=h.indexOf("$");return(0,O.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new Jr(h.substr(0,l))}}function su(h,l,a){const p=h.syncPointTree_.get(l);return(0,O.hu)(p,"Missing sync point for query tag that we're tracking"),pl(p,a,Wu(h.pendingWriteTree_,l),null)}function ou(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function uh(){return(0,O.hu)(Cs,"Reference.ts has not been loaded"),Cs}())(h._repo,h._path):h}class Co{constructor(l){this.node_=l}getImmediateChild(l){const a=this.node_.getImmediateChild(l);return new Co(a)}node(){return this.node_}}class na{constructor(l,a){this.syncTree_=l,this.path_=a}getImmediateChild(l){const a=Ni(this.path_,l);return new na(this.syncTree_,a)}node(){return Os(this.syncTree_,this.path_)}}const nc=function(h,l,a){return h&&"object"==typeof h?((0,O.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?rc(h[".sv"],l,a):"object"==typeof h[".sv"]?Od(h[".sv"],l):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},rc=function(h,l,a){if("timestamp"===h)return a.timestamp;(0,O.hu)(!1,"Unexpected server value: "+h)},Od=function(h,l,a){h.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const p=h.increment;"number"!=typeof p&&(0,O.hu)(!1,"Unexpected increment value: "+p);const b=l.node();if((0,O.hu)(null!=b,"Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return p;const j=b.getValue();return"number"!=typeof j?p:j+p},Qs=function(h,l,a,p){return ic(l,new na(a,h),p)},xu=function(h,l,a){return ic(h,new Co(l),a)};function ic(h,l,a){const p=h.getPriority().val(),b=nc(p,l.getImmediateChild(".priority"),a);let M;if(h.isLeafNode()){const j=h,re=nc(j.getValue(),l,a);return re!==j.getValue()||b!==j.getPriority().val()?new ns(re,Yt(b)):h}{const j=h;return M=j,b!==j.getPriority().val()&&(M=M.updatePriority(new ns(b))),j.forEachChild(gt,(re,Ee)=>{const $e=ic(Ee,l.getImmediateChild(re),a);$e!==Ee&&(M=M.updateImmediateChild(re,$e))}),M}}class Pd{constructor(l="",a=null,p={children:{},childCount:0}){this.name=l,this.parent=a,this.node=p}}function Do(h,l){let a=l instanceof Jr?l:new Jr(l),p=h,b=Wn(a);for(;null!==b;){const M=(0,O.DV)(p.node.children,b)||{children:{},childCount:0};p=new Pd(b,p,M),a=or(a),b=Wn(a)}return p}function ra(h){return h.node.value}function sc(h,l){h.node.value=l,Nd(h)}function $c(h){return h.node.childCount>0}function au(h,l){Kr(h.node.children,(a,p)=>{l(new Pd(a,h,p))})}function hh(h,l,a,p){a&&!p&&l(h),au(h,b=>{hh(b,l,!0,p)}),a&&p&&l(h)}function oc(h){return new Jr(null===h.parent?h.name:oc(h.parent)+"/"+h.name)}function Nd(h){null!==h.parent&&function w(h,l,a){const p=function dh(h){return void 0===ra(h)&&!$c(h)}(a),b=(0,O.r3)(h.node.children,l);p&&b?(delete h.node.children[l],h.node.childCount--,Nd(h)):!p&&!b&&(h.node.children[l]=a.node,h.node.childCount++,Nd(h))}(h.parent,h.name,h)}const g=/[\[\].#$\/\u0000-\u001F\u007F]/,y=/[\[\].#$\u0000-\u001F\u007F]/,S=10485760,q=function(h){return"string"==typeof h&&0!==h.length&&!g.test(h)},he=function(h){return"string"==typeof h&&0!==h.length&&!y.test(h)},Tt=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Ri(h)||h&&"object"==typeof h&&(0,O.r3)(h,".sv")},nn=function(h,l,a,p){p&&void 0===l||pn((0,O.gK)(h,"value"),l,a)},pn=function(h,l,a){const p=a instanceof Jr?new Al(a,h):a;if(void 0===l)throw new Error(h+"contains undefined "+Ys(p));if("function"==typeof l)throw new Error(h+"contains a function "+Ys(p)+" with contents = "+l.toString());if(Ri(l))throw new Error(h+"contains "+l.toString()+" "+Ys(p));if("string"==typeof l&&l.length>S/3&&(0,O.ug)(l)>S)throw new Error(h+"contains a string greater than "+S+" utf8 bytes "+Ys(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let b=!1,M=!1;if(Kr(l,(j,re)=>{if(".value"===j)b=!0;else if(".priority"!==j&&".sv"!==j&&(M=!0,!q(j)))throw new Error(h+" contains an invalid key ("+j+") "+Ys(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xl(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,O.ug)(l),Bo(h)})(p,j),pn(h,re,p),function Ao(h){const l=h.parts_.pop();h.byteLength_-=(0,O.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(p)}),b&&M)throw new Error(h+' contains ".value" child '+Ys(p)+" in addition to actual children.")}},Gn=function(h,l,a,p){if(p&&void 0===l)return;const b=(0,O.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(b+" must be an object containing the children to replace.");const M=[];Kr(l,(j,re)=>{const Ee=new Jr(j);if(pn(b,re,Ni(a,Ee)),".priority"===rl(Ee)&&!Tt(re))throw new Error(b+"contains an invalid value for '"+Ee.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(Ee)}),function(h,l){let a,p;for(a=0;a<l.length;a++){p=l[a];const M=Ra(p);for(let j=0;j<M.length;j++)if((".priority"!==M[j]||j!==M.length-1)&&!q(M[j]))throw new Error(h+"contains an invalid key ("+M[j]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Jo);let b=null;for(a=0;a<l.length;a++){if(p=l[a],null!==b&&ri(b,p))throw new Error(h+"contains a path "+b.toString()+" that is ancestor of another path "+p.toString());b=p}}(b,M)},Ji=function(h,l,a){if(!a||void 0!==l){if(Ri(l))throw new Error((0,O.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Tt(l))throw new Error((0,O.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},To=function(h,l,a,p){if(!(p&&void 0===a||q(a)))throw new Error((0,O.gK)(h,l)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_l=function(h,l,a,p){if(!(p&&void 0===a||he(a)))throw new Error((0,O.gK)(h,l)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},So=function(h,l){if(".info"===Wn(l))throw new Error(h+" failed = Can't modify data under /.info/")},jc=function(h,l){const a=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!q(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==a.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),he(h)}(a))throw new Error((0,O.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class gf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ta(h,l){let a=null;for(let p=0;p<l.length;p++){const b=l[p],M=b.getPath();null!==a&&!Vo(M,a.path)&&(h.eventLists_.push(a),a=null),null===a&&(a={events:[],path:M}),a.events.push(b)}a&&h.eventLists_.push(a)}function Mu(h,l,a){Ta(h,a),Hc(h,p=>Vo(p,l))}function Wo(h,l,a){Ta(h,a),Hc(h,p=>ri(p,l)||ri(l,p))}function Hc(h,l){h.recursionDepth_++;let a=!0;for(let p=0;p<h.eventLists_.length;p++){const b=h.eventLists_[p];b&&(l(b.path)?(Gc(h.eventLists_[p]),h.eventLists_[p]=null):a=!1)}a&&(h.eventLists_=[]),h.recursionDepth_--}function Gc(h){for(let l=0;l<h.events.length;l++){const a=h.events[l];if(null!==a){h.events[l]=null;const p=a.getEventRunner();We&&Lt("event: "+a.toString()),Pr(p)}}}const ph="repo_interrupt";class mf{constructor(l,a,p,b){this.repoInfo_=l,this.forceRestClient_=a,this.authTokenProvider_=p,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bu(),this.transactionQueueTree_=new Pd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yf(h){const a=h.infoData_.getNode(new Jr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function Fd(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:yf(h)})}function gh(h,l,a,p,b){h.dataUpdateCount++;const M=new Jr(l);a=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,a):a;let j=[];if(b)if(p){const Ee=(0,O.UI)(a,$e=>Yt($e));j=function Vc(h,l,a,p){const b=iu(h,p);if(b){const M=ec(b),j=M.path,re=M.queryId,Ee=ki(j,l),$e=Vr.fromObject(a);return su(h,j,new Me(ol(re),Ee,$e))}return[]}(h.serverSyncTree_,M,Ee,b)}else{const Ee=Yt(a);j=function Md(h,l,a,p){const b=iu(h,p);if(null!=b){const M=ec(b),j=M.path,re=M.queryId,Ee=ki(j,l);return su(h,j,new ie(ol(re),Ee,a))}return[]}(h.serverSyncTree_,M,Ee,b)}else if(p){const Ee=(0,O.UI)(a,$e=>Yt($e));j=function Lc(h,l,a){const p=Vr.fromObject(a);return Wa(h,new Me({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(h.serverSyncTree_,M,Ee)}else{const Ee=Yt(a);j=ml(h.serverSyncTree_,M,Ee)}let re=M;j.length>0&&(re=Bl(h,M)),Wo(h.eventQueue_,re,j)}function mh(h,l){zc(h,"connected",l),!1===l&&function vl(h){Vl(h,"onDisconnectEvents");const l=Fd(h),a=bu();ba(h.onDisconnect_,Mr(),(b,M)=>{const j=Qs(b,M,h.serverSyncTree_,l);Rs(a,b,j)});let p=[];ba(a,Mr(),(b,M)=>{p=p.concat(ml(h.serverSyncTree_,b,M));const j=Ud(h,b);Bl(h,j)}),h.onDisconnect_=bu(),Wo(h.eventQueue_,Mr(),p)}(h)}function zc(h,l,a){const p=new Jr("/.info/"+l),b=Yt(a);h.infoData_.updateSnapshot(p,b);const M=ml(h.infoSyncTree_,p,b);Wo(h.eventQueue_,p,M)}function Rt(h){return h.nextWriteId_++}function ha(h,l,a,p,b){Vl(h,"set",{path:l.toString(),value:a,priority:p});const M=Fd(h),j=Yt(a,p),re=Os(h.serverSyncTree_,l),Ee=xu(j,re,M),$e=Rt(h),It=zo(h.serverSyncTree_,l,Ee,$e,!0);Ta(h.eventQueue_,It),h.server_.put(l.toString(),j.val(!0),($t,Tn)=>{const tr="ok"===$t;tr||Hn("set at "+l+" failed: "+$t);const Ui=Da(h.serverSyncTree_,$e,!tr);Wo(h.eventQueue_,l,Ui),El(0,b,$t,Tn)});const bt=Ud(h,l);Bl(h,bt),Wo(h.eventQueue_,bt,[])}function Ru(h,l,a){h.server_.onDisconnectCancel(l.toString(),(p,b)=>{"ok"===p&&$i(h.onDisconnect_,l),El(0,a,p,b)})}function vf(h,l,a,p){const b=Yt(a);h.server_.onDisconnectPut(l.toString(),b.val(!0),(M,j)=>{"ok"===M&&Rs(h.onDisconnect_,l,b),El(0,p,M,j)})}function Vd(h,l,a){let p;p=".info"===Wn(l._path)?xd(h.infoSyncTree_,l,a):xd(h.serverSyncTree_,l,a),Mu(h.eventQueue_,l._path,p)}function oo(h){h.persistentConnection_&&h.persistentConnection_.interrupt(ph)}function Vl(h,...l){let a="";h.persistentConnection_&&(a=h.persistentConnection_.id+":"),Lt(a,...l)}function El(h,l,a,p){l&&Pr(()=>{if("ok"===a)l(null);else{const b=(a||"error").toUpperCase();let M=b;p&&(M+=": "+p);const j=new Error(M);j.code=b,l(j)}})}function lc(h,l,a){return Os(h.serverSyncTree_,l,a)||Ae.EMPTY_NODE}function Bd(h,l=h.transactionQueueTree_){if(l||$d(h,l),ra(l)){const a=uc(h,l);(0,O.hu)(a.length>0,"Sending zero length transaction queue"),a.every(b=>0===b.status)&&function vh(h,l,a){const p=a.map($e=>$e.currentWriteId),b=lc(h,l,p);let M=b;const j=b.hash();for(let $e=0;$e<a.length;$e++){const It=a[$e];(0,O.hu)(0===It.status,"tryToSendTransactionQueue_: items in queue should all be run."),It.status=1,It.retryCount++;const bt=ki(l,It.path);M=M.updateChild(bt,It.currentOutputSnapshotRaw)}const re=M.val(!0),Ee=l;h.server_.put(Ee.toString(),re,$e=>{Vl(h,"transaction put response",{path:Ee.toString(),status:$e});let It=[];if("ok"===$e){const bt=[];for(let $t=0;$t<a.length;$t++)a[$t].status=2,It=It.concat(Da(h.serverSyncTree_,a[$t].currentWriteId)),a[$t].onComplete&&bt.push(()=>a[$t].onComplete(null,!0,a[$t].currentOutputSnapshotResolved)),a[$t].unwatcher();$d(h,Do(h.transactionQueueTree_,l)),Bd(h,h.transactionQueueTree_),Wo(h.eventQueue_,l,It);for(let $t=0;$t<bt.length;$t++)Pr(bt[$t])}else{if("datastale"===$e)for(let bt=0;bt<a.length;bt++)a[bt].status=3===a[bt].status?4:0;else{Hn("transaction at "+Ee.toString()+" failed: "+$e);for(let bt=0;bt<a.length;bt++)a[bt].status=4,a[bt].abortReason=$e}Bl(h,l)}},j)}(h,oc(l),a)}else $c(l)&&au(l,a=>{Bd(h,a)})}function Bl(h,l){const a=qa(h,l),p=oc(a);return function lu(h,l,a){if(0===l.length)return;const p=[];let b=[];const j=l.filter(re=>0===re.status).map(re=>re.currentWriteId);for(let re=0;re<l.length;re++){const Ee=l[re],$e=ki(a,Ee.path);let bt,It=!1;if((0,O.hu)(null!==$e,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ee.status)It=!0,bt=Ee.abortReason,b=b.concat(Da(h.serverSyncTree_,Ee.currentWriteId,!0));else if(0===Ee.status)if(Ee.retryCount>=25)It=!0,bt="maxretry",b=b.concat(Da(h.serverSyncTree_,Ee.currentWriteId,!0));else{const $t=lc(h,Ee.path,j);Ee.currentInputSnapshot=$t;const Tn=l[re].update($t.val());if(void 0!==Tn){pn("transaction failed: Data returned ",Tn,Ee.path);let tr=Yt(Tn);"object"==typeof Tn&&null!=Tn&&(0,O.r3)(Tn,".priority")||(tr=tr.updatePriority($t.getPriority()));const go=Ee.currentWriteId,du=Fd(h),Il=xu(tr,$t,du);Ee.currentOutputSnapshotRaw=tr,Ee.currentOutputSnapshotResolved=Il,Ee.currentWriteId=Rt(h),j.splice(j.indexOf(go),1),b=b.concat(zo(h.serverSyncTree_,Ee.path,Il,Ee.currentWriteId,Ee.applyLocally)),b=b.concat(Da(h.serverSyncTree_,go,!0))}else It=!0,bt="nodata",b=b.concat(Da(h.serverSyncTree_,Ee.currentWriteId,!0))}Wo(h.eventQueue_,a,b),b=[],It&&(l[re].status=2,setTimeout(l[re].unwatcher,Math.floor(0)),l[re].onComplete&&p.push("nodata"===bt?()=>l[re].onComplete(null,!1,l[re].currentInputSnapshot):()=>l[re].onComplete(new Error(bt),!1,null)))}$d(h,h.transactionQueueTree_);for(let re=0;re<p.length;re++)Pr(p[re]);Bd(h,h.transactionQueueTree_)}(h,uc(h,a),p),p}function qa(h,l){let a,p=h.transactionQueueTree_;for(a=Wn(l);null!==a&&void 0===ra(p);)p=Do(p,a),a=Wn(l=or(l));return p}function uc(h,l){const a=[];return cc(h,l,a),a.sort((p,b)=>p.order-b.order),a}function cc(h,l,a){const p=ra(l);if(p)for(let b=0;b<p.length;b++)a.push(p[b]);au(l,b=>{cc(h,b,a)})}function $d(h,l){const a=ra(l);if(a){let p=0;for(let b=0;b<a.length;b++)2!==a[b].status&&(a[p]=a[b],p++);a.length=p,sc(l,a.length>0?a:void 0)}au(l,p=>{$d(h,p)})}function Ud(h,l){const a=oc(qa(h,l)),p=Do(h.transactionQueueTree_,l);return function fh(h,l,a){let p=a?h:h.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,b=>{Wc(h,b)}),Wc(h,p),hh(p,b=>{Wc(h,b)}),a}function Wc(h,l){const a=ra(l);if(a){const p=[];let b=[],M=-1;for(let j=0;j<a.length;j++)3===a[j].status||(1===a[j].status?((0,O.hu)(M===j-1,"All SENT items should be at beginning of queue."),M=j,a[j].status=3,a[j].abortReason="set"):((0,O.hu)(0===a[j].status,"Unexpected transaction status in abort"),a[j].unwatcher(),b=b.concat(Da(h.serverSyncTree_,a[j].currentWriteId,!0)),a[j].onComplete&&p.push(a[j].onComplete.bind(null,new Error("set"),!1,null))));-1===M?sc(l,void 0):a.length=M+1,Wo(h.eventQueue_,oc(l),b);for(let j=0;j<p.length;j++)Pr(p[j])}}const bf=function(h,l){const a=wf(h),p=a.namespace;return"firebase.com"===a.domain&&xr(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==a.domain&&xr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ft(a.host,a.secure,p,l,"ws"===a.scheme||"wss"===a.scheme,"",p!==a.subdomain),path:new Jr(a.pathString)}},wf=function(h){let l="",a="",p="",b="",M="",j=!0,re="https",Ee=443;if("string"==typeof h){let $e=h.indexOf("//");$e>=0&&(re=h.substring(0,$e-1),h=h.substring($e+2));let It=h.indexOf("/");-1===It&&(It=h.length);let bt=h.indexOf("?");-1===bt&&(bt=h.length),l=h.substring(0,Math.min(It,bt)),It<bt&&(b=function Eh(h){let l="";const a=h.split("/");for(let p=0;p<a.length;p++)if(a[p].length>0){let b=a[p];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(M){}l+="/"+b}return l}(h.substring(It,bt)));const $t=function ap(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const a of h.split("&")){if(0===a.length)continue;const p=a.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Hn(`Invalid query segment '${a}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,bt)));$e=l.indexOf(":"),$e>=0?(j="https"===re||"wss"===re,Ee=parseInt(l.substring($e+1),10)):$e=l.length;const Tn=l.slice(0,$e);if("localhost"===Tn.toLowerCase())a="localhost";else if(Tn.split(".").length<=2)a=Tn;else{const tr=l.indexOf(".");p=l.substring(0,tr).toLowerCase(),a=l.substring(tr+1),M=p}"ns"in $t&&(M=$t.ns)}return{host:l,port:Ee,domain:a,subdomain:p,secure:j,scheme:re,pathString:b,namespace:M}};class bh{constructor(l,a,p,b){this.eventType=l,this.eventRegistration=a,this.snapshot=p,this.prevName=b}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class dc{constructor(l,a,p){this.eventRegistration=l,this.error=a,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hc{constructor(l,a){this.snapshotCallback=l,this.cancelCallback=a}onValue(l,a){this.snapshotCallback.call(null,l,a)}onCancel(l){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class lp{constructor(l,a){this._repo=l,this._path=a}cancel(){const l=new O.BH;return Ru(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){So("OnDisconnect.remove",this._path);const l=new O.BH;return vf(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){So("OnDisconnect.set",this._path),nn("OnDisconnect.set",l,this._path,!1);const a=new O.BH;return vf(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}setWithPriority(l,a){So("OnDisconnect.setWithPriority",this._path),nn("OnDisconnect.setWithPriority",l,this._path,!1),Ji("OnDisconnect.setWithPriority",a,!1);const p=new O.BH;return function ac(h,l,a,p,b){const M=Yt(a,p);h.server_.onDisconnectPut(l.toString(),M.val(!0),(j,re)=>{"ok"===j&&Rs(h.onDisconnect_,l,M),El(0,b,j,re)})}(this._repo,this._path,l,a,p.wrapCallback(()=>{})),p.promise}update(l){So("OnDisconnect.update",this._path),Gn("OnDisconnect.update",l,this._path,!1);const a=new O.BH;return function Ld(h,l,a,p){if((0,O.xb)(a))return Lt("onDisconnect().update() called with empty data.  Don't do anything."),void El(0,p,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),a,(b,M)=>{"ok"===b&&Kr(a,(j,re)=>{const Ee=Yt(re);Rs(h.onDisconnect_,Ni(l,j),Ee)}),El(0,p,b,M)})}(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}}class Ds{constructor(l,a,p,b){this._repo=l,this._path=a,this._queryParams=p,this._orderByCalled=b}get key(){return gr(this._path)?null:rl(this._path)}get ref(){return new ia(this._repo,this._path)}get _queryIdentifier(){const l=Eu(this._queryParams),a=Bi(l);return"{}"===a?"default":a}get _queryObject(){return Eu(this._queryParams)}isEqual(l){if(!((l=(0,O.m9)(l))instanceof Ds))return!1;const a=this._repo===l._repo,p=Vo(this._path,l._path);return a&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vu(h){let l="";for(let a=h.pieceNum_;a<h.pieces_.length;a++)""!==h.pieces_[a]&&(l+="/"+encodeURIComponent(String(h.pieces_[a])));return l||"/"}(this._path)}}function wh(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function uu(h){let l=null,a=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(a=h.getIndexEndValue()),h.getIndex()===Uo){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",b="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Zi)throw new Error(p);if("string"!=typeof l)throw new Error(b)}if(h.hasEnd()){if(h.getIndexEndName()!==wi)throw new Error(p);if("string"!=typeof a)throw new Error(b)}}else if(h.getIndex()===gt){if(null!=l&&!Tt(l)||null!=a&&!Tt(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(h.getIndex()instanceof jr||h.getIndex()===ar,"unknown index type."),null!=l&&"object"==typeof l||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ih(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ia extends Ds{constructor(l,a){super(l,a,new Mo,!1)}get parent(){const l=Oa(this._path);return null===l?null:new ia(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class fa{constructor(l,a,p){this._node=l,this.ref=a,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const a=new Jr(l),p=fc(this.ref,l);return new fa(this._node.getChild(a),p,gt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,b)=>l(new fa(b,fc(this.ref,p),gt)))}hasChild(l){const a=new Jr(l);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ou(h,l){return(h=(0,O.m9)(h))._checkNotDeleted("ref"),void 0!==l?fc(h._root,l):h._root}function Ch(h,l){(h=(0,O.m9)(h))._checkNotDeleted("refFromURL");const a=bf(l,h._repo.repoInfo_.nodeAdmin);jc("refFromURL",a);const p=a.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&p.host!==h._repo.repoInfo_.host&&xr("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+h._repo.repoInfo_.host+")"),Ou(h,a.path.toString())}function fc(h,l){return null===Wn((h=(0,O.m9)(h))._path)?(a=l,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),_l("child","path",a,!1)):_l("child","path",l,!1),new ia(h._repo,Ni(h._path,l));var a}function Dh(h,l){h=(0,O.m9)(h),So("set",h._path),nn("set",l,h._path,!1);const a=new O.BH;return ha(h._repo,h._path,l,null,a.wrapCallback(()=>{})),a.promise}function pc(h,l){Gn("update",l,h._path,!1);const a=new O.BH;return function op(h,l,a,p){Vl(h,"update",{path:l.toString(),value:a});let b=!0;const M=Fd(h),j={};if(Kr(a,(re,Ee)=>{b=!1,j[re]=Qs(Ni(l,re),Yt(Ee),h.serverSyncTree_,M)}),b)Lt("update() called with empty data.  Don't do anything."),El(0,p,"ok",void 0);else{const re=Rt(h),Ee=function Ad(h,l,a,p){!function uf(h,l,a,p){(0,O.hu)(p>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:a,writeId:p,visible:!0}),h.visibleWrites=Nl(h.visibleWrites,l,a),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p);const b=Vr.fromObject(a);return Wa(h,new Me({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,b))}(h.serverSyncTree_,l,j,re);Ta(h.eventQueue_,Ee),h.server_.merge(l.toString(),a,($e,It)=>{const bt="ok"===$e;bt||Hn("update at "+l+" failed: "+$e);const $t=Da(h.serverSyncTree_,re,!bt),Tn=$t.length>0?Bl(h,l):l;Wo(h.eventQueue_,Tn,$t),El(0,p,$e,It)}),Kr(a,$e=>{const It=Ud(h,Ni(l,$e));Bl(h,It)}),Wo(h.eventQueue_,l,[])}}(h._repo,h._path,l,a.wrapCallback(()=>{})),a.promise}function pa(h){return function yh(h,l){const a=function Au(h,l){const a=l._path;let p=null;h.syncPointTree_.foreachOnPath(a,($e,It)=>{const bt=ki($e,a);p=p||gl(It,bt)});let b=h.syncPointTree_.get(a);b?p=p||gl(b,Mr()):(b=new fl,h.syncPointTree_=h.syncPointTree_.set(a,b));const M=null!=p,j=M?new it(p,!0,!1):null;return function Hs(h){return Wr(h.viewCache_)}(Td(b,l,Wu(h.pendingWriteTree_,l._path),M?j.getNode():Ae.EMPTY_NODE,M))}(h.serverSyncTree_,l);return null!=a?Promise.resolve(a):h.server_.get(l).then(p=>{const b=Yt(p).withIndex(l._queryParams.getIndex()),M=ml(h.serverSyncTree_,l._path,b);return Mu(h.eventQueue_,l._path,M),Promise.resolve(b)},p=>(Vl(h,"get for query "+(0,O.Pz)(l)+" failed: "+p),Promise.reject(new Error(p))))}((h=(0,O.m9)(h))._repo,h).then(l=>new fa(l,new ia(h._repo,h._path),h._queryParams.getIndex()))}class Yc{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,a){const p=a._queryParams.getIndex();return new bh("value",this,new fa(l.snapshotNode,new ia(a._repo,a._path),p))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new dc(this,l,a):null}matches(l){return l instanceof Yc&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Po{constructor(l,a){this.eventType=l,this.callbackContext=a}respondsTo(l){let a="children_added"===l?"child_added":l;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new dc(this,l,a):null}createEvent(l,a){(0,O.hu)(null!=l.childName,"Child events should have a childName.");const p=fc(new ia(a._repo,a._path),l.childName),b=a._queryParams.getIndex();return new bh(l.type,this,new fa(l.snapshotNode,p,b),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof Po&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pu(h,l,a,p,b){let M;if("object"==typeof p&&(M=void 0,b=p),"function"==typeof p&&(M=p),b&&b.onlyOnce){const Ee=a,$e=(It,bt)=>{Vd(h._repo,h,re),Ee(It,bt)};$e.userCallback=a.userCallback,$e.context=a.context,a=$e}const j=new hc(a,M||void 0),re="value"===l?new Yc(j):new Po(l,j);return function Ef(h,l,a){let p;p=".info"===Wn(l._path)?za(h.infoSyncTree_,l,a):za(h.serverSyncTree_,l,a),Mu(h.eventQueue_,l._path,p)}(h._repo,h,re),()=>Vd(h._repo,h,re)}function ga(h,l,a,p){return Pu(h,"value",l,a,p)}function Kc(h,l,a,p){return Pu(h,"child_added",l,a,p)}function Th(h,l,a,p){return Pu(h,"child_changed",l,a,p)}function wl(h,l,a,p){return Pu(h,"child_moved",l,a,p)}function Zc(h,l,a,p){return Pu(h,"child_removed",l,a,p)}function Sh(h,l,a){let p=null;const b=a?new hc(a):null;"value"===l?p=new Yc(b):l&&(p=new Po(l,b)),Vd(h._repo,h,p)}class qo{}class jd extends qo{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){nn("endAt",this._value,l._path,!0);const a=Pl(l._queryParams,this._value,this._key);if(Ih(a),uu(a),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ds(l._repo,l._path,a,l._orderByCalled)}}class Ah extends qo{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){nn("endBefore",this._value,l._path,!1);const a=function io(h,l,a){let p,b;return h.index_===Uo?("string"==typeof l&&(l=vd(l)),b=Pl(h,l,a)):(p=null==a?Zi:vd(a),b=Pl(h,l,p)),b.endBeforeSet_=!0,b}(l._queryParams,this._value,this._key);if(Ih(a),uu(a),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ds(l._repo,l._path,a,l._orderByCalled)}}class Ul extends qo{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){nn("startAt",this._value,l._path,!0);const a=xs(l._queryParams,this._value,this._key);if(Ih(a),uu(a),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ds(l._repo,l._path,a,l._orderByCalled)}}class cp extends qo{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){nn("startAfter",this._value,l._path,!1);const a=function js(h,l,a){let p;if(h.index_===Uo)"string"==typeof l&&(l=il(l)),p=xs(h,l,a);else{let b;b=null==a?wi:il(a),p=xs(h,l,b)}return p.startAfterSet_=!0,p}(l._queryParams,this._value,this._key);if(Ih(a),uu(a),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ds(l._repo,l._path,a,l._orderByCalled)}}class fg extends qo{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ds(l._repo,l._path,function Na(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="l",a}(l._queryParams,this._limit),l._orderByCalled)}}class dp extends qo{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ds(l._repo,l._path,function sl(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="r",a}(l._queryParams,this._limit),l._orderByCalled)}}class hp extends qo{constructor(l){super(),this._path=l}_apply(l){wh(l,"orderByChild");const a=new Jr(this._path);if(gr(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new jr(a),b=Ms(l._queryParams,p);return uu(b),new Ds(l._repo,l._path,b,!0)}}class fp extends qo{_apply(l){wh(l,"orderByKey");const a=Ms(l._queryParams,Uo);return uu(a),new Ds(l._repo,l._path,a,!0)}}class gc extends qo{_apply(l){wh(l,"orderByPriority");const a=Ms(l._queryParams,gt);return uu(a),new Ds(l._repo,l._path,a,!0)}}class gg extends qo{_apply(l){wh(l,"orderByValue");const a=Ms(l._queryParams,ar);return uu(a),new Ds(l._repo,l._path,a,!0)}}class Hm extends qo{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){if(nn("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jd(this._value,this._key)._apply(new Ul(this._value,this._key)._apply(l))}}function Ya(h,...l){let a=(0,O.m9)(h);for(const p of l)a=p._apply(a);return a}(function hf(h){(0,O.hu)(!nu,"__referenceConstructor has already been defined"),nu=h})(ia),function Wi(h){(0,O.hu)(!Cs,"__referenceConstructor has already been defined"),Cs=h}(ia);const Qc={};function _g(h,l,a,p,b){let M=p||h.options.databaseURL;void 0===M&&(h.options.projectId||xr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lt("Using default host for project ",h.options.projectId),M=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Ee,$e,j=bf(M,b),re=j.repoInfo;"undefined"!=typeof process&&($e=process.env.FIREBASE_DATABASE_EMULATOR_HOST),$e?(Ee=!0,M=`http://${$e}?ns=${re.namespace}`,j=bf(M,b),re=j.repoInfo):Ee=!j.repoInfo.secure;const It=b&&Ee?new ys(ys.OWNER):new cs(h.name,h.options,l);jc("Invalid Firebase Database URL",j),gr(j.path)||xr("Database URL must point to the root of a Firebase Database (not including a child path).");const bt=function Mh(h,l,a,p){let b=Qc[l.name];b||(b={},Qc[l.name]=b);let M=b[h.toURLString()];return M&&xr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new mf(h,false,a,p),b[h.toURLString()]=M,M}(re,h,It,new vo(h.name,a));return new Sf(bt,h)}class Sf{constructor(l,a){this._repoInternal=l,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dg(h,l,a){if(h.stats_=hi(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new an(h.repoInfo_,(p,b,M,j)=>{gh(h,p,b,M,j)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>mh(h,!0),0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(a)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}h.persistentConnection_=new $o(h.repoInfo_,l,(p,b,M,j)=>{gh(h,p,b,M,j)},p=>{mh(h,p)},p=>{!function _f(h,l){Kr(l,(a,p)=>{zc(h,a,p)})}(h,p)},h.authTokenProvider_,h.appCheckProvider_,a),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(p=>{h.server_.refreshAuthToken(p)}),h.appCheckProvider_.addTokenChangeListener(p=>{h.server_.refreshAppCheckToken(p.token)}),h.statsReporter_=function oi(h,l){const a=h.toString();return pr[a]||(pr[a]=l()),pr[a]}(h.repoInfo_,()=>new wu(h.stats_,h.server_)),h.infoData_=new Ed,h.infoSyncTree_=new Sd({startListening:(p,b,M,j)=>{let re=[];const Ee=h.infoData_.getNode(p._path);return Ee.isEmpty()||(re=ml(h.infoSyncTree_,p._path,Ee),setTimeout(()=>{j("ok")},0)),re},stopListening:()=>{}}),zc(h,"connected",!1),h.serverSyncTree_=new Sd({startListening:(p,b,M,j)=>(h.server_.listen(p,M,b,(re,Ee)=>{const $e=j(re,Ee);Wo(h.eventQueue_,p._path,$e)}),[]),stopListening:(p,b)=>{h.server_.unlisten(p,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ia(this._repo,Mr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jl(h,l){const a=Qc[l];(!a||a[h.key]!==h)&&xr(`Database ${l}(${h.repoInfo_}) has already been deleted.`),oo(h),delete a[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&xr("Cannot call "+l+" on a deleted database.")}}function Nu(h,l){Ot(h,l)}const Eg={".sv":"timestamp"};class Oh{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}$o.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},$o.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function Mf(h){xt(fe.SDK_VERSION),(0,fe._registerComponent)(new di.wA("database",(l,{instanceIdentifier:a})=>_g(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Ge,"0.12.7",h),(0,fe.registerVersion)(Ge,"0.12.7","esm2017")}();const Fu=new Se.Yd("@firebase/database-compat"),Jc=function(h){Fu.warn("FIREBASE WARNING: "+h)};class yp{constructor(l){this._delegate=l}cancel(l){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",l,!0);const a=this._delegate.cancel();return l&&a.then(()=>l(null),p=>l(p)),a}remove(l){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",l,!0);const a=this._delegate.remove();return l&&a.then(()=>l(null),p=>l(p)),a}set(l,a){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",a,!0);const p=this._delegate.set(l);return a&&p.then(()=>a(null),b=>a(b)),p}setWithPriority(l,a,p){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const b=this._delegate.setWithPriority(l,a);return p&&b.then(()=>p(null),M=>p(M)),b}update(l,a){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let M=0;M<l.length;++M)b[""+M]=l[M];l=b,Jc("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",a,!0);const p=this._delegate.update(l);return a&&p.then(()=>a(null),b=>a(b)),p}}class Nh{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class os{constructor(l,a){this._database=l,this._delegate=a}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),_l("DataSnapshot.child","path",l,!1),new os(this._database,this._delegate.child(l))}hasChild(l){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_l("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(a=>l(new os(this._database,a)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ma(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class po{constructor(l,a){this.database=l,this._delegate=a}on(l,a,p,b){var M;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",a,!1);const j=po.getCancelAndContextArgs_("Query.on",p,b),re=($e,It)=>{a.call(j.context,new os(this.database,$e),It)};re.userCallback=a,re.context=j.context;const Ee=null===(M=j.cancel)||void 0===M?void 0:M.bind(j.context);switch(l){case"value":return ga(this._delegate,re,Ee),a;case"child_added":return Kc(this._delegate,re,Ee),a;case"child_removed":return Zc(this._delegate,re,Ee),a;case"child_changed":return Th(this._delegate,re,Ee),a;case"child_moved":return wl(this._delegate,re,Ee),a;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,a,p){if((0,O.Dv)("Query.off",0,3,arguments.length),function(h,l,a){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,O.Wj)("Query.off","callback",a,!0),(0,O.lb)("Query.off","context",p,!0),a){const b=()=>{};b.userCallback=a,b.context=p,Sh(this._delegate,l,b)}else Sh(this._delegate,l)}get(){return pa(this._delegate).then(l=>new os(this.database,l))}once(l,a,p,b){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",a,!0);const M=po.getCancelAndContextArgs_("Query.once",p,b),j=new O.BH,re=($e,It)=>{const bt=new os(this.database,$e);a&&a.call(M.context,bt,It),j.resolve(bt)};re.userCallback=a,re.context=M.context;const Ee=$e=>{M.cancel&&M.cancel.call(M.context,$e),j.reject($e)};switch(l){case"value":ga(this._delegate,re,Ee,{onlyOnce:!0});break;case"child_added":Kc(this._delegate,re,Ee,{onlyOnce:!0});break;case"child_removed":Zc(this._delegate,re,Ee,{onlyOnce:!0});break;case"child_changed":Th(this._delegate,re,Ee,{onlyOnce:!0});break;case"child_moved":wl(this._delegate,re,Ee,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return j.promise}limitToFirst(l){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new po(this.database,Ya(this._delegate,function pg(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fg(h)}(l)))}limitToLast(l){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new po(this.database,Ya(this._delegate,function Df(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dp(h)}(l)))}orderByChild(l){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new po(this.database,Ya(this._delegate,function jm(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _l("orderByChild","path",h,!1),new hp(h)}(l)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new po(this.database,Ya(this._delegate,function Tf(){return new fp}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new po(this.database,Ya(this._delegate,function mc(){return new gc}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new po(this.database,Ya(this._delegate,function mg(){return new gg}()))}startAt(l=null,a){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new po(this.database,Ya(this._delegate,function up(h=null,l){return To("startAt","key",l,!0),new Ul(h,l)}(l,a)))}startAfter(l=null,a){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new po(this.database,Ya(this._delegate,function hg(h,l){return To("startAfter","key",l,!0),new cp(h,l)}(l,a)))}endAt(l=null,a){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new po(this.database,Ya(this._delegate,function cu(h,l){return To("endAt","key",l,!0),new jd(h,l)}(l,a)))}endBefore(l=null,a){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new po(this.database,Ya(this._delegate,function $l(h,l){return To("endBefore","key",l,!0),new Ah(h,l)}(l,a)))}equalTo(l,a){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new po(this.database,Ya(this._delegate,function yg(h,l){return To("equalTo","key",l,!0),new Hm(h,l)}(l,a)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof po))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,a,p){const b={cancel:void 0,context:void 0};if(a&&p)b.cancel=a,(0,O.Wj)(l,"cancel",b.cancel,!0),b.context=p,(0,O.lb)(l,"context",b.context,!0);else if(a)if("object"==typeof a&&null!==a)b.context=a;else{if("function"!=typeof a)throw new Error((0,O.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");b.cancel=a}return b}get ref(){return new ma(this.database,new ia(this._delegate._repo,this._delegate._path))}}class ma extends po{constructor(l,a){super(l,new Ds(a._repo,a._path,new Mo,!1)),this.database=l,this._delegate=a}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new ma(this.database,fc(this._delegate,l))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new ma(this.database,l):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ma(this.database,this._delegate.root)}set(l,a){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",a,!0);const p=Dh(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}update(l,a){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let M=0;M<l.length;++M)b[""+M]=l[M];l=b,Jc("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}So("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",a,!0);const p=pc(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}setWithPriority(l,a,p){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",p,!0);const b=function qc(h,l,a){if(So("setWithPriority",h._path),nn("setWithPriority",l,h._path,!1),Ji("setWithPriority",a,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const p=new O.BH;return ha(h._repo,h._path,l,a,p.wrapCallback(()=>{})),p.promise}(this._delegate,l,a);return p&&b.then(()=>p(null),M=>p(M)),b}remove(l){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",l,!0);const a=function Cr(h){return So("remove",h._path),Dh(h,null)}(this._delegate);return l&&a.then(()=>l(null),p=>l(p)),a}transaction(l,a,p){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,O.Wj)("Reference.transaction","onComplete",a,!0),function(h,l,a,p){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const b=function Ph(h,l,a){var p;if(h=(0,O.m9)(h),So("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const b=null===(p=null==a?void 0:a.applyLocally)||void 0===p||p,M=new O.BH,re=ga(h,()=>{});return function bl(h,l,a,p,b,M){Vl(h,"transaction on "+l);const j={path:l,update:a,onComplete:p,status:null,order:gi(),applyLocally:M,retryCount:0,unwatcher:b,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},re=lc(h,l,void 0);j.currentInputSnapshot=re;const Ee=j.update(re.val());if(void 0===Ee)j.unwatcher(),j.currentOutputSnapshotRaw=null,j.currentOutputSnapshotResolved=null,j.onComplete&&j.onComplete(null,!1,j.currentInputSnapshot);else{pn("transaction failed: Data returned ",Ee,j.path),j.status=0;const $e=Do(h.transactionQueueTree_,l),It=ra($e)||[];let bt;It.push(j),sc($e,It),"object"==typeof Ee&&null!==Ee&&(0,O.r3)(Ee,".priority")?(bt=(0,O.DV)(Ee,".priority"),(0,O.hu)(Tt(bt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):bt=(Os(h.serverSyncTree_,l)||Ae.EMPTY_NODE).getPriority().val();const $t=Fd(h),Tn=Yt(Ee,bt),tr=xu(Tn,re,$t);j.currentOutputSnapshotRaw=Tn,j.currentOutputSnapshotResolved=tr,j.currentWriteId=Rt(h);const Ui=zo(h.serverSyncTree_,l,tr,j.currentWriteId,j.applyLocally);Wo(h.eventQueue_,l,Ui),Bd(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(Ee,$e,It)=>{let bt=null;Ee?M.reject(Ee):(bt=new fa(It,new ia(h._repo,h._path),gt),M.resolve(new Oh($e,bt)))},re,b),M.promise}(this._delegate,l,{applyLocally:p}).then(M=>new Nh(M.committed,new os(this.database,M.snapshot)));return a&&b.then(M=>a(null,M.committed,M.snapshot),M=>a(M,!1,null)),b}setPriority(l,a){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",a,!0);const p=function Cf(h,l){h=(0,O.m9)(h),So("setPriority",h._path),Ji("setPriority",l,!1);const a=new O.BH;return ha(h._repo,Ni(h._path,".priority"),l,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}push(l,a){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",a,!0);const p=function If(h,l){h=(0,O.m9)(h),So("push",h._path),nn("push",l,h._path,!0);const a=yf(h._repo),p=rs(a),b=fc(h,p),M=fc(h,p);let j;return j=null!=l?Dh(M,l).then(()=>M):Promise.resolve(M),b.then=j.then.bind(j),b.catch=j.then.bind(j,void 0),b}(this._delegate,l),b=p.then(j=>new ma(this.database,j));a&&b.then(()=>a(null),j=>a(j));const M=new ma(this.database,p);return M.then=b.then.bind(b),M.catch=b.catch.bind(b,void 0),M}onDisconnect(){return So("Reference.onDisconnect",this._delegate._path),new yp(new lp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vu{constructor(l,a){this._delegate=l,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(l,a,p={}){!function Rh(h,l,a,p={}){(h=(0,O.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&xr("Cannot call useEmulator() after instance has already been initialized.");const b=h._repoInternal;let M;if(b.repoInfo_.nodeAdmin)p.mockUserToken&&xr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new ys(ys.OWNER);else if(p.mockUserToken){const j="string"==typeof p.mockUserToken?p.mockUserToken:(0,O.Sg)(p.mockUserToken,h.app.options.projectId);M=new ys(j)}!function gp(h,l,a,p){h.repoInfo_=new Ft(`${l}:${a}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),p&&(h.authTokenProvider_=p)}(b,l,a,M)}(this._delegate,l,a,p)}ref(l){if((0,O.Dv)("database.ref",0,1,arguments.length),l instanceof ma){const a=Ch(this._delegate,l.toString());return new ma(this,a)}{const a=Ou(this._delegate,l);return new ma(this,a)}}refFromURL(l){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const p=Ch(this._delegate,l);return new ma(this,p)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function xf(h){(h=(0,O.m9)(h))._checkNotDeleted("goOffline"),oo(h._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function mp(h){(h=(0,O.m9)(h))._checkNotDeleted("goOnline"),function _h(h){h.persistentConnection_&&h.persistentConnection_.resume(ph)}(h._repo)}(this._delegate)}}Vu.ServerValue={TIMESTAMP:function ku(){return Eg}(),increment:h=>function Xc(h){return{".sv":{increment:h}}}(h)};var _p=Object.freeze({__proto__:null,initStandalone:function Ig({app:h,url:l,version:a,customAuthImpl:p,namespace:b,nodeAdmin:M=!1}){xt(a);const j=new di.zt("auth-internal",new di.H0("database-standalone"));return j.setComponent(new di.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Vu(_g(h,j,void 0,l,M),h),namespace:b}}});const Gm=Vu.ServerValue;!function kh(h){h.INTERNAL.registerComponent(new di.wA("database-compat",(l,{instanceIdentifier:a})=>{const p=l.getProvider("app-compat").getImmediate(),b=l.getProvider("database").getImmediate({identifier:a});return new Vu(b,p)},"PUBLIC").setServiceProps({Reference:ma,Query:po,Database:Vu,DataSnapshot:os,enableLogging:Nu,INTERNAL:_p,ServerValue:Gm}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.1.7")}(Mi.Z);var Of=H(440),vp=H(127);function ed(h){return null==h}function No(h){return"function"==typeof h.set}function Vh(h,l){return No(l)?l:h.ref(l)}function Bh(h,l){if(function Fh(h){return"string"==typeof h}(h))return l.stringCase();if(No(h))return l.firebaseCase();if(function Lh(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function td(h,l,a="on",p=Or.z){return new _i.y(b=>{let M=null;return M=h[a](l,(j,re)=>{p.schedule(()=>{b.next({snapshot:j,prevKey:re})}),"once"===a&&p.schedule(()=>b.complete())},j=>{p.schedule(()=>b.error(j))}),"on"===a?{unsubscribe(){null!=M&&h.off(l,M)}}:{unsubscribe(){}}}).pipe((0,Bn.U)(b=>{const{snapshot:M,prevKey:j}=b;let re=null;return M.exists()&&(re=M.key),{type:l,payload:M,prevKey:j,key:re}}),(0,vn.B)())}function Pf(h,l){const a=h.length;for(let p=0;p<a;p++)if(h[p].payload.key===l)return p;return-1}function Tg(h,l){const{payload:a,prevKey:p,key:b}=l,M=Pf(h,b),j=function Dg(h,l){if(ed(l))return 0;{const a=Pf(h,l);return-1===a?h.length:a+1}}(h,p);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let re=null;l.payload.forEach(Ee=>{const $e={payload:Ee,type:"value",prevKey:re,key:Ee.key};return re=Ee.key,h=[...h,$e],!1})}return h;case"child_added":if(M>-1){const re=h[M-1];(re&&re.key||null)!==p&&(h=h.filter(Ee=>Ee.payload.key!==a.key)).splice(j,0,l)}else{if(null==p)return[l,...h];(h=h.slice()).splice(j,0,l)}return h;case"child_removed":return h.filter(re=>re.payload.key!==a.key);case"child_changed":return h.map(re=>re.payload.key===b?l:re);case"child_moved":if(M>-1){const re=h.splice(M,1)[0];return(h=h.slice()).splice(j,0,re),h}return h;default:return h}}function $h(h){return(ed(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Nf(h,l,a){return function Cg(h,l,a){return td(h,"value","once",a).pipe((0,sr.w)(p=>{const b=[(0,$r.of)(p)];return l.forEach(M=>b.push(td(h,M,"on",a))),(0,At.T)(...b).pipe((0,hr.R)(Tg,[]))}),(0,ti.x)())}(h,l=$h(l),a)}function kf(h,l,a){const p=(l=$h(l)).map(b=>td(h,b,"on",a));return(0,At.T)(...p)}function Ff(h,l){return function(p,b){return Bh(p,{stringCase:()=>h.child(p)[l](b),firebaseCase:()=>p[l](b),snapshotCase:()=>p.ref[l](b)})}}function Ep(h){return function(a){return a?Bh(a,{stringCase:()=>h.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):h.remove()}}function bp(h,l){return function(){return td(h,"value","on",l)}}const Ip=new se.OlP("angularfire2.realtimeDatabaseURL"),zd=new se.OlP("angularfire2.database.use-emulator");let Ka=(()=>{class h{constructor(a,p,b,M,j,re,Ee,$e,It,bt,$t,Tn,tr,Ui,go){this.schedulers=re;const du=Ee,Il=(0,Sr.on)(a,j,p);$e&&(0,_r.nw)(Il,j,It,$t,Tn,tr,bt,Ui),this.database=(0,Sr.cc)(`${Il.name}.database.${b}`,"AngularFireDatabase",Il.name,()=>{const _c=j.runOutsideAngular(()=>Il.database(b||void 0));return du&&_c.useEmulator(...du),_c},[du])}list(a,p){const b=this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,a));let M=b;return p&&(M=p(b)),function Sg(h,l){const a=l.schedulers.outsideAngular,p=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Ff(p,"update"),set:Ff(p,"set"),push:b=>p.push(b),remove:Ep(p),snapshotChanges:b=>Nf(h,b,a).pipe(ni.iC),stateChanges:b=>kf(h,b,a).pipe(ni.iC),auditTrail:b=>function Uh(h,l,a){return function jh(h,l,a){return function Gd(h,l){return td(h,"value","on",l).pipe((0,Bn.U)(a=>{let p;return a.payload.forEach(b=>(p=b.key,!1)),{data:a,lastKeyToLoad:p}}))}(h,a).pipe(function dr(...h){return l=>{let a;return"function"==typeof h[h.length-1]&&(a=h.pop()),l.lift(new Ur(h,a))}}(l),(0,Bn.U)(([b,M])=>{const j=b.lastKeyToLoad,re=M.map(Ee=>Ee.key);return{actions:M,lastKeyToLoad:j,loadedKeys:re}}),function qi(h){return l=>l.lift(new Yi(h))}(b=>-1===b.loadedKeys.indexOf(b.lastKeyToLoad)),(0,Bn.U)(b=>b.actions))}(h,kf(h,l).pipe((0,hr.R)((b,M)=>[...b,M],[])),a)}(h,b,a).pipe(ni.iC),valueChanges:(b,M)=>Nf(h,b,a).pipe((0,Bn.U)(re=>re.map(Ee=>M&&M.idField?Object.assign(Object.assign({},Ee.payload.val()),{[M.idField]:Ee.key}):Ee.payload.val())),ni.iC)}}(M,this)}object(a){return function wp(h,l){return{query:h,snapshotChanges:()=>bp(h,l.schedulers.outsideAngular)().pipe(ni.iC),update:a=>h.ref.update(a),set:a=>h.ref.set(a),remove:()=>h.ref.remove(),valueChanges:()=>bp(h,l.schedulers.outsideAngular)().pipe(ni.iC,(0,Bn.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(a){return new(a||h)(se.LFG(Sr.Dh),se.LFG(Sr.xv,8),se.LFG(Ip,8),se.LFG(se.Lbi),se.LFG(se.R0b),se.LFG(ni.HU),se.LFG(zd,8),se.LFG(_r.zQ,8),se.LFG(_r.Qv,8),se.LFG(_r.L6,8),se.LFG(_r._Q,8),se.LFG(_r.rT,8),se.LFG(_r.lh,8),se.LFG(_r.f7,8),se.LFG(Of.nm,8))},h.\u0275prov=se.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Bu=(()=>{class h{constructor(){vp.Z.registerVersion("angularfire",ni.q4.full,"rtdb-compat")}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=se.oAB({type:h}),h.\u0275inj=se.cJS({providers:[Ka]}),h})();var Lf=H(4182),Hh=H(3569),Gh=H(6893),zh=H(2796);let Cp=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=se.oAB({type:h,bootstrap:[Qr]}),h.\u0275inj=se.cJS({providers:[{provide:Cn.wN,useClass:Qn.r4},Gh.e,Hh.R],imports:[[Zn,Qn.Pc.forRoot(),Fn,Sr.hO.initializeApp(as),_r.ww,zh.yb,Bu,Lf.u5]]}),h})();(0,se.G48)(),fr().bootstrapModule(Cp).catch(h=>console.log(h))},5867:(en,ut,H)=>{"use strict";H.d(ut,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=H(9681);(0,u.registerVersion)("firebase","9.6.10","app")},127:(en,ut,H)=>{"use strict";H.d(ut,{Z:()=>u.Z});var u=H(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(en,ut,H)=>{"use strict";H.r(ut);var u=H(5861),se=H(3942),Z=H(2090),ke=H(9681),Te=H(655),ae=H(1877),we=H(4859);const Pe=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ye=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new ae.Yd("@firebase/auth");function _e(w,...g){ht.logLevel<=ae.in.ERROR&&ht.error(`Auth (${ke.SDK_VERSION}): ${w}`,...g)}function ot(w,...g){throw St(w,...g)}function Ve(w,...g){return St(w,...g)}function rt(w,g,y){const S=Object.assign(Object.assign({},ye()),{[g]:y});return new Z.LL("auth","Firebase",S).create(g,{appName:w.name})}function _t(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&ot(w,"argument-error"),rt(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function St(w,...g){if("string"!=typeof w){const y=g[0],S=[...g.slice(1)];return S[0]&&(S[0].appName=w.name),w._errorFactory.create(y,...S)}return Ne.create(w,...g)}function qe(w,g,...y){if(!w)throw St(g,...y)}function pe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw _e(g),new Error(g)}function Be(w,g){w||pe(g)}const ve=new Map;function De(w){Be(w instanceof Function,"Expected a class definition");let g=ve.get(w);return g?(Be(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,ve.set(w,g),g)}function jt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Jt(){return"http:"===pt()||"https:"===pt()}function pt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class nt{constructor(g,y){this.shortDelay=g,this.longDelay=y,Be(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function st(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function at(w,g){Be(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Oe{static initialize(g,y,S){this.fetchImpl=g,y&&(this.headersImpl=y),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dt=new nt(3e4,6e4);function ft(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Kt(w,g,y,S){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(w,g,y,S,q={}){return xn(w,q,(0,u.Z)(function*(){let he={},tt={};S&&("GET"===g?tt=S:he={body:JSON.stringify(S)});const Tt=(0,Z.xO)(Object.assign({key:w.config.apiKey},tt)).slice(1),nn=yield w._getAdditionalHeaders();return nn["Content-Type"]="application/json",w.languageCode&&(nn["X-Firebase-Locale"]=w.languageCode),Oe.fetch()(Dr(w,w.config.apiHost,y,Tt),Object.assign({method:g,headers:nn,referrerPolicy:"no-referrer"},he))}))})).apply(this,arguments)}function xn(w,g,y){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(function*(w,g,y){w._canInitEmulator=!1;const S=Object.assign(Object.assign({},Xe),g);try{const q=new Zn(w),he=yield Promise.race([y(),q.promise]);q.clearNetworkTimeout();const tt=yield he.json();if("needConfirmation"in tt)throw Yn(w,"account-exists-with-different-credential",tt);if(he.ok&&!("errorMessage"in tt))return tt;{const Tt=he.ok?tt.errorMessage:tt.error.message,[nn,pn]=Tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nn)throw Yn(w,"credential-already-in-use",tt);if("EMAIL_EXISTS"===nn)throw Yn(w,"email-already-in-use",tt);const ur=S[nn]||nn.toLowerCase().replace(/[_\s]+/g,"-");if(pn)throw rt(w,ur,pn);ot(w,ur)}}catch(q){if(q instanceof Z.ZR)throw q;ot(w,"network-request-failed")}})).apply(this,arguments)}function rn(w,g,y,S){return fr.apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(w,g,y,S,q={}){const he=yield Kt(w,g,y,S,q);return"mfaPendingCredential"in he&&ot(w,"multi-factor-auth-required",{_serverResponse:he}),he})).apply(this,arguments)}function Dr(w,g,y,S){const q=`${g}${y}?${S}`;return w.config.emulator?at(w.config,q):`${w.config.apiScheme}://${q}`}class Zn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,S)=>{this.timer=setTimeout(()=>S(Ve(this.auth,"network-request-failed")),Dt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(w,g,y){const S={appName:w.name};y.email&&(S.email=y.email),y.phoneNumber&&(S.phoneNumber=y.phoneNumber);const q=Ve(w,g,S);return q.customData._tokenResponse=y,q}function rr(){return(rr=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function qr(w,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function cr(w,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function on(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ei(){return(ei=(0,u.Z)(function*(w,g=!1){const y=(0,Z.m9)(w),S=yield y.getIdToken(g),q=dn(S);qe(q&&q.exp&&q.auth_time&&q.iat,y.auth,"internal-error");const he="object"==typeof q.firebase?q.firebase:void 0,tt=null==he?void 0:he.sign_in_provider;return{claims:q,token:S,authTime:on(kn(q.auth_time)),issuedAtTime:on(kn(q.iat)),expirationTime:on(kn(q.exp)),signInProvider:tt||null,signInSecondFactor:(null==he?void 0:he.sign_in_second_factor)||null}})).apply(this,arguments)}function kn(w){return 1e3*Number(w)}function dn(w){const[g,y,S]=w.split(".");if(void 0===g||void 0===y||void 0===S)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,Z.tV)(y);return q?JSON.parse(q):(_e("Failed to decode base64 JWT payload"),null)}catch(q){return _e("Caught error parsing JWT payload as JSON",q),null}}function Gr(w,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(S){throw S instanceof Z.ZR&&Vn(S)&&w.auth.currentUser===w&&(yield w.auth.signOut()),S}})).apply(this,arguments)}function Vn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const q=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const S=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),S)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class si{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(w){return In.apply(this,arguments)}function In(){return(In=(0,u.Z)(function*(w){var g;const y=w.auth,S=yield w.getIdToken(),q=yield Gr(w,cr(y,{idToken:S}));qe(null==q?void 0:q.users.length,y,"internal-error");const he=q.users[0];w._notifyReloadListener(he);const tt=(null===(g=he.providerUserInfo)||void 0===g?void 0:g.length)?kt(he.providerUserInfo):[],Tt=sn(w.providerData,tt),ur=!!w.isAnonymous&&!(w.email&&he.passwordHash||(null==Tt?void 0:Tt.length)),Gn={uid:he.localId,displayName:he.displayName||null,photoURL:he.photoUrl||null,email:he.email||null,emailVerified:he.emailVerified||!1,phoneNumber:he.phoneNumber||null,tenantId:he.tenantId||null,providerData:Tt,metadata:new si(he.createdAt,he.lastLoginAt),isAnonymous:ur};Object.assign(w,Gn)})).apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(w){const g=(0,Z.m9)(w);yield Lr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function sn(w,g){return[...w.filter(S=>!g.some(q=>q.providerId===S.providerId)),...g]}function kt(w){return w.map(g=>{var{providerId:y}=g,S=(0,Te._T)(g,["providerId"]);return{providerId:y,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function yn(){return(yn=(0,u.Z)(function*(w,g){const y=yield xn(w,{},(0,u.Z)(function*(){const S=(0,Z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:q,apiKey:he}=w.config,tt=Dr(w,q,"/v1/token",`key=${he}`),Tt=yield w._getAdditionalHeaders();return Tt["Content-Type"]="application/x-www-form-urlencoded",Oe.fetch()(tt,{method:"POST",headers:Tt,body:S})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class _n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){qe(g.idToken,"internal-error"),qe(void 0!==g.idToken,"internal-error"),qe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Sn(w){const g=dn(w);return qe(g,"internal-error"),qe(void 0!==g.exp,"internal-error"),qe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var S=this;return(0,u.Z)(function*(){return qe(!S.accessToken||S.refreshToken,g,"user-token-expired"),y||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(g,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var S=this;return(0,u.Z)(function*(){const{accessToken:q,refreshToken:he,expiresIn:tt}=yield function tn(w,g){return yn.apply(this,arguments)}(g,y);S.updateTokensAndExpiration(q,he,Number(tt))})()}updateTokensAndExpiration(g,y,S){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(g,y){const{refreshToken:S,accessToken:q,expirationTime:he}=y,tt=new _n;return S&&(qe("string"==typeof S,"internal-error",{appName:g}),tt.refreshToken=S),q&&(qe("string"==typeof q,"internal-error",{appName:g}),tt.accessToken=q),he&&(qe("number"==typeof he,"internal-error",{appName:g}),tt.expirationTime=he),tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new _n,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Rn(w,g){qe("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Le{constructor(g){var{uid:y,auth:S,stsTokenManager:q}=g,he=(0,Te._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=S,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=he.displayName||null,this.email=he.email||null,this.emailVerified=he.emailVerified||!1,this.phoneNumber=he.phoneNumber||null,this.photoURL=he.photoURL||null,this.isAnonymous=he.isAnonymous||!1,this.tenantId=he.tenantId||null,this.providerData=he.providerData?[...he.providerData]:[],this.metadata=new si(he.createdAt||void 0,he.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const S=yield Gr(y,y.stsTokenManager.getToken(y.auth,g));return qe(S,y.auth,"internal-error"),y.accessToken!==S&&(y.accessToken=S,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),S})()}getIdTokenResult(g){return function zt(w){return ei.apply(this,arguments)}(this,g)}reload(){return function ci(w){return ir.apply(this,arguments)}(this)}_assign(g){this!==g&&(qe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Le(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var S=this;return(0,u.Z)(function*(){let q=!1;g.idToken&&g.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(g),q=!0),y&&(yield Lr(S)),yield S.auth._persistUserIfCurrent(S),q&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield Gr(g,function Ht(w,g){return rr.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var S,q,he,tt,Tt,nn,pn,ur;const Gn=null!==(S=y.displayName)&&void 0!==S?S:void 0,Ji=null!==(q=y.email)&&void 0!==q?q:void 0,To=null!==(he=y.phoneNumber)&&void 0!==he?he:void 0,_l=null!==(tt=y.photoURL)&&void 0!==tt?tt:void 0,Uc=null!==(Tt=y.tenantId)&&void 0!==Tt?Tt:void 0,So=null!==(nn=y._redirectEventId)&&void 0!==nn?nn:void 0,jc=null!==(pn=y.createdAt)&&void 0!==pn?pn:void 0,gf=null!==(ur=y.lastLoginAt)&&void 0!==ur?ur:void 0,{uid:Ta,emailVerified:Mu,isAnonymous:Wo,providerData:Hc,stsTokenManager:Gc}=y;qe(Ta&&Gc,g,"internal-error");const ph=_n.fromJSON(this.name,Gc);qe("string"==typeof Ta,g,"internal-error"),Rn(Gn,g.name),Rn(Ji,g.name),qe("boolean"==typeof Mu,g,"internal-error"),qe("boolean"==typeof Wo,g,"internal-error"),Rn(To,g.name),Rn(_l,g.name),Rn(Uc,g.name),Rn(So,g.name),Rn(jc,g.name),Rn(gf,g.name);const kd=new Le({uid:Ta,auth:g,email:Ji,emailVerified:Mu,displayName:Gn,isAnonymous:Wo,photoURL:_l,phoneNumber:To,tenantId:Uc,stsTokenManager:ph,createdAt:jc,lastLoginAt:gf});return Hc&&Array.isArray(Hc)&&(kd.providerData=Hc.map(mf=>Object.assign({},mf))),So&&(kd._redirectEventId=So),kd}static _fromIdTokenResponse(g,y,S=!1){return(0,u.Z)(function*(){const q=new _n;q.updateFromServerResponse(y);const he=new Le({uid:y.localId,auth:g,stsTokenManager:q,isAnonymous:S});return yield Lr(he),he})()}}const je=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,S){var q=this;return(0,u.Z)(function*(){q.storage[y]=S})()}_get(y){var S=this;return(0,u.Z)(function*(){const q=S.storage[y];return void 0===q?null:q})()}_remove(y){var S=this;return(0,u.Z)(function*(){delete S.storage[y]})()}_addListener(y,S){}_removeListener(y,S){}}return w.type="NONE",w})();function vt(w,g,y){return`firebase:${w}:${g}:${y}`}class lt{constructor(g,y,S){this.persistence=g,this.auth=y,this.userKey=S;const{config:q,name:he}=this.auth;this.fullUserKey=vt(this.userKey,q.apiKey,he),this.fullPersistenceKey=vt("persistence",q.apiKey,he),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Le._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const S=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,S?y.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,S="authUser"){return(0,u.Z)(function*(){if(!y.length)return new lt(De(je),g,S);const q=(yield Promise.all(y.map(function(){var pn=(0,u.Z)(function*(ur){if(yield ur._isAvailable())return ur});return function(ur){return pn.apply(this,arguments)}}()))).filter(pn=>pn);let he=q[0]||De(je);const tt=vt(S,g.config.apiKey,g.name);let Tt=null;for(const pn of y)try{const ur=yield pn._get(tt);if(ur){const Gn=Le._fromJSON(g,ur);pn!==he&&(Tt=Gn),he=pn;break}}catch(ur){}const nn=q.filter(pn=>pn._shouldAllowMigration);return he._shouldAllowMigration&&nn.length?(he=nn[0],Tt&&(yield he._set(tt,Tt.toJSON())),yield Promise.all(y.map(function(){var pn=(0,u.Z)(function*(ur){if(ur!==he)try{yield ur._remove(tt)}catch(Gn){}});return function(ur){return pn.apply(this,arguments)}}())),new lt(he,g,S)):new lt(he,g,S)})()}}function qt(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Bn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Cn(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(jn(g))return"Blackberry";if(vr(g))return"Webos";if(Qn(g))return"Safari";if((g.includes("chrome/")||Qr(g))&&!g.includes("edge/"))return"Chrome";if(_r(g))return"Android";{const S=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==S?void 0:S.length))return S[1]}return"Other"}function Cn(w=(0,Z.z$)()){return/firefox\//i.test(w)}function Qn(w=(0,Z.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Qr(w=(0,Z.z$)()){return/crios\//i.test(w)}function Bn(w=(0,Z.z$)()){return/iemobile/i.test(w)}function _r(w=(0,Z.z$)()){return/android/i.test(w)}function jn(w=(0,Z.z$)()){return/blackberry/i.test(w)}function vr(w=(0,Z.z$)()){return/webos/i.test(w)}function Rr(w=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(w)}function Sr(w=(0,Z.z$)()){return Rr(w)||_r(w)||vr(w)||jn(w)||/windows phone/i.test(w)||Bn(w)}function _i(w,g=[]){let y;switch(w){case"Browser":y=qt((0,Z.z$)());break;case"Worker":y=`${qt((0,Z.z$)())}-${w}`;break;default:y=w}const S=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${ke.SDK_VERSION}/${S}`}class $r{constructor(g,y,S){this.app=g,this.heartbeatServiceProvider=y,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vn(this),this.idTokenSubscription=new vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(g,y){var S=this;return y&&(this._popupRedirectResolver=De(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var q,he;if(!S._deleted&&(S.persistenceManager=yield lt.create(S,g),!S._deleted)){if(null===(q=S._popupRedirectResolver)||void 0===q?void 0:q._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch(tt){}yield S.initializeCurrentUser(y),S.lastNotifiedUid=(null===(he=S.currentUser)||void 0===he?void 0:he.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var S;let q=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const he=null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId,tt=null==q?void 0:q._redirectEventId,Tt=yield y.tryRedirectSignIn(g);(!he||he===tt)&&(null==Tt?void 0:Tt.user)&&(q=Tt.user)}return q?q._redirectEventId?(qe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===q._redirectEventId?y.directlySetCurrentUser(q):y.reloadAndSetCurrentUserOrClear(q)):y.reloadAndSetCurrentUserOrClear(q):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let S=null;try{S=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(q){yield y._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield Lr(g)}catch(S){if("auth/network-request-failed"!==S.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const S=g?(0,Z.m9)(g):null;return S&&qe(S.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(S&&S._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){if(!y._deleted)return g&&qe(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,u.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(De(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new Z.LL("auth","Firebase",g())}onAuthStateChanged(g,y,S){return this.registerStateListener(this.authStateSubscription,g,y,S)}onIdTokenChanged(g,y,S){return this.registerStateListener(this.idTokenSubscription,g,y,S)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var S=this;return(0,u.Z)(function*(){const q=yield S.getOrInitRedirectPersistenceManager(y);return null===g?q.removeCurrentUser():q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const S=g&&De(g)||y._popupRedirectResolver;qe(S,y,"argument-error"),y.redirectPersistenceManager=yield lt.create(y,[De(S._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var S,q;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(S=y._currentUser)||void 0===S?void 0:S._redirectEventId)===g?y._currentUser:(null===(q=y.redirectUser)||void 0===q?void 0:q._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,S,q){if(this._deleted)return()=>{};const he="function"==typeof y?y:y.next.bind(y),tt=this._isInitialized?Promise.resolve():this._initializationPromise;return qe(tt,this,"internal-error"),tt.then(()=>he(this.currentUser)),"function"==typeof y?g.addObserver(y,S,q):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=_i(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const S={"X-Client-Version":g.clientVersion};g.app.options.appId&&(S["X-Firebase-gmpid"]=g.app.options.appId);const q=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return q&&(S["X-Firebase-Client"]=q),S})()}}function At(w){return(0,Z.m9)(w)}class vn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,Z.ne)(y=>this.observer=y)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Yr(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class dr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return pe("not implemented")}_getIdTokenResponse(g){return pe("not implemented")}_linkToIdToken(g,y){return pe("not implemented")}_getReauthenticationResolver(g){return pe("not implemented")}}function Ur(w,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:resetPassword",ft(w,g))})).apply(this,arguments)}function Ln(w,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Yi(w,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",ft(w,g))})).apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithPassword",ft(w,g))})).apply(this,arguments)}function Mi(w,g){return di.apply(this,arguments)}function di(){return(di=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:sendOobCode",ft(w,g))})).apply(this,arguments)}function Q(w,g){return fe.apply(this,arguments)}function fe(){return(fe=(0,u.Z)(function*(w,g){return Mi(w,g)})).apply(this,arguments)}function O(w,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,u.Z)(function*(w,g){return Mi(w,g)})).apply(this,arguments)}function Ge(w,g){return et.apply(this,arguments)}function et(){return(et=(0,u.Z)(function*(w,g){return Mi(w,g)})).apply(this,arguments)}function Et(w,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(w,g){return Mi(w,g)})).apply(this,arguments)}function Mt(){return(Mt=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithEmailLink",ft(w,g))})).apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithEmailLink",ft(w,g))})).apply(this,arguments)}class Mn extends dr{constructor(g,y,S,q=null){super("password",S),this._email=g,this._password=y,this._tenantId=q}static _fromEmailAndPassword(g,y){return new Mn(g,y,"password")}static _fromEmailAndCode(g,y,S=null){return new Mn(g,y,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function ni(w,g){return Xr.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Nt(w,g){return Mt.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:ot(g,"internal-error")}})()}_linkToIdToken(g,y){var S=this;return(0,u.Z)(function*(){switch(S.signInMethod){case"password":return Ln(g,{idToken:y,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function hn(w,g){return En.apply(this,arguments)}(g,{idToken:y,email:S._email,oobCode:S._password});default:ot(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function $n(w,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithIdp",ft(w,g))})).apply(this,arguments)}class He extends dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new He(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):ot("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:S,signInMethod:q}=y,he=(0,Te._T)(y,["providerId","signInMethod"]);if(!S||!q)return null;const tt=new He(S,q);return tt.idToken=he.idToken||void 0,tt.accessToken=he.accessToken||void 0,tt.secret=he.secret,tt.nonce=he.nonce,tt.pendingToken=he.pendingToken||null,tt}_getIdTokenResponse(g){return $n(g,this.buildRequest())}_linkToIdToken(g,y){const S=this.buildRequest();return S.idToken=y,$n(g,S)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,$n(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,Z.xO)(y)}return g}}function We(w,g){return ct.apply(this,arguments)}function ct(){return(ct=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:sendVerificationCode",ft(w,g))})).apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,g))})).apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(w,g){const y=yield rn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,g));if(y.temporaryProof)throw Yn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const xr={USER_NOT_FOUND:"user-not-found"};function ps(){return(ps=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),xr)})).apply(this,arguments)}class Ri extends dr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ri({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ri({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Ot(w,g){return Lt.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function mn(w,g){return Ar.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Hn(w,g){return ps.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:S,verificationCode:q}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:S,code:q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:S,phoneNumber:q,temporaryProof:he}=g;return S||y||q||he?new Ri({verificationId:y,verificationCode:S,phoneNumber:q,temporaryProof:he}):null}}class wi{constructor(g){var y,S,q,he,tt,Tt;const nn=(0,Z.zd)((0,Z.pd)(g)),pn=null!==(y=nn.apiKey)&&void 0!==y?y:null,ur=null!==(S=nn.oobCode)&&void 0!==S?S:null,Gn=function Bs(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=nn.mode)&&void 0!==q?q:null);qe(pn&&ur&&Gn,"argument-error"),this.apiKey=pn,this.operation=Gn,this.code=ur,this.continueUrl=null!==(he=nn.continueUrl)&&void 0!==he?he:null,this.languageCode=null!==(tt=nn.languageCode)&&void 0!==tt?tt:null,this.tenantId=null!==(Tt=nn.tenantId)&&void 0!==Tt?Tt:null}static parseLink(g){const y=function Zi(w){const g=(0,Z.zd)((0,Z.pd)(w)).link,y=g?(0,Z.zd)((0,Z.pd)(g)).deep_link_id:null,S=(0,Z.zd)((0,Z.pd)(w)).deep_link_id;return(S?(0,Z.zd)((0,Z.pd)(S)).link:null)||S||y||g||w}(g);try{return new wi(y)}catch(S){return null}}}let to=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,S){return Mn._fromEmailAndPassword(y,S)}static credentialWithLink(y,S){const q=wi.parseLink(S);return qe(q,"argument-error"),Mn._fromEmailAndCode(y,q.code,q.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class gs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Bi extends gs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ms extends Bi{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return qe("providerId"in y&&"signInMethod"in y,"argument-error"),He._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return qe(g.idToken||g.accessToken,"argument-error"),He._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ms.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ms.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:S,oauthTokenSecret:q,pendingToken:he,nonce:tt,providerId:Tt}=g;if(!S&&!q&&!y&&!he||!Tt)return null;try{return new ms(Tt)._credential({idToken:y,accessToken:S,nonce:tt,pendingToken:he})}catch(nn){return null}}}let Kr=(()=>{class w extends Bi{constructor(){super("facebook.com")}static credential(y){return He._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(S){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),$s=(()=>{class w extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(y,S){return He._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:S})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:S,oauthAccessToken:q}=y;if(!S&&!q)return null;try{return w.credential(S,q)}catch(he){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),yo=(()=>{class w extends Bi{constructor(){super("github.com")}static credential(y){return He._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(S){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class zs extends dr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return $n(g,this.buildRequest())}_linkToIdToken(g,y){const S=this.buildRequest();return S.idToken=y,$n(g,S)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,$n(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:S,signInMethod:q,pendingToken:he}=y;return S&&q&&he&&S===q?new zs(S,he):null}static _create(g,y){return new zs(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Hi extends gs{constructor(g){qe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Hi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Hi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=zs.fromJSON(g);return qe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:S}=g;if(!y||!S)return null;try{return zs._create(S,y)}catch(q){return null}}}let _o=(()=>{class w extends Bi{constructor(){super("twitter.com")}static credential(y,S){return He._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:S})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:S,oauthTokenSecret:q}=y;if(!S||!q)return null;try{return w.credential(S,q)}catch(he){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Oi(w,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signUp",ft(w,g))})).apply(this,arguments)}class mi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,S,q=!1){return(0,u.Z)(function*(){const he=yield Le._fromIdTokenResponse(g,S,q),tt=us(S);return new mi({user:he,providerId:tt,_tokenResponse:S,operationType:y})})()}static _forOperation(g,y,S){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(S,!0);const q=us(S);return new mi({user:g,providerId:q,_tokenResponse:S,operationType:y})})()}}function us(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function cs(){return(cs=(0,u.Z)(function*(w){var g;const y=At(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new mi({user:y.currentUser,providerId:null,operationType:"signIn"});const S=yield Oi(y,{returnSecureToken:!0}),q=yield mi._fromIdTokenResponse(y,"signIn",S,!0);return yield y._updateCurrentUser(q.user),q})).apply(this,arguments)}class ys extends Z.ZR{constructor(g,y,S,q){var he;super(y.code,y.message),this.operationType=S,this.user=q,Object.setPrototypeOf(this,ys.prototype),this.customData={appName:g.name,tenantId:null!==(he=g.tenantId)&&void 0!==he?he:void 0,_serverResponse:y.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(g,y,S,q){return new ys(g,y,S,q)}}function Us(w,g,y,S){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(he=>{throw"auth/multi-factor-auth-required"===he.code?ys._fromErrorAndOperation(w,he,g,S):he})}function Ii(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Fo(){return(Fo=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w);yield ee(!0,y,g);const{providerUserInfo:S}=yield qr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),q=Ii(S||[]);return y.providerData=y.providerData.filter(he=>q.has(he.providerId)),q.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Er(w,g){return $.apply(this,arguments)}function $(){return($=(0,u.Z)(function*(w,g,y=!1){const S=yield Gr(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return mi._forOperation(w,"link",S)})).apply(this,arguments)}function ee(w,g,y){return U.apply(this,arguments)}function U(){return(U=(0,u.Z)(function*(w,g,y){yield Lr(g);const q=!1===w?"provider-already-linked":"no-such-provider";qe(Ii(g.providerData).has(y)===w,g.auth,q)})).apply(this,arguments)}function le(w,g){return ze.apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(w,g,y=!1){const{auth:S}=w,q="reauthenticate";try{const he=yield Gr(w,Us(S,q,g,w),y);qe(he.idToken,S,"internal-error");const tt=dn(he.idToken);qe(tt,S,"internal-error");const{sub:Tt}=tt;return qe(w.uid===Tt,S,"user-mismatch"),mi._forOperation(w,q,he)}catch(he){throw"auth/user-not-found"===(null==he?void 0:he.code)&&ot(S,"user-mismatch"),he}})).apply(this,arguments)}function mt(w,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(w,g,y=!1){const S="signIn",q=yield Us(w,S,g),he=yield mi._fromIdTokenResponse(w,S,q);return y||(yield w._updateCurrentUser(he.user)),he})).apply(this,arguments)}function Qt(w,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(w,g){return mt(At(w),g)})).apply(this,arguments)}function br(w,g){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w);return yield ee(!1,y,g.providerId),Er(y,g)})).apply(this,arguments)}function pr(w,g){return hi.apply(this,arguments)}function hi(){return(hi=(0,u.Z)(function*(w,g){return le((0,Z.m9)(w),g)})).apply(this,arguments)}function oi(w,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(w,g){return rn(w,"POST","/v1/accounts:signInWithCustomToken",ft(w,g))})).apply(this,arguments)}function ds(){return(ds=(0,u.Z)(function*(w,g){const y=At(w),S=yield oi(y,{token:g,returnSecureToken:!0}),q=yield mi._fromIdTokenResponse(y,"signIn",S);return yield y._updateCurrentUser(q.user),q})).apply(this,arguments)}class On{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?_s._fromServerResponse(g,y):ot(g,"internal-error")}}class _s extends On{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new _s(y)}}function G(w,g,y){var S;qe((null===(S=y.url)||void 0===S?void 0:S.length)>0,w,"invalid-continue-uri"),qe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(qe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(qe(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function N(){return(N=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w),q={requestType:"PASSWORD_RESET",email:g};y&&G(S,q,y),yield O(S,q)})).apply(this,arguments)}function v(){return(v=(0,u.Z)(function*(w,g,y){yield Ur((0,Z.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function E(){return(E=(0,u.Z)(function*(w,g){yield Yi((0,Z.m9)(w),{oobCode:g})})).apply(this,arguments)}function L(w,g){return ue.apply(this,arguments)}function ue(){return(ue=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w),S=yield Ur(y,{oobCode:g}),q=S.requestType;switch(qe(q,y,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":qe(S.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":qe(S.mfaInfo,y,"internal-error");default:qe(S.email,y,"internal-error")}let he=null;return S.mfaInfo&&(he=On._fromServerResponse(At(y),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:he},operation:q}})).apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(function*(w,g){const{data:y}=yield L((0,Z.m9)(w),g);return y.email})).apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(w,g,y){const S=At(w),q=yield Oi(S,{returnSecureToken:!0,email:g,password:y}),he=yield mi._fromIdTokenResponse(S,"signIn",q);return yield S._updateCurrentUser(he.user),he})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w),q={requestType:"EMAIL_SIGNIN",email:g};qe(y.handleCodeInApp,S,"argument-error"),y&&G(S,q,y),yield Ge(S,q)})).apply(this,arguments)}function Xi(){return(Xi=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w),q=to.credentialWithLink(g,y||jt());return qe(q._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Qt(S,q)})).apply(this,arguments)}function li(w,g){return es.apply(this,arguments)}function es(){return(es=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:createAuthUri",ft(w,g))})).apply(this,arguments)}function Zo(){return(Zo=(0,u.Z)(function*(w,g){const S={identifier:g,continueUri:Jt()?jt():"http://localhost"},{signinMethods:q}=yield li((0,Z.m9)(w),S);return q||[]})).apply(this,arguments)}function Qo(){return(Qo=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w),q={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&G(y.auth,q,g);const{email:he}=yield Q(y.auth,q);he!==w.email&&(yield w.reload())})).apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w),he={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&G(S.auth,he,y);const{email:tt}=yield Et(S.auth,he);tt!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ja(w,g){return el.apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const S=(0,Z.m9)(w),he={idToken:yield S.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},tt=yield Gr(S,Ja(S.auth,he));S.displayName=tt.displayName||null,S.photoURL=tt.photoUrl||null;const Tt=S.providerData.find(({providerId:nn})=>"password"===nn);Tt&&(Tt.displayName=S.displayName,Tt.photoURL=S.photoURL),yield S._updateTokensIfNecessary(tt)})).apply(this,arguments)}function nl(w,g,y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(w,g,y){const{auth:S}=w,he={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(he.email=g),y&&(he.password=y);const tt=yield Gr(w,Ln(S,he));yield w._updateTokensIfNecessary(tt,!0)})).apply(this,arguments)}class Lo{constructor(g,y,S={}){this.isNewUser=g,this.providerId=y,this.profile=S}}class co extends Lo{constructor(g,y,S,q){super(g,y,S),this.username=q}}class Ma extends Lo{constructor(g,y){super(g,"facebook.com",y)}}class oa extends co{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Jr extends Lo{constructor(g,y){super(g,"google.com",y)}}class Mr extends co{constructor(g,y,S){super(g,"twitter.com",y,S)}}function Wn(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function xa(w){var g,y;if(!w)return null;const{providerId:S}=w,q=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},he=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!S&&(null==w?void 0:w.idToken)){const tt=null===(y=null===(g=dn(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(tt)return new Lo(he,"anonymous"!==tt&&"custom"!==tt?tt:null)}if(!S)return null;switch(S){case"facebook.com":return new Ma(he,q);case"github.com":return new oa(he,q);case"google.com":return new Jr(he,q);case"twitter.com":return new Mr(he,q,w.screenName||null);case"custom":case"anonymous":return new Lo(he,null);default:return new Lo(he,S,q)}}(y)}class ki{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new ki("enroll",g)}static _fromMfaPendingCredential(g){return new ki("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,S;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ki._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(S=g.multiFactorSession)||void 0===S?void 0:S.idToken)return ki._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Jo{constructor(g,y,S){this.session=g,this.hints=y,this.signInResolver=S}static _fromError(g,y){const S=At(g),q=y.customData._serverResponse,he=(q.mfaInfo||[]).map(Tt=>On._fromServerResponse(S,Tt));qe(q.mfaPendingCredential,S,"internal-error");const tt=ki._fromMfaPendingCredential(q.mfaPendingCredential);return new Jo(tt,he,function(){var Tt=(0,u.Z)(function*(nn){const pn=yield nn._process(S,tt);delete q.mfaInfo,delete q.mfaPendingCredential;const ur=Object.assign(Object.assign({},q),{idToken:pn.idToken,refreshToken:pn.refreshToken});switch(y.operationType){case"signIn":const Gn=yield mi._fromIdTokenResponse(S,y.operationType,ur);return yield S._updateCurrentUser(Gn.user),Gn;case"reauthenticate":return qe(y.user,S,"internal-error"),mi._forOperation(y.user,y.operationType,ur);default:ot(S,"internal-error")}});return function(nn){return Tt.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function ri(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:start",ft(w,g))}class Ao{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(S=>On._fromServerResponse(g.auth,S)))})}static _fromUser(g){return new Ao(g)}getSession(){var g=this;return(0,u.Z)(function*(){return ki._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var S=this;return(0,u.Z)(function*(){const q=g,he=yield S.getSession(),tt=yield Gr(S.user,q._process(S.user.auth,he,y));return yield S.user._updateTokensIfNecessary(tt),S.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const S="string"==typeof g?g:g.uid,q=yield y.user.getIdToken(),he=yield Gr(y.user,function xl(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(w,g))}(y.user.auth,{idToken:q,mfaEnrollmentId:S}));y.enrolledFactors=y.enrolledFactors.filter(({uid:tt})=>tt!==S),yield y.user._updateTokensIfNecessary(he);try{yield y.user.reload()}catch(tt){if("auth/user-token-expired"!==tt.code)throw tt}})()}}const Bo=new WeakMap,va="__sak";class Ci{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(va,"1"),this.storage.removeItem(va),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ts=(()=>{class w extends Ci{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,S)=>this.onStorageEvent(y,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ml(){const w=(0,Z.z$)();return Qn(w)||Rr(w)}()&&function Or(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Sr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const S of Object.keys(this.listeners)){const q=this.storage.getItem(S),he=this.localCache[S];q!==he&&y(S,he,q)}}onStorageEvent(y,S=!1){if(!y.key)return void this.forAllChangedKeys((Tt,nn,pn)=>{this.notifyListeners(Tt,pn)});const q=y.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Tt=this.storage.getItem(q);if(y.newValue!==Tt)null!==y.newValue?this.storage.setItem(q,y.newValue):this.storage.removeItem(q);else if(this.localCache[q]===y.newValue&&!S)return}const he=()=>{const Tt=this.storage.getItem(q);!S&&this.localCache[q]===Tt||this.notifyListeners(q,Tt)},tt=this.storage.getItem(q);!function as(){return(0,Z.w1)()&&10===document.documentMode}()||tt===y.newValue||y.newValue===y.oldValue?he():setTimeout(he,10)}notifyListeners(y,S){this.localCache[y]=S;const q=this.listeners[y];if(q)for(const he of Array.from(q))he(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,S,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:S,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(S)}_removeListener(y,S){this.listeners[y]&&(this.listeners[y].delete(S),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,S){var q=()=>super._set,he=this;return(0,u.Z)(function*(){yield q().call(he,y,S),he.localCache[y]=JSON.stringify(S)})()}_get(y){var S=()=>super._get,q=this;return(0,u.Z)(function*(){const he=yield S().call(q,y);return q.localCache[y]=JSON.stringify(he),he})()}_remove(y){var S=()=>super._remove,q=this;return(0,u.Z)(function*(){yield S().call(q,y),delete q.localCache[y]})()}}return w.type="LOCAL",w})(),Ks=(()=>{class w extends Ci{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,S){}_removeListener(y,S){}}return w.type="SESSION",w})();let wr=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const S=this.receivers.find(he=>he.isListeningto(y));if(S)return S;const q=new w(y);return this.receivers.push(q),q}isListeningto(y){return this.eventTarget===y}handleEvent(y){var S=this;return(0,u.Z)(function*(){const q=y,{eventId:he,eventType:tt,data:Tt}=q.data,nn=S.handlersMap[tt];if(!(null==nn?void 0:nn.size))return;q.ports[0].postMessage({status:"ack",eventId:he,eventType:tt});const pn=Array.from(nn).map(function(){var Gn=(0,u.Z)(function*(Ji){return Ji(q.origin,Tt)});return function(Ji){return Gn.apply(this,arguments)}}()),ur=yield function $o(w){return Promise.all(w.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(S){return{fulfilled:!1,reason:S}}});return function(y){return g.apply(this,arguments)}}()))}(pn);q.ports[0].postMessage({status:"done",eventId:he,eventType:tt,response:ur})})()}_subscribe(y,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(S)}_unsubscribe(y,S){this.handlersMap[y]&&S&&this.handlersMap[y].delete(S),(!S||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Eo(w="",g=10){let y="";for(let S=0;S<g;S++)y+=Math.floor(10*Math.random());return w+y}class Pa{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,S=50){var q=this;return(0,u.Z)(function*(){const he="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!he)throw new Error("connection_unavailable");let tt,Tt;return new Promise((nn,pn)=>{const ur=Eo("",20);he.port1.start();const Gn=setTimeout(()=>{pn(new Error("unsupported_event"))},S);Tt={messageChannel:he,onMessage(Ji){const To=Ji;if(To.data.eventId===ur)switch(To.data.status){case"ack":clearTimeout(Gn),tt=setTimeout(()=>{pn(new Error("timeout"))},3e3);break;case"done":clearTimeout(tt),nn(To.data.response);break;default:clearTimeout(Gn),clearTimeout(tt),pn(new Error("invalid_response"))}}},q.handlers.add(Tt),he.port1.addEventListener("message",Tt.onMessage),q.target.postMessage({eventType:g,eventId:ur,data:y},[he.port2])}).finally(()=>{Tt&&q.removeMessageHandler(Tt)})})()}}function pi(){return window}function vs(){return void 0!==pi().WorkerGlobalScope&&"function"==typeof pi().importScripts}function la(){return(la=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const jo="firebaseLocalStorageDb",ua="firebaseLocalStorage",ca="fbase_key";class Wt{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Di(w,g){return w.transaction([ua],g?"readwrite":"readonly").objectStore(ua)}function bo(){const w=indexedDB.open(jo,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const S=w.result;try{S.createObjectStore(ua,{keyPath:ca})}catch(q){y(q)}}),w.addEventListener("success",(0,u.Z)(function*(){const S=w.result;S.objectStoreNames.contains(ua)?g(S):(S.close(),yield function ns(){const w=indexedDB.deleteDatabase(jo);return new Wt(w).toPromise()}(),g(yield bo()))}))})}function An(w,g,y){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,u.Z)(function*(w,g,y){const S=Di(w,!0).put({[ca]:g,value:y});return new Wt(S).toPromise()})).apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(w,g){const y=Di(w,!1).get(g),S=yield new Wt(y).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function gt(w,g){const y=Di(w,!0).delete(g);return new Wt(y).toPromise()}const B=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield bo()),y.db})()}_withRetries(y){var S=this;return(0,u.Z)(function*(){let q=0;for(;;)try{const he=yield S._openDb();return yield y(he)}catch(he){if(q++>3)throw he;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return vs()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=wr._getInstance(function As(){return vs()?self:null}()),y.receiver._subscribe("keyChanged",function(){var S=(0,u.Z)(function*(q,he){return{keyProcessed:(yield y._poll()).includes(he.key)}});return function(q,he){return S.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var S=(0,u.Z)(function*(q,he){return["keyChanged"]});return function(q,he){return S.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var S,q;if(y.activeServiceWorker=yield function Ss(){return la.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Pa(y.activeServiceWorker);const he=yield y.sender._send("ping",{},800);!he||(null===(S=he[0])||void 0===S?void 0:S.fulfilled)&&(null===(q=he[0])||void 0===q?void 0:q.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var S=this;return(0,u.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function ro(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:y},S.serviceWorkerReceiverAvailable?800:50)}catch(q){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield bo();return yield An(y,va,"1"),yield gt(y,va),!0}catch(y){}return!1})()}_withPendingWrite(y){var S=this;return(0,u.Z)(function*(){S.pendingWrites++;try{yield y()}finally{S.pendingWrites--}})()}_set(y,S){var q=this;return(0,u.Z)(function*(){return q._withPendingWrite((0,u.Z)(function*(){return yield q._withRetries(he=>An(he,y,S)),q.localCache[y]=S,q.notifyServiceWorker(y)}))})()}_get(y){var S=this;return(0,u.Z)(function*(){const q=yield S._withRetries(he=>function Ol(w,g){return cn.apply(this,arguments)}(he,y));return S.localCache[y]=q,q})()}_remove(y){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(q=>gt(q,y)),delete S.localCache[y],S.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const S=yield y._withRetries(tt=>{const Tt=Di(tt,!1).getAll();return new Wt(Tt).toPromise()});if(!S)return[];if(0!==y.pendingWrites)return[];const q=[],he=new Set;for(const{fbase_key:tt,value:Tt}of S)he.add(tt),JSON.stringify(y.localCache[tt])!==JSON.stringify(Tt)&&(y.notifyListeners(tt,Tt),q.push(tt));for(const tt of Object.keys(y.localCache))y.localCache[tt]&&!he.has(tt)&&(y.notifyListeners(tt,null),q.push(tt));return q})()}notifyListeners(y,S){this.localCache[y]=S;const q=this.listeners[y];if(q)for(const he of Array.from(q))he(S)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(S)}_removeListener(y,S){this.listeners[y]&&(this.listeners[y].delete(S),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function W(w,g){return Kt(w,"POST","/v2/accounts/mfaSignIn:start",ft(w,g))}function Ae(){return(Ae=(0,u.Z)(function*(w){return(yield Kt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fn(w){return new Promise((g,y)=>{const S=document.createElement("script");S.setAttribute("src",w),S.onload=g,S.onerror=q=>{const he=Ve("internal-error");he.customData=q,y(he)},S.type="text/javascript",S.charset="UTF-8",function Pt(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(S)})}function kr(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ir=1e12;class ar{constructor(g){this.auth=g,this.counter=Ir,this._widgets=new Map}render(g,y){const S=this.counter;return this._widgets.set(S,new Es(g,this.auth.name,y||{})),this.counter++,S}reset(g){var y;const S=g||Ir;null===(y=this._widgets.get(S))||void 0===y||y.delete(),this._widgets.delete(S)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ir))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var S;return null===(S=y._widgets.get(g||Ir))||void 0===S||S.execute(),""})()}}class Es{constructor(g,y,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof g?document.getElementById(g):g;qe(q,"argument-error",{appName:y}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xo(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<w;S++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(S){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(S){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ti=kr("rcb"),qn=new nt(3e4,6e4);class il{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!pi().grecaptcha}load(g,y=""){return qe(function vd(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(pi().grecaptcha):new Promise((S,q)=>{const he=pi().setTimeout(()=>{q(Ve(g,"network-request-failed"))},qn.get());pi()[Ti]=()=>{pi().clearTimeout(he),delete pi()[Ti];const Tt=pi().grecaptcha;if(!Tt)return void q(Ve(g,"internal-error"));const nn=Tt.render;Tt.render=(pn,ur)=>{const Gn=nn(pn,ur);return this.counter++,Gn},this.hostLanguage=y,S(Tt)},fn(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Ti,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(he),q(Ve(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!pi().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yl{load(g){return(0,u.Z)(function*(){return new ar(g)})()}clearedOneInstance(){}}const Fr="recaptcha",Kl={theme:"light",type:"image"};class bs{constructor(g,y=Object.assign({},Kl),S){this.parameters=y,this.type=Fr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(S),this.isInvisible="invisible"===this.parameters.size,qe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof g?document.getElementById(g):g;qe(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yl:new il,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),S=g.getAssertedRecaptcha();return S.getResponse(y)||new Promise(he=>{const tt=Tt=>{!Tt||(g.tokenChangeListeners.delete(tt),he(Tt))};g.tokenChangeListeners.add(tt),g.isInvisible&&S.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){qe(!this.parameters.sitekey,this.auth,"argument-error"),qe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(S=>S(y)),"function"==typeof g)g(y);else if("string"==typeof g){const S=pi()[g];"function"==typeof S&&S(y)}}}assertNotDestroyed(){qe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const S=document.createElement("div");y.appendChild(S),y=S}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){qe(Jt()&&!vs(),g.auth,"internal-error"),yield function Zl(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function xe(w){return Ae.apply(this,arguments)}(g.auth);qe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return qe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ea{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ri._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function ws(){return(ws=(0,u.Z)(function*(w,g,y){const S=At(w),q=yield xs(S,g,(0,Z.m9)(y));return new Ea(q,he=>Qt(S,he))})).apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w);yield ee(!1,S,"phone");const q=yield xs(S.auth,g,(0,Z.m9)(y));return new Ea(q,he=>br(S,he))})).apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w),q=yield xs(S.auth,g,(0,Z.m9)(y));return new Ea(q,he=>pr(S,he))})).apply(this,arguments)}function xs(w,g,y){return js.apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(w,g,y){var S;const q=yield y.verify();try{let he;if(qe("string"==typeof q,w,"argument-error"),qe(y.type===Fr,w,"argument-error"),he="string"==typeof g?{phoneNumber:g}:g,"session"in he){const tt=he.session;if("phoneNumber"in he)return qe("enroll"===tt.type,w,"internal-error"),(yield ri(w,{idToken:tt.credential,phoneEnrollmentInfo:{phoneNumber:he.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{qe("signin"===tt.type,w,"internal-error");const Tt=(null===(S=he.multiFactorHint)||void 0===S?void 0:S.uid)||he.multiFactorUid;return qe(Tt,w,"missing-multi-factor-info"),(yield W(w,{mfaPendingCredential:tt.credential,mfaEnrollmentId:Tt,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:tt}=yield We(w,{phoneNumber:he.phoneNumber,recaptchaToken:q});return tt}}finally{y._reset()}})).apply(this,arguments)}function io(){return(io=(0,u.Z)(function*(w,g){yield Er((0,Z.m9)(w),g)})).apply(this,arguments)}let Ms=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=At(y)}verifyPhoneNumber(y,S){return xs(this.auth,y,(0,Z.m9)(S))}static credential(y,S){return Ri._fromVerification(y,S)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:S,temporaryProof:q}=y;return S&&q?Ri._fromTokenResponse(S,q):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Go(w,g){return g?De(g):(qe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Eu extends dr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return $n(g,this._buildIdpRequest())}_linkToIdToken(g,y){return $n(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return $n(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function an(w){return mt(w.auth,new Eu(w),w.bypassAuthState)}function Ed(w){const{auth:g,user:y}=w;return qe(y,g,"internal-error"),le(y,new Eu(w),w.bypassAuthState)}function bu(w){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(w){const{auth:g,user:y}=w;return qe(y,g,"internal-error"),Er(y,new Eu(w),w.bypassAuthState)})).apply(this,arguments)}class $i{constructor(g,y,S,q,he=!1){this.auth=g,this.resolver=S,this.user=q,this.bypassAuthState=he,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(S,q){g.pendingPromise={resolve:S,reject:q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(he){g.reject(he)}});return function(S,q){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:S,sessionId:q,postBody:he,tenantId:tt,error:Tt,type:nn}=g;if(Tt)return void y.reject(Tt);const pn={auth:y.auth,requestUri:S,sessionId:q,tenantId:tt||void 0,postBody:he||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(nn)(pn))}catch(ur){y.reject(ur)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return an;case"linkViaPopup":case"linkViaRedirect":return bu;case"reauthViaPopup":case"reauthViaRedirect":return Ed;default:ot(this.auth,"internal-error")}}resolve(g){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ba=new nt(2e3,1e4);function wa(){return(wa=(0,u.Z)(function*(w,g,y){const S=At(w);_t(w,g,gs);const q=Go(S,y);return new ks(S,"signInViaPopup",g,q).executeNotNull()})).apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w);_t(S.auth,g,gs);const q=Go(S.auth,y);return new ks(S.auth,"reauthViaPopup",g,q,S).executeNotNull()})).apply(this,arguments)}function wu(){return(wu=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w);_t(S.auth,g,gs);const q=Go(S.auth,y);return new ks(S.auth,"linkViaPopup",g,q,S).executeNotNull()})).apply(this,arguments)}let ks=(()=>{class w extends $i{constructor(y,S,q,he,tt){super(y,S,he,tt),this.provider=q,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const S=yield y.execute();return qe(S,y.auth,"internal-error"),S})()}onExecution(){var y=this;return(0,u.Z)(function*(){Be(1===y.filter.length,"Popup operations only handle one event");const S=Eo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],S),y.authWindow.associatedEvent=S,y.resolver._originValidation(y.auth).catch(q=>{y.reject(q)}),y.resolver._isIframeWebStorageSupported(y.auth,q=>{q||y.reject(Ve(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var S,q;this.pollId=(null===(q=null===(S=this.authWindow)||void 0===S?void 0:S.window)||void 0===q?void 0:q.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,ba.get())};y()}}return w.currentPopupAction=null,w})();const Fa=new Map;class ol extends $i{constructor(g,y,S=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,S),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let S=Fa.get(y.auth._key());if(!S){try{const he=(yield function k(w,g){return z.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;S=()=>Promise.resolve(he)}catch(q){S=()=>Promise.reject(q)}Fa.set(y.auth._key(),S)}return y.bypassAuthState||Fa.set(y.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,S=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(S,g);if("unknown"!==g.type){if(g.eventId){const q=yield S.auth._redirectUserForId(g.eventId);if(q)return S.user=q,y().call(S,g);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function z(){return(z=(0,u.Z)(function*(w,g){const y=Vt(g),S=wt(w);if(!(yield S._isAvailable()))return!1;const q="true"===(yield S._get(y));return yield S._remove(y),q})).apply(this,arguments)}function ie(w,g){return Me.apply(this,arguments)}function Me(){return(Me=(0,u.Z)(function*(w,g){return wt(w)._set(Vt(g),"true")})).apply(this,arguments)}function wt(w){return De(w._redirectPersistence)}function Vt(w){return vt("pendingRedirect",w.config.apiKey,w.name)}function er(){return(er=(0,u.Z)(function*(w,g,y){const S=At(w);_t(w,g,gs);const q=Go(S,y);return yield ie(q,S),q._openRedirect(S,g,"signInViaRedirect")})).apply(this,arguments)}function so(){return(so=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w);_t(S.auth,g,gs);const q=Go(S.auth,y);yield ie(q,S.auth);const he=yield Nl(S);return q._openRedirect(S.auth,g,"reauthViaRedirect",he)})).apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(w,g,y){const S=(0,Z.m9)(w);_t(S.auth,g,gs);const q=Go(S.auth,y);yield ee(!1,S,g.providerId),yield ie(q,S.auth);const he=yield Nl(S);return q._openRedirect(S.auth,g,"linkViaRedirect",he)})).apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(w,g){return yield At(w)._initializationPromise,zi(w,g,!1)})).apply(this,arguments)}function zi(w,g){return La.apply(this,arguments)}function La(){return(La=(0,u.Z)(function*(w,g,y=!1){const S=At(w),q=Go(S,g),tt=yield new ol(S,q,y).execute();return tt&&!y&&(delete tt.user._redirectEventId,yield S._persistUserIfCurrent(tt.user),yield S._setRedirectUser(null,g)),tt})).apply(this,arguments)}function Nl(w){return Va.apply(this,arguments)}function Va(){return(Va=(0,u.Z)(function*(w){const g=Eo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class is{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(g,S)&&(y=!0,this.sendToConsumer(g,S),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Dc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ul(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var S;if(g.error&&!ul(g)){const q=(null===(S=g.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";y.onError(Ve(this.auth,q))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const S=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&S}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xl(g))}saveEventToCache(g){this.cachedEventUids.add(Xl(g)),this.lastProcessedEventTime=Date.now()}}function Xl(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function ul({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function $a(w){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(w,g={}){return Kt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lf=/^https?/;function Oo(){return(Oo=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield $a(w);for(const y of g)try{if(Ua(y))return}catch(S){}ot(w,"unauthorized-domain")})).apply(this,arguments)}function Ua(w){const g=jt(),{protocol:y,hostname:S}=new URL(g);if(w.startsWith("chrome-extension://")){const tt=new URL(w);return""===tt.hostname&&""===S?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&tt.hostname===S}if(!lf.test(y))return!1;if(Wu.test(w))return S===w;const q=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(S)}const cf=new nt(3e4,6e4);function rh(){const w=pi().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let ta=null;function ih(w){return ta=ta||function bd(w){return new Promise((g,y)=>{var S,q,he;function tt(){rh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{rh(),y(Ve(w,"network-request-failed"))},timeout:cf.get()})}if(null===(q=null===(S=pi().gapi)||void 0===S?void 0:S.iframes)||void 0===q?void 0:q.Iframe)g(gapi.iframes.getContext());else{if(!(null===(he=pi().gapi)||void 0===he?void 0:he.load)){const Tt=kr("iframefcb");return pi()[Tt]=()=>{gapi.load?tt():y(Ve(w,"network-request-failed"))},fn(`https://apis.google.com/js/api.js?onload=${Tt}`).catch(nn=>y(nn))}tt()}}).catch(g=>{throw ta=null,g})}(w),ta}const Cu=new nt(5e3,15e3),Du={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kl(w){const g=w.config;qe(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?at(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,S={apiKey:g.apiKey,appName:w.name,v:ke.SDK_VERSION},q=qu.get(w.config.apiHost);q&&(S.eid=q);const he=w._getFrameworks();return he.length&&(S.fw=he.join(",")),`${y}?${(0,Z.xO)(S).slice(1)}`}function wo(){return wo=(0,u.Z)(function*(w){const g=yield ih(w),y=pi().gapi;return qe(y,w,"internal-error"),g.open({where:document.body,url:kl(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Du,dontclear:!0},S=>new Promise(function(){var q=(0,u.Z)(function*(he,tt){yield S.restyle({setHideOnLeave:!1});const Tt=Ve(w,"network-request-failed"),nn=pi().setTimeout(()=>{tt(Tt)},Cu.get());function pn(){pi().clearTimeout(nn),he(S)}S.ping(pn).then(pn,()=>{tt(Tt)})});return function(he,tt){return q.apply(this,arguments)}}()))}),wo.apply(this,arguments)}const sh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ku{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Mc(w,g,y,S,q,he){qe(w.config.authDomain,w,"auth-domain-config-required"),qe(w.config.apiKey,w,"invalid-api-key");const tt={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:S,v:ke.SDK_VERSION,eventId:q};if(g instanceof gs){g.setDefaultLanguage(w.languageCode),tt.providerId=g.providerId||"",(0,Z.xb)(g.getCustomParameters())||(tt.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nn,pn]of Object.entries(he||{}))tt[nn]=pn}if(g instanceof Bi){const nn=g.getScopes().filter(pn=>""!==pn);nn.length>0&&(tt.scopes=nn.join(","))}w.tenantId&&(tt.tid=w.tenantId);const Tt=tt;for(const nn of Object.keys(Tt))void 0===Tt[nn]&&delete Tt[nn];return`${function Rc({config:w}){return w.emulator?at(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,Z.xO)(Tt).slice(1)}`}const ja="webStorageSupport";class Ha extends class Fl{constructor(g){this.factorId=g}_process(g,y,S){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,S);case"signin":return this._finalizeSignIn(g,y.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ha(g)}_finalizeEnroll(g,y,S){return function Al(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:finalize",ft(w,g))}(g,{idToken:y,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function ne(w,g){return Kt(w,"POST","/v2/accounts/mfaSignIn:finalize",ft(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let oh=(()=>{class w{constructor(){}static assertion(y){return Ha._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var eu="@firebase/auth",Cd="0.19.11";class dl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(S=>{var q;g((null===(q=S)||void 0===q?void 0:q.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tu(){return window}function hl(){return(hl=(0,u.Z)(function*(w,g,y){var S;const{BuildInfo:q}=tu();Be(g.sessionId,"AuthEvent did not contain a session ID");const he=yield nu(g.sessionId),tt={};return Rr()?tt.ibi=q.packageName:_r()?tt.apn=q.packageName:ot(w,"operation-not-supported-in-this-environment"),q.displayName&&(tt.appDisplayName=q.displayName),tt.sessionId=he,Mc(w,y,g.type,void 0,null!==(S=g.eventId)&&void 0!==S?S:void 0,tt)})).apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(w){const{BuildInfo:g}=tu(),y={};Rr()?y.iosBundleId=g.packageName:_r()?y.androidPackageName=g.packageName:ot(w,"operation-not-supported-in-this-environment"),yield $a(w,y)})).apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(w,g,y){const{cordova:S}=tu();let q=()=>{};try{yield new Promise((he,tt)=>{let Tt=null;function nn(){var Gn;he();const Ji=null===(Gn=S.plugins.browsertab)||void 0===Gn?void 0:Gn.close;"function"==typeof Ji&&Ji(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function pn(){Tt||(Tt=window.setTimeout(()=>{tt(Ve(w,"redirect-cancelled-by-user"))},2e3))}function ur(){"visible"===(null==document?void 0:document.visibilityState)&&pn()}g.addPassiveListener(nn),document.addEventListener("resume",pn,!1),_r()&&document.addEventListener("visibilitychange",ur,!1),q=()=>{g.removePassiveListener(nn),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",ur,!1),Tt&&window.clearTimeout(Tt)}})}finally{q()}})).apply(this,arguments)}function nu(w){return fl.apply(this,arguments)}function fl(){return(fl=(0,u.Z)(function*(w){const g=hf(w),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(q=>q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hf(w){if(Be(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const g=new ArrayBuffer(w.length),y=new Uint8Array(g);for(let S=0;S<w.length;S++)y[S]=w.charCodeAt(S);return y}!function lh(w){(0,ke._registerComponent)(new we.wA("auth",(g,{options:y})=>{const S=g.getProvider("app").getImmediate(),q=g.getProvider("heartbeat"),{apiKey:he,authDomain:tt}=S.options;return((Tt,nn)=>{qe(he&&!he.includes(":"),"invalid-api-key",{appName:Tt.name}),qe(!(null==tt?void 0:tt.includes(":")),"argument-error",{appName:Tt.name});const pn={apiKey:he,authDomain:tt,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_i(w)},ur=new $r(Tt,nn,pn);return function Ze(w,g){const y=(null==g?void 0:g.persistence)||[],S=(Array.isArray(y)?y:[y]).map(De);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(S,null==g?void 0:g.popupRedirectResolver)}(ur,y),ur})(S,q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,S)=>{g.getProvider("auth-internal").initialize()})),(0,ke._registerComponent)(new we.wA("auth-internal",g=>{const y=At(g.getProvider("auth").getImmediate());return new dl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ke.registerVersion)(eu,Cd,function ah(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,ke.registerVersion)(eu,Cd,"esm2017")}("Browser");class Fc extends is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,u.Z)(function*(){yield g.initPromise})()}}function ff(w){return Is.apply(this,arguments)}function Is(){return(Is=(0,u.Z)(function*(w){const g=yield Xu()._get(Ca(w));return g&&(yield Xu()._remove(Ca(w))),g})).apply(this,arguments)}function gl(){const w=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const S=Math.floor(Math.random()*g.length);w.push(g.charAt(S))}return w.join("")}function Xu(){return De(ts)}function Ca(w){return vt("authEvent",w.config.apiKey,w.name)}function Cs(w){if(!(null==w?void 0:w.includes("?")))return{};const[g,...y]=w.split("?");return(0,Z.zd)(y.join("?"))}function Sd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ve("no-auth-event")}}function Lc(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function vi(w=(0,Z.z$)()){return!("file:"!==Lc()&&"ionic:"!==Lc()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Os(){try{const w=self.localStorage,g=Eo();if(w)return w.setItem(g,"1"),w.removeItem(g),!function za(w=(0,Z.z$)()){return function Md(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Vc(w=(0,Z.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Z.hl)()}catch(w){return Au()&&(0,Z.hl)()}return!1}function Au(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wa(){return(function pf(){return"http:"===Lc()||"https:"===Lc()}()||(0,Z.ru)()||vi())&&!function xd(){return(0,Z.b$)()||(0,Z.UG)()}()&&Os()&&!Au()}function Ju(){return vi()&&"undefined"!=typeof document}function yl(){return(yl=(0,u.Z)(function*(){return!!Ju()&&new Promise(w=>{const g=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),w(!0)})})})).apply(this,arguments)}const Io={LOCAL:"local",NONE:"none",SESSION:"session"},iu=qe,ec="persistence";function tc(w){return ou.apply(this,arguments)}function ou(){return(ou=(0,u.Z)(function*(w){yield w._initializationPromise;const g=Bc(),y=vt(ec,w.config.apiKey,w.name);g&&g.setItem(y,w._getPersistence())})).apply(this,arguments)}function Bc(){var w;try{return(null===(w=function ru(){return"undefined"!=typeof window?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch(g){return null}}const ch=qe;class Co{constructor(){this.browserResolver=De(class Zu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ks,this._completeRedirectFn=zi}_openPopup(g,y,S,q){var he=this;return(0,u.Z)(function*(){var tt;Be(null===(tt=he.eventManagers[g._key()])||void 0===tt?void 0:tt.manager,"_initialize() not called before _openPopup()");const Tt=Mc(g,y,S,jt(),q);return function wd(w,g,y,S=500,q=600){const he=Math.max((window.screen.availHeight-q)/2,0).toString(),tt=Math.max((window.screen.availWidth-S)/2,0).toString();let Tt="";const nn=Object.assign(Object.assign({},sh),{width:S.toString(),height:q.toString(),top:he,left:tt}),pn=(0,Z.z$)().toLowerCase();y&&(Tt=Qr(pn)?"_blank":y),Cn(pn)&&(g=g||"http://localhost",nn.scrollbars="yes");const ur=Object.entries(nn).reduce((Ji,[To,_l])=>`${Ji}${To}=${_l},`,"");if(function Li(w=(0,Z.z$)()){var g;return Rr(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(pn)&&"_self"!==Tt)return function df(w,g){const y=document.createElement("a");y.href=w,y.target=g;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(S)}(g||"",Tt),new Ku(null);const Gn=window.open(g||"",Tt,ur);qe(Gn,w,"popup-blocked");try{Gn.focus()}catch(Ji){}return new Ku(Gn)}(g,Tt,Eo())})()}_openRedirect(g,y,S,q){var he=this;return(0,u.Z)(function*(){return yield he._originValidation(g),function Uo(w){pi().location.href=w}(Mc(g,y,S,jt(),q)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:q,promise:he}=this.eventManagers[y];return q?Promise.resolve(q):(Be(he,"If manager is not set, promise should be"),he)}const S=this.initAndGetManager(g);return this.eventManagers[y]={promise:S},S.catch(()=>{delete this.eventManagers[y]}),S}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const S=yield function cl(w){return wo.apply(this,arguments)}(g),q=new is(g);return S.register("authEvent",he=>(qe(null==he?void 0:he.authEvent,g,"invalid-auth-event"),{status:q.onEvent(he.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:q},y.iframes[g._key()]=S,q})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(ja,{type:ja},q=>{var he;const tt=null===(he=null==q?void 0:q[0])||void 0===he?void 0:he[ja];void 0!==tt&&y(!!tt),ot(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function uf(w){return Oo.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Sr()||Qn()||Rr()}}),this.cordovaResolver=De(class uh{constructor(){this._redirectPersistence=Ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zi}_initialize(g){var y=this;return(0,u.Z)(function*(){const S=g._key();let q=y.eventManagers.get(S);return q||(q=new Fc(g),y.eventManagers.set(S,q),y.attachCallbackListeners(g,q)),q})()}_openPopup(g){ot(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,S,q){var he=this;return(0,u.Z)(function*(){!function Nc(w){var g,y,S,q,he,tt,Tt,nn,pn,ur;const Gn=tu();qe("function"==typeof(null===(g=null==Gn?void 0:Gn.universalLinks)||void 0===g?void 0:g.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qe(void 0!==(null===(y=null==Gn?void 0:Gn.BuildInfo)||void 0===y?void 0:y.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qe("function"==typeof(null===(he=null===(q=null===(S=null==Gn?void 0:Gn.cordova)||void 0===S?void 0:S.plugins)||void 0===q?void 0:q.browsertab)||void 0===he?void 0:he.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(nn=null===(Tt=null===(tt=null==Gn?void 0:Gn.cordova)||void 0===tt?void 0:tt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===nn?void 0:nn.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(ur=null===(pn=null==Gn?void 0:Gn.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===ur?void 0:ur.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const tt=yield he._initialize(g);yield tt.initialized(),tt.resetRedirect(),function it(){Fa.clear()}(),yield he._originValidation(g);const Tt=function pl(w,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:gl(),postBody:null,tenantId:w.tenantId,error:Ve(w,"no-auth-event")}}(g,S,q);yield function Td(w,g){return Xu()._set(Ca(w),g)}(g,Tt);const nn=yield function Hs(w,g,y){return hl.apply(this,arguments)}(g,Tt,y),pn=yield function Ll(w){const{cordova:g}=tu();return new Promise(y=>{g.plugins.browsertab.isAvailable(S=>{let q=null;S?g.plugins.browsertab.openUrl(w):q=g.InAppBrowser.open(w,function Fn(w=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(q)})})}(nn);return function Dd(w,g,y){return Qu.apply(this,arguments)}(g,tt,pn)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Su(w){return da.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:S,handleOpenURL:q,BuildInfo:he}=tu(),tt=setTimeout((0,u.Z)(function*(){yield ff(g),y.onEvent(Sd())}),500),Tt=function(){var ur=(0,u.Z)(function*(Gn){clearTimeout(tt);const Ji=yield ff(g);let To=null;Ji&&(null==Gn?void 0:Gn.url)&&(To=function ui(w,g){var y,S;const q=function Ga(w){const g=Cs(w),y=g.link?decodeURIComponent(g.link):void 0,S=Cs(y).link,q=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Cs(q).link||q||S||y||w}(g);if(q.includes("/__/auth/callback")){const he=Cs(q),tt=he.firebaseError?function Fi(w){try{return JSON.parse(w)}catch(g){return null}}(decodeURIComponent(he.firebaseError)):null,Tt=null===(S=null===(y=null==tt?void 0:tt.code)||void 0===y?void 0:y.split("auth/"))||void 0===S?void 0:S[1],nn=Tt?Ve(Tt):null;return nn?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:nn,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:q,postBody:null}}return null}(Ji,Gn.url)),y.onEvent(To||Sd())});return function(Ji){return ur.apply(this,arguments)}}();void 0!==S&&"function"==typeof S.subscribe&&S.subscribe(null,Tt);const nn=q,pn=`${he.packageName.toLowerCase()}://`;tu().handleOpenURL=function(){var ur=(0,u.Z)(function*(Gn){if(Gn.toLowerCase().startsWith(pn)&&Tt({url:Gn}),"function"==typeof nn)try{nn(Gn)}catch(Ji){console.error(Ji)}});return function(Gn){return ur.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ks,this._completeRedirectFn=zi}_initialize(g){var y=this;return(0,u.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,S,q){var he=this;return(0,u.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openPopup(g,y,S,q)})()}_openRedirect(g,y,S,q){var he=this;return(0,u.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openRedirect(g,y,S,q)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Ju()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ch(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,u.Z)(function*(){if(g.underlyingResolver)return;const y=yield function fo(){return yl.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function na(w){return w.unwrap()}function nc(w){return Od(w)}function Od(w){const{_tokenResponse:g}=w instanceof Z.ZR?w.customData:w;if(!g)return null;if(!(w instanceof Z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ms.credentialFromResult(w);const y=g.providerId;if(!y||"password"===y)return null;let S;switch(y){case"google.com":S=$s;break;case"facebook.com":S=Kr;break;case"github.com":S=yo;break;case"twitter.com":S=_o;break;default:const{oauthIdToken:q,oauthAccessToken:he,oauthTokenSecret:tt,pendingToken:Tt,nonce:nn}=g;return he||tt||q||Tt?Tt?y.startsWith("saml.")?zs._create(y,Tt):He._fromParams({providerId:y,signInMethod:y,pendingToken:Tt,idToken:q,accessToken:he}):new ms(y).credential({idToken:q,accessToken:he,rawNonce:nn}):null}return w instanceof Z.ZR?S.credentialFromError(w):S.credentialFromResult(w)}function Qs(w,g){return g.catch(y=>{throw y instanceof Z.ZR&&function rc(w,g){var y;const S=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Pd(w,function Vo(w,g){var y;const S=(0,Z.m9)(w),q=g;return qe(g.customData.operationType,S,"argument-error"),qe(null===(y=q.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,S,"argument-error"),Jo._fromError(S,q)}(w,g));else if(S){const q=Od(g),he=g;q&&(he.credential=q,he.tenantId=S.tenantId||void 0,he.email=S.email||void 0,he.phoneNumber=S.phoneNumber||void 0)}}(w,y),y}).then(y=>{const q=y.user;return{operationType:y.operationType,credential:nc(y),additionalUserInfo:Wn(y),user:Do.getOrCreate(q)}})}function xu(w,g){return ic.apply(this,arguments)}function ic(){return(ic=(0,u.Z)(function*(w,g){const y=yield g;return{verificationId:y.verificationId,confirm:S=>Qs(w,y.confirm(S))}})).apply(this,arguments)}class Pd{constructor(g,y){this.resolver=y,this.auth=function Rd(w){return w.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Qs(na(this.auth),this.resolver.resolveSignIn(g))}}class Do{constructor(g){this._delegate=g,this.multiFactor=function Ys(w){const g=(0,Z.m9)(w);return Bo.has(g)||Bo.set(g,Ao._fromUser(g)),Bo.get(g)}(g)}static getOrCreate(g){return Do.USER_MAP.has(g)||Do.USER_MAP.set(g,new Do(g)),Do.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,u.Z)(function*(){return Qs(y.auth,br(y._delegate,g))})()}linkWithPhoneNumber(g,y){var S=this;return(0,u.Z)(function*(){return xu(S.auth,function Mo(w,g,y){return Si.apply(this,arguments)}(S._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,u.Z)(function*(){return Qs(y.auth,function Ql(w,g,y){return wu.apply(this,arguments)}(y._delegate,g,Co))})()}linkWithRedirect(g){var y=this;return(0,u.Z)(function*(){return yield tc(At(y.auth)),function Wr(w,g,y){return function Fs(w,g,y){return al.apply(this,arguments)}(w,g,y)}(y._delegate,g,Co)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,u.Z)(function*(){return Qs(y.auth,pr(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return xu(this.auth,function Na(w,g,y){return sl.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return Qs(this.auth,function ka(w,g,y){return ea.apply(this,arguments)}(this._delegate,g,Co))}reauthenticateWithRedirect(g){var y=this;return(0,u.Z)(function*(){return yield tc(At(y.auth)),function Tr(w,g,y){return function lr(w,g,y){return so.apply(this,arguments)}(w,g,y)}(y._delegate,g,Co)})()}sendEmailVerification(g){return function Ws(w,g){return Qo.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,u.Z)(function*(){return yield function Ts(w,g){return Fo.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Sl(w,g){return nl((0,Z.m9)(w),g,null)}(this._delegate,g)}updatePassword(g){return function tl(w,g){return nl((0,Z.m9)(w),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Pl(w,g){return io.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Sa(w,g){return Aa.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function Xa(w,g,y){return Gi.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Do.USER_MAP=new WeakMap;const ra=qe;let sc=(()=>{class w{constructor(y,S){if(this.app=y,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:q}=y.options;ra(q,"invalid-api-key",{appName:y.name}),ra(q,"invalid-api-key",{appName:y.name});const he="undefined"!=typeof window?Co:void 0;this._delegate=S.initialize({options:{persistence:dh(q,y.name),popupRedirectResolver:he}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Do.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,S){!function sr(w,g,y){const S=At(w);qe(S._canInitEmulator,S,"emulator-config-failed"),qe(/^https?:\/\//.test(g),S,"invalid-emulator-scheme");const q=!!(null==y?void 0:y.disableWarnings),he=hr(g),{host:tt,port:Tt}=function ti(w){const g=hr(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const S=y[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(S);if(q){const he=q[1];return{host:he,port:Yr(S.substr(he.length+1))}}{const[he,tt]=S.split(":");return{host:he,port:Yr(tt)}}}(g);S.config.emulator={url:`${he}//${tt}${null===Tt?"":`:${Tt}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:tt,port:Tt,protocol:he.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function fi(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,S)}applyActionCode(y){return function V(w,g){return E.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return L(this._delegate,y)}confirmPasswordReset(y,S){return function oe(w,g,y){return v.apply(this,arguments)}(this._delegate,y,S)}createUserWithEmailAndPassword(y,S){var q=this;return(0,u.Z)(function*(){return Qs(q._delegate,function bn(w,g,y){return Nn.apply(this,arguments)}(q._delegate,y,S))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function sa(w,g){return Zo.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function no(w,g){const y=wi.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,u.Z)(function*(){ra(Wa(),y._delegate,"operation-not-supported-in-this-environment");const S=yield function ll(w,g){return Vr.apply(this,arguments)}(y._delegate,Co);return S?Qs(y._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function zo(w,g){At(w)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,S,q){const{next:he,error:tt,complete:Tt}=$c(y,S,q);return this._delegate.onAuthStateChanged(he,tt,Tt)}onIdTokenChanged(y,S,q){const{next:he,error:tt,complete:Tt}=$c(y,S,q);return this._delegate.onIdTokenChanged(he,tt,Tt)}sendSignInLinkToEmail(y,S){return function yi(w,g,y){return Pi.apply(this,arguments)}(this._delegate,y,S)}sendPasswordResetEmail(y,S){return function F(w,g,y){return N.apply(this,arguments)}(this._delegate,y,S||void 0)}setPersistence(y){var S=this;return(0,u.Z)(function*(){let q;switch(function su(w,g){iu(Object.values(Io).includes(g),w,"invalid-persistence-type"),(0,Z.b$)()?iu(g!==Io.SESSION,w,"unsupported-persistence-type"):(0,Z.UG)()?iu(g===Io.NONE,w,"unsupported-persistence-type"):Au()?iu(g===Io.NONE||g===Io.LOCAL&&(0,Z.hl)(),w,"unsupported-persistence-type"):iu(g===Io.NONE||Os(),w,"unsupported-persistence-type")}(S._delegate,y),y){case Io.SESSION:q=Ks;break;case Io.LOCAL:q=(yield De(B)._isAvailable())?B:ts;break;case Io.NONE:q=je;break;default:return ot("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(q)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Qs(this._delegate,function vo(w){return cs.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Qs(this._delegate,Qt(this._delegate,y))}signInWithCustomToken(y){return Qs(this._delegate,function uo(w,g){return ds.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,S){return Qs(this._delegate,function Nr(w,g,y){return Qt((0,Z.m9)(w),to.credential(g,y))}(this._delegate,y,S))}signInWithEmailLink(y,S){return Qs(this._delegate,function Qi(w,g,y){return Xi.apply(this,arguments)}(this._delegate,y,S))}signInWithPhoneNumber(y,S){return xu(this._delegate,function hs(w,g,y){return ws.apply(this,arguments)}(this._delegate,y,S))}signInWithPopup(y){var S=this;return(0,u.Z)(function*(){return ra(Wa(),S._delegate,"operation-not-supported-in-this-environment"),Qs(S._delegate,function Ro(w,g,y){return wa.apply(this,arguments)}(S._delegate,y,Co))})()}signInWithRedirect(y){var S=this;return(0,u.Z)(function*(){return ra(Wa(),S._delegate,"operation-not-supported-in-this-environment"),yield tc(S._delegate),function Dn(w,g,y){return function mr(w,g,y){return er.apply(this,arguments)}(w,g,y)}(S._delegate,y,Co)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function dt(w,g){return Zt.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=Io,w})();function $c(w,g,y){let S=w;"function"!=typeof w&&({next:S,error:g,complete:y}=w);const q=S;return{next:tt=>q(tt&&Do.getOrCreate(tt)),error:g,complete:y}}function dh(w,g){const y=function Zs(w,g){const y=Bc();if(!y)return[];const S=vt(ec,w,g);switch(y.getItem(S)){case Io.NONE:return[je];case Io.LOCAL:return[B,Ks];case Io.SESSION:return[Ks];default:return[]}}(w,g);if("undefined"!=typeof self&&!y.includes(B)&&y.push(B),"undefined"!=typeof window)for(const S of[ts,Ks])y.includes(S)||y.push(S);return y.includes(je)||y.push(je),y}class au{constructor(){this.providerId="phone",this._delegate=new Ms(na(se.Z.auth()))}static credential(g,y){return Ms.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}au.PHONE_SIGN_IN_METHOD=Ms.PHONE_SIGN_IN_METHOD,au.PROVIDER_ID=Ms.PROVIDER_ID;const hh=qe;class fh{constructor(g,y,S=se.Z.app()){var q;hh(null===(q=S.options)||void 0===q?void 0:q.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new bs(g,y,S.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Nd(w){w.INTERNAL.registerComponent(new we.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),S=g.getProvider("auth");return new sc(y,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:to,FacebookAuthProvider:Kr,GithubAuthProvider:yo,GoogleAuthProvider:$s,OAuthProvider:ms,SAMLAuthProvider:Hi,PhoneAuthProvider:au,PhoneMultiFactorGenerator:oh,RecaptchaVerifier:fh,TwitterAuthProvider:_o,Auth:sc,AuthCredential:dr,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.11")}(se.Z)},591:(en,ut,H)=>{"use strict";H.d(ut,{X:()=>Z});var u=H(8929),se=H(5279);class Z extends u.xQ{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const ae=super._subscribe(Te);return ae&&!ae.closed&&Te.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new se.N;return this._value}next(Te){super.next(this._value=Te)}}},2916:(en,ut,H)=>{"use strict";H.d(ut,{y:()=>ge});var u=H(3489),Z=H(7668),ke=H(3292),ae=H(3821),we=H(5379);var ce=H(2830);let ge=(()=>{class de{constructor(Pe){this._isScalar=!1,Pe&&(this._subscribe=Pe)}lift(Pe){const ye=new de;return ye.source=this,ye.operator=Pe,ye}subscribe(Pe,ye,Ne){const{operator:Fe}=this,ht=function Te(de,Ue,Pe){if(de){if(de instanceof u.L)return de;if(de[Z.b])return de[Z.b]()}return de||Ue||Pe?new u.L(de,Ue,Pe):new u.L(ke.c)}(Pe,ye,Ne);if(ht.add(Fe?Fe.call(ht,this.source):this.source||ce.v.useDeprecatedSynchronousErrorHandling&&!ht.syncErrorThrowable?this._subscribe(ht):this._trySubscribe(ht)),ce.v.useDeprecatedSynchronousErrorHandling&&ht.syncErrorThrowable&&(ht.syncErrorThrowable=!1,ht.syncErrorThrown))throw ht.syncErrorValue;return ht}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(ye){ce.v.useDeprecatedSynchronousErrorHandling&&(Pe.syncErrorThrown=!0,Pe.syncErrorValue=ye),function se(de){for(;de;){const{closed:Ue,destination:Pe,isStopped:ye}=de;if(Ue||ye)return!1;de=Pe&&Pe instanceof u.L?Pe:null}return!0}(Pe)?Pe.error(ye):console.warn(ye)}}forEach(Pe,ye){return new(ye=te(ye))((Ne,Fe)=>{let ht;ht=this.subscribe(_e=>{try{Pe(_e)}catch(ot){Fe(ot),ht&&ht.unsubscribe()}},Fe,Ne)})}_subscribe(Pe){const{source:ye}=this;return ye&&ye.subscribe(Pe)}[ae.L](){return this}pipe(...Pe){return 0===Pe.length?this:function me(de){return 0===de.length?we.y:1===de.length?de[0]:function(Pe){return de.reduce((ye,Ne)=>Ne(ye),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=te(Pe))((ye,Ne)=>{let Fe;this.subscribe(ht=>Fe=ht,ht=>Ne(ht),()=>ye(Fe))})}}return de.create=Ue=>new de(Ue),de})();function te(de){if(de||(de=ce.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},3292:(en,ut,H)=>{"use strict";H.d(ut,{c:()=>Z});var u=H(2830),se=H(2782);const Z={closed:!0,next(ke){},error(ke){if(u.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,se.z)(ke)},complete(){}}},826:(en,ut,H)=>{"use strict";H.d(ut,{L:()=>se});var u=H(3489);class se extends u.L{notifyNext(ke,Te,ae,we,be){this.destination.next(Te)}notifyError(ke,Te){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},8929:(en,ut,H)=>{"use strict";H.d(ut,{Yc:()=>we,xQ:()=>be});var u=H(2916),se=H(3489),Z=H(2654),ke=H(5279),Te=H(5283),ae=H(7668);class we extends se.L{constructor(ge){super(ge),this.destination=ge}}let be=(()=>{class ce extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new we(this)}lift(te){const de=new me(this,this);return de.operator=te,de}next(te){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:de}=this,Ue=de.length,Pe=de.slice();for(let ye=0;ye<Ue;ye++)Pe[ye].next(te)}}error(te){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=te,this.isStopped=!0;const{observers:de}=this,Ue=de.length,Pe=de.slice();for(let ye=0;ye<Ue;ye++)Pe[ye].error(te);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:te}=this,de=te.length,Ue=te.slice();for(let Pe=0;Pe<de;Pe++)Ue[Pe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(te){if(this.closed)throw new ke.N;return super._trySubscribe(te)}_subscribe(te){if(this.closed)throw new ke.N;return this.hasError?(te.error(this.thrownError),Z.w.EMPTY):this.isStopped?(te.complete(),Z.w.EMPTY):(this.observers.push(te),new Te.W(this,te))}asObservable(){const te=new u.y;return te.source=this,te}}return ce.create=(ge,te)=>new me(ge,te),ce})();class me extends be{constructor(ge,te){super(),this.destination=ge,this.source=te}next(ge){const{destination:te}=this;te&&te.next&&te.next(ge)}error(ge){const{destination:te}=this;te&&te.error&&this.destination.error(ge)}complete(){const{destination:ge}=this;ge&&ge.complete&&this.destination.complete()}_subscribe(ge){const{source:te}=this;return te?this.source.subscribe(ge):Z.w.EMPTY}}},5283:(en,ut,H)=>{"use strict";H.d(ut,{W:()=>se});var u=H(2654);class se extends u.w{constructor(ke,Te){super(),this.subject=ke,this.subscriber=Te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,Te=ke.observers;if(this.subject=null,!Te||0===Te.length||ke.isStopped||ke.closed)return;const ae=Te.indexOf(this.subscriber);-1!==ae&&Te.splice(ae,1)}}},3489:(en,ut,H)=>{"use strict";H.d(ut,{L:()=>we});var u=H(7043),se=H(3292),Z=H(2654),ke=H(7668),Te=H(2830),ae=H(2782);class we extends Z.w{constructor(ce,ge,te){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=se.c;break;case 1:if(!ce){this.destination=se.c;break}if("object"==typeof ce){ce instanceof we?(this.syncErrorThrowable=ce.syncErrorThrowable,this.destination=ce,ce.add(this)):(this.syncErrorThrowable=!0,this.destination=new be(this,ce));break}default:this.syncErrorThrowable=!0,this.destination=new be(this,ce,ge,te)}}[ke.b](){return this}static create(ce,ge,te){const de=new we(ce,ge,te);return de.syncErrorThrowable=!1,de}next(ce){this.isStopped||this._next(ce)}error(ce){this.isStopped||(this.isStopped=!0,this._error(ce))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ce){this.destination.next(ce)}_error(ce){this.destination.error(ce),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ce}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ce,this}}class be extends we{constructor(ce,ge,te,de){super(),this._parentSubscriber=ce;let Ue,Pe=this;(0,u.m)(ge)?Ue=ge:ge&&(Ue=ge.next,te=ge.error,de=ge.complete,ge!==se.c&&(Pe=Object.create(ge),(0,u.m)(Pe.unsubscribe)&&this.add(Pe.unsubscribe.bind(Pe)),Pe.unsubscribe=this.unsubscribe.bind(this))),this._context=Pe,this._next=Ue,this._error=te,this._complete=de}next(ce){if(!this.isStopped&&this._next){const{_parentSubscriber:ge}=this;Te.v.useDeprecatedSynchronousErrorHandling&&ge.syncErrorThrowable?this.__tryOrSetError(ge,this._next,ce)&&this.unsubscribe():this.__tryOrUnsub(this._next,ce)}}error(ce){if(!this.isStopped){const{_parentSubscriber:ge}=this,{useDeprecatedSynchronousErrorHandling:te}=Te.v;if(this._error)te&&ge.syncErrorThrowable?(this.__tryOrSetError(ge,this._error,ce),this.unsubscribe()):(this.__tryOrUnsub(this._error,ce),this.unsubscribe());else if(ge.syncErrorThrowable)te?(ge.syncErrorValue=ce,ge.syncErrorThrown=!0):(0,ae.z)(ce),this.unsubscribe();else{if(this.unsubscribe(),te)throw ce;(0,ae.z)(ce)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ce}=this;if(this._complete){const ge=()=>this._complete.call(this._context);Te.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,ge),this.unsubscribe()):(this.__tryOrUnsub(ge),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ce,ge){try{ce.call(this._context,ge)}catch(te){if(this.unsubscribe(),Te.v.useDeprecatedSynchronousErrorHandling)throw te;(0,ae.z)(te)}}__tryOrSetError(ce,ge,te){if(!Te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ge.call(this._context,te)}catch(de){return Te.v.useDeprecatedSynchronousErrorHandling?(ce.syncErrorValue=de,ce.syncErrorThrown=!0,!0):((0,ae.z)(de),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ce}=this;this._context=null,this._parentSubscriber=null,ce.unsubscribe()}}},2654:(en,ut,H)=>{"use strict";H.d(ut,{w:()=>ae});var u=H(6688),se=H(7830),Z=H(7043);const Te=(()=>{function be(me){return Error.call(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((ce,ge)=>`${ge+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me,this}return be.prototype=Object.create(Error.prototype),be})();class ae{constructor(me){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,me&&(this._ctorUnsubscribe=!0,this._unsubscribe=me)}unsubscribe(){let me;if(this.closed)return;let{_parentOrParents:ce,_ctorUnsubscribe:ge,_unsubscribe:te,_subscriptions:de}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ce instanceof ae)ce.remove(this);else if(null!==ce)for(let Ue=0;Ue<ce.length;++Ue)ce[Ue].remove(this);if((0,Z.m)(te)){ge&&(this._unsubscribe=void 0);try{te.call(this)}catch(Ue){me=Ue instanceof Te?we(Ue.errors):[Ue]}}if((0,u.k)(de)){let Ue=-1,Pe=de.length;for(;++Ue<Pe;){const ye=de[Ue];if((0,se.K)(ye))try{ye.unsubscribe()}catch(Ne){me=me||[],Ne instanceof Te?me=me.concat(we(Ne.errors)):me.push(Ne)}}}if(me)throw new Te(me)}add(me){let ce=me;if(!me)return ae.EMPTY;switch(typeof me){case"function":ce=new ae(me);case"object":if(ce===this||ce.closed||"function"!=typeof ce.unsubscribe)return ce;if(this.closed)return ce.unsubscribe(),ce;if(!(ce instanceof ae)){const de=ce;ce=new ae,ce._subscriptions=[de]}break;default:throw new Error("unrecognized teardown "+me+" added to Subscription.")}let{_parentOrParents:ge}=ce;if(null===ge)ce._parentOrParents=this;else if(ge instanceof ae){if(ge===this)return ce;ce._parentOrParents=[ge,this]}else{if(-1!==ge.indexOf(this))return ce;ge.push(this)}const te=this._subscriptions;return null===te?this._subscriptions=[ce]:te.push(ce),ce}remove(me){const ce=this._subscriptions;if(ce){const ge=ce.indexOf(me);-1!==ge&&ce.splice(ge,1)}}}var be;function we(be){return be.reduce((me,ce)=>me.concat(ce instanceof Te?ce.errors:ce),[])}ae.EMPTY=((be=new ae).closed=!0,be)},2830:(en,ut,H)=>{"use strict";H.d(ut,{v:()=>se});let u=!1;const se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=Z},get useDeprecatedSynchronousErrorHandling(){return u}}},1177:(en,ut,H)=>{"use strict";H.d(ut,{IY:()=>ke,Ds:()=>ae,ft:()=>be});var u=H(3489),se=H(2916),Z=H(9249);class ke extends u.L{constructor(ce){super(),this.parent=ce}_next(ce){this.parent.notifyNext(ce)}_error(ce){this.parent.notifyError(ce),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends u.L{notifyNext(ce){this.destination.next(ce)}notifyError(ce){this.destination.error(ce)}notifyComplete(){this.destination.complete()}}function be(me,ce){if(ce.closed)return;if(me instanceof se.y)return me.subscribe(ce);let ge;try{ge=(0,Z.s)(me)(ce)}catch(te){ce.error(te)}return ge}},1762:(en,ut,H)=>{"use strict";H.d(ut,{c:()=>Te,N:()=>ae});var u=H(8929),se=H(2916),Z=H(2654),ke=H(4327);class Te extends se.y{constructor(ge,te){super(),this.source=ge,this.subjectFactory=te,this._refCount=0,this._isComplete=!1}_subscribe(ge){return this.getSubject().subscribe(ge)}getSubject(){const ge=this._subject;return(!ge||ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ge=this._connection;return ge||(this._isComplete=!1,ge=this._connection=new Z.w,ge.add(this.source.subscribe(new we(this.getSubject(),this))),ge.closed&&(this._connection=null,ge=Z.w.EMPTY)),ge}refCount(){return(0,ke.x)()(this)}}const ae=(()=>{const ce=Te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ce._subscribe},_isComplete:{value:ce._isComplete,writable:!0},getSubject:{value:ce.getSubject},connect:{value:ce.connect},refCount:{value:ce.refCount}}})();class we extends u.Yc{constructor(ge,te){super(ge),this.connectable=te}_error(ge){this._unsubscribe(),super._error(ge)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ge=this.connectable;if(ge){this.connectable=null;const te=ge._connection;ge._refCount=0,ge._subject=null,ge._connection=null,te&&te.unsubscribe()}}}},1221:(en,ut,H)=>{"use strict";H.d(ut,{z:()=>ke});var u=H(1086),se=H(9146);function ke(...Te){return function Z(){return(0,se.J)(1)}()((0,u.of)(...Te))}},8896:(en,ut,H)=>{"use strict";H.d(ut,{E:()=>se,c:()=>Z});var u=H(2916);const se=new u.y(Te=>Te.complete());function Z(Te){return Te?function ke(Te){return new u.y(ae=>Te.schedule(()=>ae.complete()))}(Te):se}},5254:(en,ut,H)=>{"use strict";H.d(ut,{D:()=>Pe});var u=H(2916),se=H(9249),Z=H(2654),ke=H(3821),we=H(6454),be=H(5430),ge=H(8955),te=H(8515);function Pe(ye,Ne){return Ne?function Ue(ye,Ne){if(null!=ye){if(function ce(ye){return ye&&"function"==typeof ye[ke.L]}(ye))return function Te(ye,Ne){return new u.y(Fe=>{const ht=new Z.w;return ht.add(Ne.schedule(()=>{const _e=ye[ke.L]();ht.add(_e.subscribe({next(ot){ht.add(Ne.schedule(()=>Fe.next(ot)))},error(ot){ht.add(Ne.schedule(()=>Fe.error(ot)))},complete(){ht.add(Ne.schedule(()=>Fe.complete()))}}))})),ht})}(ye,Ne);if((0,ge.t)(ye))return function ae(ye,Ne){return new u.y(Fe=>{const ht=new Z.w;return ht.add(Ne.schedule(()=>ye.then(_e=>{ht.add(Ne.schedule(()=>{Fe.next(_e),ht.add(Ne.schedule(()=>Fe.complete()))}))},_e=>{ht.add(Ne.schedule(()=>Fe.error(_e)))}))),ht})}(ye,Ne);if((0,te.z)(ye))return(0,we.r)(ye,Ne);if(function de(ye){return ye&&"function"==typeof ye[be.hZ]}(ye)||"string"==typeof ye)return function me(ye,Ne){if(!ye)throw new Error("Iterable cannot be null");return new u.y(Fe=>{const ht=new Z.w;let _e;return ht.add(()=>{_e&&"function"==typeof _e.return&&_e.return()}),ht.add(Ne.schedule(()=>{_e=ye[be.hZ](),ht.add(Ne.schedule(function(){if(Fe.closed)return;let ot,Ve;try{const rt=_e.next();ot=rt.value,Ve=rt.done}catch(rt){return void Fe.error(rt)}Ve?Fe.complete():(Fe.next(ot),this.schedule())}))})),ht})}(ye,Ne)}throw new TypeError((null!==ye&&typeof ye||ye)+" is not observable")}(ye,Ne):ye instanceof u.y?ye:new u.y((0,se.s)(ye))}},3009:(en,ut,H)=>{"use strict";H.d(ut,{n:()=>ke});var u=H(2916),se=H(3650),Z=H(6454);function ke(Te,ae){return ae?(0,Z.r)(Te,ae):new u.y((0,se.V)(Te))}},6787:(en,ut,H)=>{"use strict";H.d(ut,{T:()=>Te});var u=H(2916),se=H(2866),Z=H(9146),ke=H(3009);function Te(...ae){let we=Number.POSITIVE_INFINITY,be=null,me=ae[ae.length-1];return(0,se.K)(me)?(be=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(we=ae.pop())):"number"==typeof me&&(we=ae.pop()),null===be&&1===ae.length&&ae[0]instanceof u.y?ae[0]:(0,Z.J)(we)((0,ke.n)(ae,be))}},1086:(en,ut,H)=>{"use strict";H.d(ut,{of:()=>ke});var u=H(2866),se=H(3009),Z=H(6454);function ke(...Te){let ae=Te[Te.length-1];return(0,u.K)(ae)?(Te.pop(),(0,Z.r)(Te,ae)):(0,se.n)(Te)}},1737:(en,ut,H)=>{"use strict";H.d(ut,{_:()=>se});var u=H(2916);function se(ke,Te){return new u.y(Te?ae=>Te.schedule(Z,0,{error:ke,subscriber:ae}):ae=>ae.error(ke))}function Z({error:ke,subscriber:Te}){Te.error(ke)}},7314:(en,ut,H)=>{"use strict";H.d(ut,{d:()=>se});var u=H(3489);function se(Te=null){return ae=>ae.lift(new Z(Te))}class Z{constructor(ae){this.defaultValue=ae}call(ae,we){return we.subscribe(new ke(ae,this.defaultValue))}}class ke extends u.L{constructor(ae,we){super(ae),this.defaultValue=we,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(en,ut,H)=>{"use strict";H.d(ut,{x:()=>se});var u=H(3489);function se(Te,ae){return we=>we.lift(new Z(Te,ae))}class Z{constructor(ae,we){this.compare=ae,this.keySelector=we}call(ae,we){return we.subscribe(new ke(ae,this.compare,this.keySelector))}}class ke extends u.L{constructor(ae,we,be){super(ae),this.keySelector=be,this.hasKey=!1,"function"==typeof we&&(this.compare=we)}compare(ae,we){return ae===we}_next(ae){let we;try{const{keySelector:me}=this;we=me?me(ae):ae}catch(me){return this.destination.error(me)}let be=!1;if(this.hasKey)try{const{compare:me}=this;be=me(this.key,we)}catch(me){return this.destination.error(me)}else this.hasKey=!0;be||(this.key=we,this.destination.next(ae))}}},2198:(en,ut,H)=>{"use strict";H.d(ut,{h:()=>se});var u=H(3489);function se(Te,ae){return function(be){return be.lift(new Z(Te,ae))}}class Z{constructor(ae,we){this.predicate=ae,this.thisArg=we}call(ae,we){return we.subscribe(new ke(ae,this.predicate,this.thisArg))}}class ke extends u.L{constructor(ae,we,be){super(ae),this.predicate=we,this.thisArg=be,this.count=0}_next(ae){let we;try{we=this.predicate.call(this.thisArg,ae,this.count++)}catch(be){return void this.destination.error(be)}we&&this.destination.next(ae)}}},7224:(en,ut,H)=>{"use strict";H.d(ut,{P:()=>we});var u=H(4450),se=H(2198),Z=H(2986),ke=H(7314),Te=H(4907),ae=H(5379);function we(be,me){const ce=arguments.length>=2;return ge=>ge.pipe(be?(0,se.h)((te,de)=>be(te,de,ge)):ae.y,(0,Z.q)(1),ce?(0,ke.d)(me):(0,Te.T)(()=>new u.K))}},4850:(en,ut,H)=>{"use strict";H.d(ut,{U:()=>se});var u=H(3489);function se(Te,ae){return function(be){if("function"!=typeof Te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return be.lift(new Z(Te,ae))}}class Z{constructor(ae,we){this.project=ae,this.thisArg=we}call(ae,we){return we.subscribe(new ke(ae,this.project,this.thisArg))}}class ke extends u.L{constructor(ae,we,be){super(ae),this.project=we,this.count=0,this.thisArg=be||this}_next(ae){let we;try{we=this.project.call(this.thisArg,ae,this.count++)}catch(be){return void this.destination.error(be)}this.destination.next(we)}}},9146:(en,ut,H)=>{"use strict";H.d(ut,{J:()=>Z});var u=H(1709),se=H(5379);function Z(ke=Number.POSITIVE_INFINITY){return(0,u.zg)(se.y,ke)}},1709:(en,ut,H)=>{"use strict";H.d(ut,{zg:()=>ke});var u=H(4850),se=H(5254),Z=H(1177);function ke(be,me,ce=Number.POSITIVE_INFINITY){return"function"==typeof me?ge=>ge.pipe(ke((te,de)=>(0,se.D)(be(te,de)).pipe((0,u.U)((Ue,Pe)=>me(te,Ue,de,Pe))),ce)):("number"==typeof me&&(ce=me),ge=>ge.lift(new Te(be,ce)))}class Te{constructor(me,ce=Number.POSITIVE_INFINITY){this.project=me,this.concurrent=ce}call(me,ce){return ce.subscribe(new ae(me,this.project,this.concurrent))}}class ae extends Z.Ds{constructor(me,ce,ge=Number.POSITIVE_INFINITY){super(me),this.project=ce,this.concurrent=ge,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(me){this.active<this.concurrent?this._tryNext(me):this.buffer.push(me)}_tryNext(me){let ce;const ge=this.index++;try{ce=this.project(me,ge)}catch(te){return void this.destination.error(te)}this.active++,this._innerSub(ce)}_innerSub(me){const ce=new Z.IY(this),ge=this.destination;ge.add(ce);const te=(0,Z.ft)(me,ce);te!==ce&&ge.add(te)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(me){this.destination.next(me)}notifyComplete(){const me=this.buffer;this.active--,me.length>0?this._next(me.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(en,ut,H)=>{"use strict";H.d(ut,{ht:()=>me,QV:()=>we});var u=H(3489),se=H(8896),Z=H(1086),ke=H(1737);class ae{constructor(te,de,Ue){this.kind=te,this.value=de,this.error=Ue,this.hasValue="N"===te}observe(te){switch(this.kind){case"N":return te.next&&te.next(this.value);case"E":return te.error&&te.error(this.error);case"C":return te.complete&&te.complete()}}do(te,de,Ue){switch(this.kind){case"N":return te&&te(this.value);case"E":return de&&de(this.error);case"C":return Ue&&Ue()}}accept(te,de,Ue){return te&&"function"==typeof te.next?this.observe(te):this.do(te,de,Ue)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return(0,ke._)(this.error);case"C":return(0,se.c)()}throw new Error("unexpected notification kind value")}static createNext(te){return void 0!==te?new ae("N",te):ae.undefinedValueNotification}static createError(te){return new ae("E",void 0,te)}static createComplete(){return ae.completeNotification}}function we(ge,te=0){return function(Ue){return Ue.lift(new be(ge,te))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class be{constructor(te,de=0){this.scheduler=te,this.delay=de}call(te,de){return de.subscribe(new me(te,this.scheduler,this.delay))}}class me extends u.L{constructor(te,de,Ue=0){super(te),this.scheduler=de,this.delay=Ue}static dispatch(te){const{notification:de,destination:Ue}=te;de.observe(Ue),this.unsubscribe()}scheduleMessage(te){this.destination.add(this.scheduler.schedule(me.dispatch,this.delay,new ce(te,this.destination)))}_next(te){this.scheduleMessage(ae.createNext(te))}_error(te){this.scheduleMessage(ae.createError(te)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class ce{constructor(te,de){this.notification=te,this.destination=de}}},4327:(en,ut,H)=>{"use strict";H.d(ut,{x:()=>se});var u=H(3489);function se(){return function(ae){return ae.lift(new Z(ae))}}class Z{constructor(ae){this.connectable=ae}call(ae,we){const{connectable:be}=this;be._refCount++;const me=new ke(ae,be),ce=we.subscribe(me);return me.closed||(me.connection=be.connect()),ce}}class ke extends u.L{constructor(ae,we){super(ae),this.connectable=we}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const we=ae._refCount;if(we<=0)return void(this.connection=null);if(ae._refCount=we-1,we>1)return void(this.connection=null);const{connection:be}=this,me=ae._connection;this.connection=null,me&&(!be||me===be)&&me.unsubscribe()}}},2014:(en,ut,H)=>{"use strict";H.d(ut,{R:()=>se});var u=H(3489);function se(Te,ae){let we=!1;return arguments.length>=2&&(we=!0),function(me){return me.lift(new Z(Te,ae,we))}}class Z{constructor(ae,we,be=!1){this.accumulator=ae,this.seed=we,this.hasSeed=be}call(ae,we){return we.subscribe(new ke(ae,this.accumulator,this.seed,this.hasSeed))}}class ke extends u.L{constructor(ae,we,be,me){super(ae),this.accumulator=we,this._seed=be,this.hasSeed=me,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const we=this.index++;let be;try{be=this.accumulator(this.seed,ae,we)}catch(me){this.destination.error(me)}this.seed=be,this.destination.next(be)}}},2474:(en,ut,H)=>{"use strict";H.d(ut,{B:()=>we});var u=H(1762);class Z{constructor(me,ce){this.subjectFactory=me,this.selector=ce}call(me,ce){const{selector:ge}=this,te=this.subjectFactory(),de=ge(te).subscribe(me);return de.add(ce.subscribe(te)),de}}var ke=H(4327),Te=H(8929);function ae(){return new Te.xQ}function we(){return be=>(0,ke.x)()(function se(be,me){return function(ge){let te;if(te="function"==typeof be?be:function(){return be},"function"==typeof me)return ge.lift(new Z(te,me));const de=Object.create(ge,u.N);return de.source=ge,de.subjectFactory=te,de}}(ae)(be))}},1059:(en,ut,H)=>{"use strict";H.d(ut,{O:()=>Z});var u=H(1221),se=H(2866);function Z(...ke){const Te=ke[ke.length-1];return(0,se.K)(Te)?(ke.pop(),ae=>(0,u.z)(ke,ae,Te)):ae=>(0,u.z)(ke,ae)}},8915:(en,ut,H)=>{"use strict";H.d(ut,{R:()=>Ne});var u=H(2916);let se=1;const Z=Promise.resolve(),ke={};function Te(ht){return ht in ke&&(delete ke[ht],!0)}const ae={setImmediate(ht){const _e=se++;return ke[_e]=!0,Z.then(()=>Te(_e)&&ht()),_e},clearImmediate(ht){Te(ht)}};var be=H(6686),ce=H(2268);const de=new class ge extends ce.v{flush(_e){this.active=!0,this.scheduled=void 0;const{actions:ot}=this;let Ve,rt=-1,_t=ot.length;_e=_e||ot.shift();do{if(Ve=_e.execute(_e.state,_e.delay))break}while(++rt<_t&&(_e=ot.shift()));if(this.active=!1,Ve){for(;++rt<_t&&(_e=ot.shift());)_e.unsubscribe();throw Ve}}}(class me extends be.o{constructor(_e,ot){super(_e,ot),this.scheduler=_e,this.work=ot}requestAsyncId(_e,ot,Ve=0){return null!==Ve&&Ve>0?super.requestAsyncId(_e,ot,Ve):(_e.actions.push(this),_e.scheduled||(_e.scheduled=ae.setImmediate(_e.flush.bind(_e,null))))}recycleAsyncId(_e,ot,Ve=0){if(null!==Ve&&Ve>0||null===Ve&&this.delay>0)return super.recycleAsyncId(_e,ot,Ve);0===_e.actions.length&&(ae.clearImmediate(ot),_e.scheduled=void 0)}});var Ue=H(6688);class ye extends u.y{constructor(_e,ot=0,Ve=de){super(),this.source=_e,this.delayTime=ot,this.scheduler=Ve,(!function Pe(ht){return!(0,Ue.k)(ht)&&ht-parseFloat(ht)+1>=0}(ot)||ot<0)&&(this.delayTime=0),(!Ve||"function"!=typeof Ve.schedule)&&(this.scheduler=de)}static create(_e,ot=0,Ve=de){return new ye(_e,ot,Ve)}static dispatch(_e){const{source:ot,subscriber:Ve}=_e;return this.add(ot.subscribe(Ve))}_subscribe(_e){return this.scheduler.schedule(ye.dispatch,this.delayTime,{source:this.source,subscriber:_e})}}function Ne(ht,_e=0){return function(Ve){return Ve.lift(new Fe(ht,_e))}}class Fe{constructor(_e,ot){this.scheduler=_e,this.delay=ot}call(_e,ot){return new ye(ot,this.delay,this.scheduler).subscribe(_e)}}},7545:(en,ut,H)=>{"use strict";H.d(ut,{w:()=>ke});var u=H(4850),se=H(5254),Z=H(1177);function ke(we,be){return"function"==typeof be?me=>me.pipe(ke((ce,ge)=>(0,se.D)(we(ce,ge)).pipe((0,u.U)((te,de)=>be(ce,te,ge,de))))):me=>me.lift(new Te(we))}class Te{constructor(be){this.project=be}call(be,me){return me.subscribe(new ae(be,this.project))}}class ae extends Z.Ds{constructor(be,me){super(be),this.project=me,this.index=0}_next(be){let me;const ce=this.index++;try{me=this.project(be,ce)}catch(ge){return void this.destination.error(ge)}this._innerSub(me)}_innerSub(be){const me=this.innerSubscription;me&&me.unsubscribe();const ce=new Z.IY(this),ge=this.destination;ge.add(ce),this.innerSubscription=(0,Z.ft)(be,ce),this.innerSubscription!==ce&&ge.add(this.innerSubscription)}_complete(){const{innerSubscription:be}=this;(!be||be.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(be){this.destination.next(be)}}},2986:(en,ut,H)=>{"use strict";H.d(ut,{q:()=>ke});var u=H(3489),se=H(4231),Z=H(8896);function ke(we){return be=>0===we?(0,Z.c)():be.lift(new Te(we))}class Te{constructor(be){if(this.total=be,this.total<0)throw new se.W}call(be,me){return me.subscribe(new ae(be,this.total))}}class ae extends u.L{constructor(be,me){super(be),this.total=me,this.count=0}_next(be){const me=this.total,ce=++this.count;ce<=me&&(this.destination.next(be),ce===me&&(this.destination.complete(),this.unsubscribe()))}}},2868:(en,ut,H)=>{"use strict";H.d(ut,{b:()=>ke});var u=H(3489);function se(){}var Z=H(7043);function ke(we,be,me){return function(ge){return ge.lift(new Te(we,be,me))}}class Te{constructor(be,me,ce){this.nextOrObserver=be,this.error=me,this.complete=ce}call(be,me){return me.subscribe(new ae(be,this.nextOrObserver,this.error,this.complete))}}class ae extends u.L{constructor(be,me,ce,ge){super(be),this._tapNext=se,this._tapError=se,this._tapComplete=se,this._tapError=ce||se,this._tapComplete=ge||se,(0,Z.m)(me)?(this._context=this,this._tapNext=me):me&&(this._context=me,this._tapNext=me.next||se,this._tapError=me.error||se,this._tapComplete=me.complete||se)}_next(be){try{this._tapNext.call(this._context,be)}catch(me){return void this.destination.error(me)}this.destination.next(be)}_error(be){try{this._tapError.call(this._context,be)}catch(me){return void this.destination.error(me)}this.destination.error(be)}_complete(){try{this._tapComplete.call(this._context)}catch(be){return void this.destination.error(be)}return this.destination.complete()}}},4907:(en,ut,H)=>{"use strict";H.d(ut,{T:()=>Z});var u=H(4450),se=H(3489);function Z(we=ae){return be=>be.lift(new ke(we))}class ke{constructor(be){this.errorFactory=be}call(be,me){return me.subscribe(new Te(be,this.errorFactory))}}class Te extends se.L{constructor(be,me){super(be),this.errorFactory=me,this.hasValue=!1}_next(be){this.hasValue=!0,this.destination.next(be)}_complete(){if(this.hasValue)return this.destination.complete();{let be;try{be=this.errorFactory()}catch(me){be=me}this.destination.error(be)}}}function ae(){return new u.K}},6454:(en,ut,H)=>{"use strict";H.d(ut,{r:()=>Z});var u=H(2916),se=H(2654);function Z(ke,Te){return new u.y(ae=>{const we=new se.w;let be=0;return we.add(Te.schedule(function(){be!==ke.length?(ae.next(ke[be++]),ae.closed||we.add(this.schedule())):ae.complete()})),we})}},6686:(en,ut,H)=>{"use strict";H.d(ut,{o:()=>Z});var u=H(2654);class se extends u.w{constructor(Te,ae){super()}schedule(Te,ae=0){return this}}class Z extends se{constructor(Te,ae){super(Te,ae),this.scheduler=Te,this.work=ae,this.pending=!1}schedule(Te,ae=0){if(this.closed)return this;this.state=Te;const we=this.id,be=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(be,we,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(be,this.id,ae),this}requestAsyncId(Te,ae,we=0){return setInterval(Te.flush.bind(Te,this),we)}recycleAsyncId(Te,ae,we=0){if(null!==we&&this.delay===we&&!1===this.pending)return ae;clearInterval(ae)}execute(Te,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Te,ae);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Te,ae){let be,we=!1;try{this.work(Te)}catch(me){we=!0,be=!!me&&me||new Error(me)}if(we)return this.unsubscribe(),be}_unsubscribe(){const Te=this.id,ae=this.scheduler,we=ae.actions,be=we.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==be&&we.splice(be,1),null!=Te&&(this.id=this.recycleAsyncId(ae,Te,null)),this.delay=null}}},2268:(en,ut,H)=>{"use strict";H.d(ut,{v:()=>se});let u=(()=>{class Z{constructor(Te,ae=Z.now){this.SchedulerAction=Te,this.now=ae}schedule(Te,ae=0,we){return new this.SchedulerAction(this,Te).schedule(we,ae)}}return Z.now=()=>Date.now(),Z})();class se extends u{constructor(ke,Te=u.now){super(ke,()=>se.delegate&&se.delegate!==this?se.delegate.now():Te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,Te=0,ae){return se.delegate&&se.delegate!==this?se.delegate.schedule(ke,Te,ae):super.schedule(ke,Te,ae)}flush(ke){const{actions:Te}=this;if(this.active)return void Te.push(ke);let ae;this.active=!0;do{if(ae=ke.execute(ke.state,ke.delay))break}while(ke=Te.shift());if(this.active=!1,ae){for(;ke=Te.shift();)ke.unsubscribe();throw ae}}}},353:(en,ut,H)=>{"use strict";H.d(ut,{z:()=>Z});var u=H(6686);const Z=new(H(2268).v)(u.o)},341:(en,ut,H)=>{"use strict";H.d(ut,{c:()=>ae,N:()=>Te});var u=H(6686),Z=H(2268);const Te=new class ke extends Z.v{}(class se extends u.o{constructor(be,me){super(be,me),this.scheduler=be,this.work=me}schedule(be,me=0){return me>0?super.schedule(be,me):(this.delay=me,this.state=be,this.scheduler.flush(this),this)}execute(be,me){return me>0||this.closed?super.execute(be,me):this._execute(be,me)}requestAsyncId(be,me,ce=0){return null!==ce&&ce>0||null===ce&&this.delay>0?super.requestAsyncId(be,me,ce):be.flush(this)}}),ae=Te},5430:(en,ut,H)=>{"use strict";H.d(ut,{hZ:()=>se});const se=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(en,ut,H)=>{"use strict";H.d(ut,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(en,ut,H)=>{"use strict";H.d(ut,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(en,ut,H)=>{"use strict";H.d(ut,{W:()=>se});const se=(()=>{function Z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Z.prototype=Object.create(Error.prototype),Z})()},4450:(en,ut,H)=>{"use strict";H.d(ut,{K:()=>se});const se=(()=>{function Z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Z.prototype=Object.create(Error.prototype),Z})()},5279:(en,ut,H)=>{"use strict";H.d(ut,{N:()=>se});const se=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2782:(en,ut,H)=>{"use strict";function u(se){setTimeout(()=>{throw se},0)}H.d(ut,{z:()=>u})},5379:(en,ut,H)=>{"use strict";function u(se){return se}H.d(ut,{y:()=>u})},6688:(en,ut,H)=>{"use strict";H.d(ut,{k:()=>u});const u=Array.isArray||(se=>se&&"number"==typeof se.length)},8515:(en,ut,H)=>{"use strict";H.d(ut,{z:()=>u});const u=se=>se&&"number"==typeof se.length&&"function"!=typeof se},7043:(en,ut,H)=>{"use strict";function u(se){return"function"==typeof se}H.d(ut,{m:()=>u})},7830:(en,ut,H)=>{"use strict";function u(se){return null!==se&&"object"==typeof se}H.d(ut,{K:()=>u})},8955:(en,ut,H)=>{"use strict";function u(se){return!!se&&"function"!=typeof se.subscribe&&"function"==typeof se.then}H.d(ut,{t:()=>u})},2866:(en,ut,H)=>{"use strict";function u(se){return se&&"function"==typeof se.schedule}H.d(ut,{K:()=>u})},9249:(en,ut,H)=>{"use strict";H.d(ut,{s:()=>ge});var u=H(3650),se=H(2782),ke=H(5430),ae=H(3821),be=H(8515),me=H(8955),ce=H(7830);const ge=te=>{if(te&&"function"==typeof te[ae.L])return(te=>de=>{const Ue=te[ae.L]();if("function"!=typeof Ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ue.subscribe(de)})(te);if((0,be.z)(te))return(0,u.V)(te);if((0,me.t)(te))return(te=>de=>(te.then(Ue=>{de.closed||(de.next(Ue),de.complete())},Ue=>de.error(Ue)).then(null,se.z),de))(te);if(te&&"function"==typeof te[ke.hZ])return(te=>de=>{const Ue=te[ke.hZ]();for(;;){let Pe;try{Pe=Ue.next()}catch(ye){return de.error(ye),de}if(Pe.done){de.complete();break}if(de.next(Pe.value),de.closed)break}return"function"==typeof Ue.return&&de.add(()=>{Ue.return&&Ue.return()}),de})(te);{const Ue=`You provided ${(0,ce.K)(te)?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ue)}}},3650:(en,ut,H)=>{"use strict";H.d(ut,{V:()=>u});const u=se=>Z=>{for(let ke=0,Te=se.length;ke<Te&&!Z.closed;ke++)Z.next(se[ke]);Z.complete()}},448:(en,ut,H)=>{"use strict";H.d(ut,{D:()=>Te});var u=H(3489);class se extends u.L{constructor(we,be,me){super(),this.parent=we,this.outerValue=be,this.outerIndex=me,this.index=0}_next(we){this.parent.notifyNext(this.outerValue,we,this.outerIndex,this.index++,this)}_error(we){this.parent.notifyError(we,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=H(9249),ke=H(2916);function Te(ae,we,be,me,ce=new se(ae,be,me)){if(!ce.closed)return we instanceof ke.y?we.subscribe(ce):(0,Z.s)(we)(ce)}},863:(en,ut,H)=>{var u={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function se(Z){if(!H.o(u,Z))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+Z+"'");throw ae.code="MODULE_NOT_FOUND",ae});var ke=u[Z],Te=ke[0];return Promise.all(ke.slice(1).map(H.e)).then(()=>H(Te))}se.keys=()=>Object.keys(u),se.id=863,en.exports=se},655:(en,ut,H)=>{"use strict";function ke(pe,Be){var ve={};for(var De in pe)Object.prototype.hasOwnProperty.call(pe,De)&&Be.indexOf(De)<0&&(ve[De]=pe[De]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(De=Object.getOwnPropertySymbols(pe);Je<De.length;Je++)Be.indexOf(De[Je])<0&&Object.prototype.propertyIsEnumerable.call(pe,De[Je])&&(ve[De[Je]]=pe[De[Je]])}return ve}function Te(pe,Be,ve,De){var jt,Je=arguments.length,Ze=Je<3?Be:null===De?De=Object.getOwnPropertyDescriptor(Be,ve):De;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ze=Reflect.decorate(pe,Be,ve,De);else for(var Jt=pe.length-1;Jt>=0;Jt--)(jt=pe[Jt])&&(Ze=(Je<3?jt(Ze):Je>3?jt(Be,ve,Ze):jt(Be,ve))||Ze);return Je>3&&Ze&&Object.defineProperty(Be,ve,Ze),Ze}function be(pe,Be,ve,De){return new(ve||(ve=Promise))(function(Ze,jt){function Jt(Qe){try{st(De.next(Qe))}catch(nt){jt(nt)}}function pt(Qe){try{st(De.throw(Qe))}catch(nt){jt(nt)}}function st(Qe){Qe.done?Ze(Qe.value):function Je(Ze){return Ze instanceof ve?Ze:new ve(function(jt){jt(Ze)})}(Qe.value).then(Jt,pt)}st((De=De.apply(pe,Be||[])).next())})}H.d(ut,{_T:()=>ke,gn:()=>Te,mG:()=>be})},9808:(en,ut,H)=>{"use strict";H.d(ut,{mr:()=>ht,ez:()=>zs,K0:()=>we,Do:()=>ot,V_:()=>ce,Ye:()=>Ve,S$:()=>Ne,sg:()=>Xr,O5:()=>Q,tP:()=>En,b0:()=>_e,lw:()=>be,EM:()=>ys,JF:()=>Er,PM:()=>mi,w_:()=>ae,bD:()=>Ns,q:()=>Z,Mx:()=>qi,HT:()=>Te});var u=H(5e3);let se=null;function Z(){return se}function Te($){se||(se=$)}class ae{}const we=new u.OlP("DocumentToken");let be=(()=>{class ${historyGo(U){throw new Error("Not implemented")}}return $.\u0275fac=function(U){return new(U||$)},$.\u0275prov=u.Yz7({token:$,factory:function(){return function me(){return(0,u.LFG)(ge)}()},providedIn:"platform"}),$})();const ce=new u.OlP("Location Initialized");let ge=(()=>{class $ extends be{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(U){const le=Z().getGlobalEventTarget(this._doc,"window");return le.addEventListener("popstate",U,!1),()=>le.removeEventListener("popstate",U)}onHashChange(U){const le=Z().getGlobalEventTarget(this._doc,"window");return le.addEventListener("hashchange",U,!1),()=>le.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,le,ze){te()?this._history.pushState(U,le,ze):this.location.hash=ze}replaceState(U,le,ze){te()?this._history.replaceState(U,le,ze):this.location.hash=ze}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return $.\u0275fac=function(U){return new(U||$)(u.LFG(we))},$.\u0275prov=u.Yz7({token:$,factory:function(){return function de(){return new ge((0,u.LFG)(we))}()},providedIn:"platform"}),$})();function te(){return!!window.history.pushState}function Ue($,ee){if(0==$.length)return ee;if(0==ee.length)return $;let U=0;return $.endsWith("/")&&U++,ee.startsWith("/")&&U++,2==U?$+ee.substring(1):1==U?$+ee:$+"/"+ee}function Pe($){const ee=$.match(/#|\?|$/),U=ee&&ee.index||$.length;return $.slice(0,U-("/"===$[U-1]?1:0))+$.slice(U)}function ye($){return $&&"?"!==$[0]?"?"+$:$}let Ne=(()=>{class ${historyGo(U){throw new Error("Not implemented")}}return $.\u0275fac=function(U){return new(U||$)},$.\u0275prov=u.Yz7({token:$,factory:function(){return function Fe($){const ee=(0,u.LFG)(we).location;return new _e((0,u.LFG)(be),ee&&ee.origin||"")}()},providedIn:"root"}),$})();const ht=new u.OlP("appBaseHref");let _e=(()=>{class $ extends Ne{constructor(U,le){if(super(),this._platformLocation=U,this._removeListenerFns=[],null==le&&(le=this._platformLocation.getBaseHrefFromDOM()),null==le)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=le}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Ue(this._baseHref,U)}path(U=!1){const le=this._platformLocation.pathname+ye(this._platformLocation.search),ze=this._platformLocation.hash;return ze&&U?`${le}${ze}`:le}pushState(U,le,ze,mt){const Ft=this.prepareExternalUrl(ze+ye(mt));this._platformLocation.pushState(U,le,Ft)}replaceState(U,le,ze,mt){const Ft=this.prepareExternalUrl(ze+ye(mt));this._platformLocation.replaceState(U,le,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var le,ze;null===(ze=(le=this._platformLocation).historyGo)||void 0===ze||ze.call(le,U)}}return $.\u0275fac=function(U){return new(U||$)(u.LFG(be),u.LFG(ht,8))},$.\u0275prov=u.Yz7({token:$,factory:$.\u0275fac}),$})(),ot=(()=>{class $ extends Ne{constructor(U,le){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=le&&(this._baseHref=le)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let le=this._platformLocation.hash;return null==le&&(le="#"),le.length>0?le.substring(1):le}prepareExternalUrl(U){const le=Ue(this._baseHref,U);return le.length>0?"#"+le:le}pushState(U,le,ze,mt){let Ft=this.prepareExternalUrl(ze+ye(mt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.pushState(U,le,Ft)}replaceState(U,le,ze,mt){let Ft=this.prepareExternalUrl(ze+ye(mt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.replaceState(U,le,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var le,ze;null===(ze=(le=this._platformLocation).historyGo)||void 0===ze||ze.call(le,U)}}return $.\u0275fac=function(U){return new(U||$)(u.LFG(be),u.LFG(ht,8))},$.\u0275prov=u.Yz7({token:$,factory:$.\u0275fac}),$})(),Ve=(()=>{class ${constructor(U,le){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=U;const ze=this._platformStrategy.getBaseHref();this._platformLocation=le,this._baseHref=Pe(St(ze)),this._platformStrategy.onPopState(mt=>{this._subject.emit({url:this.path(!0),pop:!0,state:mt.state,type:mt.type})})}path(U=!1){return this.normalize(this._platformStrategy.path(U))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(U,le=""){return this.path()==this.normalize(U+ye(le))}normalize(U){return $.stripTrailingSlash(function _t($,ee){return $&&ee.startsWith($)?ee.substring($.length):ee}(this._baseHref,St(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._platformStrategy.prepareExternalUrl(U)}go(U,le="",ze=null){this._platformStrategy.pushState(ze,"",U,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+ye(le)),ze)}replaceState(U,le="",ze=null){this._platformStrategy.replaceState(ze,"",U,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+ye(le)),ze)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(U=0){var le,ze;null===(ze=(le=this._platformStrategy).historyGo)||void 0===ze||ze.call(le,U)}onUrlChange(U){this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(le=>{this._notifyUrlChangeListeners(le.url,le.state)}))}_notifyUrlChangeListeners(U="",le){this._urlChangeListeners.forEach(ze=>ze(U,le))}subscribe(U,le,ze){return this._subject.subscribe({next:U,error:le,complete:ze})}}return $.normalizeQueryParams=ye,$.joinWithSlash=Ue,$.stripTrailingSlash=Pe,$.\u0275fac=function(U){return new(U||$)(u.LFG(Ne),u.LFG(be))},$.\u0275prov=u.Yz7({token:$,factory:function(){return function rt(){return new Ve((0,u.LFG)(Ne),(0,u.LFG)(be))}()},providedIn:"root"}),$})();function St($){return $.replace(/\/index.html$/,"")}function qi($,ee){ee=encodeURIComponent(ee);for(const U of $.split(";")){const le=U.indexOf("="),[ze,mt]=-1==le?[U,""]:[U.slice(0,le),U.slice(le+1)];if(ze.trim()===ee)return decodeURIComponent(mt)}return null}class ni{constructor(ee,U,le,ze){this.$implicit=ee,this.ngForOf=U,this.index=le,this.count=ze}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xr=(()=>{class ${constructor(U,le,ze){this._viewContainer=U,this._template=le,this._differs=ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const le=this._viewContainer;U.forEachOperation((ze,mt,Ft)=>{if(null==ze.previousIndex)le.createEmbeddedView(this._template,new ni(ze.item,this._ngForOf,-1,-1),null===Ft?void 0:Ft);else if(null==Ft)le.remove(null===mt?void 0:mt);else if(null!==mt){const Qt=le.get(mt);le.move(Qt,Ft),Mi(Qt,ze)}});for(let ze=0,mt=le.length;ze<mt;ze++){const Qt=le.get(ze).context;Qt.index=ze,Qt.count=mt,Qt.ngForOf=this._ngForOf}U.forEachIdentityChange(ze=>{Mi(le.get(ze.currentIndex),ze)})}static ngTemplateContextGuard(U,le){return!0}}return $.\u0275fac=function(U){return new(U||$)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},$.\u0275dir=u.lG2({type:$,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),$})();function Mi($,ee){$.context.$implicit=ee.item}let Q=(()=>{class ${constructor(U,le){this._viewContainer=U,this._context=new fe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=le}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){O("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){O("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,le){return!0}}return $.\u0275fac=function(U){return new(U||$)(u.Y36(u.s_b),u.Y36(u.Rgc))},$.\u0275dir=u.lG2({type:$,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),$})();class fe{constructor(){this.$implicit=null,this.ngIf=null}}function O($,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${$} must be a TemplateRef, but received '${(0,u.AaK)(ee)}'.`)}let En=(()=>{class ${constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(U){if(U.ngTemplateOutlet){const le=this._viewContainerRef;this._viewRef&&le.remove(le.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?le.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return $.\u0275fac=function(U){return new(U||$)(u.Y36(u.s_b))},$.\u0275dir=u.lG2({type:$,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[u.TTD]}),$})(),zs=(()=>{class ${}return $.\u0275fac=function(U){return new(U||$)},$.\u0275mod=u.oAB({type:$}),$.\u0275inj=u.cJS({}),$})();const Ns="browser";function mi($){return"server"===$}let ys=(()=>{class ${}return $.\u0275prov=(0,u.Yz7)({token:$,providedIn:"root",factory:()=>new Us((0,u.LFG)(we),window)}),$})();class Us{constructor(ee,U){this.document=ee,this.window=U,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const U=function Ts($,ee){const U=$.getElementById(ee)||$.getElementsByName(ee)[0];if(U)return U;if("function"==typeof $.createTreeWalker&&$.body&&($.body.createShadowRoot||$.body.attachShadow)){const le=$.createTreeWalker($.body,NodeFilter.SHOW_ELEMENT);let ze=le.currentNode;for(;ze;){const mt=ze.shadowRoot;if(mt){const Ft=mt.getElementById(ee)||mt.querySelector(`[name="${ee}"]`);if(Ft)return Ft}ze=le.nextNode()}}return null}(this.document,ee);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=ee)}}scrollToElement(ee){const U=ee.getBoundingClientRect(),le=U.left+this.window.pageXOffset,ze=U.top+this.window.pageYOffset,mt=this.offset();this.window.scrollTo(le-mt[0],ze-mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=Ii(this.window.history)||Ii(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch(ee){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ee){return!1}}}function Ii($){return Object.getOwnPropertyDescriptor($,"scrollRestoration")}class Er{}},5e3:(en,ut,H)=>{"use strict";H.d(ut,{deG:()=>il,tb:()=>uE,AFp:()=>sE,ip1:()=>iE,CZH:()=>vv,hGG:()=>nI,z2F:()=>Tv,sBO:()=>$w,Sil:()=>Ew,_Vd:()=>Qy,EJc:()=>_w,SBq:()=>km,qLn:()=>Qs,vpe:()=>_d,tBr:()=>Va,XFs:()=>Ht,OlP:()=>rs,zs3:()=>Hl,ZZ4:()=>Ov,aQg:()=>Pv,soG:()=>bv,YKP:()=>b0,h0i:()=>lg,PXZ:()=>Ow,R0b:()=>Ic,FiY:()=>Ba,Lbi:()=>lE,g9A:()=>aE,Qsj:()=>db,FYo:()=>m0,JOm:()=>Tt,tp0:()=>Xl,Rgc:()=>Bm,dDg:()=>fE,q4F:()=>_0,GfV:()=>y0,s_b:()=>e_,ifc:()=>kn,eFA:()=>mE,G48:()=>Bw,Gpc:()=>ge,X6Q:()=>Vw,_c5:()=>tI,VLi:()=>xw,c2e:()=>cE,zSh:()=>Bf,wAp:()=>nr,vHH:()=>Pe,cg1:()=>Om,kL8:()=>th,dqk:()=>Vn,sIi:()=>Kd,CqO:()=>pu,QGY:()=>fu,F4k:()=>D_,RDi:()=>Ii,AaK:()=>be,qOj:()=>Pp,TTD:()=>Kr,_Bn:()=>f0,xp6:()=>Dh,uIk:()=>$f,ekj:()=>Em,Suo:()=>L0,Xpm:()=>Rn,lG2:()=>Qn,Yz7:()=>Xe,cJS:()=>ft,oAB:()=>lt,Yjl:()=>Qr,Y36:()=>Up,_UZ:()=>hm,GkF:()=>pm,qZA:()=>Hp,TgZ:()=>qf,EpF:()=>gm,n5z:()=>Pt,LFG:()=>Wr,$8M:()=>kr,$Z:()=>mo,NdJ:()=>wc,CRH:()=>V0,oxw:()=>Kf,Hsn:()=>Zf,F$t:()=>cd,Q6J:()=>jp,iGM:()=>k0,CHM:()=>ue,LSH:()=>Ad,YNc:()=>Lp,_uU:()=>xy,Oqu:()=>wm,Gf:()=>F0});var u=H(8929),se=H(2654),Z=H(2916),ke=H(6787),Te=H(2474);function ae(n){for(let r in n)if(n[r]===ae)return r;throw Error("Could not find renamed property on target object.")}function we(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function be(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(be).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function me(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=ae({__forward_ref__:ae});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return be(this())},n}function te(n){return de(n)?n():n}function de(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===ge}class Pe extends Error{constructor(r,s){super(function ye(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ne(n){return"string"==typeof n?n:null==n?"":String(n)}function Fe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ne(n)}function Ve(n,r){const s=r?` in ${r}`:"";throw new Pe(-201,`No provider for ${Fe(n)} found${s}`)}function st(n,r){null==n&&function Qe(n,r,s,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${s} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kt(n){return gn(n,fr)||gn(n,Zn)}function gn(n,r){return n.hasOwnProperty(r)?n[r]:null}function rn(n){return n&&(n.hasOwnProperty(Dr)||n.hasOwnProperty(Yn))?n[Dr]:null}const fr=ae({\u0275prov:ae}),Dr=ae({\u0275inj:ae}),Zn=ae({ngInjectableDef:ae}),Yn=ae({ngInjectorDef:ae});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let rr;function Jn(n){const r=rr;return rr=n,r}function cr(n,r,s){const c=Kt(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&Ht.Optional?null:void 0!==r?r:void Ve(be(n),"Injector")}function on(n){return{toString:n}.toString()}var Zr=(()=>((Zr=Zr||{})[Zr.OnPush=0]="OnPush",Zr[Zr.Default=1]="Default",Zr))(),kn=(()=>{return(n=kn||(kn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",kn;var n})();const dn="undefined"!=typeof globalThis&&globalThis,Sn="undefined"!=typeof window&&window,Gr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vn=dn||"undefined"!=typeof global&&global||Sn||Gr,Lr={},In=[],ci=ae({\u0275cmp:ae}),ir=ae({\u0275dir:ae}),sn=ae({\u0275pipe:ae}),kt=ae({\u0275mod:ae}),tn=ae({\u0275fac:ae}),yn=ae({__NG_ELEMENT_ID__:ae});let _n=0;function Rn(n){return on(()=>{const s={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Zr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||kn.Emulated,id:"c",styles:n.styles||In,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,m=n.features,I=n.pipes;return c.id+=_n++,c.inputs=Cn(n.inputs,s),c.outputs=Cn(n.outputs),m&&m.forEach(x=>x(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ie):null,c.pipeDefs=I?()=>("function"==typeof I?I():I).map(je):null,c})}function Ie(n){return Bn(n)||function _r(n){return n[ir]||null}(n)}function je(n){return function jn(n){return n[sn]||null}(n)}const vt={};function lt(n){return on(()=>{const r={type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(vt[n.id]=n.type),r})}function Cn(n,r){if(null==n)return Lr;const s={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),s[f]=c,r&&(r[f]=m)}return s}const Qn=Rn;function Qr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[ci]||null}function vr(n,r){const s=n[kt]||null;if(!s&&!0===r)throw new Error(`Type ${be(n)} does not have '\u0275mod' property.`);return s}const Q=19;function Ge(n){return Array.isArray(n)&&"object"==typeof n[1]}function et(n){return Array.isArray(n)&&!0===n[1]}function Et(n){return 0!=(8&n.flags)}function xt(n){return 2==(2&n.flags)}function Nt(n){return 1==(1&n.flags)}function Mt(n){return null!==n.template}function hn(n){return 0!=(512&n[2])}function Bi(n,r){return n.hasOwnProperty(tn)?n[tn]:null}class ms{constructor(r,s,c){this.previousValue=r,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function Kr(){return $s}function $s(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ko),yo}function yo(){const n=Ns(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Lr)n.previous=r;else for(let c in r)s[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Ko(n,r,s,c){const f=Ns(n)||function Hi(n,r){return n[zs]=r}(n,{previous:Lr,current:null}),m=f.current||(f.current={}),I=f.previous,x=this.declaredInputs[s],P=I[x];m[x]=new ms(P&&P.currentValue,r,I===Lr),n[c]=r}Kr.ngInherit=!0;const zs="__ngSimpleChanges__";function Ns(n){return n[zs]||null}let Us;function Ii(n){Us=n}function Er(n){return!!n.listen}const $={createRenderer:(n,r)=>function Ts(){return void 0!==Us?Us:"undefined"!=typeof document?document:void 0}()};function U(n){for(;Array.isArray(n);)n=n[0];return n}function mt(n,r){return U(r[n])}function Ft(n,r){return U(r[n.index])}function zr(n,r){return n.data[r]}function Xn(n,r){const s=r[n];return Ge(s)?s:s[0]}function pr(n){return 4==(4&n[2])}function hi(n){return 128==(128&n[2])}function ai(n,r){return null==r?null:n[r]}function uo(n){n[18]=0}function ds(n,r){n[5]+=r;let s=n,c=n[3];for(;null!==c&&(1===r&&1===s[5]||-1===r&&0===s[5]);)c[5]+=r,s=c,c=c[3]}const On={lFrame:Lo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function oe(){return On.bindingsEnabled}function E(){return On.lFrame.lView}function L(){return On.lFrame.tView}function ue(n){return On.lFrame.contextLView=n,n[8]}function dt(){let n=Zt();for(;null!==n&&64===n.type;)n=n.parent;return n}function Zt(){return On.lFrame.currentTNode}function Nn(n,r){const s=On.lFrame;s.currentTNode=n,s.isParent=r}function Nr(){return On.lFrame.isParent}function yi(){On.lFrame.isParent=!1}function Qi(){return On.isInCheckNoChangesMode}function Xi(n){On.isInCheckNoChangesMode=n}function Zo(){return On.lFrame.bindingIndex++}function Gi(n,r){const s=On.lFrame;s.bindingIndex=s.bindingRootIndex=n,el(r)}function el(n){On.lFrame.currentDirectiveIndex=n}function Aa(){return On.lFrame.currentQueryIndex}function Sl(n){On.lFrame.currentQueryIndex=n}function tl(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function nl(n,r,s){if(s&Ht.SkipSelf){let f=r,m=n;for(;!(f=f.parent,null!==f||s&Ht.Host||(f=tl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;r=f,n=m}const c=On.lFrame=xa();return c.currentTNode=r,c.lView=n,!0}function Xo(n){const r=xa(),s=n[1];On.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function xa(){const n=On.lFrame,r=null===n?null:n.child;return null===r?Lo(n):r}function Lo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function co(){const n=On.lFrame;return On.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ma=co;function oa(){const n=co();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wn(){return On.lFrame.selectedIndex}function qs(n){On.lFrame.selectedIndex=n}function or(){const n=On.lFrame;return zr(n.tView,n.selectedIndex)}function ki(n,r){for(let s=r.directiveStart,c=r.directiveEnd;s<c;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:x,ngAfterViewInit:P,ngAfterViewChecked:Y,ngOnDestroy:X}=m;I&&(n.contentHooks||(n.contentHooks=[])).push(-s,I),x&&((n.contentHooks||(n.contentHooks=[])).push(s,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,x)),P&&(n.viewHooks||(n.viewHooks=[])).push(-s,P),Y&&((n.viewHooks||(n.viewHooks=[])).push(s,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Y)),null!=X&&(n.destroyHooks||(n.destroyHooks=[])).push(s,X)}}function Jo(n,r,s){Al(n,r,3,s)}function Vo(n,r,s,c){(3&n[2])===s&&Al(n,r,s,c)}function ri(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Al(n,r,s,c){const m=null!=c?c:-1,I=r.length-1;let x=0;for(let P=void 0!==c?65535&n[18]:0;P<I;P++)if("number"==typeof r[P+1]){if(x=r[P],null!=c&&x>=c)break}else r[P]<0&&(n[18]+=65536),(x<m||-1==m)&&(xl(n,s,r,P),n[18]=(4294901760&n[18])+P+2),P++}function xl(n,r,s,c){const f=s[c]<0,m=s[c+1],x=n[f?-s[c]:s[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{m.call(x)}finally{}}}else try{m.call(x)}finally{}}class Bo{constructor(r,s,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function Rl(n,r,s){const c=Er(n);let f=0;for(;f<s.length;){const m=s[f];if("number"==typeof m){if(0!==m)break;f++;const I=s[f++],x=s[f++],P=s[f++];c?n.setAttribute(r,x,P,I):r.setAttributeNS(I,x,P)}else{const I=m,x=s[++f];$o(I)?c&&n.setProperty(r,I,x):c?n.setAttribute(r,I,x):r.setAttribute(I,x),f++}}return f}function Ks(n){return 3===n||4===n||6===n}function $o(n){return 64===n.charCodeAt(0)}function wr(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?s=f:0===s||Eo(n,s,f,null,-1===s||2===s?r[++c]:null)}}return n}function Eo(n,r,s,c,f){let m=0,I=n.length;if(-1===r)I=-1;else for(;m<n.length;){const x=n[m++];if("number"==typeof x){if(x===r){I=-1;break}if(x>r){I=m-1;break}}}for(;m<n.length;){const x=n[m];if("number"==typeof x)break;if(x===s){if(null===c)return void(null!==f&&(n[m+1]=f));if(c===n[m+1])return void(n[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==I&&(n.splice(I,0,r),m=I+1),n.splice(m++,0,s),null!==c&&n.splice(m++,0,c),null!==f&&n.splice(m++,0,f)}function Pa(n){return-1!==n}function pi(n){return 32767&n}function vs(n,r){let s=function Uo(n){return n>>16}(n),c=r;for(;s>0;)c=c[15],s--;return c}let Ss=!0;function la(n){const r=Ss;return Ss=n,r}let Ho=0;function ca(n,r){const s=Di(n,r);if(-1!==s)return s;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Wt(c.data,n),Wt(r,null),Wt(c.blueprint,null));const f=ns(n,r),m=n.injectorIndex;if(Pa(f)){const I=pi(f),x=vs(f,r),P=x[1].data;for(let Y=0;Y<8;Y++)r[m+Y]=x[I+Y]|P[I+Y]}return r[m+8]=f,m}function Wt(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Di(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ns(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,c=null,f=r;for(;null!==f;){const m=f[1],I=m.type;if(c=2===I?m.declTNode:1===I?f[6]:null,null===c)return-1;if(s++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function bo(n,r,s){!function ua(n,r,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(yn)&&(c=s[yn]),null==c&&(c=s[yn]=Ho++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function Kn(n,r,s){if(s&Ht.Optional)return n;Ve(r,"NodeInjector")}function Ol(n,r,s,c){if(s&Ht.Optional&&void 0===c&&(c=null),0==(s&(Ht.Self|Ht.Host))){const f=n[9],m=Jn(void 0);try{return f?f.get(r,c,s&Ht.Optional):cr(r,c,s&Ht.Optional)}finally{Jn(m)}}return Kn(c,r,s)}function cn(n,r,s,c=Ht.Default,f){if(null!==n){const m=function W(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(yn)?n[yn]:void 0;return"number"==typeof r?r>=0?255&r:A:r}(s);if("function"==typeof m){if(!nl(r,n,c))return c&Ht.Host?Kn(f,s,c):Ol(r,s,c,f);try{const I=m(c);if(null!=I||c&Ht.Optional)return I;Ve(s)}finally{Ma()}}else if("number"==typeof m){let I=null,x=Di(n,r),P=-1,Y=c&Ht.Host?r[16][6]:null;for((-1===x||c&Ht.SkipSelf)&&(P=-1===x?ns(n,r):r[x+8],-1!==P&&xe(c,!1)?(I=r[1],x=pi(P),r=vs(P,r)):x=-1);-1!==x;){const X=r[1];if(ne(m,x,X.data)){const Ce=T(x,r,s,I,c,Y);if(Ce!==gt)return Ce}P=r[x+8],-1!==P&&xe(c,r[1].data[x+8]===Y)&&ne(m,x,r)?(I=X,x=pi(P),r=vs(P,r)):x=-1}}}return Ol(r,s,c,f)}const gt={};function A(){return new Ae(dt(),E())}function T(n,r,s,c,f,m){const I=r[1],x=I.data[n+8],X=D(x,I,s,null==c?xt(x)&&Ss:c!=I&&0!=(3&x.type),f&Ht.Host&&m===x);return null!==X?B(r,I,X,x):gt}function D(n,r,s,c,f){const m=n.providerIndexes,I=r.data,x=1048575&m,P=n.directiveStart,X=m>>20,Ke=f?x+X:n.directiveEnd;for(let yt=c?x:x+X;yt<Ke;yt++){const Bt=I[yt];if(yt<P&&s===Bt||yt>=P&&Bt.type===s)return yt}if(f){const yt=I[P];if(yt&&Mt(yt)&&yt.type===s)return P}return null}function B(n,r,s,c){let f=n[s];const m=r.data;if(function Ys(n){return n instanceof Bo}(f)){const I=f;I.resolving&&function ht(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${n}${s}`)}(Fe(m[s]));const x=la(I.canSeeViewProviders);I.resolving=!0;const P=I.injectImpl?Jn(I.injectImpl):null;nl(n,c,Ht.Default);try{f=n[s]=I.factory(void 0,m,n,c),r.firstCreatePass&&s>=c.directiveStart&&function gr(n,r,s){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=r.type.prototype;if(c){const I=$s(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,I),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,I)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),m&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==P&&Jn(P),la(x),I.resolving=!1,Ma()}}return f}function ne(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function xe(n,r){return!(n&Ht.Self||n&Ht.Host&&r)}class Ae{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,c){return cn(this._tNode,this._lView,r,c,s)}}function Pt(n){return on(()=>{const r=n.prototype.constructor,s=r[tn]||fn(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const m=f[tn]||fn(f);if(m&&m!==s)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function fn(n){return de(n)?()=>{const r=fn(te(n));return r&&r()}:Bi(n)}function kr(n){return function An(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const c=s.length;let f=0;for(;f<c;){const m=s[f];if(Ks(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof s[f];)f++;else{if(m===r)return s[f+1];f+=2}}}return null}(dt(),n)}const jr="__parameters__";function xo(n,r,s){return on(()=>{const c=function Es(n){return function(...s){if(n){const c=n(...s);for(const f in c)this[f]=c[f]}}}(r);function f(...m){if(this instanceof f)return c.apply(this,m),this;const I=new f(...m);return x.annotation=I,x;function x(P,Y,X){const Ce=P.hasOwnProperty(jr)?P[jr]:Object.defineProperty(P,jr,{value:[]})[jr];for(;Ce.length<=X;)Ce.push(null);return(Ce[X]=Ce[X]||[]).push(I),P}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class rs{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Xe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const il=new rs("AnalyzeForEntryComponents");function xs(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let c=n[s];Array.isArray(c)?(r===n&&(r=n.slice(0,s)),xs(c,r)):r!==n&&r.push(c)}return r}function js(n,r){n.forEach(s=>Array.isArray(s)?js(s,r):r(s))}function Pl(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function io(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ms(n,r){const s=[];for(let c=0;c<n;c++)s.push(r);return s}function $i(n,r,s){let c=Ro(n,r);return c>=0?n[1|c]=s:(c=~c,function an(n,r,s,c){let f=n.length;if(f==r)n.push(s,c);else if(1===f)n.push(c,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=c}}(n,c,r,s)),c}function ba(n,r){const s=Ro(n,r);if(s>=0)return n[1|s]}function Ro(n,r){return function ka(n,r,s){let c=0,f=n.length>>s;for(;f!==c;){const m=c+(f-c>>1),I=n[m<<s];if(r===I)return m<<s;I>r?f=m:c=m+1}return~(f<<s)}(n,r,1)}const ie={},Me="__NG_DI_FLAG__",it="ngTempTokenPath",Vt=/\n/gm,mr="__source",er=ae({provide:String,useValue:ae});let Tr;function lr(n){const r=Tr;return Tr=n,r}function so(n,r=Ht.Default){if(void 0===Tr)throw new Pe(203,"");return null===Tr?cr(n,void 0,r):Tr.get(n,r&Ht.Optional?null:void 0,r)}function Wr(n,r=Ht.Default){return(function qr(){return rr}()||so)(te(n),r)}const al=Wr;function ll(n){const r=[];for(let s=0;s<n.length;s++){const c=te(n[s]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let f,m=Ht.Default;for(let I=0;I<c.length;I++){const x=c[I],P=zi(x);"number"==typeof P?-1===P?f=x.token:m|=P:f=x}r.push(Wr(f,m))}else r.push(Wr(c))}return r}function Vr(n,r){return n[Me]=r,n.prototype[Me]=r,n}function zi(n){return n[Me]}const Va=Vr(xo("Inject",n=>({token:n})),-1),Ba=Vr(xo("Optional"),8),Xl=Vr(xo("SkipSelf"),4);class wd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ja(n){return n instanceof wd?n.changingThisBreaksApplicationSecurity:n}const tu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hs=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ss=(()=>((ss=ss||{})[ss.NONE=0]="NONE",ss[ss.HTML=1]="HTML",ss[ss.STYLE=2]="STYLE",ss[ss.SCRIPT=3]="SCRIPT",ss[ss.URL=4]="URL",ss[ss.RESOURCE_URL=5]="RESOURCE_URL",ss))();function Ad(n){const r=function za(){const n=E();return n&&n[12]}();return r?r.sanitize(ss.URL,n)||"":function Zu(n,r){const s=function Oc(n){return n instanceof wd&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?ja(n):function hl(n){return(n=String(n)).match(tu)||n.match(Hs)?n:"unsafe:"+n}(Ne(n))}const Ju="__ngContext__";function fo(n,r){n[Ju]=r}function ru(n){const r=function yl(n){return n[Ju]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function nc(n){return n.ngOriginalError}function Od(n,...r){n.error(...r)}class Qs{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),c=function rc(n){return n&&n.ngErrorLogger||Od}(r);c(this._console,"ERROR",r),s&&c(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&nc(r);for(;s&&nc(s);)s=nc(s);return s||null}}const fh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vn))();function y(n){return n instanceof Function?n():n}var Tt=(()=>((Tt=Tt||{})[Tt.Important=1]="Important",Tt[Tt.DashCase=2]="DashCase",Tt))();function pn(n,r){return undefined(n,r)}function Ji(n){const r=n[3];return et(r)?r[3]:r}function Uc(n){return jc(n[13])}function So(n){return jc(n[4])}function jc(n){for(;null!==n&&!et(n);)n=n[4];return n}function Ta(n,r,s,c,f){if(null!=c){let m,I=!1;et(c)?m=c:Ge(c)&&(I=!0,c=c[0]);const x=U(c);0===n&&null!==s?null==f?Ru(r,s,x):vl(r,s,x,f||null,!0):1===n&&null!==s?vl(r,s,x,f||null,!0):2===n?function Bl(n,r,s){const c=Ld(n,r);c&&function ac(n,r,s,c){Er(n)?n.removeChild(r,s,c):r.removeChild(s)}(n,c,r,s)}(r,x,I):3===n&&r.destroyNode(x),null!=m&&function $d(n,r,s,c,f){const m=s[7];m!==U(s)&&Ta(r,n,c,m,f);for(let x=10;x<s.length;x++){const P=s[x];qa(P[1],P,n,r,c,m)}}(r,n,m,s,f)}}function Gc(n,r,s){if(Er(n))return n.createElement(r,s);{const c=null!==s?function ys(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===c?n.createElement(r):n.createElementNS(c,r)}}function gh(n,r){const s=n[9],c=s.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,ds(f,-1)),s.splice(c,1)}function mh(n,r){if(n.length<=10)return;const s=10+r,c=n[s];if(c){const f=c[17];null!==f&&f!==n&&gh(f,c),r>0&&(n[s-1][4]=c[4]);const m=io(n,10+r);!function ph(n,r){qa(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const I=m[Q];null!==I&&I.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function _f(n,r){if(!(256&r[2])){const s=r[11];Er(s)&&s.destroyNode&&qa(n,r,s,3,null,null),function dg(n){let r=n[13];if(!r)return zc(n[1],n);for(;r;){let s=null;if(Ge(r))s=r[13];else{const c=r[10];c&&(s=c)}if(!s){for(;r&&!r[4]&&r!==n;)Ge(r)&&zc(r[1],r),r=r[3];null===r&&(r=n),Ge(r)&&zc(r[1],r),s=r&&r[4]}r=s}}(r)}}function zc(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function yh(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let c=0;c<s.length;c+=2){const f=r[s[c]];if(!(f instanceof Bo)){const m=s[c+1];if(Array.isArray(m))for(let I=0;I<m.length;I+=2){const x=f[m[I]],P=m[I+1];try{P.call(x)}finally{}}else try{m.call(f)}finally{}}}}(n,r),function Rt(n,r){const s=n.cleanup,c=r[7];let f=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const I=s[m+1],x="function"==typeof I?I(r):U(r[I]),P=c[f=s[m+2]],Y=s[m+3];"boolean"==typeof Y?x.removeEventListener(s[m],P,Y):Y>=0?c[f=Y]():c[f=-Y].unsubscribe(),m+=2}else{const I=c[f=s[m+1]];s[m].call(I)}if(null!==c){for(let m=f+1;m<c.length;m++)c[m]();r[7]=null}}(n,r),1===r[1].type&&Er(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&et(r[3])){s!==r[3]&&gh(s,r);const c=r[Q];null!==c&&c.detachView(n)}}}function ha(n,r,s){return function op(n,r,s){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return s[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===kn.None||f===kn.Emulated)return null}return Ft(c,s)}(n,r.parent,s)}function vl(n,r,s,c,f){Er(n)?n.insertBefore(r,s,c,f):r.insertBefore(s,c,f)}function Ru(n,r,s){Er(n)?n.appendChild(r,s):r.appendChild(s)}function vf(n,r,s,c,f){null!==c?vl(n,r,s,c,f):Ru(n,r,s)}function Ld(n,r){return Er(n)?n.parentNode(r):r.parentNode}function Vd(n,r,s){return _h(n,r,s)}let _h=function oo(n,r,s){return 40&n.type?Ft(n,s):null};function bl(n,r,s,c){const f=ha(n,c,r),m=r[11],x=Vd(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(s))for(let P=0;P<s.length;P++)vf(m,f,s[P],x,!1);else vf(m,f,s,x,!1)}function lc(n,r){if(null!==r){const s=r.type;if(3&s)return Ft(r,n);if(4&s)return vh(-1,n[r.index]);if(8&s){const c=r.child;if(null!==c)return lc(n,c);{const f=n[r.index];return et(f)?vh(-1,f):U(f)}}if(32&s)return pn(r,n)()||U(n[r.index]);{const c=Bd(n,r);return null!==c?Array.isArray(c)?c[0]:lc(Ji(n[16]),c):lc(n,r.next)}}return null}function Bd(n,r){return null!==r?n[16][6].projection[r.projection]:null}function vh(n,r){const s=10+n+1;if(s<r.length){const c=r[s],f=c[1].firstChild;if(null!==f)return lc(c,f)}return r[7]}function lu(n,r,s,c,f,m,I){for(;null!=s;){const x=c[s.index],P=s.type;if(I&&0===r&&(x&&fo(U(x),c),s.flags|=4),64!=(64&s.flags))if(8&P)lu(n,r,s.child,c,f,m,!1),Ta(r,n,f,x,m);else if(32&P){const Y=pn(s,c);let X;for(;X=Y();)Ta(r,n,f,X,m);Ta(r,n,f,x,m)}else 16&P?cc(n,r,c,s,f,m):Ta(r,n,f,x,m);s=I?s.projectionNext:s.next}}function qa(n,r,s,c,f,m){lu(s,c,n.firstChild,r,f,m,!1)}function cc(n,r,s,c,f,m){const I=s[16],P=I[6].projection[c.projection];if(Array.isArray(P))for(let Y=0;Y<P.length;Y++)Ta(r,n,f,P[Y],m);else lu(n,r,P,I[3],f,m,!0)}function Wc(n,r,s){Er(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Eh(n,r,s){Er(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function ap(n,r,s){let c=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const m=r.length;if(f+m===c||n.charCodeAt(f+m)<=32)return f}s=f+1}}const wf="ng-template";function bh(n,r,s){let c=0;for(;c<n.length;){let f=n[c++];if(s&&"class"===f){if(f=n[c],-1!==ap(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function dc(n){return 4===n.type&&n.value!==wf}function hc(n,r,s){return r===(4!==n.type||s?n.value:wf)}function lp(n,r,s){let c=4;const f=n.attrs||[],m=function ia(n){for(let r=0;r<n.length;r++)if(Ks(n[r]))return r;return n.length}(f);let I=!1;for(let x=0;x<r.length;x++){const P=r[x];if("number"!=typeof P){if(!I)if(4&c){if(c=2|1&c,""!==P&&!hc(n,P,s)||""===P&&1===r.length){if(Ds(c))return!1;I=!0}}else{const Y=8&c?P:r[++x];if(8&c&&null!==n.attrs){if(!bh(n.attrs,Y,s)){if(Ds(c))return!1;I=!0}continue}const Ce=wh(8&c?"class":P,f,dc(n),s);if(-1===Ce){if(Ds(c))return!1;I=!0;continue}if(""!==Y){let Ke;Ke=Ce>m?"":f[Ce+1].toLowerCase();const yt=8&c?Ke:null;if(yt&&-1!==ap(yt,Y,0)||2&c&&Y!==Ke){if(Ds(c))return!1;I=!0}}}}else{if(!I&&!Ds(c)&&!Ds(P))return!1;if(I&&Ds(P))continue;I=!1,c=P|1&c}}return Ds(c)||I}function Ds(n){return 0==(1&n)}function wh(n,r,s,c){if(null===r)return-1;let f=0;if(c||!s){let m=!1;for(;f<r.length;){const I=r[f];if(I===n)return f;if(3===I||6===I)m=!0;else{if(1===I||2===I){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=m?1:2}return-1}return function fa(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const c=n[s];if("number"==typeof c)return-1;if(c===r)return s;s++}return-1}(r,n)}function uu(n,r,s=!1){for(let c=0;c<r.length;c++)if(lp(n,r[c],s))return!0;return!1}function Ou(n,r){e:for(let s=0;s<r.length;s++){const c=r[s];if(n.length===c.length){for(let f=0;f<n.length;f++)if(n[f]!==c[f])continue e;return!0}}return!1}function Ch(n,r){return n?":not("+r.trim()+")":r}function fc(n){let r=n[0],s=1,c=2,f="",m=!1;for(;s<n.length;){let I=n[s];if("string"==typeof I)if(2&c){const x=n[++s];f+="["+I+(x.length>0?'="'+x+'"':"")+"]"}else 8&c?f+="."+I:4&c&&(f+=" "+I);else""!==f&&!Ds(I)&&(r+=Ch(m,f),f=""),c=I,m=m||!Ds(c);s++}return""!==f&&(r+=Ch(m,f)),r}const Cr={};function Dh(n){Cf(L(),E(),Wn()+n,Qi())}function Cf(n,r,s,c){if(!c)if(3==(3&r[2])){const m=n.preOrderCheckHooks;null!==m&&Jo(r,m,s)}else{const m=n.preOrderHooks;null!==m&&Vo(r,m,0,s)}qs(s)}function pc(n,r){return n<<17|r<<2}function pa(n){return n>>17&32767}function Pu(n){return 2|n}function ga(n){return(131068&n)>>2}function Kc(n,r){return-131069&n|r<<2}function wl(n){return 1|n}function Oh(n,r){const s=n.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const f=s[c],m=s[c+1];if(-1!==m){const I=n.data[m];Sl(f),I.contentQueries(2,r[m],m)}}}function Hd(n,r,s,c,f,m,I,x,P,Y){const X=r.blueprint.slice();return X[0]=f,X[2]=140|c,uo(X),X[3]=X[15]=n,X[8]=s,X[10]=I||n&&n[10],X[11]=x||n&&n[11],X[12]=P||n&&n[12]||null,X[9]=Y||n&&n[9]||null,X[6]=m,X[16]=2==r.type?n[16]:X,X}function yc(n,r,s,c,f){let m=n.data[r];if(null===m)m=function Rf(n,r,s,c,f){const m=Zt(),I=Nr(),P=n.data[r]=function vp(n,r,s,c,f,m){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?m:m&&m.parent,s,r,c,f);return null===n.firstChild&&(n.firstChild=P),null!==m&&(I?null==m.child&&null!==P.parent&&(m.child=P):null===m.next&&(m.next=P)),P}(n,r,s,c,f),function Qo(){return On.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=s,m.value=c,m.attrs=f;const I=function bn(){const n=On.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===I?-1:I.injectorIndex}return Nn(m,!0),m}function Fu(n,r,s,c){if(0===s)return-1;const f=r.length;for(let m=0;m<s;m++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function Jc(n,r,s){Xo(r);try{const c=n.viewQuery;null!==c&&Tn(1,c,s);const f=n.template;null!==f&&yp(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Oh(n,r),n.staticViewQueries&&Tn(2,n.viewQuery,s);const m=n.components;null!==m&&function bg(n,r){for(let s=0;s<r.length;s++)p(n,r[s])}(r,m)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,oa()}}function Lu(n,r,s,c){const f=r[2];if(256==(256&f))return;Xo(r);const m=Qi();try{uo(r),function sa(n){return On.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&yp(n,r,s,2,c);const I=3==(3&f);if(!m)if(I){const Y=n.preOrderCheckHooks;null!==Y&&Jo(r,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&Vo(r,Y,0,null),ri(r,0)}if(function h(n){for(let r=Uc(n);null!==r;r=So(r)){if(!r[2])continue;const s=r[9];for(let c=0;c<s.length;c++){const f=s[c],m=f[3];0==(1024&f[2])&&ds(m,1),f[2]|=1024}}}(r),function Cp(n){for(let r=Uc(n);null!==r;r=So(r))for(let s=10;s<r.length;s++){const c=r[s],f=c[1];hi(c)&&Lu(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&Oh(n,r),!m)if(I){const Y=n.contentCheckHooks;null!==Y&&Jo(r,Y)}else{const Y=n.contentHooks;null!==Y&&Vo(r,Y,1),ri(r,1)}!function Xc(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)qs(~f);else{const m=f,I=s[++c],x=s[++c];Gi(I,m),x(2,r[m])}}}finally{qs(-1)}}(n,r);const x=n.components;null!==x&&function Ph(n,r){for(let s=0;s<r.length;s++)l(n,r[s])}(r,x);const P=n.viewQuery;if(null!==P&&Tn(2,P,c),!m)if(I){const Y=n.viewCheckHooks;null!==Y&&Jo(r,Y)}else{const Y=n.viewHooks;null!==Y&&Vo(r,Y,2),ri(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),m||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ds(r[3],-1))}finally{oa()}}function wg(n,r,s,c){const f=r[10],m=!Qi(),I=pr(r);try{m&&!I&&f.begin&&f.begin(),I&&Jc(n,r,c),Lu(n,r,s,c)}finally{m&&!I&&f.end&&f.end()}}function yp(n,r,s,c,f){const m=Wn(),I=2&c;try{qs(-1),I&&r.length>20&&Cf(n,r,20,Qi()),s(c,f)}finally{qs(m)}}function Nh(n,r,s){if(Et(r)){const f=r.directiveEnd;for(let m=r.directiveStart;m<f;m++){const I=n.data[m];I.contentQueries&&I.contentQueries(1,s[m],m)}}}function os(n,r,s){!oe()||(function Uh(n,r,s,c){const f=s.directiveStart,m=s.directiveEnd;n.firstCreatePass||ca(s,r),fo(c,r);const I=s.initialInputs;for(let x=f;x<m;x++){const P=n.data[x],Y=Mt(P);Y&&zd(r,s,P);const X=B(r,n,x,s);fo(X,r),null!==I&&Lf(0,x-f,X,P,0,I),Y&&(Xn(s.index,r)[8]=X)}}(n,r,s,Ft(s,r)),128==(128&s.flags)&&function Gd(n,r,s){const c=s.directiveStart,f=s.directiveEnd,I=s.index,x=function Ja(){return On.lFrame.currentDirectiveIndex}();try{qs(I);for(let P=c;P<f;P++){const Y=n.data[P],X=r[P];el(P),(null!==Y.hostBindings||0!==Y.hostVars||null!==Y.hostAttrs)&&jh(Y,X)}}finally{qs(-1),el(x)}}(n,r,s))}function po(n,r,s=Ft){const c=r.localNames;if(null!==c){let f=r.index+1;for(let m=0;m<c.length;m+=2){const I=c[m+1],x=-1===I?s(r,n):n[I];n[f++]=x}}}function ma(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Vu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Vu(n,r,s,c,f,m,I,x,P,Y){const X=20+c,Ce=X+f,Ke=function Ig(n,r){const s=[];for(let c=0;c<r;c++)s.push(c<n?null:Cr);return s}(X,Ce),yt="function"==typeof Y?Y():Y;return Ke[1]={type:n,blueprint:Ke,template:s,queries:null,viewQuery:x,declTNode:r,data:Ke.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:P,consts:yt,incompleteFirstPass:!1}}function Of(n,r,s,c){const f=go(r);null===s?f.push(c):(f.push(s),n.firstCreatePass&&du(n).push(c,f.length-1))}function Fh(n,r,s){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(r,f):s[c]=[r,f]}return s}function $h(n,r,s,c){let f=!1;if(oe()){const m=function Ff(n,r,s){const c=n.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const I=c[m];uu(s,I.selectors,!1)&&(f||(f=[]),bo(ca(s,r),n,I.type),Mt(I)?(Ep(n,s),f.unshift(I)):f.push(I))}return f}(n,r,s),I=null===c?null:{"":-1};if(null!==m){f=!0,wp(s,n.data.length,m.length);for(let X=0;X<m.length;X++){const Ce=m[X];Ce.providersResolver&&Ce.providersResolver(Ce)}let x=!1,P=!1,Y=Fu(n,r,m.length,null);for(let X=0;X<m.length;X++){const Ce=m[X];s.mergedAttrs=wr(s.mergedAttrs,Ce.hostAttrs),Ip(n,s,r,Y,Ce),bp(Y,Ce,I),null!==Ce.contentQueries&&(s.flags|=8),(null!==Ce.hostBindings||null!==Ce.hostAttrs||0!==Ce.hostVars)&&(s.flags|=128);const Ke=Ce.type.prototype;!x&&(Ke.ngOnChanges||Ke.ngOnInit||Ke.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),x=!0),!P&&(Ke.ngOnChanges||Ke.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),P=!0),Y++}!function Lh(n,r){const c=r.directiveEnd,f=n.data,m=r.attrs,I=[];let x=null,P=null;for(let Y=r.directiveStart;Y<c;Y++){const X=f[Y],Ce=X.inputs,Ke=null===m||dc(r)?null:Hh(Ce,m);I.push(Ke),x=Fh(Ce,Y,x),P=Fh(X.outputs,Y,P)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=x,r.outputs=P}(n,s)}I&&function Sg(n,r,s){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const m=s[r[f+1]];if(null==m)throw new Pe(-301,!1);c.push(r[f],m)}}}(s,c,I)}return s.mergedAttrs=wr(s.mergedAttrs,s.attrs),f}function Nf(n,r,s,c,f,m){const I=m.hostBindings;if(I){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const P=~r.index;(function kf(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=P&&x.push(P),x.push(c,f,I)}}function jh(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Ep(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function bp(n,r,s){if(s){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)s[r.exportAs[c]]=n;Mt(r)&&(s[""]=n)}}function wp(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Ip(n,r,s,c,f){n.data[c]=f;const m=f.factory||(f.factory=Bi(f.type)),I=new Bo(m,Mt(f),null);n.blueprint[c]=I,s[c]=I,Nf(n,r,0,c,Fu(n,s,f.hostVars,Cr),f)}function zd(n,r,s){const c=Ft(r,n),f=ma(s),m=n[10],I=M(n,Hd(n,f,null,s.onPush?64:16,c,r,m,m.createRenderer(c,s),null,null));n[r.index]=I}function Ka(n,r,s,c,f,m){const I=Ft(n,r);!function Bu(n,r,s,c,f,m,I){if(null==m)Er(n)?n.removeAttribute(r,f,s):r.removeAttribute(f);else{const x=null==I?Ne(m):I(m,c||"",f);Er(n)?n.setAttribute(r,f,x,s):s?r.setAttributeNS(s,f,x):r.setAttribute(f,x)}}(r[11],I,m,n.value,s,c,f)}function Lf(n,r,s,c,f,m){const I=m[r];if(null!==I){const x=c.setInput;for(let P=0;P<I.length;){const Y=I[P++],X=I[P++],Ce=I[P++];null!==x?c.setInput(s,Ce,Y,X):s[X]=Ce}}}function Hh(n,r){let s=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return s}function zh(n,r,s,c){return new Array(n,!0,!1,r,null,0,c,s,null,null)}function l(n,r){const s=Xn(r,n);if(hi(s)){const c=s[1];80&s[2]?Lu(c,s,c.template,s[8]):s[5]>0&&a(s)}}function a(n){for(let c=Uc(n);null!==c;c=So(c))for(let f=10;f<c.length;f++){const m=c[f];if(1024&m[2]){const I=m[1];Lu(I,m,I.template,m[8])}else m[5]>0&&a(m)}const s=n[1].components;if(null!==s)for(let c=0;c<s.length;c++){const f=Xn(s[c],n);hi(f)&&f[5]>0&&a(f)}}function p(n,r){const s=Xn(r,n),c=s[1];(function b(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(c,s),Jc(c,s,s[8])}function M(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function j(n){for(;n;){n[2]|=64;const r=Ji(n);if(hn(n)&&!r)return n;n=r}return null}function $e(n,r,s){const c=r[10];c.begin&&c.begin();try{Lu(n,r,n.template,s)}catch(f){throw _c(r,f),f}finally{c.end&&c.end()}}function It(n){!function Ee(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],c=ru(s),f=c[1];wg(f,c,f.template,s)}}(n[8])}function Tn(n,r,s){Sl(0),r(n,s)}const Ui=(()=>Promise.resolve(null))();function go(n){return n[7]||(n[7]=[])}function du(n){return n.cleanup||(n.cleanup=[])}function _c(n,r){const s=n[9],c=s?s.get(Qs,null):null;c&&c.handleError(r)}function Wh(n,r,s,c,f){for(let m=0;m<s.length;){const I=s[m++],x=s[m++],P=r[I],Y=n.data[I];null!==Y.setInput?Y.setInput(P,f,c,x):P[x]=f}}function vc(n,r,s){const c=mt(r,n);!function Wo(n,r,s){Er(n)?n.setValue(r,s):r.textContent=s}(n[11],c,s)}function qh(n,r,s){let c=s?n.styles:null,f=s?n.classes:null,m=0;if(null!==r)for(let I=0;I<r.length;I++){const x=r[I];"number"==typeof x?m=x:1==m?f=me(f,x):2==m&&(c=me(c,x+": "+r[++I]+";"))}s?n.styles=c:n.stylesWithoutHost=c,s?n.classes=f:n.classesWithoutHost=f}const Vf=new rs("INJECTOR",-1);class xg{get(r,s=ie){if(s===ie){const c=new Error(`NullInjectorError: No provider for ${be(r)}!`);throw c.name="NullInjectorError",c}return s}}const Bf=new rs("Set Injector scope."),Wd={},Mg={};let nd;function Ec(){return void 0===nd&&(nd=new xg),nd}function Dp(n,r=null,s=null,c){const f=qd(n,r,s,c);return f._resolveInjectorDefTypes(),f}function qd(n,r=null,s=null,c){return new Yh(n,s,r||Ec(),c)}class Yh{constructor(r,s,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];s&&js(s,x=>this.processProvider(x,r,s)),js([r],x=>this.processInjectorType(x,[],m)),this.records.set(Vf,rd(void 0,this));const I=this.records.get(Bf);this.scope=null!=I?I.value:null,this.source=f||("object"==typeof r?null:be(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=ie,c=Ht.Default){this.assertNotDestroyed();const f=lr(this),m=Jn(void 0);try{if(!(c&Ht.SkipSelf)){let x=this.records.get(r);if(void 0===x){const P=function u_(n){return"function"==typeof n||"object"==typeof n&&n instanceof rs}(r)&&Kt(r);x=P&&this.injectableDefInScope(P)?rd(Tp(r),Wd):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(c&Ht.Self?Ec():this.parent).get(r,s=c&Ht.Optional&&s===ie?null:s)}catch(I){if("NullInjectorError"===I.name){if((I[it]=I[it]||[]).unshift(be(r)),f)throw I;return function La(n,r,s,c){const f=n[it];throw r[mr]&&f.unshift(r[mr]),n.message=function Nl(n,r,s,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=be(r);if(Array.isArray(r))f=r.map(be).join(" -> ");else if("object"==typeof r){let m=[];for(let I in r)if(r.hasOwnProperty(I)){let x=r[I];m.push(I+":"+("string"==typeof x?JSON.stringify(x):be(x)))}f=`{${m.join(", ")}}`}return`${s}${c?"("+c+")":""}[${f}]: ${n.replace(Vt,"\n  ")}`}("\n"+n.message,f,s,c),n.ngTokenPath=f,n[it]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{Jn(m),lr(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,f)=>r.push(be(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(r,s,c){if(!(r=te(r)))return!1;let f=rn(r);const m=null==f&&r.ngModule||void 0,I=void 0===m?r:m,x=-1!==c.indexOf(I);if(void 0!==m&&(f=rn(m)),null==f)return!1;if(null!=f.imports&&!x){let X;c.push(I);try{js(f.imports,Ce=>{this.processInjectorType(Ce,s,c)&&(void 0===X&&(X=[]),X.push(Ce))})}finally{}if(void 0!==X)for(let Ce=0;Ce<X.length;Ce++){const{ngModule:Ke,providers:yt}=X[Ce];js(yt,Bt=>this.processProvider(Bt,Ke,yt||In))}}this.injectorDefTypes.add(I);const P=Bi(I)||(()=>new I);this.records.set(I,rd(P,Wd));const Y=f.providers;if(null!=Y&&!x){const X=r;js(Y,Ce=>this.processProvider(Ce,X,Y))}return void 0!==m&&void 0!==r.providers}processProvider(r,s,c){let f=Zh(r=te(r))?r:te(r&&r.provide);const m=function a_(n,r,s){return Sp(n)?rd(void 0,n.useValue):rd(zm(n),Wd)}(r);if(Zh(r)||!0!==r.multi)this.records.get(f);else{let I=this.records.get(f);I||(I=rd(void 0,Wd,!0),I.factory=()=>ll(I.multi),this.records.set(f,I)),f=r,I.multi.push(r)}this.records.set(f,m)}hydrate(r,s){return s.value===Wd&&(s.value=Mg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ng(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=te(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Tp(n){const r=Kt(n),s=null!==r?r.factory:Bi(n);if(null!==s)return s;if(n instanceof rs)throw new Pe(204,!1);if(n instanceof Function)return function Kh(n){const r=n.length;if(r>0)throw Ms(r,"?"),new Pe(204,!1);const s=function xn(n){const r=n&&(n[fr]||n[Zn]);if(r){const s=function un(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Pe(204,!1)}function zm(n,r,s){let c;if(Zh(n)){const f=te(n);return Bi(f)||Tp(f)}if(Sp(n))c=()=>te(n.useValue);else if(function Og(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...ll(n.deps||[]));else if(function Rg(n){return!(!n||!n.useExisting)}(n))c=()=>Wr(te(n.useExisting));else{const f=te(n&&(n.useClass||n.provide));if(!function Pg(n){return!!n.deps}(n))return Bi(f)||Tp(f);c=()=>new f(...ll(n.deps))}return c}function rd(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Sp(n){return null!==n&&"object"==typeof n&&er in n}function Zh(n){return"function"==typeof n}let Hl=(()=>{class n{static create(s,c){var f;if(Array.isArray(s))return Dp({name:""},c,s,"");{const m=null!==(f=s.name)&&void 0!==f?f:"";return Dp({name:m},s.parent,s.providers,m)}}}return n.THROW_IF_NOT_FOUND=ie,n.NULL=new xg,n.\u0275prov=Xe({token:n,providedIn:"any",factory:()=>Wr(Vf)}),n.__NG_ELEMENT_ID__=-1,n})();function Hg(n,r){ki(ru(n)[1],dt())}function Pp(n){let r=function Yd(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const c=[n];for(;r;){let f;if(Mt(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Pe(903,"");f=r.\u0275dir}if(f){if(s){c.push(f);const I=n;I.inputs=zg(n.inputs),I.declaredInputs=zg(n.declaredInputs),I.outputs=zg(n.outputs);const x=f.hostBindings;x&&qg(n,x);const P=f.viewQuery,Y=f.contentQueries;if(P&&Wg(n,P),Y&&bc(n,Y),we(n.inputs,f.inputs),we(n.declaredInputs,f.declaredInputs),we(n.outputs,f.outputs),Mt(f)&&f.data.animation){const X=n.data;X.animation=(X.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let I=0;I<m.length;I++){const x=m[I];x&&x.ngInherit&&x(n),x===Pp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Gg(n){let r=0,s=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=wr(f.hostAttrs,s=wr(s,f.hostAttrs))}}(c)}function zg(n){return n===Lr?{}:n===In?[]:n}function Wg(n,r){const s=n.viewQuery;n.viewQuery=s?(c,f)=>{r(c,f),s(c,f)}:r}function bc(n,r){const s=n.contentQueries;n.contentQueries=s?(c,f,m)=>{r(c,f,m),s(c,f,m)}:r}function qg(n,r){const s=n.hostBindings;n.hostBindings=s?(c,f)=>{r(c,f),s(c,f)}:r}let Np=null;function id(){if(!Np){const n=Vn.Symbol;if(n&&n.iterator)Np=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const c=r[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Np=c)}}}return Np}function Kd(n){return!!Zg(n)&&(Array.isArray(n)||!(n instanceof Map)&&id()in n)}function Zg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Yo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function $f(n,r,s,c){const f=E();return Yo(f,Zo(),r)&&(L(),Ka(or(),f,n,r,s,c)),$f}function Lp(n,r,s,c,f,m,I,x){const P=E(),Y=L(),X=n+20,Ce=Y.firstCreatePass?function em(n,r,s,c,f,m,I,x,P){const Y=r.consts,X=yc(r,n,4,I||null,ai(Y,x));$h(r,s,X,ai(Y,P)),ki(r,X);const Ce=X.tViews=Vu(2,X,c,f,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,X),Ce.queries=r.queries.embeddedTView(X)),X}(X,Y,P,r,s,c,f,m,I):Y.data[X];Nn(Ce,!1);const Ke=P[11].createComment("");bl(Y,P,Ke,Ce),fo(Ke,P),M(P,P[X]=zh(Ke,P,Ke,Ce)),Nt(Ce)&&os(Y,P,Ce),null!=I&&po(P,Ce,x)}function Up(n,r=Ht.Default){const s=E();return null===s?Wr(n,r):cn(dt(),s,te(n),r)}function mo(){throw new Error("invalid")}function jp(n,r,s){const c=E();return Yo(c,Zo(),r)&&function No(n,r,s,c,f,m,I,x){const P=Ft(r,s);let X,Y=r.inputs;!x&&null!=Y&&(X=Y[c])?(Wh(n,s,X,c,f),xt(r)&&function Vh(n,r){const s=Xn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(c=function ed(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=I?I(f,r.value||"",c):f,Er(m)?m.setProperty(P,c,f):$o(c)||(P.setProperty?P.setProperty(c,f):P[c]=f))}(L(),or(),c,n,r,c[11],s,!1),jp}function dm(n,r,s,c,f){const I=f?"class":"style";Wh(n,s,r.inputs[I],I,c)}function qf(n,r,s,c){const f=E(),m=L(),I=20+n,x=f[11],P=f[I]=Gc(x,r,function Ni(){return On.lFrame.currentNamespace}()),Y=m.firstCreatePass?function I_(n,r,s,c,f,m,I){const x=r.consts,Y=yc(r,n,2,f,ai(x,m));return $h(r,s,Y,ai(x,I)),null!==Y.attrs&&qh(Y,Y.attrs,!1),null!==Y.mergedAttrs&&qh(Y,Y.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Y),Y}(I,m,f,0,r,s,c):m.data[I];Nn(Y,!0);const X=Y.mergedAttrs;null!==X&&Rl(x,P,X);const Ce=Y.classes;null!==Ce&&Eh(x,P,Ce);const Ke=Y.styles;return null!==Ke&&Wc(x,P,Ke),64!=(64&Y.flags)&&bl(m,f,P,Y),0===function G(){return On.lFrame.elementDepthCount}()&&fo(P,f),function F(){On.lFrame.elementDepthCount++}(),Nt(Y)&&(os(m,f,Y),Nh(m,Y,f)),null!==c&&po(f,Y),qf}function Hp(){let n=dt();Nr()?yi():(n=n.parent,Nn(n,!1));const r=n;!function N(){On.lFrame.elementDepthCount--}();const s=L();return s.firstCreatePass&&(ki(s,n),Et(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ql(n){return 0!=(16&n.flags)}(r)&&dm(s,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function aa(n){return 0!=(32&n.flags)}(r)&&dm(s,r,E(),r.stylesWithoutHost,!1),Hp}function hm(n,r,s,c){return qf(n,r,s,c),Hp(),hm}function hy(n,r,s){const c=E(),f=L(),m=n+20,I=f.firstCreatePass?function C_(n,r,s,c,f){const m=r.consts,I=ai(m,c),x=yc(r,n,8,"ng-container",I);return null!==I&&qh(x,I,!0),$h(r,s,x,ai(m,f)),null!==r.queries&&r.queries.elementStart(r,x),x}(m,f,c,r,s):f.data[m];Nn(I,!0);const x=c[m]=c[11].createComment("");return bl(f,c,x,I),fo(x,c),Nt(I)&&(os(f,c,I),Nh(f,I,c)),null!=s&&po(c,I),hy}function fm(){let n=dt();const r=L();return Nr()?yi():(n=n.parent,Nn(n,!1)),r.firstCreatePass&&(ki(r,n),Et(n)&&r.queries.elementEnd(n)),fm}function pm(n,r,s){return hy(n,r,s),fm(),pm}function gm(){return E()}function fu(n){return!!n&&"function"==typeof n.then}function D_(n){return!!n&&"function"==typeof n.subscribe}const pu=D_;function wc(n,r,s,c){const f=E(),m=L(),I=dt();return function fy(n,r,s,c,f,m,I,x){const P=Nt(c),X=n.firstCreatePass&&du(n),Ce=r[8],Ke=go(r);let yt=!0;if(3&c.type||x){const wn=Ft(c,r),zn=x?x(wn):wn,Gt=Ke.length,yr=x?bi=>x(U(bi[c.index])):c.index;if(Er(s)){let bi=null;if(!x&&P&&(bi=function T_(n,r,s,c){const f=n.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const I=f[m];if(I===s&&f[m+1]===c){const x=r[7],P=f[m+2];return x.length>P?x[P]:null}"string"==typeof I&&(m+=2)}return null}(n,r,f,c.index)),null!==bi)(bi.__ngLastListenerFn__||bi).__ngNextListenerFn__=m,bi.__ngLastListenerFn__=m,yt=!1;else{m=Gp(c,r,Ce,m,!1);const fs=s.listen(zn,f,m);Ke.push(m,fs),X&&X.push(f,yr,Gt,Gt+1)}}else m=Gp(c,r,Ce,m,!0),zn.addEventListener(f,m,I),Ke.push(m),X&&X.push(f,yr,Gt,I)}else m=Gp(c,r,Ce,m,!1);const Bt=c.outputs;let ln;if(yt&&null!==Bt&&(ln=Bt[f])){const wn=ln.length;if(wn)for(let zn=0;zn<wn;zn+=2){const _u=r[ln[zn]][ln[zn+1]].subscribe(m),ip=Ke.length;Ke.push(m,_u),X&&X.push(f,c.index,ip,-(ip+1))}}}(m,f,f[11],I,n,r,!!s,c),wc}function mm(n,r,s,c){try{return!1!==s(c)}catch(f){return _c(n,f),!1}}function Gp(n,r,s,c,f){return function m(I){if(I===Function)return c;const x=2&n.flags?Xn(n.index,r):r;0==(32&r[2])&&j(x);let P=mm(r,0,c,I),Y=m.__ngNextListenerFn__;for(;Y;)P=mm(r,0,Y,I)&&P,Y=Y.__ngNextListenerFn__;return f&&!1===P&&(I.preventDefault(),I.returnValue=!1),P}}function Kf(n=1){return function Jr(n){return(On.lFrame.contextLView=function Mr(n,r){for(;n>0;)r=r[15],n--;return r}(n,On.lFrame.contextLView))[8]}(n)}function S_(n,r){let s=null;const c=function Ih(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const m=r[f];if("*"!==m){if(null===c?uu(n,m,!0):Ou(c,m))return f}else s=f}return s}function cd(n){const r=E()[16][6];if(!r.projection){const c=r.projection=Ms(n?n.length:1,null),f=c.slice();let m=r.child;for(;null!==m;){const I=n?S_(m,n):0;null!==I&&(f[I]?f[I].projectionNext=m:c[I]=m,f[I]=m),m=m.next}}}function Zf(n,r=0,s){const c=E(),f=L(),m=yc(f,20+n,16,null,s||null);null===m.projection&&(m.projection=r),yi(),64!=(64&m.flags)&&function uc(n,r,s){cc(r[11],0,r,s,ha(n,s,r),Vd(s.parent||r[6],s,r))}(f,c,m)}function Kp(n,r,s,c,f){const m=n[s+1],I=null===r;let x=c?pa(m):ga(m),P=!1;for(;0!==x&&(!1===P||I);){const X=n[x+1];x_(n[x],r)&&(P=!0,n[x+1]=c?wl(X):Pu(X)),x=c?pa(X):ga(X)}P&&(n[s+1]=c?Pu(m):wl(m))}function x_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Ro(n,r)>=0}function Em(n,r){return function gu(n,r,s,c){const f=E(),m=L(),I=function Ws(n){const r=On.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);m.firstUpdatePass&&function Cy(n,r,s,c){const f=n.data;if(null===f[s+1]){const m=f[Wn()],I=function Iy(n,r){return r>=n.expandoStartIndex}(n,s);(function pd(n,r){return 0!=(n.flags&(r?16:32))})(m,c)&&null===r&&!I&&(r=!1),r=function Dy(n,r,s,c){const f=function Sa(n){const r=On.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let m=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(s=rf(s=Qp(null,n,r,s,c),r.attrs,c),m=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==f)if(s=Qp(f,n,r,s,c),null===m){let P=function O_(n,r,s){const c=s?r.classBindings:r.styleBindings;if(0!==ga(c))return n[pa(c)]}(n,r,c);void 0!==P&&Array.isArray(P)&&(P=Qp(null,n,r,P[1],c),P=rf(P,r.attrs,c),function P_(n,r,s,c){n[pa(s?r.classBindings:r.styleBindings)]=c}(n,r,c,P))}else m=function Ty(n,r,s){let c;const f=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<f;m++)c=rf(c,n[m].hostAttrs,s);return rf(c,r.attrs,s)}(n,r,c)}return void 0!==m&&(c?r.residualClasses=m:r.residualStyles=m),s}(f,m,r,c),function yy(n,r,s,c,f,m){let I=m?r.classBindings:r.styleBindings,x=pa(I),P=ga(I);n[c]=s;let X,Y=!1;if(Array.isArray(s)){const Ce=s;X=Ce[1],(null===X||Ro(Ce,X)>0)&&(Y=!0)}else X=s;if(f)if(0!==P){const Ke=pa(n[x+1]);n[c+1]=pc(Ke,x),0!==Ke&&(n[Ke+1]=Kc(n[Ke+1],c)),n[x+1]=function Po(n,r){return 131071&n|r<<17}(n[x+1],c)}else n[c+1]=pc(x,0),0!==x&&(n[x+1]=Kc(n[x+1],c)),x=c;else n[c+1]=pc(P,0),0===x?x=c:n[P+1]=Kc(n[P+1],c),P=c;Y&&(n[c+1]=Pu(n[c+1])),Kp(n,X,c,!0),Kp(n,X,c,!1),function _m(n,r,s,c,f){const m=f?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&Ro(m,r)>=0&&(s[c+1]=wl(s[c+1]))}(r,X,n,c,m),I=pc(x,P),m?r.classBindings=I:r.styleBindings=I}(f,m,r,s,I,c)}}(m,n,I,c),r!==Cr&&Yo(f,I,r)&&function Ay(n,r,s,c,f,m,I,x){if(!(3&r.type))return;const P=n.data,Y=P[x+1];mu(function Th(n){return 1==(1&n)}(Y)?bm(P,r,s,f,ga(Y),I):void 0)||(mu(m)||function Yc(n){return 2==(2&n)}(Y)&&(m=bm(P,null,s,f,x,I)),function Ud(n,r,s,c,f){const m=Er(n);if(r)f?m?n.addClass(s,c):s.classList.add(c):m?n.removeClass(s,c):s.classList.remove(c);else{let I=-1===c.indexOf("-")?void 0:Tt.DashCase;if(null==f)m?n.removeStyle(s,c,I):s.style.removeProperty(c);else{const x="string"==typeof f&&f.endsWith("!important");x&&(f=f.slice(0,-10),I|=Tt.Important),m?n.setStyle(s,c,f,I):s.style.setProperty(c,f,x?"important":"")}}}(c,I,mt(Wn(),s),f,m))}(m,m.data[Wn()],f,f[11],n,f[I+1]=function N_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=be(ja(n)))),n}(r,s),c,I)}(n,r,null,!0),Em}function Qp(n,r,s,c,f){let m=null;const I=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<I&&(m=r[x],c=rf(c,m.hostAttrs,f),m!==n);)x++;return null!==n&&(s.directiveStylingLast=x),c}function rf(n,r,s){const c=s?1:2;let f=-1;if(null!==r)for(let m=0;m<r.length;m++){const I=r[m];"number"==typeof I?f=I:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),$i(n,I,!!s||r[++m]))}return void 0===n?null:n}function bm(n,r,s,c,f,m){const I=null===r;let x;for(;f>0;){const P=n[f],Y=Array.isArray(P),X=Y?P[1]:P,Ce=null===X;let Ke=s[f+1];Ke===Cr&&(Ke=Ce?In:void 0);let yt=Ce?ba(Ke,c):X===c?Ke:void 0;if(Y&&!mu(yt)&&(yt=ba(P,c)),mu(yt)&&(x=yt,I))return x;const Bt=n[f+1];f=I?pa(Bt):ga(Bt)}if(null!==r){let P=m?r.residualClasses:r.residualStyles;null!=P&&(x=ba(P,c))}return x}function mu(n){return void 0!==n}function xy(n,r=""){const s=E(),c=L(),f=n+20,m=c.firstCreatePass?yc(c,f,1,r,null):c.data[f],I=s[f]=function Mu(n,r){return Er(n)?n.createText(r):n.createTextNode(r)}(s[11],r);bl(c,s,I,m),Nn(m,!1)}function wm(n){return Im("",n,""),wm}function Im(n,r,s){const c=E(),f=function od(n,r,s,c){return Yo(n,Zo(),s)?r+Ne(s)+c:Cr}(c,n,r,s);return f!==Cr&&vc(c,Wn(),f),Im}const md=void 0;var tp=["en",[["a","p"],["AM","PM"],md],[["AM","PM"],md,md],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],md,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],md,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",md,"{1} 'at' {0}",md],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Uy(n){const s=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let zu={};function Om(n){const r=function G_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=yd(r);if(s)return s;const c=r.split("-")[0];if(s=yd(c),s)return s;if("en"===c)return tp;throw new Error(`Missing locale data for the locale "${n}".`)}function th(n){return Om(n)[nr.PluralCase]}function yd(n){return n in zu||(zu[n]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[n]),zu[n]}var nr=(()=>((nr=nr||{})[nr.LocaleId=0]="LocaleId",nr[nr.DayPeriodsFormat=1]="DayPeriodsFormat",nr[nr.DayPeriodsStandalone=2]="DayPeriodsStandalone",nr[nr.DaysFormat=3]="DaysFormat",nr[nr.DaysStandalone=4]="DaysStandalone",nr[nr.MonthsFormat=5]="MonthsFormat",nr[nr.MonthsStandalone=6]="MonthsStandalone",nr[nr.Eras=7]="Eras",nr[nr.FirstDayOfWeek=8]="FirstDayOfWeek",nr[nr.WeekendRange=9]="WeekendRange",nr[nr.DateFormat=10]="DateFormat",nr[nr.TimeFormat=11]="TimeFormat",nr[nr.DateTimeFormat=12]="DateTimeFormat",nr[nr.NumberSymbols=13]="NumberSymbols",nr[nr.NumberFormats=14]="NumberFormats",nr[nr.CurrencyCode=15]="CurrencyCode",nr[nr.CurrencySymbol=16]="CurrencySymbol",nr[nr.CurrencyName=17]="CurrencyName",nr[nr.Currencies=18]="Currencies",nr[nr.Directionality=19]="Directionality",nr[nr.PluralCase=20]="PluralCase",nr[nr.ExtraData=21]="ExtraData",nr))();const yu="en-US";let rg=yu;function J_(n,r,s,c,f){if(n=te(n),Array.isArray(n))for(let m=0;m<n.length;m++)J_(n[m],r,s,c,f);else{const m=L(),I=E();let x=Zh(n)?n:te(n.provide),P=zm(n);const Y=dt(),X=1048575&Y.providerIndexes,Ce=Y.directiveStart,Ke=Y.providerIndexes>>20;if(Zh(n)||!n.multi){const yt=new Bo(P,f,Up),Bt=tv(x,r,f?X:X+Ke,Ce);-1===Bt?(bo(ca(Y,I),m,x),ev(m,n,r.length),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(yt),I.push(yt)):(s[Bt]=yt,I[Bt]=yt)}else{const yt=tv(x,r,X+Ke,Ce),Bt=tv(x,r,X,X+Ke),ln=yt>=0&&s[yt],wn=Bt>=0&&s[Bt];if(f&&!wn||!f&&!ln){bo(ca(Y,I),m,x);const zn=function sb(n,r,s,c,f){const m=new Bo(n,s,Up);return m.multi=[],m.index=r,m.componentProviders=0,h0(m,f,c&&!s),m}(f?ib:rb,s.length,f,c,P);!f&&wn&&(s[Bt].providerFactory=zn),ev(m,n,r.length,0),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(zn),I.push(zn)}else ev(m,n,yt>-1?yt:Bt,h0(s[f?Bt:yt],P,!f&&c));!f&&c&&wn&&s[Bt].componentProviders++}}}function ev(n,r,s,c){const f=Zh(r),m=function l_(n){return!!n.useClass}(r);if(f||m){const P=(m?te(r.useClass):r).prototype.ngOnDestroy;if(P){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const X=Y.indexOf(s);-1===X?Y.push(s,[c,P]):Y[X+1].push(c,P)}else Y.push(s,P)}}}function h0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function tv(n,r,s,c){for(let f=s;f<c;f++)if(r[f]===n)return f;return-1}function rb(n,r,s,c){return nv(this.multi,[])}function ib(n,r,s,c){const f=this.multi;let m;if(this.providerFactory){const I=this.providerFactory.componentProviders,x=B(s,s[1],this.providerFactory.index,c);m=x.slice(0,I),nv(f,m);for(let P=I;P<x.length;P++)m.push(x[P])}else m=[],nv(f,m);return m}function nv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function f0(n,r=[]){return s=>{s.providersResolver=(c,f)=>function nb(n,r,s){const c=L();if(c.firstCreatePass){const f=Mt(n);J_(s,c.data,c.blueprint,f,!0),J_(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class p0{}class lb{resolveComponentFactory(r){throw function ab(n){const r=Error(`No component factory found for ${be(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Qy=(()=>{class n{}return n.NULL=new lb,n})();function ub(){return ag(dt(),E())}function ag(n,r){return new km(Ft(n,r))}let km=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=ub,n})();function cb(n){return n instanceof km?n.nativeElement:n}class m0{}let db=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fb(){const n=E(),s=Xn(dt().index,n);return function hb(n){return n[11]}(Ge(s)?s:n)}(),n})(),pb=(()=>{class n{}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>null}),n})();class y0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const _0=new y0("13.2.7"),rv={};function Xy(n,r,s,c,f=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&c.push(U(m)),et(m))for(let x=10;x<m.length;x++){const P=m[x],Y=P[1].firstChild;null!==Y&&Xy(P[1],P,Y,c)}const I=s.type;if(8&I)Xy(n,r,s.child,c);else if(32&I){const x=pn(s,r);let P;for(;P=x();)c.push(P)}else if(16&I){const x=Bd(r,s);if(Array.isArray(x))c.push(...x);else{const P=Ji(r[16]);Xy(P[1],P,x,c,!0)}}s=f?s.projectionNext:s.next}return c}class Fm{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Xy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(et(r)){const s=r[8],c=s?s.indexOf(this):-1;c>-1&&(mh(r,c),io(s,c))}this._attachedToViewContainer=!1}_f(this._lView[1],this._lView)}onDestroy(r){Of(this._lView[1],this._lView,null,r)}markForCheck(){j(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$e(this._lView[1],this._lView,this.context)}checkNoChanges(){!function bt(n,r,s){Xi(!0);try{$e(n,r,s)}finally{Xi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mf(n,r){qa(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=r}}class gb extends Fm{constructor(r){super(r),this._view=r}detectChanges(){It(this._view)}checkNoChanges(){!function $t(n){Xi(!0);try{It(n)}finally{Xi(!1)}}(this._view)}get context(){return null}}class v0 extends Qy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Bn(r);return new iv(s,this.ngModule)}}function E0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class iv extends p0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Um(n){return n.map(fc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return E0(this.componentDef.inputs)}get outputs(){return E0(this.componentDef.outputs)}create(r,s,c,f){const m=(f=f||this.ngModule)?function yb(n,r){return{get:(s,c,f)=>{const m=n.get(s,rv,f);return m!==rv||c===rv?m:r.get(s,c,f)}}}(r,f.injector):r,I=m.get(m0,$),x=m.get(pb,null),P=I.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",X=c?function kh(n,r,s){if(Er(n))return n.selectRootElement(r,s===kn.ShadowDom);let c="string"==typeof r?n.querySelector(r):r;return c.textContent="",c}(P,c,this.componentDef.encapsulation):Gc(I.createRenderer(null,this.componentDef),Y,function mb(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Y)),Ce=this.componentDef.onPush?576:528,Ke=function Op(n,r){return{components:[],scheduler:n||fh,clean:Ui,playerHandler:r||null,flags:0}}(),yt=Vu(0,null,null,1,0,null,null,null,null,null),Bt=Hd(null,yt,Ke,Ce,null,null,I,P,x,m);let ln,wn;Xo(Bt);try{const zn=function Rp(n,r,s,c,f,m){const I=s[1];s[20]=n;const P=yc(I,20,2,"#host",null),Y=P.mergedAttrs=r.hostAttrs;null!==Y&&(qh(P,Y,!0),null!==n&&(Rl(f,n,Y),null!==P.classes&&Eh(f,n,P.classes),null!==P.styles&&Wc(f,n,P.styles)));const X=c.createRenderer(n,r),Ce=Hd(s,ma(r),null,r.onPush?64:16,s[20],P,c,X,m||null,null);return I.firstCreatePass&&(bo(ca(P,s),I,r.type),Ep(I,P),wp(P,s.length,1)),M(s,Ce),s[20]=Ce}(X,this.componentDef,Bt,I,P);if(X)if(c)Rl(P,X,["ng-version",_0.full]);else{const{attrs:Gt,classes:yr}=function If(n){const r=[],s=[];let c=1,f=2;for(;c<n.length;){let m=n[c];if("string"==typeof m)2===f?""!==m&&r.push(m,n[++c]):8===f&&s.push(m);else{if(!Ds(f))break;f=m}c++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Gt&&Rl(P,X,Gt),yr&&yr.length>0&&Eh(P,X,yr.join(" "))}if(wn=zr(yt,20),void 0!==s){const Gt=wn.projection=[];for(let yr=0;yr<this.ngContentSelectors.length;yr++){const bi=s[yr];Gt.push(null!=bi?Array.from(bi):null)}}ln=function Qm(n,r,s,c,f){const m=s[1],I=function Tg(n,r,s){const c=dt();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Ip(n,c,r,Fu(n,r,1,null),s));const f=B(r,n,c.directiveStart,c);fo(f,r);const m=Ft(c,r);return m&&fo(m,r),f}(m,s,r);if(c.components.push(I),n[8]=I,f&&f.forEach(P=>P(I,r)),r.contentQueries){const P=dt();r.contentQueries(1,I,P.directiveStart)}const x=dt();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(qs(x.index),Nf(s[1],x,0,x.directiveStart,x.directiveEnd,r),jh(r,I)),I}(zn,this.componentDef,Bt,Ke,[Hg]),Jc(yt,Bt,null)}finally{oa()}return new vb(this.componentType,ln,ag(wn,Bt),Bt,wn)}}class vb extends class ob{}{constructor(r,s,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new gb(f),this.componentType=r}get injector(){return new Ae(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class lg{}class b0{}const ug=new Map;class C0 extends lg{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new v0(this);const c=vr(r);this._bootstrapComponents=y(c.bootstrap),this._r3Injector=qd(r,s,[{provide:lg,useValue:this},{provide:Qy,useValue:this.componentFactoryResolver}],be(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Hl.THROW_IF_NOT_FOUND,c=Ht.Default){return r===Hl||r===lg||r===Vf?this:this._r3Injector.get(r,s,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class sv extends b0{constructor(r){super(),this.moduleType=r,null!==vr(r)&&function bb(n){const r=new Set;!function s(c){const f=vr(c,!0),m=f.id;null!==m&&(function w0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${be(r)} vs ${be(r.name)}`)}(m,ug.get(m),c),ug.set(m,c));const I=y(f.imports);for(const x of I)r.has(x)||(r.add(x),s(x))}(n)}(r)}create(r){return new C0(this.moduleType,r)}}function ov(n){return r=>{setTimeout(n,void 0,r)}}const _d=class Bb extends u.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,c){var f,m,I;let x=r,P=s||(()=>null),Y=c;if(r&&"object"==typeof r){const Ce=r;x=null===(f=Ce.next)||void 0===f?void 0:f.bind(Ce),P=null===(m=Ce.error)||void 0===m?void 0:m.bind(Ce),Y=null===(I=Ce.complete)||void 0===I?void 0:I.bind(Ce)}this.__isAsync&&(P=ov(P),x&&(x=ov(x)),Y&&(Y=ov(Y)));const X=super.subscribe({next:x,error:P,complete:Y});return r instanceof se.w&&r.add(X),X}};function $b(){return this._results[id()]()}class av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=id(),c=av.prototype;c[s]||(c[s]=$b)}get changes(){return this._changes||(this._changes=new _d)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const c=this;c.dirty=!1;const f=xs(r);(this._changesDetected=!function sl(n,r,s){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],m=r[c];if(s&&(f=s(f),m=s(m)),m!==f)return!1}return!0}(c._results,f,s))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bm=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hb,n})();const Ub=Bm,jb=class extends Ub{constructor(r,s,c){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(r){const s=this._declarationTContainer.tViews,c=Hd(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[Q];return null!==m&&(c[Q]=m.createEmbeddedView(s)),Jc(s,c,r),new Fm(c)}};function Hb(){return Jy(dt(),E())}function Jy(n,r){return 4&n.type?new jb(r,n,ag(n,r)):null}let e_=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gb,n})();function Gb(){return O0(dt(),E())}const zb=e_,M0=class extends zb{constructor(r,s,c){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=c}get element(){return ag(this._hostTNode,this._hostLView)}get injector(){return new Ae(this._hostTNode,this._hostLView)}get parentInjector(){const r=ns(this._hostTNode,this._hostLView);if(Pa(r)){const s=vs(r,this._hostLView),c=pi(r);return new Ae(s[1].data[c+8],s)}return new Ae(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=R0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,c){const f=r.createEmbeddedView(s||{});return this.insert(f,c),f}createComponent(r,s,c,f,m){const I=r&&!function Si(n){return"function"==typeof n}(r);let x;if(I)x=s;else{const Ce=s||{};x=Ce.index,c=Ce.injector,f=Ce.projectableNodes,m=Ce.ngModuleRef}const P=I?r:new iv(Bn(r)),Y=c||this.parentInjector;if(!m&&null==P.ngModule){const Ke=(I?Y:this.parentInjector).get(lg,null);Ke&&(m=Ke)}const X=P.create(Y,f,void 0,m);return this.insert(X.hostView,x),X}insert(r,s){const c=r._lView,f=c[1];if(function oi(n){return et(n[3])}(c)){const X=this.indexOf(r);if(-1!==X)this.detach(X);else{const Ce=c[3],Ke=new M0(Ce,Ce[6],Ce[3]);Ke.detach(Ke.indexOf(r))}}const m=this._adjustIndex(s),I=this._lContainer;!function yf(n,r,s,c){const f=10+c,m=s.length;c>0&&(s[f-1][4]=r),c<m-10?(r[4]=s[f],Pl(s,10+c,r)):(s.push(r),r[4]=null),r[3]=s;const I=r[17];null!==I&&s!==I&&function Fd(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(I,r);const x=r[Q];null!==x&&x.insertView(n),r[2]|=128}(f,c,I,m);const x=vh(m,I),P=c[11],Y=Ld(P,I[7]);return null!==Y&&function kd(n,r,s,c,f,m){c[0]=f,c[6]=r,qa(n,c,s,1,f,m)}(f,I[6],P,c,Y,x),r.attachToViewContainerRef(),Pl(lv(I),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=R0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),c=mh(this._lContainer,s);c&&(io(lv(this._lContainer),s),_f(c[1],c))}detach(r){const s=this._adjustIndex(r,-1),c=mh(this._lContainer,s);return c&&null!=io(lv(this._lContainer),s)?new Fm(c):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function R0(n){return n[8]}function lv(n){return n[8]||(n[8]=[])}function O0(n,r){let s;const c=r[n.index];if(et(c))s=c;else{let f;if(8&n.type)f=U(c);else{const m=r[11];f=m.createComment("");const I=Ft(n,r);vl(m,Ld(m,I),f,function Ef(n,r){return Er(n)?n.nextSibling(r):r.nextSibling}(m,I),!1)}r[n.index]=s=zh(c,r,f,n),M(r,s)}return new M0(s,n,r)}class uv{constructor(r){this.queryList=r,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class cv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const c=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let m=0;m<c;m++){const I=s.getByIndex(m);f.push(this.queries[I.indexInDeclarationView].clone())}return new cv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==U0(r,s).matches&&this.queries[s].setDirty()}}class P0{constructor(r,s,c=null){this.predicate=r,this.flags=s,this.read=c}}class dv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let c=0;c<this.length;c++){const f=null!==s?s.length:0,m=this.getByIndex(c).embeddedTView(r,f);m&&(m.indexInDeclarationView=c,null!==s?s.push(m):s=[m])}return null!==s?new dv(s):null}template(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class hv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new hv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(r,s,Yb(s,m)),this.matchTNodeWithReadOption(r,s,D(s,r,m,!1,!1))}else c===Bm?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,D(s,r,c,!1,!1))}matchTNodeWithReadOption(r,s,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===km||f===e_||f===Bm&&4&s.type)this.addMatch(s.index,-2);else{const m=D(s,r,f,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,c)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yb(n,r){const s=n.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===r)return s[c+1];return null}function Zb(n,r,s,c){return-1===s?function Kb(n,r){return 11&n.type?ag(n,r):4&n.type?Jy(n,r):null}(r,n):-2===s?function Qb(n,r,s){return s===km?ag(r,n):s===Bm?Jy(r,n):s===e_?O0(r,n):void 0}(n,r,c):B(n,n[1],s,r)}function N0(n,r,s,c){const f=r[Q].queries[c];if(null===f.matches){const m=n.data,I=s.matches,x=[];for(let P=0;P<I.length;P+=2){const Y=I[P];x.push(Y<0?null:Zb(r,m[Y],I[P+1],s.metadata.read))}f.matches=x}return f.matches}function fv(n,r,s,c){const f=n.queries.getByIndex(s),m=f.matches;if(null!==m){const I=N0(n,r,f,s);for(let x=0;x<m.length;x+=2){const P=m[x];if(P>0)c.push(I[x/2]);else{const Y=m[x+1],X=r[-P];for(let Ce=10;Ce<X.length;Ce++){const Ke=X[Ce];Ke[17]===Ke[3]&&fv(Ke[1],Ke,Y,c)}if(null!==X[9]){const Ce=X[9];for(let Ke=0;Ke<Ce.length;Ke++){const yt=Ce[Ke];fv(yt[1],yt,Y,c)}}}}}return c}function k0(n){const r=E(),s=L(),c=Aa();Sl(c+1);const f=U0(s,c);if(n.dirty&&pr(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const m=f.crossesNgTemplate?fv(s,r,c,[]):N0(s,r,f,c);n.reset(m,cb),n.notifyOnChanges()}return!0}return!1}function F0(n,r,s){const c=L();c.firstCreatePass&&($0(c,new P0(n,r,s),-1),2==(2&r)&&(c.staticViewQueries=!0)),B0(c,E(),r)}function L0(n,r,s,c){const f=L();if(f.firstCreatePass){const m=dt();$0(f,new P0(r,s,c),m.index),function Jb(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}B0(f,E(),s)}function V0(){return function Xb(n,r){return n[Q].queries[r].queryList}(E(),Aa())}function B0(n,r,s){const c=new av(4==(4&s));Of(n,r,c,c.destroy),null===r[Q]&&(r[Q]=new cv),r[Q].queries.push(new uv(c))}function $0(n,r,s){null===n.queries&&(n.queries=new dv),n.queries.track(new hv(r,s))}function U0(n,r){return n.queries.getByIndex(r)}function r_(...n){}const iE=new rs("Application Initializer");let vv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=r_,this.reject=r_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(fu(m))s.push(m);else if(pu(m)){const I=new Promise((x,P)=>{m.subscribe({complete:x,error:P})});s.push(I)}}Promise.all(s).then(()=>{c()}).catch(f=>{this.reject(f)}),0===s.length&&c(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Wr(iE,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sE=new rs("AppId",{providedIn:"root",factory:function oE(){return`${Ev()}${Ev()}${Ev()}`}});function Ev(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aE=new rs("Platform Initializer"),lE=new rs("Platform ID"),uE=new rs("appBootstrapListener");let cE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const bv=new rs("LocaleId",{providedIn:"root",factory:()=>al(bv,Ht.Optional|Ht.SkipSelf)||function yw(){return"undefined"!=typeof $localize&&$localize.locale||yu}()}),_w=new rs("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Ew=(()=>{class n{compileModuleSync(s){return new sv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),m=y(vr(s).declarations).reduce((I,x)=>{const P=Bn(x);return P&&I.push(new iv(P)),I},[]);return new vw(c,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ww=(()=>Promise.resolve(0))();function wv(n){"undefined"==typeof Zone?ww.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ic{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _d(!1),this.onMicrotaskEmpty=new _d(!1),this.onStable=new _d(!1),this.onError=new _d(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&s,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Iw(){let n=Vn.requestAnimationFrame,r=Vn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Tw(n){const r=()=>{!function Dw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Vn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cv(n),n.isCheckStableRunning=!0,Iv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,f,m,I,x)=>{try{return dE(n),s.invokeTask(f,m,I,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),hE(n)}},onInvoke:(s,c,f,m,I,x,P)=>{try{return dE(n),s.invoke(f,m,I,x,P)}finally{n.shouldCoalesceRunChangeDetection&&r(),hE(n)}},onHasTask:(s,c,f,m)=>{s.hasTask(f,m),c===f&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,Cv(n),Iv(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,c,f,m)=>(s.handleError(f,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ic.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ic.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,c){return this._inner.run(r,s,c)}runTask(r,s,c,f){const m=this._inner,I=m.scheduleEventTask("NgZoneEvent: "+f,r,Cw,r_,r_);try{return m.runTask(I,s,c)}finally{m.cancelTask(I)}}runGuarded(r,s,c){return this._inner.runGuarded(r,s,c)}runOutsideAngular(r){return this._outer.run(r)}}const Cw={};function Iv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hE(n){n._nesting--,Iv(n)}class Sw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _d,this.onMicrotaskEmpty=new _d,this.onStable=new _d,this.onError=new _d}run(r,s,c){return r.apply(s,c)}runGuarded(r,s,c){return r.apply(s,c)}runOutsideAngular(r){return r()}runTask(r,s,c,f){return r.apply(s,c)}}let fE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ic.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:f})}whenStable(s,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,c,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(Wr(Ic))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),pE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return Dv.findTestabilityInTree(this,s,c)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class Aw{addToWindow(r){}findTestabilityInTree(r,s,c){return null}}function xw(n){Dv=n}let Cc,Dv=new Aw;const gE=new rs("AllowMultipleToken");class Ow{constructor(r,s){this.name=r,this.token=s}}function mE(n,r,s=[]){const c=`Platform: ${r}`,f=new rs(c);return(m=[])=>{let I=yE();if(!I||I.injector.get(gE,!1))if(n)n(s.concat(m).concat({provide:f,useValue:!0}));else{const x=s.concat(m).concat({provide:f,useValue:!0},{provide:Bf,useValue:"platform"});!function Pw(n){if(Cc&&!Cc.destroyed&&!Cc.injector.get(gE,!1))throw new Pe(400,"");Cc=n.get(_E);const r=n.get(aE,null);r&&r.forEach(s=>s())}(Hl.create({providers:x,name:c}))}return function Nw(n){const r=yE();if(!r)throw new Pe(401,"");return r}()}}function yE(){return Cc&&!Cc.destroyed?Cc:null}let _E=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const x=function kw(n,r){let s;return s="noop"===n?new Sw:("zone.js"===n?void 0:n)||new Ic({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),P=[{provide:Ic,useValue:x}];return x.run(()=>{const Y=Hl.create({providers:P,parent:this.injector,name:s.moduleType.name}),X=s.create(Y),Ce=X.injector.get(Qs,null);if(!Ce)throw new Pe(402,"");return x.runOutsideAngular(()=>{const Ke=x.onError.subscribe({next:yt=>{Ce.handleError(yt)}});X.onDestroy(()=>{Sv(this._modules,X),Ke.unsubscribe()})}),function Fw(n,r,s){try{const c=s();return fu(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(Ce,x,()=>{const Ke=X.injector.get(vv);return Ke.runInitializers(),Ke.donePromise.then(()=>(function ig(n){st(n,"Expected localeId to be defined"),"string"==typeof n&&(rg=n.toLowerCase().replace(/_/g,"-"))}(X.injector.get(bv,yu)||yu),this._moduleDoBootstrap(X),X))})})}bootstrapModule(s,c=[]){const f=vE({},c);return function Mw(n,r,s){const c=new sv(s);return Promise.resolve(c)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(s){const c=s.injector.get(Tv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new Pe(403,"");s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Wr(Hl))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function vE(n,r){return Array.isArray(r)?r.reduce(vE,n):Object.assign(Object.assign({},n),r)}let Tv=(()=>{class n{constructor(s,c,f,m,I){this._zone=s,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new Z.y(Y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Y.next(this._stable),Y.complete()})}),P=new Z.y(Y=>{let X;this._zone.runOutsideAngular(()=>{X=this._zone.onStable.subscribe(()=>{Ic.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Y.next(!0))})})});const Ce=this._zone.onUnstable.subscribe(()=>{Ic.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Y.next(!1)}))});return()=>{X.unsubscribe(),Ce.unsubscribe()}});this.isStable=(0,ke.T)(x,P.pipe((0,Te.B)()))}bootstrap(s,c){if(!this._initStatus.done)throw new Pe(405,"");let f;f=s instanceof p0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(f.componentType);const m=function Rw(n){return n.isBoundToModule}(f)?void 0:this._injector.get(lg),x=f.create(Hl.NULL,[],c||f.selector,m),P=x.location.nativeElement,Y=x.injector.get(fE,null),X=Y&&x.injector.get(pE);return Y&&X&&X.registerApplication(P,Y),x.onDestroy(()=>{this.detachView(x.hostView),Sv(this.components,x),X&&X.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;Sv(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(uE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Wr(Ic),Wr(Hl),Wr(Qs),Wr(Qy),Wr(vv))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Sv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let bE=!0,wE=!1;function Vw(){return wE=!0,bE}function Bw(){if(wE)throw new Error("Cannot enable prod mode after platform setup.");bE=!1}let $w=(()=>{class n{}return n.__NG_ELEMENT_ID__=Uw,n})();function Uw(n){return function jw(n,r,s){if(xt(n)&&!s){const c=Xn(n.index,r);return new Fm(c,c)}return 47&n.type?new Fm(r[16],r):null}(dt(),E(),16==(16&n))}class TE{constructor(){}supports(r){return Kd(r)}create(r){return new Yw(r)}}const qw=(n,r)=>r;class Yw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qw}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,c=this._removalsHead,f=0,m=null;for(;s||c;){const I=!c||s&&s.currentIndex<AE(c,f,m)?s:c,x=AE(I,f,m),P=I.currentIndex;if(I===c)f--,c=c._nextRemoved;else if(s=s._next,null==I.previousIndex)f++;else{m||(m=[]);const Y=x-f,X=P-f;if(Y!=X){for(let Ke=0;Ke<Y;Ke++){const yt=Ke<m.length?m[Ke]:m[Ke]=0,Bt=yt+Ke;X<=Bt&&Bt<Y&&(m[Ke]=yt+1)}m[I.previousIndex]=X-Y}}x!==P&&r(I,x,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Kd(r))throw new Pe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,m,I,s=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)m=r[x],I=this._trackByFn(x,m),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,m,I,x)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,I,x),c=!0),s=s._next}else f=0,function Kg(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[id()]();let c;for(;!(c=s.next()).done;)r(c.value)}}(r,x=>{I=this._trackByFn(f,x),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,x,I,f)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,I,f),c=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,c,f){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,f)):r=this._addAfter(new Kw(s,c),m,f),r}_verifyReinsertion(r,s,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?r=this._reinsertAfter(m,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,m=r._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(r,s,c),this._addToMoves(r,c),r}_moveAfter(r,s,c){return this._unlink(r),this._insertAfter(r,s,c),this._addToMoves(r,c),r}_addAfter(r,s,c){return this._insertAfter(r,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,c){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new SE),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,c=r._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Kw{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const s=r._prevDup,c=r._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class SE{constructor(){this.map=new Map}put(r){const s=r.trackById;let c=this.map.get(s);c||(c=new Zw,this.map.set(s,c)),c.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AE(n,r,s){const c=n.previousIndex;if(null===c)return c;let f=0;return s&&c<s.length&&(f=s[c]),c+r+f}class xE{constructor(){}supports(r){return r instanceof Map||Zg(r)}create(){return new Qw}}class Qw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Zg(r)))throw new Pe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(f,c);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const c=r._prev;return s._next=r,s._prev=c,r._prev=s,c&&(c._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const m=f._prev,I=f._next;return m&&(m._next=I),I&&(I._prev=m),f._next=null,f._prev=null,f}const c=new Xw(r);return this._records.set(r,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(c=>s(r[c],c))}}class Xw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ME(){return new Ov([new TE])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(null!=c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||ME()),deps:[[n,new Xl,new Ba]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(null!=c)return c;throw new Pe(901,"")}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:ME}),n})();function RE(){return new Pv([new xE])}let Pv=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||RE()),deps:[[n,new Xl,new Ba]]}}find(s){const c=this.factories.find(m=>m.supports(s));if(c)return c;throw new Pe(901,"")}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:RE}),n})();const tI=mE(null,"core",[{provide:lE,useValue:"unknown"},{provide:_E,deps:[Hl]},{provide:pE,deps:[]},{provide:cE,deps:[]}]);let nI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Wr(Tv))},n.\u0275mod=lt({type:n}),n.\u0275inj=ft({}),n})()},4182:(en,ut,H)=>{"use strict";H.d(ut,{u5:()=>ai,JU:()=>te,a5:()=>Yn,JJ:()=>cr,On:()=>En});var u=H(5e3),se=H(9808),Z=H(2916),ke=H(6688),Te=H(4850),ae=H(7830),we=H(5254);function me(G,F){return new Z.y(N=>{const oe=G.length;if(0===oe)return void N.complete();const v=new Array(oe);let V=0,E=0;for(let L=0;L<oe;L++){const ue=(0,we.D)(G[L]);let dt=!1;N.add(ue.subscribe({next:Zt=>{dt||(dt=!0,E++),v[L]=Zt},error:Zt=>N.error(Zt),complete:()=>{V++,(V===oe||!dt)&&(E===oe&&N.next(F?F.reduce((Zt,bn,Nn)=>(Zt[bn]=v[Nn],Zt),{}):v),N.complete())}}))}})}let ce=(()=>{class G{constructor(N,oe){this._renderer=N,this._elementRef=oe,this.onChange=v=>{},this.onTouched=()=>{}}setProperty(N,oe){this._renderer.setProperty(this._elementRef.nativeElement,N,oe)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return G.\u0275fac=function(N){return new(N||G)(u.Y36(u.Qsj),u.Y36(u.SBq))},G.\u0275dir=u.lG2({type:G}),G})(),ge=(()=>{class G extends ce{}return G.\u0275fac=function(){let F;return function(oe){return(F||(F=u.n5z(G)))(oe||G)}}(),G.\u0275dir=u.lG2({type:G,features:[u.qOj]}),G})();const te=new u.OlP("NgValueAccessor"),Pe={provide:te,useExisting:(0,u.Gpc)(()=>Fe),multi:!0},Ne=new u.OlP("CompositionEventMode");let Fe=(()=>{class G extends ce{constructor(N,oe,v){super(N,oe),this._compositionMode=v,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ye(){const G=(0,se.q)()?(0,se.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return G.\u0275fac=function(N){return new(N||G)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Ne,8))},G.\u0275dir=u.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,oe){1&N&&u.NdJ("input",function(V){return oe._handleInput(V.target.value)})("blur",function(){return oe.onTouched()})("compositionstart",function(){return oe._compositionStart()})("compositionend",function(V){return oe._compositionEnd(V.target.value)})},features:[u._Bn([Pe]),u.qOj]}),G})();const ot=new u.OlP("NgValidators"),Ve=new u.OlP("NgAsyncValidators");function Jt(G){return null!=G}function pt(G){const F=(0,u.QGY)(G)?(0,we.D)(G):G;return(0,u.CqO)(F),F}function st(G){let F={};return G.forEach(N=>{F=null!=N?Object.assign(Object.assign({},F),N):F}),0===Object.keys(F).length?null:F}function Qe(G,F){return F.map(N=>N(G))}function at(G){return G.map(F=>function nt(G){return!G.validate}(F)?F:N=>F.validate(N))}function Xe(G){return null!=G?function Oe(G){if(!G)return null;const F=G.filter(Jt);return 0==F.length?null:function(N){return st(Qe(N,F))}}(at(G)):null}function ft(G){return null!=G?function Dt(G){if(!G)return null;const F=G.filter(Jt);return 0==F.length?null:function(N){return function be(...G){if(1===G.length){const F=G[0];if((0,ke.k)(F))return me(F,null);if((0,ae.K)(F)&&Object.getPrototypeOf(F)===Object.prototype){const N=Object.keys(F);return me(N.map(oe=>F[oe]),N)}}if("function"==typeof G[G.length-1]){const F=G.pop();return me(G=1===G.length&&(0,ke.k)(G[0])?G[0]:G,null).pipe((0,Te.U)(N=>F(...N)))}return me(G,null)}(Qe(N,F).map(pt)).pipe((0,Te.U)(st))}}(at(G)):null}function Kt(G,F){return null===G?[F]:Array.isArray(G)?[...G,F]:[G,F]}function un(G){return G?Array.isArray(G)?G:[G]:[]}function rn(G,F){return Array.isArray(G)?G.includes(F):G===F}function fr(G,F){const N=un(F);return un(G).forEach(v=>{rn(N,v)||N.push(v)}),N}function Dr(G,F){return un(F).filter(N=>!rn(G,N))}class Zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,N){return!!this.control&&this.control.hasError(F,N)}getError(F,N){return this.control?this.control.getError(F,N):null}}class Yn extends Zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ht extends Zn{get formDirective(){return null}get path(){return null}}let cr=(()=>{class G extends class rr{constructor(F){this._cd=F}is(F){var N,oe,v;return"submitted"===F?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(v=null===(oe=this._cd)||void 0===oe?void 0:oe.control)||void 0===v?void 0:v[F])}}{constructor(N){super(N)}}return G.\u0275fac=function(N){return new(N||G)(u.Y36(Yn,2))},G.\u0275dir=u.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,oe){2&N&&u.ekj("ng-untouched",oe.is("untouched"))("ng-touched",oe.is("touched"))("ng-pristine",oe.is("pristine"))("ng-dirty",oe.is("dirty"))("ng-valid",oe.is("valid"))("ng-invalid",oe.is("invalid"))("ng-pending",oe.is("pending"))},features:[u.qOj]}),G})();function kt(G,F){(function Rn(G,F){const N=function gn(G){return G._rawValidators}(G);null!==F.validator?G.setValidators(Kt(N,F.validator)):"function"==typeof N&&G.setValidators([N]);const oe=function xn(G){return G._rawAsyncValidators}(G);null!==F.asyncValidator?G.setAsyncValidators(Kt(oe,F.asyncValidator)):"function"==typeof oe&&G.setAsyncValidators([oe]);const v=()=>G.updateValueAndValidity();yn(F._rawValidators,v),yn(F._rawAsyncValidators,v)})(G,F),F.valueAccessor.writeValue(G.value),function Ie(G,F){F.valueAccessor.registerOnChange(N=>{G._pendingValue=N,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&vt(G,F)})}(G,F),function lt(G,F){const N=(oe,v)=>{F.valueAccessor.writeValue(oe),v&&F.viewToModelUpdate(oe)};G.registerOnChange(N),F._registerOnDestroy(()=>{G._unregisterOnChange(N)})}(G,F),function je(G,F){F.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&vt(G,F),"submit"!==G.updateOn&&G.markAsTouched()})}(G,F),function _n(G,F){if(F.valueAccessor.setDisabledState){const N=oe=>{F.valueAccessor.setDisabledState(oe)};G.registerOnDisabledChange(N),F._registerOnDestroy(()=>{G._unregisterOnDisabledChange(N)})}}(G,F)}function yn(G,F){G.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(F)})}function vt(G,F){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Li(G,F){const N=G.indexOf(F);N>-1&&G.splice(N,1)}const Or="VALID",_i="INVALID",$r="PENDING",At="DISABLED";function sr(G){return(fi(G)?G.validators:G)||null}function hr(G){return Array.isArray(G)?Xe(G):G||null}function ti(G,F){return(fi(F)?F.asyncValidators:G)||null}function Yr(G){return Array.isArray(G)?ft(G):G||null}function fi(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}const Ur=G=>G instanceof Xr;function Ln(G){return(G=>G instanceof ni)(G)?G.value:G.getRawValue()}function qi(G,F){const N=Ur(G),oe=G.controls;if(!(N?Object.keys(oe):oe).length)throw new u.vHH(1e3,"");if(!oe[F])throw new u.vHH(1001,"")}function Yi(G,F){Ur(G),G._forEachChild((oe,v)=>{if(void 0===F[v])throw new u.vHH(1002,"")})}class xi{constructor(F,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=F,this._rawAsyncValidators=N,this._composedValidatorFn=hr(this._rawValidators),this._composedAsyncValidatorFn=Yr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===Or}get invalid(){return this.status===_i}get pending(){return this.status==$r}get disabled(){return this.status===At}get enabled(){return this.status!==At}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._rawValidators=F,this._composedValidatorFn=hr(F)}setAsyncValidators(F){this._rawAsyncValidators=F,this._composedAsyncValidatorFn=Yr(F)}addValidators(F){this.setValidators(fr(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(fr(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(Dr(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(Dr(F,this._rawAsyncValidators))}hasValidator(F){return rn(this._rawValidators,F)}hasAsyncValidator(F){return rn(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=$r,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const N=this._parentMarkedDirty(F.onlySelf);this.status=At,this.errors=null,this._forEachChild(oe=>{oe.disable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:N})),this._onDisabledChange.forEach(oe=>oe(!0))}enable(F={}){const N=this._parentMarkedDirty(F.onlySelf);this.status=Or,this._forEachChild(oe=>{oe.enable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:N})),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Or||this.status===$r)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?At:Or}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=$r,this._hasOwnPendingAsyncValidator=!0;const N=pt(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,N={}){this.errors=F,this._updateControlsErrors(!1!==N.emitEvent)}get(F){return function vn(G,F,N){if(null==F||(Array.isArray(F)||(F=F.split(N)),Array.isArray(F)&&0===F.length))return null;let oe=G;return F.forEach(v=>{oe=Ur(oe)?oe.controls.hasOwnProperty(v)?oe.controls[v]:null:(G=>G instanceof Mi)(oe)&&oe.at(v)||null}),oe}(this,F,".")}getError(F,N){const oe=N?this.get(N):this;return oe&&oe.errors?oe.errors[F]:null}hasError(F,N){return!!this.getError(F,N)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?At:this.errors?_i:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($r)?$r:this._anyControlsHaveStatus(_i)?_i:Or}_anyControlsHaveStatus(F){return this._anyControls(N=>N.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_isBoxedValue(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){fi(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ni extends xi{constructor(F=null,N,oe){super(sr(N),ti(oe,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fi(N)&&N.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(F)?F.value:F)}setValue(F,N={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(F,N={}){this.setValue(F,N)}reset(F=this.defaultValue,N={}){this._applyFormState(F),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Li(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Li(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){this._isBoxedValue(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}}class Xr extends xi{constructor(F,N,oe){super(sr(N),ti(oe,N)),this.controls=F,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,N){return this.controls[F]?this.controls[F]:(this.controls[F]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(F,N,oe={}){this.registerControl(F,N),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(F,N={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(F,N,oe={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],N&&this.registerControl(F,N),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,N={}){Yi(this,F),Object.keys(F).forEach(oe=>{qi(this,oe),this.controls[oe].setValue(F[oe],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(F,N={}){null!=F&&(Object.keys(F).forEach(oe=>{this.controls[oe]&&this.controls[oe].patchValue(F[oe],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(F={},N={}){this._forEachChild((oe,v)=>{oe.reset(F[v],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(F,N,oe)=>(F[oe]=Ln(N),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(N,oe)=>!!oe._syncPendingControls()||N);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){Object.keys(this.controls).forEach(N=>{const oe=this.controls[N];oe&&F(oe,N)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const N of Object.keys(this.controls)){const oe=this.controls[N];if(this.contains(N)&&F(oe))return!0}return!1}_reduceValue(){return this._reduceChildren({},(F,N,oe)=>((N.enabled||this.disabled)&&(F[oe]=N.value),F))}_reduceChildren(F,N){let oe=F;return this._forEachChild((v,V)=>{oe=N(oe,v,V)}),oe}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Mi extends xi{constructor(F,N,oe){super(sr(N),ti(oe,N)),this.controls=F,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[F]}push(F,N={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(F,N,oe={}){this.controls.splice(F,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(F,N={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(F,N,oe={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),N&&(this.controls.splice(F,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,N={}){Yi(this,F),F.forEach((oe,v)=>{qi(this,v),this.at(v).setValue(oe,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(F,N={}){null!=F&&(F.forEach((oe,v)=>{this.at(v)&&this.at(v).patchValue(oe,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(F=[],N={}){this._forEachChild((oe,v)=>{oe.reset(F[v],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(F=>Ln(F))}clear(F={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_syncPendingControls(){let F=this.controls.reduce((N,oe)=>!!oe._syncPendingControls()||N,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){this.controls.forEach((N,oe)=>{F(N,oe)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(N=>N.enabled&&F(N))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}}const Mt={provide:Yn,useExisting:(0,u.Gpc)(()=>En)},hn=(()=>Promise.resolve(null))();let En=(()=>{class G extends Yn{constructor(N,oe,v,V,E){super(),this._changeDetectorRef=E,this.control=new ni,this._registered=!1,this.update=new u.vpe,this._parent=N,this._setValidators(oe),this._setAsyncValidators(v),this.valueAccessor=function Fn(G,F){if(!F)return null;let N,oe,v;return Array.isArray(F),F.forEach(V=>{V.constructor===Fe?N=V:function vr(G){return Object.getPrototypeOf(G.constructor)===ge}(V)?oe=V:v=V}),v||oe||N||null}(0,V)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const oe=N.name.previousValue;this.formDirective.removeControl({name:oe,path:this._getPath(oe)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),function jn(G,F){if(!G.hasOwnProperty("model"))return!1;const N=G.model;return!!N.isFirstChange()||!Object.is(F,N.currentValue)}(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){hn.then(()=>{var oe;this.control.setValue(N,{emitViewToModelChange:!1}),null===(oe=this._changeDetectorRef)||void 0===oe||oe.markForCheck()})}_updateDisabled(N){const oe=N.isDisabled.currentValue,v=""===oe||oe&&"false"!==oe;hn.then(()=>{var V;v&&!this.control.disabled?this.control.disable():!v&&this.control.disabled&&this.control.enable(),null===(V=this._changeDetectorRef)||void 0===V||V.markForCheck()})}_getPath(N){return this._parent?function sn(G,F){return[...F.path,G]}(N,this._parent):[N]}}return G.\u0275fac=function(N){return new(N||G)(u.Y36(Ht,9),u.Y36(ot,10),u.Y36(Ve,10),u.Y36(te,10),u.Y36(u.sBO,8))},G.\u0275dir=u.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Mt]),u.qOj,u.TTD]}),G})(),We=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({}),G})(),oi=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[[We]]}),G})(),ai=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[oi]}),G})()},8186:(en,ut,H)=>{"use strict";H.d(ut,{gz:()=>Mt,y6:()=>Er,OD:()=>Ht,eC:()=>Pn,wm:()=>wr,wN:()=>Ni,F0:()=>Ci,rH:()=>aa,Bz:()=>As,Hx:()=>_i});var u=H(5e3),se=H(2866),Z=H(6688),ke=H(826),Te=H(448),ae=H(3009);const we={};class me{constructor(T){this.resultSelector=T}call(T,D){return D.subscribe(new ce(T,this.resultSelector))}}class ce extends ke.L{constructor(T,D){super(T),this.resultSelector=D,this.active=0,this.values=[],this.observables=[]}_next(T){this.values.push(we),this.observables.push(T)}_complete(){const T=this.observables,D=T.length;if(0===D)this.destination.complete();else{this.active=D,this.toRespond=D;for(let B=0;B<D;B++)this.add((0,Te.D)(this,T[B],void 0,B))}}notifyComplete(T){0==(this.active-=1)&&this.destination.complete()}notifyNext(T,D,B){const W=this.values,xe=this.toRespond?W[B]===we?--this.toRespond:this.toRespond:0;W[B]=D,0===xe&&(this.resultSelector?this._tryResultSelector(W):this.destination.next(W.slice()))}_tryResultSelector(T){let D;try{D=this.resultSelector.apply(this,T)}catch(B){return void this.destination.error(B)}this.destination.next(D)}}var ge=H(2916),te=H(5254),de=H(8896);function Ue(A){return new ge.y(T=>{let D;try{D=A()}catch(W){return void T.error(W)}return(D?(0,te.D)(D):(0,de.c)()).subscribe(T)})}var Pe=H(1086),ye=H(591),Ne=H(1737),Fe=H(4450),ht=H(1221),_e=H(1762),ot=H(8929),Ve=H(1177);function rt(A){return function(D){const B=new _t(A),W=D.lift(B);return B.caught=W}}class _t{constructor(T){this.selector=T}call(T,D){return D.subscribe(new St(T,this.selector,this.caught))}}class St extends Ve.Ds{constructor(T,D,B){super(T),this.selector=D,this.caught=B}error(T){if(!this.isStopped){let D;try{D=this.selector(T,this.caught)}catch(ne){return void super.error(ne)}this._unsubscribeAndRecycle();const B=new Ve.IY(this);this.add(B);const W=(0,Ve.ft)(D,B);W!==B&&this.add(W)}}}var qe=H(1709);function pe(A,T){return(0,qe.zg)(A,T,1)}var Be=H(2198),ve=H(3489),De=H(4231);function Je(A){return function(D){return 0===A?(0,de.c)():D.lift(new Ze(A))}}class Ze{constructor(T){if(this.total=T,this.total<0)throw new De.W}call(T,D){return D.subscribe(new jt(T,this.total))}}class jt extends ve.L{constructor(T,D){super(T),this.total=D,this.ring=new Array,this.count=0}_next(T){const D=this.ring,B=this.total,W=this.count++;D.length<B?D.push(T):D[W%B]=T}_complete(){const T=this.destination;let D=this.count;if(D>0){const B=this.count>=this.total?this.total:this.count,W=this.ring;for(let ne=0;ne<B;ne++){const xe=D++%B;T.next(W[xe])}}T.complete()}}var Jt=H(4907),pt=H(7314),st=H(5379),nt=H(2654);class Oe{constructor(T){this.callback=T}call(T,D){return D.subscribe(new Xe(T,this.callback))}}class Xe extends ve.L{constructor(T,D){super(T),this.add(new nt.w(D))}}var Dt=H(4850),ft=H(7545),Kt=H(2986),gn=H(1059),xn=H(2014),un=H(7224),rn=H(2868),fr=H(4327),Dr=H(9146),Zn=H(9808);class Yn{constructor(T,D){this.id=T,this.url=D}}class Ht extends Yn{constructor(T,D,B="imperative",W=null){super(T,D),this.navigationTrigger=B,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rr extends Yn{constructor(T,D,B){super(T,D),this.urlAfterRedirects=B}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qr extends Yn{constructor(T,D,B){super(T,D),this.reason=B}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jn extends Yn{constructor(T,D,B){super(T,D),this.error=B}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cr extends Yn{constructor(T,D,B,W){super(T,D),this.urlAfterRedirects=B,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hr extends Yn{constructor(T,D,B,W){super(T,D),this.urlAfterRedirects=B,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends Yn{constructor(T,D,B,W,ne){super(T,D),this.urlAfterRedirects=B,this.state=W,this.shouldActivate=ne}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zr extends Yn{constructor(T,D,B,W){super(T,D),this.urlAfterRedirects=B,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends Yn{constructor(T,D,B,W){super(T,D),this.urlAfterRedirects=B,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ei{constructor(T){this.route=T}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kn{constructor(T){this.route=T}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dn{constructor(T){this.snapshot=T}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(T){this.snapshot=T}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(T){this.snapshot=T}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ai{constructor(T){this.snapshot=T}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vn{constructor(T,D,B){this.routerEvent=T,this.position=D,this.anchor=B}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pn="primary";class si{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const D=this.params[T];return Array.isArray(D)?D[0]:D}return null}getAll(T){if(this.has(T)){const D=this.params[T];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Lr(A){return new si(A)}const In="ngNavigationCancelingError";function ci(A){const T=Error("NavigationCancelingError: "+A);return T[In]=!0,T}function sn(A,T,D){const B=D.path.split("/");if(B.length>A.length||"full"===D.pathMatch&&(T.hasChildren()||B.length<A.length))return null;const W={};for(let ne=0;ne<B.length;ne++){const xe=B[ne],Ae=A[ne];if(xe.startsWith(":"))W[xe.substring(1)]=Ae;else if(xe!==Ae.path)return null}return{consumed:A.slice(0,B.length),posParams:W}}function tn(A,T){const D=A?Object.keys(A):void 0,B=T?Object.keys(T):void 0;if(!D||!B||D.length!=B.length)return!1;let W;for(let ne=0;ne<D.length;ne++)if(W=D[ne],!yn(A[W],T[W]))return!1;return!0}function yn(A,T){if(Array.isArray(A)&&Array.isArray(T)){if(A.length!==T.length)return!1;const D=[...A].sort(),B=[...T].sort();return D.every((W,ne)=>B[ne]===W)}return A===T}function _n(A){return Array.prototype.concat.apply([],A)}function Rn(A){return A.length>0?A[A.length-1]:null}function Ie(A,T){for(const D in A)A.hasOwnProperty(D)&&T(A[D],D)}function je(A){return(0,u.CqO)(A)?A:(0,u.QGY)(A)?(0,te.D)(Promise.resolve(A)):(0,Pe.of)(A)}const lt={exact:function Qr(A,T,D){if(!Sr(A.segments,T.segments)||!vr(A.segments,T.segments,D)||A.numberOfChildren!==T.numberOfChildren)return!1;for(const B in T.children)if(!A.children[B]||!Qr(A.children[B],T.children[B],D))return!1;return!0},subset:_r},qt={exact:function Qn(A,T){return tn(A,T)},subset:function Bn(A,T){return Object.keys(T).length<=Object.keys(A).length&&Object.keys(T).every(D=>yn(A[D],T[D]))},ignored:()=>!0};function Cn(A,T,D){return lt[D.paths](A.root,T.root,D.matrixParams)&&qt[D.queryParams](A.queryParams,T.queryParams)&&!("exact"===D.fragment&&A.fragment!==T.fragment)}function _r(A,T,D){return jn(A,T,T.segments,D)}function jn(A,T,D,B){if(A.segments.length>D.length){const W=A.segments.slice(0,D.length);return!(!Sr(W,D)||T.hasChildren()||!vr(W,D,B))}if(A.segments.length===D.length){if(!Sr(A.segments,D)||!vr(A.segments,D,B))return!1;for(const W in T.children)if(!A.children[W]||!_r(A.children[W],T.children[W],B))return!1;return!0}{const W=D.slice(0,A.segments.length),ne=D.slice(A.segments.length);return!!(Sr(A.segments,W)&&vr(A.segments,W,B)&&A.children[Pn])&&jn(A.children[Pn],T,ne,B)}}function vr(A,T,D){return T.every((B,W)=>qt[D](A[W].parameters,B.parameters))}class Rr{constructor(T,D,B){this.root=T,this.queryParams=D,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lr(this.queryParams)),this._queryParamMap}toString(){return At.serialize(this)}}class Fn{constructor(T,D){this.segments=T,this.children=D,this.parent=null,Ie(D,(B,W)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vn(this)}}class Li{constructor(T,D){this.path=T,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Lr(this.parameters)),this._parameterMap}toString(){return Vi(this)}}function Sr(A,T){return A.length===T.length&&A.every((D,B)=>D.path===T[B].path)}class _i{}class $r{parse(T){const D=new Q(T);return new Rr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(T){const D=`/${sr(T.root,!0)}`,B=function qi(A){const T=Object.keys(A).map(D=>{const B=A[D];return Array.isArray(B)?B.map(W=>`${ti(D)}=${ti(W)}`).join("&"):`${ti(D)}=${ti(B)}`}).filter(D=>!!D);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${D}${B}${"string"==typeof T.fragment?`#${function Yr(A){return encodeURI(A)}(T.fragment)}`:""}`}}const At=new $r;function vn(A){return A.segments.map(T=>Vi(T)).join("/")}function sr(A,T){if(!A.hasChildren())return vn(A);if(T){const D=A.children[Pn]?sr(A.children[Pn],!1):"",B=[];return Ie(A.children,(W,ne)=>{ne!==Pn&&B.push(`${ne}:${sr(W,!1)}`)}),B.length>0?`${D}(${B.join("//")})`:D}{const D=function Or(A,T){let D=[];return Ie(A.children,(B,W)=>{W===Pn&&(D=D.concat(T(B,W)))}),Ie(A.children,(B,W)=>{W!==Pn&&(D=D.concat(T(B,W)))}),D}(A,(B,W)=>W===Pn?[sr(A.children[Pn],!1)]:[`${W}:${sr(B,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Pn]?`${vn(A)}/${D[0]}`:`${vn(A)}/(${D.join("//")})`}}function hr(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ti(A){return hr(A).replace(/%3B/gi,";")}function fi(A){return hr(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dr(A){return decodeURIComponent(A)}function Ur(A){return dr(A.replace(/\+/g,"%20"))}function Vi(A){return`${fi(A.path)}${function Ln(A){return Object.keys(A).map(T=>`;${fi(T)}=${fi(A[T])}`).join("")}(A.parameters)}`}const Yi=/^[^\/()?;=#]+/;function xi(A){const T=A.match(Yi);return T?T[0]:""}const ni=/^[^=?&#]+/,Mi=/^[^&#]+/;class Q{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(T.length>0||Object.keys(D).length>0)&&(B[Pn]=new Fn(T,D)),B}parseSegment(){const T=xi(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(T),new Li(dr(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const D=xi(this.remaining);if(!D)return;this.capture(D);let B="";if(this.consumeOptional("=")){const W=xi(this.remaining);W&&(B=W,this.capture(B))}T[dr(D)]=dr(B)}parseQueryParam(T){const D=function Xr(A){const T=A.match(ni);return T?T[0]:""}(this.remaining);if(!D)return;this.capture(D);let B="";if(this.consumeOptional("=")){const xe=function di(A){const T=A.match(Mi);return T?T[0]:""}(this.remaining);xe&&(B=xe,this.capture(B))}const W=Ur(D),ne=Ur(B);if(T.hasOwnProperty(W)){let xe=T[W];Array.isArray(xe)||(xe=[xe],T[W]=xe),xe.push(ne)}else T[W]=ne}parseParens(T){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=xi(this.remaining),W=this.remaining[B.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let ne;B.indexOf(":")>-1?(ne=B.substr(0,B.indexOf(":")),this.capture(ne),this.capture(":")):T&&(ne=Pn);const xe=this.parseChildren();D[ne]=1===Object.keys(xe).length?xe[Pn]:new Fn([],xe),this.consumeOptional("//")}return D}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new Error(`Expected "${T}".`)}}class fe{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const D=this.pathFromRoot(T);return D.length>1?D[D.length-2]:null}children(T){const D=O(T,this._root);return D?D.children.map(B=>B.value):[]}firstChild(T){const D=O(T,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(T){const D=Se(T,this._root);return D.length<2?[]:D[D.length-2].children.map(W=>W.value).filter(W=>W!==T)}pathFromRoot(T){return Se(T,this._root).map(D=>D.value)}}function O(A,T){if(A===T.value)return T;for(const D of T.children){const B=O(A,D);if(B)return B}return null}function Se(A,T){if(A===T.value)return[T];for(const D of T.children){const B=Se(A,D);if(B.length)return B.unshift(T),B}return[]}class Ge{constructor(T,D){this.value=T,this.children=D}toString(){return`TreeNode(${this.value})`}}function et(A){const T={};return A&&A.children.forEach(D=>T[D.value.outlet]=D),T}class Et extends fe{constructor(T,D){super(T),this.snapshot=D,gi(this,T)}toString(){return this.snapshot.toString()}}function xt(A,T){const D=function Nt(A,T){const xe=new Mn([],{},{},"",{},Pn,T,null,A.root,-1,{});return new $n("",new Ge(xe,[]))}(A,T),B=new ye.X([new Li("",{})]),W=new ye.X({}),ne=new ye.X({}),xe=new ye.X({}),Ae=new ye.X(""),Pt=new Mt(B,W,xe,Ae,ne,Pn,T,D.root);return Pt.snapshot=D.root,new Et(new Ge(Pt,[]),D)}class Mt{constructor(T,D,B,W,ne,xe,Ae,Pt){this.url=T,this.params=D,this.queryParams=B,this.fragment=W,this.data=ne,this.outlet=xe,this.component=Ae,this._futureSnapshot=Pt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(T=>Lr(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(T=>Lr(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hn(A,T="emptyOnly"){const D=A.pathFromRoot;let B=0;if("always"!==T)for(B=D.length-1;B>=1;){const W=D[B],ne=D[B-1];if(W.routeConfig&&""===W.routeConfig.path)B--;else{if(ne.component)break;B--}}return function En(A){return A.reduce((T,D)=>({params:Object.assign(Object.assign({},T.params),D.params),data:Object.assign(Object.assign({},T.data),D.data),resolve:Object.assign(Object.assign({},T.resolve),D._resolvedData)}),{params:{},data:{},resolve:{}})}(D.slice(B))}class Mn{constructor(T,D,B,W,ne,xe,Ae,Pt,fn,kr,Yt){this.url=T,this.params=D,this.queryParams=B,this.fragment=W,this.data=ne,this.outlet=xe,this.component=Ae,this.routeConfig=Pt,this._urlSegment=fn,this._lastPathIndex=kr,this._resolve=Yt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $n extends fe{constructor(T,D){super(D),this.url=T,gi(this,D)}toString(){return Ki(this._root)}}function gi(A,T){T.value._routerState=A,T.children.forEach(D=>gi(A,D))}function Ki(A){const T=A.children.length>0?` { ${A.children.map(Ki).join(", ")} } `:"";return`${A.value}${T}`}function He(A){if(A.snapshot){const T=A.snapshot,D=A._futureSnapshot;A.snapshot=D,tn(T.queryParams,D.queryParams)||A.queryParams.next(D.queryParams),T.fragment!==D.fragment&&A.fragment.next(D.fragment),tn(T.params,D.params)||A.params.next(D.params),function kt(A,T){if(A.length!==T.length)return!1;for(let D=0;D<A.length;++D)if(!tn(A[D],T[D]))return!1;return!0}(T.url,D.url)||A.url.next(D.url),tn(T.data,D.data)||A.data.next(D.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function We(A,T){const D=tn(A.params,T.params)&&function as(A,T){return Sr(A,T)&&A.every((D,B)=>tn(D.parameters,T[B].parameters))}(A.url,T.url);return D&&!(!A.parent!=!T.parent)&&(!A.parent||We(A.parent,T.parent))}function Ot(A,T,D){if(D&&A.shouldReuseRoute(T.value,D.value.snapshot)){const B=D.value;B._futureSnapshot=T.value;const W=function Lt(A,T,D){return T.children.map(B=>{for(const W of D.children)if(A.shouldReuseRoute(B.value,W.value.snapshot))return Ot(A,B,W);return Ot(A,B)})}(A,T,D);return new Ge(B,W)}{if(A.shouldAttach(T.value)){const ne=A.retrieve(T.value);if(null!==ne){const xe=ne.route;return xe.value._futureSnapshot=T.value,xe.children=T.children.map(Ae=>Ot(A,Ae)),xe}}const B=function mn(A){return new Mt(new ye.X(A.url),new ye.X(A.params),new ye.X(A.queryParams),new ye.X(A.fragment),new ye.X(A.data),A.outlet,A.component,A)}(T.value),W=T.children.map(ne=>Ot(A,ne));return new Ge(B,W)}}function xr(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Hn(A){return"object"==typeof A&&null!=A&&A.outlets}function ps(A,T,D,B,W){let ne={};if(B&&Ie(B,(Ae,Pt)=>{ne[Pt]=Array.isArray(Ae)?Ae.map(fn=>`${fn}`):`${Ae}`}),A===T)return new Rr(D,ne,W);const xe=Ri(A,T,D);return new Rr(xe,ne,W)}function Ri(A,T,D){const B={};return Ie(A.children,(W,ne)=>{B[ne]=W===T?D:Ri(W,T,D)}),new Fn(A.segments,B)}class Bs{constructor(T,D,B){if(this.isAbsolute=T,this.numberOfDoubleDots=D,this.commands=B,T&&B.length>0&&xr(B[0]))throw new Error("Root segment cannot have matrix parameters");const W=B.find(Hn);if(W&&W!==Rn(B))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wi{constructor(T,D,B){this.segmentGroup=T,this.processChildren=D,this.index=B}}function Bi(A,T,D){if(A||(A=new Fn([],{})),0===A.segments.length&&A.hasChildren())return ms(A,T,D);const B=function Kr(A,T,D){let B=0,W=T;const ne={match:!1,pathIndex:0,commandIndex:0};for(;W<A.segments.length;){if(B>=D.length)return ne;const xe=A.segments[W],Ae=D[B];if(Hn(Ae))break;const Pt=`${Ae}`,fn=B<D.length-1?D[B+1]:null;if(W>0&&void 0===Pt)break;if(Pt&&fn&&"object"==typeof fn&&void 0===fn.outlets){if(!zs(Pt,fn,xe))return ne;B+=2}else{if(!zs(Pt,{},xe))return ne;B++}W++}return{match:!0,pathIndex:W,commandIndex:B}}(A,T,D),W=D.slice(B.commandIndex);if(B.match&&B.pathIndex<A.segments.length){const ne=new Fn(A.segments.slice(0,B.pathIndex),{});return ne.children[Pn]=new Fn(A.segments.slice(B.pathIndex),A.children),ms(ne,0,W)}return B.match&&0===W.length?new Fn(A.segments,{}):B.match&&!A.hasChildren()?$s(A,T,D):B.match?ms(A,0,W):$s(A,T,D)}function ms(A,T,D){if(0===D.length)return new Fn(A.segments,{});{const B=function gs(A){return Hn(A[0])?A[0].outlets:{[Pn]:A}}(D),W={};return Ie(B,(ne,xe)=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(W[xe]=Bi(A.children[xe],T,ne))}),Ie(A.children,(ne,xe)=>{void 0===B[xe]&&(W[xe]=ne)}),new Fn(A.segments,W)}}function $s(A,T,D){const B=A.segments.slice(0,T);let W=0;for(;W<D.length;){const ne=D[W];if(Hn(ne)){const Pt=yo(ne.outlets);return new Fn(B,Pt)}if(0===W&&xr(D[0])){B.push(new Li(A.segments[T].path,Ko(D[0]))),W++;continue}const xe=Hn(ne)?ne.outlets[Pn]:`${ne}`,Ae=W<D.length-1?D[W+1]:null;xe&&Ae&&xr(Ae)?(B.push(new Li(xe,Ko(Ae))),W+=2):(B.push(new Li(xe,{})),W++)}return new Fn(B,{})}function yo(A){const T={};return Ie(A,(D,B)=>{"string"==typeof D&&(D=[D]),null!==D&&(T[B]=$s(new Fn([],{}),0,D))}),T}function Ko(A){const T={};return Ie(A,(D,B)=>T[B]=`${D}`),T}function zs(A,T,D){return A==D.path&&tn(T,D.parameters)}class Hi{constructor(T,D,B,W){this.routeReuseStrategy=T,this.futureState=D,this.currState=B,this.forwardEvent=W}activate(T){const D=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,B,T),He(this.futureState.root),this.activateChildRoutes(D,B,T)}deactivateChildRoutes(T,D,B){const W=et(D);T.children.forEach(ne=>{const xe=ne.value.outlet;this.deactivateRoutes(ne,W[xe],B),delete W[xe]}),Ie(W,(ne,xe)=>{this.deactivateRouteAndItsChildren(ne,B)})}deactivateRoutes(T,D,B){const W=T.value,ne=D?D.value:null;if(W===ne)if(W.component){const xe=B.getContext(W.outlet);xe&&this.deactivateChildRoutes(T,D,xe.children)}else this.deactivateChildRoutes(T,D,B);else ne&&this.deactivateRouteAndItsChildren(D,B)}deactivateRouteAndItsChildren(T,D){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,D):this.deactivateRouteAndOutlet(T,D)}detachAndStoreRouteSubtree(T,D){const B=D.getContext(T.value.outlet),W=B&&T.value.component?B.children:D,ne=et(T);for(const xe of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[xe],W);if(B&&B.outlet){const xe=B.outlet.detach(),Ae=B.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:xe,route:T,contexts:Ae})}}deactivateRouteAndOutlet(T,D){const B=D.getContext(T.value.outlet),W=B&&T.value.component?B.children:D,ne=et(T);for(const xe of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[xe],W);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(T,D,B){const W=et(D);T.children.forEach(ne=>{this.activateRoutes(ne,W[ne.value.outlet],B),this.forwardEvent(new Ai(ne.value.snapshot))}),T.children.length&&this.forwardEvent(new Sn(T.value.snapshot))}activateRoutes(T,D,B){const W=T.value,ne=D?D.value:null;if(He(W),W===ne)if(W.component){const xe=B.getOrCreateContext(W.outlet);this.activateChildRoutes(T,D,xe.children)}else this.activateChildRoutes(T,D,B);else if(W.component){const xe=B.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Ae=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),xe.children.onOutletReAttached(Ae.contexts),xe.attachRef=Ae.componentRef,xe.route=Ae.route.value,xe.outlet&&xe.outlet.attach(Ae.componentRef,Ae.route.value),He(Ae.route.value),this.activateChildRoutes(T,null,xe.children)}else{const Ae=function _o(A){for(let T=A.parent;T;T=T.parent){const D=T.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig;if(D&&D.component)return null}return null}(W.snapshot),Pt=Ae?Ae.module.componentFactoryResolver:null;xe.attachRef=null,xe.route=W,xe.resolver=Pt,xe.outlet&&xe.outlet.activateWith(W,Pt),this.activateChildRoutes(T,null,xe.children)}}else this.activateChildRoutes(T,null,B)}}class Oi{constructor(T,D){this.routes=T,this.module=D}}function Pr(A){return"function"==typeof A}function us(A){return A instanceof Rr}const Ii=Symbol("INITIAL_VALUE");function Ts(){return(0,ft.w)(A=>function be(...A){let T,D;return(0,se.K)(A[A.length-1])&&(D=A.pop()),"function"==typeof A[A.length-1]&&(T=A.pop()),1===A.length&&(0,Z.k)(A[0])&&(A=A[0]),(0,ae.n)(A,D).lift(new me(T))}(A.map(T=>T.pipe((0,Kt.q)(1),(0,gn.O)(Ii)))).pipe((0,xn.R)((T,D)=>{let B=!1;return D.reduce((W,ne,xe)=>W!==Ii?W:(ne===Ii&&(B=!0),B||!1!==ne&&xe!==D.length-1&&!us(ne)?W:ne),T)},Ii),(0,Be.h)(T=>T!==Ii),(0,Dt.U)(T=>us(T)?T:!0===T),(0,Kt.q)(1)))}class Fo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Er,this.attachRef=null}}class Er{constructor(){this.contexts=new Map}onChildOutletCreated(T,D){const B=this.getOrCreateContext(T);B.outlet=D,this.contexts.set(T,B)}onChildOutletDestroyed(T){const D=this.getContext(T);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let D=this.getContext(T);return D||(D=new Fo,this.contexts.set(T,D)),D}getContext(T){return this.contexts.get(T)||null}}let $=(()=>{class A{constructor(D,B,W,ne,xe){this.parentContexts=D,this.location=B,this.resolver=W,this.changeDetector=xe,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=ne||Pn,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,B){this.activated=D,this._activatedRoute=B,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,B){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;const xe=(B=B||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),Ae=this.parentContexts.getOrCreateContext(this.name).children,Pt=new ee(D,Ae,this.location.injector);this.activated=this.location.createComponent(xe,this.location.length,Pt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(D){return new(D||A)(u.Y36(Er),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},A.\u0275dir=u.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class ee{constructor(T,D,B){this.route=T,this.childContexts=D,this.parent=B}get(T,D){return T===Mt?this.route:T===Er?this.childContexts:this.parent.get(T,D)}}let U=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275cmp=u.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,B){1&D&&u._UZ(0,"router-outlet")},directives:[$],encapsulation:2}),A})();function le(A,T=""){for(let D=0;D<A.length;D++){const B=A[D];ze(B,mt(T,B))}}function ze(A,T){A.children&&le(A.children,T)}function mt(A,T){return T?A||T.path?A&&!T.path?`${A}/`:!A&&T.path?T.path:`${A}/${T.path}`:"":A}function Ft(A){const T=A.children&&A.children.map(Ft),D=T?Object.assign(Object.assign({},A),{children:T}):Object.assign({},A);return!D.component&&(T||D.loadChildren)&&D.outlet&&D.outlet!==Pn&&(D.component=U),D}function Qt(A){return A.outlet||Pn}function zr(A,T){const D=A.filter(B=>Qt(B)===T);return D.push(...A.filter(B=>Qt(B)!==T)),D}const br={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xn(A,T,D){var B;if(""===T.path)return"full"===T.pathMatch&&(A.hasChildren()||D.length>0)?Object.assign({},br):{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const ne=(T.matcher||sn)(D,A,T);if(!ne)return Object.assign({},br);const xe={};Ie(ne.posParams,(Pt,fn)=>{xe[fn]=Pt.path});const Ae=ne.consumed.length>0?Object.assign(Object.assign({},xe),ne.consumed[ne.consumed.length-1].parameters):xe;return{matched:!0,consumedSegments:ne.consumed,remainingSegments:D.slice(ne.consumed.length),parameters:Ae,positionalParamSegments:null!==(B=ne.posParams)&&void 0!==B?B:{}}}function pr(A,T,D,B,W="corrected"){if(D.length>0&&function ai(A,T,D){return D.some(B=>ds(A,T,B)&&Qt(B)!==Pn)}(A,D,B)){const xe=new Fn(T,function oi(A,T,D,B){const W={};W[Pn]=B,B._sourceSegment=A,B._segmentIndexShift=T.length;for(const ne of D)if(""===ne.path&&Qt(ne)!==Pn){const xe=new Fn([],{});xe._sourceSegment=A,xe._segmentIndexShift=T.length,W[Qt(ne)]=xe}return W}(A,T,B,new Fn(D,A.children)));return xe._sourceSegment=A,xe._segmentIndexShift=T.length,{segmentGroup:xe,slicedSegments:[]}}if(0===D.length&&function uo(A,T,D){return D.some(B=>ds(A,T,B))}(A,D,B)){const xe=new Fn(A.segments,function hi(A,T,D,B,W,ne){const xe={};for(const Ae of B)if(ds(A,D,Ae)&&!W[Qt(Ae)]){const Pt=new Fn([],{});Pt._sourceSegment=A,Pt._segmentIndexShift="legacy"===ne?A.segments.length:T.length,xe[Qt(Ae)]=Pt}return Object.assign(Object.assign({},W),xe)}(A,T,D,B,A.children,W));return xe._sourceSegment=A,xe._segmentIndexShift=T.length,{segmentGroup:xe,slicedSegments:D}}const ne=new Fn(A.segments,A.children);return ne._sourceSegment=A,ne._segmentIndexShift=T.length,{segmentGroup:ne,slicedSegments:D}}function ds(A,T,D){return(!(A.hasChildren()||T.length>0)||"full"!==D.pathMatch)&&""===D.path}function On(A,T,D,B){return!!(Qt(A)===B||B!==Pn&&ds(T,D,A))&&("**"===A.path||Xn(T,A,D).matched)}function _s(A,T,D){return 0===T.length&&!A.children[D]}class G{constructor(T){this.segmentGroup=T||null}}class F{constructor(T){this.urlTree=T}}function N(A){return(0,Ne._)(new G(A))}function oe(A){return(0,Ne._)(new F(A))}class L{constructor(T,D,B,W,ne){this.configLoader=D,this.urlSerializer=B,this.urlTree=W,this.config=ne,this.allowRedirects=!0,this.ngModule=T.get(u.h0i)}apply(){const T=pr(this.urlTree.root,[],[],this.config).segmentGroup,D=new Fn(T.segments,T.children);return this.expandSegmentGroup(this.ngModule,this.config,D,Pn).pipe((0,Dt.U)(ne=>this.createUrlTree(dt(ne),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rt(ne=>{if(ne instanceof F)return this.allowRedirects=!1,this.match(ne.urlTree);throw ne instanceof G?this.noMatchError(ne):ne}))}match(T){return this.expandSegmentGroup(this.ngModule,this.config,T.root,Pn).pipe((0,Dt.U)(W=>this.createUrlTree(dt(W),T.queryParams,T.fragment))).pipe(rt(W=>{throw W instanceof G?this.noMatchError(W):W}))}noMatchError(T){return new Error(`Cannot match any routes. URL Segment: '${T.segmentGroup}'`)}createUrlTree(T,D,B){const W=T.segments.length>0?new Fn([],{[Pn]:T}):T;return new Rr(W,D,B)}expandSegmentGroup(T,D,B,W){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(T,D,B).pipe((0,Dt.U)(ne=>new Fn([],ne))):this.expandSegment(T,B,D,B.segments,W,!0)}expandChildren(T,D,B){const W=[];for(const ne of Object.keys(B.children))"primary"===ne?W.unshift(ne):W.push(ne);return(0,te.D)(W).pipe(pe(ne=>{const xe=B.children[ne],Ae=zr(D,ne);return this.expandSegmentGroup(T,Ae,xe,ne).pipe((0,Dt.U)(Pt=>({segment:Pt,outlet:ne})))}),(0,xn.R)((ne,xe)=>(ne[xe.outlet]=xe.segment,ne),{}),function Qe(A,T){const D=arguments.length>=2;return B=>B.pipe(A?(0,Be.h)((W,ne)=>A(W,ne,B)):st.y,Je(1),D?(0,pt.d)(T):(0,Jt.T)(()=>new Fe.K))}())}expandSegment(T,D,B,W,ne,xe){return(0,te.D)(B).pipe(pe(Ae=>this.expandSegmentAgainstRoute(T,D,B,Ae,W,ne,xe).pipe(rt(fn=>{if(fn instanceof G)return(0,Pe.of)(null);throw fn}))),(0,un.P)(Ae=>!!Ae),rt((Ae,Pt)=>{if(Ae instanceof Fe.K||"EmptyError"===Ae.name)return _s(D,W,ne)?(0,Pe.of)(new Fn([],{})):N(D);throw Ae}))}expandSegmentAgainstRoute(T,D,B,W,ne,xe,Ae){return On(W,D,ne,xe)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(T,D,W,ne,xe):Ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,D,B,W,ne,xe):N(D):N(D)}expandSegmentAgainstRouteUsingRedirect(T,D,B,W,ne,xe){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,B,W,xe):this.expandRegularSegmentAgainstRouteUsingRedirect(T,D,B,W,ne,xe)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,D,B,W){const ne=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?oe(ne):this.lineralizeSegments(B,ne).pipe((0,qe.zg)(xe=>{const Ae=new Fn(xe,{});return this.expandSegment(T,Ae,D,xe,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,D,B,W,ne,xe){const{matched:Ae,consumedSegments:Pt,remainingSegments:fn,positionalParamSegments:kr}=Xn(D,W,ne);if(!Ae)return N(D);const Yt=this.applyRedirectCommands(Pt,W.redirectTo,kr);return W.redirectTo.startsWith("/")?oe(Yt):this.lineralizeSegments(W,Yt).pipe((0,qe.zg)(jr=>this.expandSegment(T,D,B,jr.concat(fn),xe,!1)))}matchSegmentAgainstRoute(T,D,B,W,ne){if("**"===B.path)return B.loadChildren?(B._loadedConfig?(0,Pe.of)(B._loadedConfig):this.configLoader.load(T.injector,B)).pipe((0,Dt.U)(Yt=>(B._loadedConfig=Yt,new Fn(W,{})))):(0,Pe.of)(new Fn(W,{}));const{matched:xe,consumedSegments:Ae,remainingSegments:Pt}=Xn(D,B,W);return xe?this.getChildConfig(T,B,W).pipe((0,qe.zg)(kr=>{const Yt=kr.module,jr=kr.routes,{segmentGroup:Ir,slicedSegments:ar}=pr(D,Ae,Pt,jr),Es=new Fn(Ir.segments,Ir.children);if(0===ar.length&&Es.hasChildren())return this.expandChildren(Yt,jr,Es).pipe((0,Dt.U)(rs=>new Fn(Ae,rs)));if(0===jr.length&&0===ar.length)return(0,Pe.of)(new Fn(Ae,{}));const xo=Qt(B)===ne;return this.expandSegment(Yt,Es,jr,ar,xo?Pn:ne,!0).pipe((0,Dt.U)(qn=>new Fn(Ae.concat(qn.segments),qn.children)))})):N(D)}getChildConfig(T,D,B){return D.children?(0,Pe.of)(new Oi(D.children,T)):D.loadChildren?void 0!==D._loadedConfig?(0,Pe.of)(D._loadedConfig):this.runCanLoadGuards(T.injector,D,B).pipe((0,qe.zg)(W=>W?this.configLoader.load(T.injector,D).pipe((0,Dt.U)(ne=>(D._loadedConfig=ne,ne))):function V(A){return(0,Ne._)(ci(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))}(D))):(0,Pe.of)(new Oi([],T))}runCanLoadGuards(T,D,B){const W=D.canLoad;if(!W||0===W.length)return(0,Pe.of)(!0);const ne=W.map(xe=>{const Ae=T.get(xe);let Pt;if(function vo(A){return A&&Pr(A.canLoad)}(Ae))Pt=Ae.canLoad(D,B);else{if(!Pr(Ae))throw new Error("Invalid CanLoad guard");Pt=Ae(D,B)}return je(Pt)});return(0,Pe.of)(ne).pipe(Ts(),(0,rn.b)(xe=>{if(!us(xe))return;const Ae=ci(`Redirecting to "${this.urlSerializer.serialize(xe)}"`);throw Ae.url=xe,Ae}),(0,Dt.U)(xe=>!0===xe))}lineralizeSegments(T,D){let B=[],W=D.root;for(;;){if(B=B.concat(W.segments),0===W.numberOfChildren)return(0,Pe.of)(B);if(W.numberOfChildren>1||!W.children[Pn])return(0,Ne._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T.redirectTo}'`));W=W.children[Pn]}}applyRedirectCommands(T,D,B){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),T,B)}applyRedirectCreatreUrlTree(T,D,B,W){const ne=this.createSegmentGroup(T,D.root,B,W);return new Rr(ne,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(T,D){const B={};return Ie(T,(W,ne)=>{if("string"==typeof W&&W.startsWith(":")){const Ae=W.substring(1);B[ne]=D[Ae]}else B[ne]=W}),B}createSegmentGroup(T,D,B,W){const ne=this.createSegments(T,D.segments,B,W);let xe={};return Ie(D.children,(Ae,Pt)=>{xe[Pt]=this.createSegmentGroup(T,Ae,B,W)}),new Fn(ne,xe)}createSegments(T,D,B,W){return D.map(ne=>ne.path.startsWith(":")?this.findPosParam(T,ne,W):this.findOrReturn(ne,B))}findPosParam(T,D,B){const W=B[D.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${T}'. Cannot find '${D.path}'.`);return W}findOrReturn(T,D){let B=0;for(const W of D){if(W.path===T.path)return D.splice(B),W;B++}return T}}function dt(A){const T={};for(const B of Object.keys(A.children)){const ne=dt(A.children[B]);(ne.segments.length>0||ne.hasChildren())&&(T[B]=ne)}return function ue(A){if(1===A.numberOfChildren&&A.children[Pn]){const T=A.children[Pn];return new Fn(A.segments.concat(T.segments),T.children)}return A}(new Fn(A.segments,T))}class bn{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class Nn{constructor(T,D){this.component=T,this.route=D}}function Nr(A,T,D){const B=A._root;return Qi(B,T?T._root:null,D,[B.value])}function Pi(A,T,D){const B=function no(A){if(!A)return null;for(let T=A.parent;T;T=T.parent){const D=T.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig}return null}(T);return(B?B.module.injector:D).get(A)}function Qi(A,T,D,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const ne=et(T);return A.children.forEach(xe=>{(function Xi(A,T,D,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const ne=A.value,xe=T?T.value:null,Ae=D?D.getContext(A.value.outlet):null;if(xe&&ne.routeConfig===xe.routeConfig){const Pt=function li(A,T,D){if("function"==typeof D)return D(A,T);switch(D){case"pathParamsChange":return!Sr(A.url,T.url);case"pathParamsOrQueryParamsChange":return!Sr(A.url,T.url)||!tn(A.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!We(A,T)||!tn(A.queryParams,T.queryParams);default:return!We(A,T)}}(xe,ne,ne.routeConfig.runGuardsAndResolvers);Pt?W.canActivateChecks.push(new bn(B)):(ne.data=xe.data,ne._resolvedData=xe._resolvedData),Qi(A,T,ne.component?Ae?Ae.children:null:D,B,W),Pt&&Ae&&Ae.outlet&&Ae.outlet.isActivated&&W.canDeactivateChecks.push(new Nn(Ae.outlet.component,xe))}else xe&&es(T,Ae,W),W.canActivateChecks.push(new bn(B)),Qi(A,null,ne.component?Ae?Ae.children:null:D,B,W)})(xe,ne[xe.value.outlet],D,B.concat([xe.value]),W),delete ne[xe.value.outlet]}),Ie(ne,(xe,Ae)=>es(xe,D.getContext(Ae),W)),W}function es(A,T,D){const B=et(A),W=A.value;Ie(B,(ne,xe)=>{es(ne,W.component?T?T.children.getContext(xe):null:T,D)}),D.canDeactivateChecks.push(new Nn(W.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,W))}class Sa{}function Aa(A){return new ge.y(T=>T.error(A))}class tl{constructor(T,D,B,W,ne,xe){this.rootComponentType=T,this.config=D,this.urlTree=B,this.url=W,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=xe}recognize(){const T=pr(this.urlTree.root,[],[],this.config.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,T,Pn);if(null===D)return null;const B=new Mn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Ge(B,D),ne=new $n(this.url,W);return this.inheritParamsAndData(ne._root),ne}inheritParamsAndData(T){const D=T.value,B=hn(D,this.paramsInheritanceStrategy);D.params=Object.freeze(B.params),D.data=Object.freeze(B.data),T.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(T,D,B){return 0===D.segments.length&&D.hasChildren()?this.processChildren(T,D):this.processSegment(T,D,D.segments,B)}processChildren(T,D){const B=[];for(const ne of Object.keys(D.children)){const xe=D.children[ne],Ae=zr(T,ne),Pt=this.processSegmentGroup(Ae,xe,ne);if(null===Pt)return null;B.push(...Pt)}const W=Lo(B);return function nl(A){A.sort((T,D)=>T.value.outlet===Pn?-1:D.value.outlet===Pn?1:T.value.outlet.localeCompare(D.value.outlet))}(W),W}processSegment(T,D,B,W){for(const ne of T){const xe=this.processSegmentAgainstRoute(ne,D,B,W);if(null!==xe)return xe}return _s(D,B,W)?[]:null}processSegmentAgainstRoute(T,D,B,W){if(T.redirectTo||!On(T,D,B,W))return null;let ne,xe=[],Ae=[];if("**"===T.path){const Ir=B.length>0?Rn(B).parameters:{};ne=new Mn(B,Ir,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jr(T),Qt(T),T.component,T,Ma(D),oa(D)+B.length,Mr(T))}else{const Ir=Xn(D,T,B);if(!Ir.matched)return null;xe=Ir.consumedSegments,Ae=Ir.remainingSegments,ne=new Mn(xe,Ir.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jr(T),Qt(T),T.component,T,Ma(D),oa(D)+xe.length,Mr(T))}const Pt=function Xo(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(T),{segmentGroup:fn,slicedSegments:kr}=pr(D,xe,Ae,Pt.filter(Ir=>void 0===Ir.redirectTo),this.relativeLinkResolution);if(0===kr.length&&fn.hasChildren()){const Ir=this.processChildren(Pt,fn);return null===Ir?null:[new Ge(ne,Ir)]}if(0===Pt.length&&0===kr.length)return[new Ge(ne,[])];const Yt=Qt(T)===W,jr=this.processSegment(Pt,fn,kr,Yt?Pn:W);return null===jr?null:[new Ge(ne,jr)]}}function xa(A){const T=A.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function Lo(A){const T=[],D=new Set;for(const B of A){if(!xa(B)){T.push(B);continue}const W=T.find(ne=>B.value.routeConfig===ne.value.routeConfig);void 0!==W?(W.children.push(...B.children),D.add(W)):T.push(B)}for(const B of D){const W=Lo(B.children);T.push(new Ge(B.value,W))}return T.filter(B=>!D.has(B))}function Ma(A){let T=A;for(;T._sourceSegment;)T=T._sourceSegment;return T}function oa(A){let T=A,D=T._segmentIndexShift?T._segmentIndexShift:0;for(;T._sourceSegment;)T=T._sourceSegment,D+=T._segmentIndexShift?T._segmentIndexShift:0;return D-1}function Jr(A){return A.data||{}}function Mr(A){return A.resolve||{}}function vu(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function Oa(A){return(0,ft.w)(T=>{const D=A(T);return D?(0,te.D)(D).pipe((0,Dt.U)(()=>T)):(0,Pe.of)(T)})}class Ni{}class ki extends class gr{shouldDetach(T){return!1}store(T,D){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,D){return T.routeConfig===D.routeConfig}}{}const Jo=new u.OlP("ROUTES");class Vo{constructor(T,D,B,W){this.injector=T,this.compiler=D,this.onLoadStartListener=B,this.onLoadEndListener=W}load(T,D){if(D._loader$)return D._loader$;this.onLoadStartListener&&this.onLoadStartListener(D);const W=this.loadModuleFactory(D.loadChildren).pipe((0,Dt.U)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(D);const xe=ne.create(T);return new Oi(_n(xe.injector.get(Jo,void 0,u.XFs.Self|u.XFs.Optional)).map(Ft),xe)}),rt(ne=>{throw D._loader$=void 0,ne}));return D._loader$=new _e.c(W,()=>new ot.xQ).pipe((0,fr.x)()),D._loader$}loadModuleFactory(T){return je(T()).pipe((0,qe.zg)(D=>D instanceof u.YKP?(0,Pe.of)(D):(0,te.D)(this.compiler.compileModuleAsync(D))))}}class Al{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,D){return T}}function xl(A){throw A}function Ao(A,T,D){return T.parse("/")}function Bo(A,T){return(0,Pe.of)(null)}const Ys={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},va={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class A{constructor(D,B,W,ne,xe,Ae,Pt){this.rootComponentType=D,this.urlSerializer=B,this.rootContexts=W,this.location=ne,this.config=Pt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.xQ,this.errorHandler=xl,this.malformedUriErrorHandler=Ao,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bo,afterPreactivation:Bo},this.urlHandlingStrategy=new Al,this.routeReuseStrategy=new ki,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=xe.get(u.h0i),this.console=xe.get(u.c2e);const Yt=xe.get(u.R0b);this.isNgZoneEnabled=Yt instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(Pt),this.currentUrlTree=function vt(){return new Rr(new Fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vo(xe,Ae,jr=>this.triggerEvent(new ei(jr)),jr=>this.triggerEvent(new kn(jr))),this.routerState=xt(this.currentUrlTree,this.rootComponentType),this.transitions=new ye.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var D;return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}setupNavigations(D){const B=this.events;return D.pipe((0,Be.h)(W=>0!==W.id),(0,Dt.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,ft.w)(W=>{let ne=!1,xe=!1;return(0,Pe.of)(W).pipe((0,rn.b)(Ae=>{this.currentNavigation={id:Ae.id,initialUrl:Ae.currentRawUrl,extractedUrl:Ae.extractedUrl,trigger:Ae.source,extras:Ae.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ft.w)(Ae=>{const Pt=this.browserUrlTree.toString(),fn=!this.navigated||Ae.extractedUrl.toString()!==Pt||Pt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||fn)&&this.urlHandlingStrategy.shouldProcessUrl(Ae.rawUrl))return ql(Ae.source)&&(this.browserUrlTree=Ae.extractedUrl),(0,Pe.of)(Ae).pipe((0,ft.w)(Yt=>{const jr=this.transitions.getValue();return B.next(new Ht(Yt.id,this.serializeUrl(Yt.extractedUrl),Yt.source,Yt.restoredState)),jr!==this.transitions.getValue()?de.E:Promise.resolve(Yt)}),function Zt(A,T,D,B){return(0,ft.w)(W=>function E(A,T,D,B,W){return new L(A,T,D,B,W).apply()}(A,T,D,W.extractedUrl,B).pipe((0,Dt.U)(ne=>Object.assign(Object.assign({},W),{urlAfterRedirects:ne}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rn.b)(Yt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Yt.urlAfterRedirects})}),function Wn(A,T,D,B,W){return(0,qe.zg)(ne=>function Sl(A,T,D,B,W="emptyOnly",ne="legacy"){try{const xe=new tl(A,T,D,B,W,ne).recognize();return null===xe?Aa(new Sa):(0,Pe.of)(xe)}catch(xe){return Aa(xe)}}(A,T,ne.urlAfterRedirects,D(ne.urlAfterRedirects),B,W).pipe((0,Dt.U)(xe=>Object.assign(Object.assign({},ne),{targetSnapshot:xe}))))}(this.rootComponentType,this.config,Yt=>this.serializeUrl(Yt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rn.b)(Yt=>{if("eager"===this.urlUpdateStrategy){if(!Yt.extras.skipLocationChange){const Ir=this.urlHandlingStrategy.merge(Yt.urlAfterRedirects,Yt.rawUrl);this.setBrowserUrl(Ir,Yt)}this.browserUrlTree=Yt.urlAfterRedirects}const jr=new cr(Yt.id,this.serializeUrl(Yt.extractedUrl),this.serializeUrl(Yt.urlAfterRedirects),Yt.targetSnapshot);B.next(jr)}));if(fn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:jr,extractedUrl:Ir,source:ar,restoredState:Es,extras:xo}=Ae,Ti=new Ht(jr,this.serializeUrl(Ir),ar,Es);B.next(Ti);const qn=xt(Ir,this.rootComponentType).snapshot;return(0,Pe.of)(Object.assign(Object.assign({},Ae),{targetSnapshot:qn,urlAfterRedirects:Ir,extras:Object.assign(Object.assign({},xo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ae.rawUrl,Ae.resolve(null),de.E}),Oa(Ae=>{const{targetSnapshot:Pt,id:fn,extractedUrl:kr,rawUrl:Yt,extras:{skipLocationChange:jr,replaceUrl:Ir}}=Ae;return this.hooks.beforePreactivation(Pt,{navigationId:fn,appliedUrlTree:kr,rawUrlTree:Yt,skipLocationChange:!!jr,replaceUrl:!!Ir})}),(0,rn.b)(Ae=>{const Pt=new Hr(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(Pt)}),(0,Dt.U)(Ae=>Object.assign(Object.assign({},Ae),{guards:Nr(Ae.targetSnapshot,Ae.currentSnapshot,this.rootContexts)})),function sa(A,T){return(0,qe.zg)(D=>{const{targetSnapshot:B,currentSnapshot:W,guards:{canActivateChecks:ne,canDeactivateChecks:xe}}=D;return 0===xe.length&&0===ne.length?(0,Pe.of)(Object.assign(Object.assign({},D),{guardsResult:!0})):function Zo(A,T,D,B){return(0,te.D)(A).pipe((0,qe.zg)(W=>function el(A,T,D,B,W){const ne=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,Pe.of)(!0);const xe=ne.map(Ae=>{const Pt=Pi(Ae,T,W);let fn;if(function Us(A){return A&&Pr(A.canDeactivate)}(Pt))fn=je(Pt.canDeactivate(A,T,D,B));else{if(!Pr(Pt))throw new Error("Invalid CanDeactivate guard");fn=je(Pt(A,T,D,B))}return fn.pipe((0,un.P)())});return(0,Pe.of)(xe).pipe(Ts())}(W.component,W.route,D,T,B)),(0,un.P)(W=>!0!==W,!0))}(xe,B,W,A).pipe((0,qe.zg)(Ae=>Ae&&function mi(A){return"boolean"==typeof A}(Ae)?function Ws(A,T,D,B){return(0,te.D)(T).pipe(pe(W=>(0,ht.z)(function Xa(A,T){return null!==A&&T&&T(new dn(A)),(0,Pe.of)(!0)}(W.route.parent,B),function Qo(A,T){return null!==A&&T&&T(new Gr(A)),(0,Pe.of)(!0)}(W.route,B),function Ja(A,T,D){const B=T[T.length-1],ne=T.slice(0,T.length-1).reverse().map(xe=>function yi(A){const T=A.routeConfig?A.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:A,guards:T}:null}(xe)).filter(xe=>null!==xe).map(xe=>Ue(()=>{const Ae=xe.guards.map(Pt=>{const fn=Pi(Pt,xe.node,D);let kr;if(function ys(A){return A&&Pr(A.canActivateChild)}(fn))kr=je(fn.canActivateChild(B,A));else{if(!Pr(fn))throw new Error("Invalid CanActivateChild guard");kr=je(fn(B,A))}return kr.pipe((0,un.P)())});return(0,Pe.of)(Ae).pipe(Ts())}));return(0,Pe.of)(ne).pipe(Ts())}(A,W.path,D),function Gi(A,T,D){const B=T.routeConfig?T.routeConfig.canActivate:null;if(!B||0===B.length)return(0,Pe.of)(!0);const W=B.map(ne=>Ue(()=>{const xe=Pi(ne,T,D);let Ae;if(function cs(A){return A&&Pr(A.canActivate)}(xe))Ae=je(xe.canActivate(T,A));else{if(!Pr(xe))throw new Error("Invalid CanActivate guard");Ae=je(xe(T,A))}return Ae.pipe((0,un.P)())}));return(0,Pe.of)(W).pipe(Ts())}(A,W.route,D))),(0,un.P)(W=>!0!==W,!0))}(B,ne,A,T):(0,Pe.of)(Ae)),(0,Dt.U)(Ae=>Object.assign(Object.assign({},D),{guardsResult:Ae})))})}(this.ngModule.injector,Ae=>this.triggerEvent(Ae)),(0,rn.b)(Ae=>{if(us(Ae.guardsResult)){const fn=ci(`Redirecting to "${this.serializeUrl(Ae.guardsResult)}"`);throw fn.url=Ae.guardsResult,fn}const Pt=new on(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot,!!Ae.guardsResult);this.triggerEvent(Pt)}),(0,Be.h)(Ae=>!!Ae.guardsResult||(this.restoreHistory(Ae),this.cancelNavigationTransition(Ae,""),!1)),Oa(Ae=>{if(Ae.guards.canActivateChecks.length)return(0,Pe.of)(Ae).pipe((0,rn.b)(Pt=>{const fn=new Zr(Pt.id,this.serializeUrl(Pt.extractedUrl),this.serializeUrl(Pt.urlAfterRedirects),Pt.targetSnapshot);this.triggerEvent(fn)}),(0,ft.w)(Pt=>{let fn=!1;return(0,Pe.of)(Pt).pipe(function qs(A,T){return(0,qe.zg)(D=>{const{targetSnapshot:B,guards:{canActivateChecks:W}}=D;if(!W.length)return(0,Pe.of)(D);let ne=0;return(0,te.D)(W).pipe(pe(xe=>function or(A,T,D,B){return function rl(A,T,D,B){const W=vu(A);if(0===W.length)return(0,Pe.of)({});const ne={};return(0,te.D)(W).pipe((0,qe.zg)(xe=>function Ra(A,T,D,B){const W=Pi(A,T,B);return je(W.resolve?W.resolve(T,D):W(T,D))}(A[xe],T,D,B).pipe((0,rn.b)(Ae=>{ne[xe]=Ae}))),Je(1),(0,qe.zg)(()=>vu(ne).length===W.length?(0,Pe.of)(ne):de.E))}(A._resolve,A,T,B).pipe((0,Dt.U)(ne=>(A._resolvedData=ne,A.data=Object.assign(Object.assign({},A.data),hn(A,D).resolve),null)))}(xe.route,B,A,T)),(0,rn.b)(()=>ne++),Je(1),(0,qe.zg)(xe=>ne===W.length?(0,Pe.of)(D):de.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rn.b)({next:()=>fn=!0,complete:()=>{fn||(this.restoreHistory(Pt),this.cancelNavigationTransition(Pt,"At least one route resolver didn't emit any value."))}}))}),(0,rn.b)(Pt=>{const fn=new zt(Pt.id,this.serializeUrl(Pt.extractedUrl),this.serializeUrl(Pt.urlAfterRedirects),Pt.targetSnapshot);this.triggerEvent(fn)}))}),Oa(Ae=>{const{targetSnapshot:Pt,id:fn,extractedUrl:kr,rawUrl:Yt,extras:{skipLocationChange:jr,replaceUrl:Ir}}=Ae;return this.hooks.afterPreactivation(Pt,{navigationId:fn,appliedUrlTree:kr,rawUrlTree:Yt,skipLocationChange:!!jr,replaceUrl:!!Ir})}),(0,Dt.U)(Ae=>{const Pt=function ct(A,T,D){const B=Ot(A,T._root,D?D._root:void 0);return new Et(B,T)}(this.routeReuseStrategy,Ae.targetSnapshot,Ae.currentRouterState);return Object.assign(Object.assign({},Ae),{targetRouterState:Pt})}),(0,rn.b)(Ae=>{this.currentUrlTree=Ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ae.urlAfterRedirects,Ae.rawUrl),this.routerState=Ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ae),this.browserUrlTree=Ae.urlAfterRedirects)}),((A,T,D)=>(0,Dt.U)(B=>(new Hi(T,B.targetRouterState,B.currentRouterState,D).activate(A),B)))(this.rootContexts,this.routeReuseStrategy,Ae=>this.triggerEvent(Ae)),(0,rn.b)({next(){ne=!0},complete(){ne=!0}}),function at(A){return T=>T.lift(new Oe(A))}(()=>{var Ae;ne||xe||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ae=this.currentNavigation)||void 0===Ae?void 0:Ae.id)===W.id&&(this.currentNavigation=null)}),rt(Ae=>{if(xe=!0,function ir(A){return A&&A[In]}(Ae)){const Pt=us(Ae.url);Pt||(this.navigated=!0,this.restoreHistory(W,!0));const fn=new qr(W.id,this.serializeUrl(W.extractedUrl),Ae.message);B.next(fn),Pt?setTimeout(()=>{const kr=this.urlHandlingStrategy.merge(Ae.url,this.rawUrlTree),Yt={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ql(W.source)};this.scheduleNavigation(kr,"imperative",null,Yt,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const Pt=new Jn(W.id,this.serializeUrl(W.extractedUrl),Ae);B.next(Pt);try{W.resolve(this.errorHandler(Ae))}catch(fn){W.reject(fn)}}return de.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),D))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const B="popstate"===D.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{var W;const ne={replaceUrl:!0},xe=(null===(W=D.state)||void 0===W?void 0:W.navigationId)?D.state:null;if(xe){const Pt=Object.assign({},xe);delete Pt.navigationId,delete Pt.\u0275routerPageId,0!==Object.keys(Pt).length&&(ne.state=Pt)}const Ae=this.parseUrl(D.url);this.scheduleNavigation(Ae,B,xe,ne)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){le(D),this.config=D.map(Ft),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,B={}){const{relativeTo:W,queryParams:ne,fragment:xe,queryParamsHandling:Ae,preserveFragment:Pt}=B,fn=W||this.routerState.root,kr=Pt?this.currentUrlTree.fragment:xe;let Yt=null;switch(Ae){case"merge":Yt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ne);break;case"preserve":Yt=this.currentUrlTree.queryParams;break;default:Yt=ne||null}return null!==Yt&&(Yt=this.removeEmptyProps(Yt)),function Ar(A,T,D,B,W){if(0===D.length)return ps(T.root,T.root,T.root,B,W);const ne=function Zi(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Bs(!0,0,A);let T=0,D=!1;const B=A.reduce((W,ne,xe)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const Ae={};return Ie(ne.outlets,(Pt,fn)=>{Ae[fn]="string"==typeof Pt?Pt.split("/"):Pt}),[...W,{outlets:Ae}]}if(ne.segmentPath)return[...W,ne.segmentPath]}return"string"!=typeof ne?[...W,ne]:0===xe?(ne.split("/").forEach((Ae,Pt)=>{0==Pt&&"."===Ae||(0==Pt&&""===Ae?D=!0:".."===Ae?T++:""!=Ae&&W.push(Ae))}),W):[...W,ne]},[]);return new Bs(D,T,B)}(D);if(ne.toRoot())return ps(T.root,T.root,new Fn([],{}),B,W);const xe=function ls(A,T,D){if(A.isAbsolute)return new wi(T.root,!0,0);if(-1===D.snapshot._lastPathIndex){const ne=D.snapshot._urlSegment;return new wi(ne,ne===T.root,0)}const B=xr(A.commands[0])?0:1;return function to(A,T,D){let B=A,W=T,ne=D;for(;ne>W;){if(ne-=W,B=B.parent,!B)throw new Error("Invalid number of '../'");W=B.segments.length}return new wi(B,!1,W-ne)}(D.snapshot._urlSegment,D.snapshot._lastPathIndex+B,A.numberOfDoubleDots)}(ne,T,A),Ae=xe.processChildren?ms(xe.segmentGroup,xe.index,ne.commands):Bi(xe.segmentGroup,xe.index,ne.commands);return ps(T.root,xe.segmentGroup,Ae,B,W)}(fn,this.currentUrlTree,D,Yt,null!=kr?kr:null)}navigateByUrl(D,B={skipLocationChange:!1}){const W=us(D)?D:this.parseUrl(D),ne=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(ne,"imperative",null,B)}navigate(D,B={skipLocationChange:!1}){return function Ml(A){for(let T=0;T<A.length;T++){const D=A[T];if(null==D)throw new Error(`The requested path contains ${D} segment at index ${T}`)}}(D),this.navigateByUrl(this.createUrlTree(D,B),B)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let B;try{B=this.urlSerializer.parse(D)}catch(W){B=this.malformedUriErrorHandler(W,this.urlSerializer,D)}return B}isActive(D,B){let W;if(W=!0===B?Object.assign({},Ys):!1===B?Object.assign({},va):B,us(D))return Cn(this.currentUrlTree,D,W);const ne=this.parseUrl(D);return Cn(this.currentUrlTree,ne,W)}removeEmptyProps(D){return Object.keys(D).reduce((B,W)=>{const ne=D[W];return null!=ne&&(B[W]=ne),B},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new rr(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,B,W,ne,xe){var Ae,Pt;if(this.disposed)return Promise.resolve(!1);let fn,kr,Yt;xe?(fn=xe.resolve,kr=xe.reject,Yt=xe.promise):Yt=new Promise((ar,Es)=>{fn=ar,kr=Es});const jr=++this.navigationId;let Ir;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),Ir=W&&W.\u0275routerPageId?W.\u0275routerPageId:ne.replaceUrl||ne.skipLocationChange?null!==(Ae=this.browserPageId)&&void 0!==Ae?Ae:0:(null!==(Pt=this.browserPageId)&&void 0!==Pt?Pt:0)+1):Ir=0,this.setTransition({id:jr,targetPageId:Ir,source:B,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:ne,resolve:fn,reject:kr,promise:Yt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Yt.catch(ar=>Promise.reject(ar))}setBrowserUrl(D,B){const W=this.urlSerializer.serialize(D),ne=Object.assign(Object.assign({},B.extras.state),this.generateNgRouterState(B.id,B.targetPageId));this.location.isCurrentPathEqualTo(W)||B.extras.replaceUrl?this.location.replaceState(W,"",ne):this.location.go(W,"",ne)}restoreHistory(D,B=!1){var W,ne;if("computed"===this.canceledNavigationResolution){const xe=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===xe?this.currentUrlTree===(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)&&0===xe&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(xe)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,B){const W=new qr(D.id,this.serializeUrl(D.extractedUrl),B);this.triggerEvent(W),D.resolve(!1)}generateNgRouterState(D,B){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:B}:{navigationId:D}}}return A.\u0275fac=function(D){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();function ql(A){return"imperative"!==A}let aa=(()=>{class A{constructor(D,B,W,ne,xe){this.router=D,this.route=B,this.tabIndexAttribute=W,this.renderer=ne,this.el=xe,this.commands=null,this.onChanges=new ot.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const B=this.renderer,W=this.el.nativeElement;null!==D?B.setAttribute(W,"tabindex",D):B.removeAttribute(W,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const D={skipLocationChange:ts(this.skipLocationChange),replaceUrl:ts(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ts(this.preserveFragment)})}}return A.\u0275fac=function(D){return new(D||A)(u.Y36(Ci),u.Y36(Mt),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},A.\u0275dir=u.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,B){1&D&&u.NdJ("click",function(){return B.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),A})();function ts(A){return""===A||!!A}class $o{}class wr{preload(T,D){return D().pipe(rt(()=>(0,Pe.of)(null)))}}class Eo{preload(T,D){return(0,Pe.of)(null)}}let Pa=(()=>{class A{constructor(D,B,W,ne){this.router=D,this.injector=W,this.preloadingStrategy=ne,this.loader=new Vo(W,B,Pt=>D.triggerEvent(new ei(Pt)),Pt=>D.triggerEvent(new kn(Pt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Be.h)(D=>D instanceof rr),pe(()=>this.preload())).subscribe(()=>{})}preload(){const D=this.injector.get(u.h0i);return this.processRoutes(D,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,B){const W=[];for(const ne of B)if(ne.loadChildren&&!ne.canLoad&&ne._loadedConfig){const xe=ne._loadedConfig;W.push(this.processRoutes(xe.module,xe.routes))}else ne.loadChildren&&!ne.canLoad?W.push(this.preloadConfig(D,ne)):ne.children&&W.push(this.processRoutes(D,ne.children));return(0,te.D)(W).pipe((0,Dr.J)(),(0,Dt.U)(ne=>{}))}preloadConfig(D,B){return this.preloadingStrategy.preload(B,()=>(B._loadedConfig?(0,Pe.of)(B._loadedConfig):this.loader.load(D.injector,B)).pipe((0,qe.zg)(ne=>(B._loadedConfig=ne,this.processRoutes(ne.module,ne.routes)))))}}return A.\u0275fac=function(D){return new(D||A)(u.LFG(Ci),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG($o))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})(),pi=(()=>{class A{constructor(D,B,W={}){this.router=D,this.viewportScroller=B,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Ht?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof rr&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Vn&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,B){this.router.triggerEvent(new Vn(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(D){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();const vs=new u.OlP("ROUTER_CONFIGURATION"),Ss=new u.OlP("ROUTER_FORROOT_GUARD"),la=[Zn.Ye,{provide:_i,useClass:$r},{provide:Ci,useFactory:function Wt(A,T,D,B,W,ne,xe={},Ae,Pt){const fn=new Ci(null,A,T,D,B,W,_n(ne));return Ae&&(fn.urlHandlingStrategy=Ae),Pt&&(fn.routeReuseStrategy=Pt),function Di(A,T){A.errorHandler&&(T.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(T.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(T.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(T.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(T.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(T.canceledNavigationResolution=A.canceledNavigationResolution)}(xe,fn),xe.enableTracing&&fn.events.subscribe(kr=>{var Yt,jr;null===(Yt=console.group)||void 0===Yt||Yt.call(console,`Router Event: ${kr.constructor.name}`),console.log(kr.toString()),console.log(kr),null===(jr=console.groupEnd)||void 0===jr||jr.call(console)}),fn},deps:[_i,Er,Zn.Ye,u.zs3,u.Sil,Jo,vs,[class ri{},new u.FiY],[Ni,new u.FiY]]},Er,{provide:Mt,useFactory:function ns(A){return A.routerState.root},deps:[Ci]},Pa,Eo,wr,{provide:vs,useValue:{enableTracing:!1}}];function ro(){return new u.PXZ("Router",Ci)}let As=(()=>{class A{constructor(D,B){}static forRoot(D,B){return{ngModule:A,providers:[la,ca(D),{provide:Ss,useFactory:ua,deps:[[Ci,new u.FiY,new u.tp0]]},{provide:vs,useValue:B||{}},{provide:Zn.S$,useFactory:Ho,deps:[Zn.lw,[new u.tBr(Zn.mr),new u.FiY],vs]},{provide:pi,useFactory:jo,deps:[Ci,Zn.EM,vs]},{provide:$o,useExisting:B&&B.preloadingStrategy?B.preloadingStrategy:Eo},{provide:u.PXZ,multi:!0,useFactory:ro},[bo,{provide:u.ip1,multi:!0,useFactory:An,deps:[bo]},{provide:Ol,useFactory:Kn,deps:[bo]},{provide:u.tb,multi:!0,useExisting:Ol}]]}}static forChild(D){return{ngModule:A,providers:[ca(D)]}}}return A.\u0275fac=function(D){return new(D||A)(u.LFG(Ss,8),u.LFG(Ci,8))},A.\u0275mod=u.oAB({type:A}),A.\u0275inj=u.cJS({}),A})();function jo(A,T,D){return D.scrollOffset&&T.setOffset(D.scrollOffset),new pi(A,T,D)}function Ho(A,T,D={}){return D.useHash?new Zn.Do(A,T):new Zn.b0(A,T)}function ua(A){return"guarded"}function ca(A){return[{provide:u.deG,multi:!0,useValue:A},{provide:Jo,multi:!0,useValue:A}]}let bo=(()=>{class A{constructor(D){this.injector=D,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ot.xQ}appInitializer(){return this.injector.get(Zn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let B=null;const W=new Promise(Ae=>B=Ae),ne=this.injector.get(Ci),xe=this.injector.get(vs);return"disabled"===xe.initialNavigation?(ne.setUpLocationChangeListener(),B(!0)):"enabled"===xe.initialNavigation||"enabledBlocking"===xe.initialNavigation?(ne.hooks.afterPreactivation=()=>this.initNavigation?(0,Pe.of)(null):(this.initNavigation=!0,B(!0),this.resultOfPreactivationDone),ne.initialNavigation()):B(!0),W})}bootstrapListener(D){const B=this.injector.get(vs),W=this.injector.get(Pa),ne=this.injector.get(pi),xe=this.injector.get(Ci),Ae=this.injector.get(u.z2F);D===Ae.components[0]&&(("enabledNonBlocking"===B.initialNavigation||void 0===B.initialNavigation)&&xe.initialNavigation(),W.setUpPreloading(),ne.init(),xe.resetRootComponentType(Ae.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(D){return new(D||A)(u.LFG(u.zs3))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();function An(A){return A.appInitializer.bind(A)}function Kn(A){return A.bootstrapListener.bind(A)}const Ol=new u.OlP("Router Initializer")},3942:(en,ut,H)=>{"use strict";H.d(ut,{Z:()=>Pe});var u=H(2090),se=H(4859),Z=H(9681),ke=H(1877);class Te{constructor(Ne,Fe){this._delegate=Ne,this.firebase=Fe,(0,Z._addComponent)(Ne,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=Ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this._delegate.automaticDataCollectionEnabled=Ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ne=>{this._delegate.checkDestroyed(),Ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Ne,Fe=Z._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const _e=this._delegate.container.getProvider(Ne);return!_e.isInitialized()&&"EXPLICIT"===(null===(ht=_e.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&_e.initialize(),_e.getImmediate({identifier:Fe})}_removeServiceInstance(Ne,Fe=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ne).clearInstance(Fe)}_addComponent(Ne){(0,Z._addComponent)(this._delegate,Ne)}_addOrOverwriteComponent(Ne){(0,Z._addOrOverwriteComponent)(this._delegate,Ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function me(){const ye=function be(ye){const Ne={},Fe={__esModule:!0,initializeApp:function ot(St,qe={}){const pe=Z.initializeApp(St,qe);if((0,u.r3)(Ne,pe.name))return Ne[pe.name];const Be=new ye(pe,Fe);return Ne[pe.name]=Be,Be},app:_e,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function rt(St){const qe=St.name,pe=qe.replace("-compat","");if(Z._registerComponent(St)&&"PUBLIC"===St.type){const Be=(ve=_e())=>{if("function"!=typeof ve[pe])throw we.create("invalid-app-argument",{appName:qe});return ve[pe]()};void 0!==St.serviceProps&&(0,u.ZB)(Be,St.serviceProps),Fe[pe]=Be,ye.prototype[pe]=function(...ve){return this._getService.bind(this,qe).apply(this,St.multipleInstances?ve:[])}}return"PUBLIC"===St.type?Fe[pe]:null},removeApp:function ht(St){delete Ne[St]},useAsService:function _t(St,qe){return"serverAuth"===qe?null:qe},modularAPIs:Z}};function _e(St){if(!(0,u.r3)(Ne,St=St||Z._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:St});return Ne[St]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Ve(){return Object.keys(Ne).map(St=>Ne[St])}}),_e.App=ye,Fe}(Te);return ye.INTERNAL=Object.assign(Object.assign({},ye.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function Ne(Fe){(0,u.ZB)(ye,Fe)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),ye}(),ge=new ke.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ye=self.firebase.SDK_VERSION;ye&&ye.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=ce;!function Ue(ye){(0,Z.registerVersion)("@firebase/app-compat","0.1.21",ye)}()},9681:(en,ut,H)=>{"use strict";H.r(ut),H.d(ut,{FirebaseError:()=>ke.ZR,SDK_VERSION:()=>rn,_DEFAULT_ENTRY_NAME:()=>pt,_addComponent:()=>at,_addOrOverwriteComponent:()=>Oe,_apps:()=>Qe,_clearComponents:()=>Kt,_components:()=>nt,_getProvider:()=>Dt,_registerComponent:()=>Xe,_removeServiceInstance:()=>ft,deleteApp:()=>Yn,getApp:()=>Dr,getApps:()=>Zn,initializeApp:()=>fr,onLog:()=>qr,registerVersion:()=>rr,setLogLevel:()=>Jn});var u=H(5861),se=H(4859),Z=H(1877),ke=H(2090);class Te{constructor(kt){this.container=kt}getPlatformInfoString(){return this.container.getProviders().map(tn=>{if(function ae(sn){const kt=sn.getComponent();return"VERSION"===(null==kt?void 0:kt.type)}(tn)){const yn=tn.getImmediate();return`${yn.library}/${yn.version}`}return null}).filter(tn=>tn).join(" ")}}const we="@firebase/app",me=new Z.Yd("@firebase/app"),pt="[DEFAULT]",st={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qe=new Map,nt=new Map;function at(sn,kt){try{sn.container.addComponent(kt)}catch(tn){me.debug(`Component ${kt.name} failed to register with FirebaseApp ${sn.name}`,tn)}}function Oe(sn,kt){sn.container.addOrOverwriteComponent(kt)}function Xe(sn){const kt=sn.name;if(nt.has(kt))return me.debug(`There were multiple attempts to register component ${kt}.`),!1;nt.set(kt,sn);for(const tn of Qe.values())at(tn,sn);return!0}function Dt(sn,kt){const tn=sn.container.getProvider("heartbeat").getImmediate({optional:!0});return tn&&tn.triggerHeartbeat(),sn.container.getProvider(kt)}function ft(sn,kt,tn=pt){Dt(sn,kt).clearInstance(tn)}function Kt(){nt.clear()}const xn=new ke.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class un{constructor(kt,tn,yn){this._isDeleted=!1,this._options=Object.assign({},kt),this._config=Object.assign({},tn),this._name=tn.name,this._automaticDataCollectionEnabled=tn.automaticDataCollectionEnabled,this._container=yn,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(kt){this.checkDestroyed(),this._automaticDataCollectionEnabled=kt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(kt){this._isDeleted=kt}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const rn="9.6.10";function fr(sn,kt={}){"object"!=typeof kt&&(kt={name:kt});const tn=Object.assign({name:pt,automaticDataCollectionEnabled:!1},kt),yn=tn.name;if("string"!=typeof yn||!yn)throw xn.create("bad-app-name",{appName:String(yn)});const _n=Qe.get(yn);if(_n){if((0,ke.vZ)(sn,_n.options)&&(0,ke.vZ)(tn,_n.config))return _n;throw xn.create("duplicate-app",{appName:yn})}const Rn=new se.H0(yn);for(const Ie of nt.values())Rn.addComponent(Ie);const Le=new un(sn,tn,Rn);return Qe.set(yn,Le),Le}function Dr(sn=pt){const kt=Qe.get(sn);if(!kt)throw xn.create("no-app",{appName:sn});return kt}function Zn(){return Array.from(Qe.values())}function Yn(sn){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,u.Z)(function*(sn){const kt=sn.name;Qe.has(kt)&&(Qe.delete(kt),yield Promise.all(sn.container.getProviders().map(tn=>tn.delete())),sn.isDeleted=!0)})).apply(this,arguments)}function rr(sn,kt,tn){var yn;let _n=null!==(yn=st[sn])&&void 0!==yn?yn:sn;tn&&(_n+=`-${tn}`);const Rn=_n.match(/\s|\//),Le=kt.match(/\s|\//);if(Rn||Le){const Ie=[`Unable to register library "${_n}" with version "${kt}":`];return Rn&&Ie.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),Rn&&Le&&Ie.push("and"),Le&&Ie.push(`version name "${kt}" contains illegal characters (whitespace or "/")`),void me.warn(Ie.join(" "))}Xe(new se.wA(`${_n}-version`,()=>({library:_n,version:kt}),"VERSION"))}function qr(sn,kt){if(null!==sn&&"function"!=typeof sn)throw xn.create("invalid-log-argument");(0,Z.Am)(sn,kt)}function Jn(sn){(0,Z.Ub)(sn)}const on="firebase-heartbeat-store";let Zr=null;function zt(){return Zr||(Zr=(0,ke.X3)("firebase-heartbeat-database",1,(sn,kt)=>{0===kt&&sn.createObjectStore(on)}).catch(sn=>{throw xn.create("storage-open",{originalErrorMessage:sn.message})})),Zr}function kn(){return(kn=(0,u.Z)(function*(sn){try{return(yield zt()).transaction(on).objectStore(on).get(Gr(sn))}catch(kt){throw xn.create("storage-get",{originalErrorMessage:kt.message})}})).apply(this,arguments)}function dn(sn,kt){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(sn,kt){try{const yn=(yield zt()).transaction(on,"readwrite");return yield yn.objectStore(on).put(kt,Gr(sn)),yn.complete}catch(tn){throw xn.create("storage-set",{originalErrorMessage:tn.message})}})).apply(this,arguments)}function Gr(sn){return`${sn.name}!${sn.options.appId}`}class Pn{constructor(kt){this.container=kt,this._heartbeatsCache=null;const tn=this.container.getProvider("app").getImmediate();this._storage=new In(tn),this._heartbeatsCachePromise=this._storage.read().then(yn=>(this._heartbeatsCache=yn,yn))}triggerHeartbeat(){var kt=this;return(0,u.Z)(function*(){const yn=kt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=si();if(null===kt._heartbeatsCache&&(kt._heartbeatsCache=yield kt._heartbeatsCachePromise),kt._heartbeatsCache.lastSentHeartbeatDate!==_n&&!kt._heartbeatsCache.heartbeats.some(Rn=>Rn.date===_n))return kt._heartbeatsCache.heartbeats.push({date:_n,agent:yn}),kt._heartbeatsCache.heartbeats=kt._heartbeatsCache.heartbeats.filter(Rn=>{const Le=new Date(Rn.date).valueOf();return Date.now()-Le<=2592e6}),kt._storage.overwrite(kt._heartbeatsCache)})()}getHeartbeatsHeader(){var kt=this;return(0,u.Z)(function*(){if(null===kt._heartbeatsCache&&(yield kt._heartbeatsCachePromise),null===kt._heartbeatsCache||0===kt._heartbeatsCache.heartbeats.length)return"";const tn=si(),{heartbeatsToSend:yn,unsentEntries:_n}=function Lr(sn,kt=1024){const tn=[];let yn=sn.slice();for(const _n of sn){const Rn=tn.find(Le=>Le.agent===_n.agent);if(Rn){if(Rn.dates.push(_n.date),ci(tn)>kt){Rn.dates.pop();break}}else if(tn.push({agent:_n.agent,dates:[_n.date]}),ci(tn)>kt){tn.pop();break}yn=yn.slice(1)}return{heartbeatsToSend:tn,unsentEntries:yn}}(kt._heartbeatsCache.heartbeats),Rn=(0,ke.L)(JSON.stringify({version:2,heartbeats:yn}));return kt._heartbeatsCache.lastSentHeartbeatDate=tn,_n.length>0?(kt._heartbeatsCache.heartbeats=_n,yield kt._storage.overwrite(kt._heartbeatsCache)):(kt._heartbeatsCache.heartbeats=[],kt._storage.overwrite(kt._heartbeatsCache)),Rn})()}}function si(){return(new Date).toISOString().substring(0,10)}class In{constructor(kt){this.app=kt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ke.hl)()&&(0,ke.eu)().then(()=>!0).catch(()=>!1)})()}read(){var kt=this;return(0,u.Z)(function*(){return(yield kt._canUseIndexedDBPromise)&&(yield function ei(sn){return kn.apply(this,arguments)}(kt.app))||{heartbeats:[]}})()}overwrite(kt){var tn=this;return(0,u.Z)(function*(){var yn;if(yield tn._canUseIndexedDBPromise){const Rn=yield tn.read();return dn(tn.app,{lastSentHeartbeatDate:null!==(yn=kt.lastSentHeartbeatDate)&&void 0!==yn?yn:Rn.lastSentHeartbeatDate,heartbeats:kt.heartbeats})}})()}add(kt){var tn=this;return(0,u.Z)(function*(){var yn;if(yield tn._canUseIndexedDBPromise){const Rn=yield tn.read();return dn(tn.app,{lastSentHeartbeatDate:null!==(yn=kt.lastSentHeartbeatDate)&&void 0!==yn?yn:Rn.lastSentHeartbeatDate,heartbeats:[...Rn.heartbeats,...kt.heartbeats]})}})()}}function ci(sn){return(0,ke.L)(JSON.stringify({version:2,heartbeats:sn})).length}!function ir(sn){Xe(new se.wA("platform-logger",kt=>new Te(kt),"PRIVATE")),Xe(new se.wA("heartbeat",kt=>new Pn(kt),"PRIVATE")),rr(we,"0.7.20",sn),rr(we,"0.7.20","esm2017"),rr("fire-js","")}("")},4859:(en,ut,H)=>{"use strict";H.d(ut,{wA:()=>Z,H0:()=>be,zt:()=>Te});var u=H(5861),se=H(2090);class Z{constructor(ce,ge,te){this.name=ce,this.instanceFactory=ge,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const ke="[DEFAULT]";class Te{constructor(ce,ge){this.name=ce,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const ge=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(ge)){const te=new se.BH;if(this.instancesDeferred.set(ge,te),this.isInitialized(ge)||this.shouldAutoInitialize())try{const de=this.getOrInitializeService({instanceIdentifier:ge});de&&te.resolve(de)}catch(de){}}return this.instancesDeferred.get(ge).promise}getImmediate(ce){var ge;const te=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),de=null!==(ge=null==ce?void 0:ce.optional)&&void 0!==ge&&ge;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(de)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ue){if(de)return null;throw Ue}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function we(me){return"EAGER"===me.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:ke})}catch(ge){}for(const[ge,te]of this.instancesDeferred.entries()){const de=this.normalizeInstanceIdentifier(ge);try{const Ue=this.getOrInitializeService({instanceIdentifier:de});te.resolve(Ue)}catch(Ue){}}}}clearInstance(ce=ke){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,u.Z)(function*(){const ge=Array.from(ce.instances.values());yield Promise.all([...ge.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...ge.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=ke){return this.instances.has(ce)}getOptions(ce=ke){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:ge={}}=ce,te=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const de=this.getOrInitializeService({instanceIdentifier:te,options:ge});for(const[Ue,Pe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ue)&&Pe.resolve(de);return de}onInit(ce,ge){var te;const de=this.normalizeInstanceIdentifier(ge),Ue=null!==(te=this.onInitCallbacks.get(de))&&void 0!==te?te:new Set;Ue.add(ce),this.onInitCallbacks.set(de,Ue);const Pe=this.instances.get(de);return Pe&&ce(Pe,de),()=>{Ue.delete(ce)}}invokeOnInitCallbacks(ce,ge){const te=this.onInitCallbacks.get(ge);if(te)for(const de of te)try{de(ce,ge)}catch(Ue){}}getOrInitializeService({instanceIdentifier:ce,options:ge={}}){let te=this.instances.get(ce);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(me=ce,me===ke?void 0:me),options:ge}),this.instances.set(ce,te),this.instancesOptions.set(ce,ge),this.invokeOnInitCallbacks(te,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,te)}catch(de){}var me;return te||null}normalizeInstanceIdentifier(ce=ke){return this.component?this.component.multipleInstances?ce:ke:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const ge=this.getProvider(ce.name);if(ge.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);ge.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const ge=new Te(ce,this);return this.providers.set(ce,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(en,ut,H)=>{"use strict";H.d(ut,{in:()=>se,Yd:()=>we,Ub:()=>be,Am:()=>me});const u=[];var se=(()=>{return(ce=se||(se={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",se;var ce})();const Z={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ke=se.INFO,Te={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ae=(ce,ge,...te)=>{if(ge<ce.logLevel)return;const de=(new Date).toISOString(),Ue=Te[ge];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[Ue](`[${de}]  ${ce.name}:`,...te)};class we{constructor(ge){this.name=ge,this._logLevel=ke,this._logHandler=ae,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in se))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?Z[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...ge),this._logHandler(this,se.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...ge),this._logHandler(this,se.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,se.INFO,...ge),this._logHandler(this,se.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,se.WARN,...ge),this._logHandler(this,se.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...ge),this._logHandler(this,se.ERROR,...ge)}}function be(ce){u.forEach(ge=>{ge.setLogLevel(ce)})}function me(ce,ge){for(const te of u){let de=null;ge&&ge.level&&(de=Z[ge.level]),te.userLogHandler=null===ce?null:(Ue,Pe,...ye)=>{const Ne=ye.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch(ht){return null}}).filter(Fe=>Fe).join(" ");Pe>=(null!=de?de:Ue.logLevel)&&ce({level:se[Pe].toLowerCase(),message:Ne,args:ye,type:Ue.name})}}}},5861:(en,ut,H)=>{"use strict";function u(Z,ke,Te,ae,we,be,me){try{var ce=Z[be](me),ge=ce.value}catch(te){return void Te(te)}ce.done?ke(ge):Promise.resolve(ge).then(ae,we)}function se(Z){return function(){var ke=this,Te=arguments;return new Promise(function(ae,we){var be=Z.apply(ke,Te);function me(ge){u(be,ae,we,me,ce,"next",ge)}function ce(ge){u(be,ae,we,me,ce,"throw",ge)}me(void 0)})}}H.d(ut,{Z:()=>se})}},en=>{en(en.s=2646)}]);